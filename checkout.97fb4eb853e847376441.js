!function(){var e,t,n,i,s,a={3393:function(e,t,n){"use strict";var i=n(9658);e.exports={compressPayload:function(e){var t={};return Object.keys(i).forEach((function(n){var s=n,a=i[n];t[s]=e[a]})),t},expandPayload:function(e){var t={},n=["up"],s=Object.keys(e).filter((function(e){return-1===Object.keys(i).indexOf(e)&&!n.includes(e)}));return s.length&&(t.UNMATCHED={},s.forEach((function(n){t.UNMATCHED[n]=e[n]})),t.invalid=!0),Object.keys(i).forEach((function(s){if(!n.includes(s)){var a=s,r=i[s];e[a]&&(t[r]=e[a])}})),t}}},6994:function(e,t,n){"use strict";var i,s=n(4041);function a(){return a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},a.apply(this,arguments)}var r=function(e,t){return s.createElement("svg",a({xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:1.4,strokeLinecap:"round",strokeLinejoin:"round",ref:t},e),i||(i=s.createElement("polyline",{points:"6 9 12 15 18 9"})))},o=(0,s.forwardRef)(r),c=(0,s.memo)(o);t.A=c},1986:function(e,t,n){"use strict";var i,s,a,r,o=n(4041);function c(){return c=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},c.apply(this,arguments)}var l=function(e,t){return o.createElement("svg",c({width:24,height:24,viewBox:"0 0 24 24",fill:"none",strokeWidth:1.4,stroke:"currentColor",xmlns:"http://www.w3.org/2000/svg",ref:t},e),i||(i=o.createElement("path",{d:"M12 22C17.5228 22 22 17.5228 22 12C22 6.47715 17.5228 2 12 2C6.47715 2 2 6.47715 2 12C2 17.5228 6.47715 22 12 22Z",strokeLinecap:"round",strokeLinejoin:"round"})),s||(s=o.createElement("path",{d:"M9.08984 9.00008C9.32495 8.33175 9.789 7.76819 10.3998 7.40921C11.0106 7.05024 11.7287 6.91902 12.427 7.03879C13.1253 7.15857 13.7587 7.52161 14.2149 8.06361C14.6712 8.60561 14.9209 9.2916 14.9198 10.0001C14.9198 12.0001 11.9198 13.0001 11.9198 13.0001",strokeLinecap:"round",strokeLinejoin:"round"})),a||(a=o.createElement("circle",{cx:12,cy:16.5,r:.5,strokeLinecap:"round",strokeLinejoin:"round"})),r||(r=o.createElement("path",{d:"M11.5049 16L12.5049 17"})))},u=(0,o.forwardRef)(l),d=(0,o.memo)(u);t.A=d},534:function(e,t,n){var i={"./card-amex.png":3421,"./card-diners.png":2707,"./card-discover.png":1229,"./card-jcb.png":543,"./card-mastercard.png":9848,"./card-unionpay.png":8057,"./card-unknown-error.png":2217,"./card-unknown.png":8044,"./card-visa.png":9503};function s(e){var t=a(e);return n(t)}function a(e){if(!n.o(i,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return i[e]}s.keys=function(){return Object.keys(i)},s.resolve=a,e.exports=s,s.id=534},114:function(e,t,n){const i=n(7012),s=n(8913),a=n(4025),r=n(2384),o=n(6631),c=n(4776),l=n(7804),u=n(8524),d=n(9576),h=n(9392),m=n(4246),p=n(7958),g=n(8825),y=n(5718),f=n(5199),S=n(2876);e.exports={creditCard:h,applePay:g,googlePay:p,clickToPay:m,ach:a,usBankAccount:r,plaid:o,paypal:u,venmo:d,auBecsDebit:c,ukBacs:l,acss:s,sepa:i,ideal:S,crypto:y,stock:f}},148:function(e,t,n){"use strict";var i;function s(e,t,n){const s=n-1;switch(e.code){case i.DOWN:return e.preventDefault(),null===t||t+1>s?{currentOptionIdx:0}:{currentOptionIdx:t+1};case i.UP:return e.preventDefault(),null===t||t-1<0?{currentOptionIdx:s}:{currentOptionIdx:t-1};case i.ENTER:return e.preventDefault(),{currentOptionIdx:t,needSelectOption:!0};case i.ESC:return{closeDropdown:!0,currentOptionIdx:null};default:return{currentOptionIdx:null}}}n.d(t,{J:function(){return i},t:function(){return s}}),function(e){e.DOWN="ArrowDown",e.UP="ArrowUp",e.ENTER="Enter",e.ESC="Escape",e.SPACE="Space"}(i||(i={}))},2762:function(e,t,n){"use strict";n.d(t,{s:function(){return a}});var i=n(1085),s=n(4357);const a=e=>{const{htmlFor:t,label:n,labelOptional:a,labelSrOnly:r,labelFloating:o,formGroupClass:c,formLabelClass:l,formControlValue:u,children:d,dataQa:h}=e;return(0,i.jsxs)("div",{className:(0,s.A)("form-group",c),children:[d,(0,i.jsxs)("label",{htmlFor:t,className:(0,s.A)("form-label",{"sr-only":r,"is-floating":o,"has-value":u},l),"data-qa":h,children:[n,a&&(0,i.jsxs)("span",{className:"font-weight-400 text-gray-60",children:[" (",a,")"]})]})]})}},9196:function(e,t,n){"use strict";n.d(t,{t:function(){return d}});var i=n(5608),s=n(1085),a=n(4357),r=n(4041),o=n(2762),c=n(7314),l=n(8489),u=n(6780);const d=e=>{var{label:t,labelSrOnly:n,labelFloating:d,value:h,autoFocus:m,dataQa:p,dataTestId:g,children:y,className:f,placeholder:S,formGroupClass:A,formLabelClass:E,labelOptional:C,id:v,error:N,customPrefix:b,dataTrackingElementName:P,type:D="text",autoCorrect:_="off",spellCheck:T="false",autoFocusMode:O=l.Q.DESKTOP,setRef:x,autoScroll:k,forceShowPlaceholder:I}=e,w=(0,i.Tt)(e,["label","labelSrOnly","labelFloating","value","autoFocus","dataQa","dataTestId","children","className","placeholder","formGroupClass","formLabelClass","labelOptional","id","error","customPrefix","dataTrackingElementName","type","autoCorrect","spellCheck","autoFocusMode","setRef","autoScroll","forceShowPlaceholder"]);const R=(0,r.useRef)(null);(0,c.f)({ref:R,autoFocus:m,mode:O}),(0,u.Q)(R,{shouldScroll:k,shouldFocus:!0}),(0,r.useImperativeHandle)(x,(()=>R.current),[]);const M=((e,t,n)=>n?e:t?void 0:e)(S,d,I);return(0,s.jsxs)(o.s,{htmlFor:v,label:t,labelSrOnly:n,labelFloating:d,labelOptional:C,formGroupClass:A,formLabelClass:(0,a.A)(E,{"has-error":N}),formControlValue:h,dataQa:p+"-label",children:[b,(0,s.jsx)("input",Object.assign({id:v,className:(0,a.A)("form-control",f,{"has-label-floating":d,"has-error":N}),"aria-invalid":N,ref:R,type:D,placeholder:M,value:h,autoCorrect:_,spellCheck:T,"data-qa":p,"data-testid":g,"data-tracking-element-name":P},w)),y]})}},7042:function(e,t,n){"use strict";n.d(t,{b:function(){return f},q:function(){return S}});var i=n(1085),s=n(8071),a=n(2939),r=n(2725),o=n(1362),c=n(1138),l=n(5940),u=n(4780),d=n(4357),h=n(4041),m=n(3144),p=n(503),g=n(9970);const y={top:"bottom",right:"left",bottom:"top",left:"right"},f=(0,h.forwardRef)(((e,t)=>{var n,f,S,A,E,C;const{triggerRef:v,mainAxis:N,crossAxis:b,arrowX:P,arrowY:D,fallbackPlacements:_,fallbackStrategy:T,flipAlignment:O,alwaysMount:x,role:k,dataQa:I,dataTestId:w,disableAnimation:R,hasFlash:M,flashAnimated:L}=e,U=(0,h.useContext)(g.G),F=(0,l.k)(),[j,B]=(0,h.useState)(!0),[H,q]=(0,h.useState)(!1),G=!!U&&e.show,V=(0,c.n)(),Y=(0,h.useRef)(null),K=(0,o.wf)(),{x:z,y:$,reference:W,floating:X,update:Q,placement:Z,strategy:J,refs:ee,middlewareData:te}=(0,s.we)({whileElementsMounted:a.ll,placement:e.placement||"top",strategy:e.strategy,middleware:[(0,r.cY)(null!==(n=e.offset)&&void 0!==n?n:12),(0,r.UU)({mainAxis:N,crossAxis:b,fallbackPlacements:_,fallbackStrategy:T,flipAlignment:O}),(0,s.UE)({element:Y,padding:null!==(f=e.arrowPadding)&&void 0!==f?f:10})]});(0,h.useEffect)((()=>{q(G&&null!==$&&null!==z)}),[G,$,z]);const ne=(null===(S=te.arrow)||void 0===S?void 0:S.x)?null!=P?P:null===(A=te.arrow)||void 0===A?void 0:A.x:"",ie=(null===(E=te.arrow)||void 0===E?void 0:E.y)?null!=D?D:null===(C=te.arrow)||void 0===C?void 0:C.y:"",se=(0,h.useCallback)((()=>{B(!1)}),[]),ae=(0,h.useCallback)((()=>{B(!0)}),[]);(0,h.useLayoutEffect)((()=>{G&&ee.reference.current!==v.current&&W(v.current)}),[V,W,v,ee.reference,G]);const re=function(e){return y[e.split("-")[0]]}(Z),oe=Z.split("-")[0],ce=(0,h.useCallback)((e=>{X(e),t&&("function"==typeof t?t(e):t.current=e)}),[X,t]),le=(0,h.useCallback)((e=>{Y.current=e,Q()}),[Q]),ue=(0,u.G)(ee.floating),de=(0,i.jsx)(p.A,{in:G&&H,addEndListener:ue,onEnter:se,onExited:ae,classNames:R?"":`rtg-tooltip-to-${oe}`,nodeRef:ee.floating,timeout:R?0:void 0,children:t=>(0,i.jsxs)("div",{ref:ce,className:(0,d.A)(F("ui-tooltip"),`ui-tooltip-${oe}`,e.customClass),style:{position:J,top:null!=$?$:"",left:null!=z?z:"",maxWidth:e.maxWidth||"200px",minWidth:e.minWidth,visibility:G&&H?void 0:"exited"===t?"hidden":void 0},role:null!=k?k:"status","aria-live":G&&!k?"polite":void 0,onMouseEnter:e.onMouseEnter,onMouseLeave:e.onMouseLeave,children:[(0,i.jsxs)("div",{className:(0,d.A)(F("ui-tooltip-body"),{"ui-tooltip-body-scrollable":Boolean(e.maxHeight)}),style:{maxHeight:e.maxHeight},"data-qa":I,"data-testid":w,children:[e.children,M&&(0,i.jsx)("div",{className:(0,d.A)("ui-tooltip-flash",{"is-animated":L})})]}),!e.withoutArrow&&(0,i.jsx)("div",{ref:le,style:{top:ie,left:ne,[re]:"-6px"},className:"ui-tooltip-arrow"})]})}),he=G||!j||x?de:null;return K.current&&!e.withoutPortal?(0,m.createPortal)(he,K.current):he}));f.displayName="_UIManualTooltip";const S=(0,h.memo)(f);S.whyDidYouRender=!1},6448:function(e,t,n){"use strict";n.d(t,{S:function(){return d}});var i=n(1085),s=n(7042),a=n(9145),r=n(3225),o=n(2557),c=n(4379),l=n(4041);const u=e=>{const{trigger:t,triggerRef:n,hideOnTooltipClick:u,offset:d,arrowPadding:h,mainAxis:m,crossAxis:p,fallbackPlacements:g,fallbackStrategy:y,flipAlignment:f,disableAnimation:S,disableHideDelay:A,dataQa:E}=e,C=(0,l.useRef)(null),{show:v,handleTooltipMouseEnter:N,handleTooltipMouseLeave:b}=function(e){const{trigger:t=[a.b.HOVER,a.b.FOCUS],triggerRef:n,tooltipRef:i,hideOnTooltipClick:s,hoverShowDelay:u=0,hoverHideDelay:d=200}=e,h=(0,r.M)().document,[m,p]=(0,l.useState)(!1),[g,y]=(0,l.useState)(!1),[f,S]=(0,l.useState)(!1),A=t.includes(a.b.CLICK),E=t.includes(a.b.FOCUS),C=t.includes(a.b.HOVER),v=A&&m||C&&g||E&&f;if(A&&C)throw new Error('trigger must not have values "focus" and "click" at the same time');(0,l.useEffect)((()=>{const e=n.current;if(!A||!e)return;const t=t=>{const n=t.target;if(!n)return;const a=!!(0,o.Ru)(n,(t=>t===e)),r=!!(0,o.Ru)(n,(e=>e===i.current));p(a?e=>!e:!!r&&!s)},a=E?"mousedown":"click";return h.addEventListener(a,t),()=>{h.removeEventListener(a,t)}}),[A,E,n,i,s,h]),(0,l.useEffect)((()=>{const e=n.current;if(!E||!e)return;const t=()=>S(!0),i=()=>S(!1);return e.addEventListener("focus",t),e.addEventListener("blur",i),()=>{e.removeEventListener("focus",t),e.removeEventListener("blur",i)}}),[E,n,h]);const N=(0,c.D)((e=>y(e))),b=(0,l.useCallback)((()=>N.set([!0],u)),[N,u]),P=(0,l.useCallback)((()=>N.set([!1],d)),[N,d]);return(0,l.useEffect)((()=>{const e=n.current;if(!C||!e)return;const t=()=>N.set([!0],u),i=()=>N.set([!1],d);return e.addEventListener("mouseenter",t),e.addEventListener("mouseleave",i),()=>{e.removeEventListener("mouseenter",t),e.removeEventListener("mouseleave",i)}}),[C,N,n,u,d]),{show:v,handleTooltipMouseEnter:b,handleTooltipMouseLeave:P}}({trigger:t,triggerRef:n,tooltipRef:C,hideOnTooltipClick:u,hoverHideDelay:A?0:200});return(0,i.jsx)(s.b,Object.assign({ref:C,show:v,offset:d,arrowPadding:h,mainAxis:m,crossAxis:p,fallbackPlacements:g,fallbackStrategy:y,flipAlignment:f,disableAnimation:S,onMouseEnter:N,onMouseLeave:b},e,{dataQa:E}))},d=(0,l.memo)(u);d.whyDidYouRender=!1},9145:function(e,t,n){"use strict";var i;n.d(t,{b:function(){return i}}),function(e){e.CLICK="click",e.HOVER="hover",e.FOCUS="focus"}(i||(i={}))},9970:function(e,t,n){"use strict";n.d(t,{G:function(){return i}});const i=(0,n(4041).createContext)(null)},2766:function(e,t,n){"use strict";n.d(t,{J:function(){return d}});var i=n(1085),s=n(4041),a=n(6780);const r=e=>(0,s.useContext)(e);var o=n(5608),c=n(3225);const l=e=>{let{scrollIntoView:t,focus:n}=e;const i=(0,c.M)(),a=(0,s.useRef)(null),r=(0,s.useCallback)((()=>(0,o.sH)(void 0,void 0,void 0,(function*(){yield new Promise((e=>{i.addEventListener("scrollend",e,{once:!0}),setTimeout(e,350)})),n()}))),[i,n]);return(0,s.useEffect)((()=>{a.current={scrollIntoView:t,focus:r}}),[r,t]),a},u=e=>t=>{let{state:n,children:r}=t;const o=(0,s.useRef)(new Set),[c,l]=(0,s.useState)(null),u=(0,s.useRef)(!1),[d,h]=(0,s.useState)(),m=(0,s.useCallback)((()=>{u.current=!0,l(null),h({})}),[]);return(0,s.useEffect)((()=>{if(u.current){for(const e of o.current)if(e.ruleFunction(n)){l(e.ref);break}u.current=!1}}),[n,d]),(0,a.Q)(c,{shouldScroll:!0,shouldFocus:!0}),(0,i.jsx)(e.Provider,{value:{fields:o.current,setTriggered:m},children:r})},d=()=>{const e=(0,s.createContext)({setTriggered:()=>{},fields:new Set});return{useAddFieldToScroll:(t,n)=>((e,t,n)=>{const{fields:i}=r(e);(0,s.useEffect)((()=>{const e={ref:t,ruleFunction:n};return i.add(e),()=>{i.delete(e)}}),[i,t,n])})(e,t,n),useScrollToFieldsTrigger:()=>(e=>{const{setTriggered:t}=r(e);return t})(e),useFakeStripeElement:l,ScrollToFieldsProvider:u(e)}}},8227:function(e,t,n){"use strict";n.d(t,{G:function(){return s},n:function(){return a}});var i=n(4041);const s=(0,i.createContext)(null);function a(){const e=(0,i.useContext)(s);if(!e)throw new Error("CheckoutConfiguration data is not provided");return e}},3225:function(e,t,n){"use strict";n.d(t,{M:function(){return a},U:function(){return s}});var i=n(4041);const s=(0,i.createContext)(null);function a(){const e=(0,i.useContext)(s);if(!e)throw new Error("iframe window is not provided");return e}},8583:function(e,t,n){"use strict";n.d(t,{P:function(){return s}});var i=n(8227);function s(){return(0,i.n)().infrastructureParams.isMobile}},1362:function(e,t,n){"use strict";n.d(t,{Qq:function(){return r},Tn:function(){return s},wf:function(){return a}});var i=n(4041);const s=(0,i.createContext)(null);function a(){const e=(0,i.useContext)(s);if(!e)throw new Error("Portal ref was not provided");return e}const r=(0,i.createContext)(null)},1138:function(e,t,n){"use strict";n.d(t,{n:function(){return a},z:function(){return s}});var i=n(4041);const s=(0,i.createContext)(null);function a(){const e=(0,i.useContext)(s);if(!e)throw new Error("SentryService is not provided");return e}},1885:function(e,t,n){"use strict";n.d(t,{k:function(){return a}});var i=n(9679),s=n(7627);function a(){const e=(0,i.C)(),t=(0,s.Q)();return e&&!1!==t}},9679:function(e,t,n){"use strict";n.d(t,{C:function(){return a},m:function(){return s}});var i=n(4041);const s=(0,i.createContext)(!1);function a(){return(0,i.useContext)(s)}},7627:function(e,t,n){"use strict";n.d(t,{C:function(){return s},Q:function(){return a}});var i=n(4041);const s=(0,i.createContext)(null);function a(){return(0,i.useContext)(s)}},4367:function(e,t,n){"use strict";n.d(t,{j:function(){return r}});var i,s,a=n(8227);function r(){return(0,a.n)().infrastructureParams.OS===i.IOS}!function(e){e.IOS="iOS",e.ANDROID="Android"}(i||(i={})),function(e){e.MOBILE_SAFARI="Mobile Safari"}(s||(s={}))},5940:function(e,t,n){"use strict";n.d(t,{k:function(){return a}});var i=n(8583),s=n(4041);function a(){const e=(0,i.P)(),t=(0,s.useCallback)((t=>`${t} ${t}-${e?"mobile":"desktop"}`),[e]);return(0,s.useCallback)((e=>e.split(" ").map(t).join(" ")),[t])}},8489:function(e,t,n){"use strict";var i;n.d(t,{Q:function(){return i}}),function(e){e.DESKTOP="desktop",e.MOBILE="mobile",e.ALL="all"}(i||(i={}))},7314:function(e,t,n){"use strict";n.d(t,{f:function(){return u}});var i=n(4041),s=n(1885),a=n(6172),r=n(5102),o=n(8489),c=n(8583),l=n(4367);const u=e=>{const{ref:t,autoFocus:n,mode:u,preventScroll:d=!1}=e,h=(0,s.k)(),m=(0,c.P)(),p=(0,l.j)(),g=(0,a.$)(),y=(0,r.a)();(0,i.useEffect)((()=>{if(!g&&n&&h&&y.current&&((e,t,n)=>e===o.Q.DESKTOP?!t:e!==o.Q.MOBILE||t&&!n)(u,m,p)){if(!t.current)throw new Error("ref is not provided");(()=>{const e=()=>{var e;null===(e=t.current)||void 0===e||e.focus({preventScroll:d})};"function"==typeof queueMicrotask?queueMicrotask(e):Promise.resolve().then(e)})()}}),[t,n,h,m,p,g,y,u,d])}},4780:function(e,t,n){"use strict";n.d(t,{G:function(){return a},v:function(){return s}});var i=n(4041);function s(e,t){if(!e.current)throw new Error("Ref was not passed");e.current.addEventListener("transitionend",(function n(){e.current&&(e.current.removeEventListener("transitionend",n),t())}),!1)}function a(e){return(0,i.useCallback)((t=>{s(e,t)}),[e])}},4379:function(e,t,n){"use strict";n.d(t,{D:function(){return s}});var i=n(4041);function s(e){const t=(0,i.useRef)(),n=(0,i.useRef)(e);(0,i.useEffect)((()=>{n.current=e}),[e]);const s=(0,i.useCallback)((()=>{window.clearTimeout(t.current)}),[]),a=(0,i.useCallback)((function(e){let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;s(),i?t.current=window.setTimeout((()=>{n.current(...e)}),i):n.current(...e)}),[s]);return(0,i.useEffect)((()=>s),[s]),{set:a,clear:s}}},5102:function(e,t,n){"use strict";n.d(t,{a:function(){return s}});var i=n(4041);function s(){const e=(0,i.useRef)(!1);return(0,i.useEffect)((()=>(e.current=!0,()=>{e.current=!1})),[]),e}},6780:function(e,t,n){"use strict";n.d(t,{Q:function(){return s}});var i=n(4041);const s=(e,t)=>{(0,i.useEffect)((()=>{var n;(null==t?void 0:t.shouldScroll)&&(null===(n=null==e?void 0:e.current)||void 0===n?void 0:n.scrollIntoView)&&(e.current.scrollIntoView({behavior:"smooth",block:"center"}),t.shouldFocus&&e.current.focus({preventScroll:!0}))}),[null==t?void 0:t.shouldFocus,null==t?void 0:t.shouldScroll,e])}},6172:function(e,t,n){"use strict";n.d(t,{$:function(){return s}});var i=n(8227);const s=()=>(0,i.n)().infrastructureParams.showcase},6630:function(e,t,n){"use strict";n.d(t,{Y:function(){return a}});var i=n(4041),s=n(8393);function a(){const e=(0,i.useRef)();return void 0===e.current&&(e.current=(0,s.i)()),e.current}},7554:function(e,t,n){"use strict";(this&&this.__awaiter||function(e,t,n,i){return new(n||(n=Promise))((function(s,a){function r(e){try{c(i.next(e))}catch(e){a(e)}}function o(e){try{c(i.throw(e))}catch(e){a(e)}}function c(e){var t;e.done?s(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(r,o)}c((i=i.apply(e,t||[])).next())}))})(void 0,void 0,void 0,(function*(){if(void 0===window.ResizeObserver){window.ResizeObserver=class{observe(){}unobserve(){}disconnect(){}};const e=yield n.e(295).then(n.bind(n,9295));window.ResizeObserver=e.ResizeObserver}}))},6007:function(e,t,n){"use strict";n.d(t,{U:function(){return A}});var i,s=n(5608),a=n(1085),r=n(4041);function o(){return o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},o.apply(this,arguments)}var c=function(e,t){return r.createElement("svg",o({fill:"none",height:24,viewBox:"0 0 24 24",width:24,strokeWidth:1.4,xmlns:"http://www.w3.org/2000/svg",ref:t},e),i||(i=r.createElement("g",{stroke:"currentColor"},r.createElement("g",{strokeLinecap:"round",strokeLinejoin:"round"},r.createElement("path",{d:"m12 22c5.5228 0 10-4.4772 10-10 0-5.52285-4.4772-10-10-10-5.52285 0-10 4.47715-10 10 0 5.5228 4.47715 10 10 10z"}),r.createElement("path",{d:"m12 8v4"}),r.createElement("circle",{cx:12,cy:15.5,r:.5})),r.createElement("path",{d:"m11.5049 15 1 1"}))))},l=(0,r.forwardRef)(c),u=(0,r.memo)(l),d=n(4357),h=n(9145),m=n(6448),p=n(8533),g=n(606);const y=[h.b.CLICK],f=["top","top-end","bottom","bottom-end"],S=e=>{var{className:t,children:n,dataQa:i}=e,o=(0,s.Tt)(e,["className","children","dataQa"]);const c=(0,p.Q)(),l=(0,g.t)(),h=(0,r.useRef)(null);return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("button",Object.assign({type:"button",ref:h,className:(0,d.A)("btn-icon font-size-18 text-red-60",t),"aria-label":l.translate("common.errorTooltipButtonAriaLabel"),"data-qa":i?`${i}-tooltip-error-trigger`:"tooltip-error-trigger"},o,{children:(0,a.jsx)(u,{className:"icon-stroke d-block","aria-hidden":!0})})),(0,a.jsx)(m.S,{triggerRef:h,trigger:y,placement:c?"left":"right",fallbackPlacements:f,dataQa:"tooltip-error-label",children:n})]})},A=(0,r.memo)(S)},1660:function(e,t,n){"use strict";n.d(t,{FM:function(){return s},pv:function(){return a},rp:function(){return r}});var i=n(2766);const{useAddFieldToScroll:s,useScrollToFieldsTrigger:a,ScrollToFieldsProvider:r}=(0,i.J)()},8533:function(e,t,n){"use strict";n.d(t,{Q:function(){return o}});var i=n(4041),s=n(606),a=n(3836),r=n(5448);function o(){const e=(0,s.t)();return(0,i.useMemo)((()=>(0,a.iJ)(e.language)===r.p.RTL),[e.language])}},8439:function(e,t,n){"use strict";const i=(()=>{try{return window}catch(e){return self}})(),s=i.FUN_ENV||"production",a=i.FUN_HOST||"https://api.fundraiseup.com",r=(i.FUN_CDN,i.FUN_STATIC||"https://static.fundraiseup.com");var o,c;i.FUN_STATIC_S3,n.p=r+("/"===r.slice(-1)?"":"/"),function(e){e[e.COMPANY_NOT_FOUND=1]="COMPANY_NOT_FOUND",e[e.UNSUPPORTED_STORAGE_TYPE=2]="UNSUPPORTED_STORAGE_TYPE",e[e.BACKDROP_CONTAINER_IS_NOT_AVAILABLE=3]="BACKDROP_CONTAINER_IS_NOT_AVAILABLE",e[e.EXPERIMENT_ALREADY_STARTED=4]="EXPERIMENT_ALREADY_STARTED",e[e.INVALID_VARIANT_NAME_FOR_EXPERIMENT=5]="INVALID_VARIANT_NAME_FOR_EXPERIMENT",e[e.STORED_SETTINGS_MUST_BE_AN_OBJECT=6]="STORED_SETTINGS_MUST_BE_AN_OBJECT",e[e.INVALID_DISTRIBUTION_IN_EXPERIMENT=7]="INVALID_DISTRIBUTION_IN_EXPERIMENT",e[e.NO_SUCH_SETTINGS_FOR_EXPERIMENT=8]="NO_SUCH_SETTINGS_FOR_EXPERIMENT",e[e.NO_SUCH_EXPERIMENT=9]="NO_SUCH_EXPERIMENT",e[e.UNSUPPORTED_TYPE_OF_STORAGE=10]="UNSUPPORTED_TYPE_OF_STORAGE",e[e.FORM_OF_THIS_TYPE_HAS_NOT_BEEN_REGISTERED=11]="FORM_OF_THIS_TYPE_HAS_NOT_BEEN_REGISTERED",e[e.NO_FORM_ASSOCIATED_WITH_THIS_KEY_WAS_CREATED=12]="NO_FORM_ASSOCIATED_WITH_THIS_KEY_WAS_CREATED",e[e.UNSUPPORTED_LOCALE_CONFIG_TYPE=13]="UNSUPPORTED_LOCALE_CONFIG_TYPE",e[e.SERVICE_HAS_ALREADY_BEEN_PROVIDED=14]="SERVICE_HAS_ALREADY_BEEN_PROVIDED",e[e.MUST_PROVIDE_COMPANY_KEY=15]="MUST_PROVIDE_COMPANY_KEY",e[e.TRACKER_ALREADY_STARTED=16]="TRACKER_ALREADY_STARTED"}(o||(o={}));!function(e){e[e.BACKDROP=1]="BACKDROP",e[e.STATIC_CONFIG=2]="STATIC_CONFIG",e[e.KEYS_KEEPER=3]="KEYS_KEEPER",e[e.COLLECTOR=4]="COLLECTOR",e[e.RESOLVER=5]="RESOLVER",e[e.DEBUG=6]="DEBUG",e[e.TRACKING_URLS=7]="TRACKING_URLS",e[e.FUN_SESSION_STORAGE=8]="FUN_SESSION_STORAGE",e[e.EMBED_ELEMENTS_API=9]="EMBED_ELEMENTS_API",e[e.EMBED_CHECKOUT_API=10]="EMBED_CHECKOUT_API",e[e.EMBED_INTERNAL_API=11]="EMBED_INTERNAL_API",e[e.EMBED_FORMS_API=12]="EMBED_FORMS_API",e[e.EMBED_CONFIG=13]="EMBED_CONFIG",e[e.EMBED_TRACKER=14]="EMBED_TRACKER",e[e.FUN_EXPERIMENTS_STORAGE=15]="FUN_EXPERIMENTS_STORAGE",e[e.CHECKOUT=16]="CHECKOUT",e[e.EMBED_ELEMENTS_SERVICE=17]="EMBED_ELEMENTS_SERVICE",e[e.ELEMENTS_API=18]="ELEMENTS_API",e[e.EVENT_EMITTER=19]="EVENT_EMITTER",e[e.HTML_ELEMENT_STYLE_MANAGER=20]="HTML_ELEMENT_STYLE_MANAGER",e[e.FUN_TRACKER_STORAGE=21]="FUN_TRACKER_STORAGE",e[e.FUN_STAT_STORAGE=22]="FUN_STAT_STORAGE",e[e.FUN_COOKIES_MIGRATOR=23]="FUN_COOKIES_MIGRATOR",e[e.FUN_COOKIES_MANAGER=24]="FUN_COOKIES_MANAGER",e[e.USER_SESSION=25]="USER_SESSION",e[e.FUN_DEBUG_STORAGE=26]="FUN_DEBUG_STORAGE",e[e.SENTRY_CLIENT=27]="SENTRY_CLIENT",e[e.EXPERIMENTS_CONTROLLER=28]="EXPERIMENTS_CONTROLLER",e[e.CHECKOUT_SKELETON=29]="CHECKOUT_SKELETON",e[e.EMBED_ELEMENTS_URL_API=30]="EMBED_ELEMENTS_URL_API",e[e.CHECKOUT_STEPLESS=31]="CHECKOUT_STEPLESS",e[e.CONSENT_MANAGER_API=32]="CONSENT_MANAGER_API"}(c||(c={}));var l=n(5608),u=(n(7554),n(5873)),d=n(4041);var h=n(7429);class m{constructor(e){this.window=e,this.hideTimeout=null,this.hiddenElementsList=[],this.elementsSelectorList=[".s.u.m.o"]}hideAll(){const e=()=>{this.elementsSelectorList.forEach((e=>{this.window.document.querySelectorAll(e).forEach(this.hideNode.bind(this))}))};e(),this.hideTimeout=this.window.setInterval(e,1e3)}restoreAll(){this.hideTimeout&&clearTimeout(this.hideTimeout),this.hiddenElementsList.forEach((e=>{let{node:t,style:n}=e;null===n?t.removeAttribute("style"):t.setAttribute("style",n)})),this.hiddenElementsList=[]}hideNode(e){this.hiddenElementsList.some((t=>t.node===e))||(this.hiddenElementsList.push({node:e,style:e.getAttribute("style")}),e.setAttribute("style","display: none;"))}}const p="fundraiseupLivemode";var g,y,f,S;function A(e,t){const n=t.findElement(e);if(!n)throw new Error('No element with id "root"');return n}function E(e){if(!e.iframeDocument||!e.iframeWindow)throw new Error("No window or document in iframe");return{target:e.iframeWindow,global:window}}!function(e){e.CHECKOUT_BEFORE_OPEN="checkoutBeforeOpen",e.CHECKOUT_OPEN="checkoutOpen",e.CHECKOUT_CLOSE="checkoutClose",e.CHECKOUT_INTENT="checkoutIntent",e.DONATION_COMPLETE="donationComplete"}(g||(g={}));class C{get iframeNode(){throw new Error("Not implemented")}destroy(e){throw new Error("Not implemented")}}!function(e){e.CLOSE="close",e.OPEN="open",e.DONATION_COMPLETE="donationComplete",e.CHECKOUT_INTENT="checkoutIntent"}(y||(y={})),function(e){e.LIVE="live",e.TEST="test"}(f||(f={})),function(e){e.DONATE_FORM="donate-form",e.COMMENT="comment",e.UPSELL="upsell",e.PAYMENT_METHOD="payment-method",e.PAYPAL="paypal",e.BANK_LOADING="bank-loading",e.CREDIT_CARD="credit-card",e.UK_BACS="uk-bacs",e.UK_BACS_CONFIRMATION="uk-bacs-confirmation",e.AU_BECS="au-becs",e.SEPA="sepa",e.PRIVACY="privacy",e.DOUBLE="double",e.GIFT_AID="gift-aid",e.MAILING_ADDRESS="mailing-address",e.THANK_YOU="thank-you",e.THANK_YOU_TRIBUTE="thank-you-tribute",e.QUESTIONS1="questions1",e.QUESTIONS="questions",e.REMIND_ME="remind-me",e.ASK_PAGE="ask-page",e.POST_DONATION_UPSELL="post-donation-upsell",e.BLOCKED="blocked",e.COMMUNICATION_CONSENT="communication-consent"}(S||(S={}));class v extends C{constructor(e,t,n){super(),this.checkoutUI=e,this.checkoutCore=t,this.foreignElements=n,this.eventEmitter=new h.A,this.destroyed=!1}get iframeNode(){return this.checkoutUI.iframeNode}get checkoutLocale(){return this.checkoutCore.intl.locale}initialize(){this.checkoutAPIBridge.on(y.DONATION_COMPLETE,(e=>{this.emit(y.DONATION_COMPLETE,e)}))}destroy(e){return(0,l.sH)(this,void 0,void 0,(function*(){this.assertNotDestroyed(),this.checkoutUI.close();const t=Object.assign(Object.assign({},e),this.checkoutAPIBridge.getClosePublicJsApiPayload());this.checkoutCore.logger.checkoutClose({key:this.checkoutCore.checkoutConfiguration.campaign.key,name:this.checkoutCore.checkoutConfiguration.campaign.name},this.checkoutAPIBridge.getClosePublicJsApiPayload()),this.emit(y.CLOSE,t),this.emit(y.CHECKOUT_INTENT,this.checkoutAPIBridge.getIntent()),this.foreignElements&&this.foreignElements.restoreAll(),this.eventEmitter.removeAllListeners(),this.checkoutAPIBridge.dispose(),this.checkoutCore.dispose(),this.destroyed=!0}))}on(e,t){this.assertNotDestroyed(),this.eventEmitter.on(e,t)}getOpenParams(){return this.checkoutAPIBridge.getOpenParams()}get checkoutAPIBridge(){return this.checkoutCore.checkoutAPIBridge}emit(e,t){this.eventEmitter.emit(e,t)}assertNotDestroyed(){if(this.destroyed)throw new Error("CheckoutAPI destroyed")}}var N=n(7758),b=n.n(N),P=n(9210),D=n.n(P),_=n(8035),T=n.n(_),O=n(6725);function x(e){return(0,O.Ay)(e)}var k=n(4584);class I{constructor(e,t){this.storage=e,this.initAt=t||(new Date).getTime(),this.read()}incrementSession(){this.sessionPage++,this.refresh()}refresh(){this.sessionAt||this.addSession(),this.write()}addSession(){this.sessionAt=this.initAt}write(){this.storage.setField(k.p.SESSION_AT,this.sessionAt.toString(10)),this.storage.setField(k.p.SESSION_PAGE,this.sessionPage)}read(){this.sessionAt=Number(this.storage.getField(k.p.SESSION_AT))||0,this.sessionPage=Number(this.storage.getField(k.p.SESSION_PAGE))||0}}var w=n(8728);const R=[w.D.EN_GB],M={[w.D.EN_US]:"en_US",[w.D.EN_GB]:"en_GB",[w.D.EN_CA]:"en_CA",[w.D.FR_CA]:"fr_CA",[w.D.ES]:"es_ES",[w.D.ES_US]:"es_US",[w.D.NL]:"nl_NL",[w.D.NO]:"no_NO",[w.D.DE]:"de_DE",[w.D.FI_FI]:"fi_FI",[w.D.FR_FR]:"fr_FR",[w.D.AR_001]:"ar_AE",[w.D.SV]:"sv_SE",[w.D.IT]:"it_IT",[w.D.PT_PT]:"pt_PT",[w.D.PT_BR]:"pt_BR",[w.D.ZH_CN]:"zh_CN",[w.D.ZH_TW]:"zh_TW",[w.D.JA]:"ja_JP",[w.D.KO]:"ko_KR",[w.D.HU]:"hu_HU",[w.D.DA]:"da_DK",[w.D.RU_RU]:"ru_RU",[w.D.PL_PL]:"pl_PL"};function L(e){return M[e]}class U extends Error{constructor(e){super(e),this.name=this.constructor.name}}class F extends U{constructor(e,t){super(t?`Unreachable statement: ${e} [${t}]`:`Unreachable statement: ${e}`)}}class j extends U{constructor(){super("Unexpected error")}}const B=new WeakMap;let H=null;const q=new Promise((e=>{H=e}));class G extends U{constructor(e){super(e?`'Script failed to load': ${e}`:"Script failed to load"),this.name="LoadScriptError"}}function V(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=arguments.length>3&&void 0!==arguments[3]&&arguments[3];t=t||window;let s={};B.has(t)?s=B.get(t):B.set(t,s);const a=s[e];if(!i&&a)return a;const r=new Promise((function(i,s){setTimeout((()=>{const a=function(e,t){const n=document.createElement("script");return n.type="text/javascript",n.async=!0,n.src=e,Object.keys(t).forEach((e=>{n.setAttribute(e,t[e])})),n}(e,n);a.onerror=function(e){if("string"==typeof e)return void s(new G);const t=null==e?void 0:e.target;t instanceof HTMLScriptElement?s(new G(t.src)):s(new G)},a.onload=function(){i(!0)},t.document.documentElement.appendChild(a),Y._immedeatly&&i(!0)}),0)}));return s[e]=r,r}function Y(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2?arguments[2]:void 0,i=arguments.length>3?arguments[3]:void 0,s=arguments.length>4?arguments[4]:void 0;if(i&&(!(a=i)||a.constructor!=={}.constructor))throw new Error("Expected attributes to be an object.");var a;return t?q.then((()=>V(e,n,i,s))):V(e,n,i,s)}Y._windows=B,Y._immedeatly=!1;const K="supporter",z="1234@example.com",$="https://js.stripe.com/v3/";class W extends Error{constructor(){super(W.errorMessage)}}W.errorMessage="Stripe.js could not be loaded";const X={target:window,apiVersion:"2023-10-16",deferred:!1,loadTimeout:0,locale:w.D.EN_US};function Q(e,t,n,i){const s=n.target,a=function(e){return R.includes(e)?e:e.split("-")[0]}(n.locale);return Y($,n.deferred,s).then((()=>new Promise(((i,r)=>{const o=()=>{s.Stripe?i(s.Stripe(e,{stripeAccount:t,apiVersion:n.apiVersion,locale:a})):r(new W)};n.loadTimeout?setTimeout((()=>{o()}),n.loadTimeout):o()})))).catch((e=>{throw e.message.match("js.stripe.com")&&i.captureException(e,{extra:{script:e.message,stripeAccount:t}}),e}))}class Z extends Error{constructor(e){super("[Stripe Factory]"+e)}}function J(e,t){if(e.showcase)return()=>{};let n;const i=()=>(0,l.sH)(this,void 0,void 0,(function*(){if(!e.targetWindow)throw new Z("target window is not provided");n=yield function(e,t,n){return(0,l.sH)(this,arguments,void 0,(function*(e,t,n){let i,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:X;const a=Object.assign({},X,s);try{return i=yield Q(e,t,a,n),i}catch(i){return Q(e,t,Object.assign(Object.assign({},a),{loadTimeout:500}),n)}}))}(e.publicKey,e.stripeAccount||"",t,{target:e.targetWindow,locale:e.locale})}));return i(),function(){return(0,l.sH)(this,void 0,void 0,(function*(){return n||(yield i(),n)}))}}class ee{constructor(){this.disposables=new Set}static isFunction(e){return"function"==typeof e}run(e){return(0,l.sH)(this,void 0,void 0,(function*(){yield this.initializeCurrencyFilter(),yield this.setLocale(null==e?void 0:e.localeCode),this.initializePageGuardManager(),this.initializePublicJsApi(),this.initializeCookieConsent(),this.initializeUserSession(),this.initializeRouter(),this.initializeTracker(),this.initializeExperiments(),yield this.initializeCurrencyService(),yield this.startFlow(null==e?void 0:e.initialScreen);const t=this.subscribeOnUserInteraction();this.subscribeOnHistoryInteraction(),this.disposables.add(t).add(this.checkoutRouter).add(this.trackerCheckout).add(this.flowManager)}))}dispose(){this.disposables.forEach((e=>{ee.isFunction(e)?e():e.dispose()}))}}var te,ne,ie,se,ae;!function(e){e.INACTIVITY="inactivity",e.EXIT="exit",e.PAYMENT_ISSUE="paymentIssue",e.REMINDER_REQUEST="reminderRequest"}(te||(te={})),function(e){e.YES="yes",e.NO="no",e.NOT_GIVEN="notGiven"}(ne||(ne={})),function(e){e.REMINDER="reminder",e.DONATE_BUTTON="donateButton",e.STICKY_BUTTON="stickyButton",e.IMAGE_CARD="imageCard",e.TEXT_LINK="textLink",e.DONATION_FORM="donationForm",e.SIMPLE_FORM="simpleForm",e.GOAL_METER="goalMeter",e.STAT_COUNTER="statCounter",e.IMPACT_SLIDER="impactSlider",e.DONATION_LEVELS="donationLevels",e.BUTTON_GROUP="buttonGroup",e.FLOATING_BUTTON="floatingButton",e.MESSAGE_BAR="messageBar",e.TOP_SUPPORTERS="topSupporters",e.TOP_LOCATIONS="topLocations",e.SOCIAL_PROOF="socialProof",e.QR_CODE="qrCode",e.RECENT_DONATIONS="recentDonations",e.P2P_BUTTON="p2pButton",e.P2P_LINK="p2pLink",e.TOP_FUNDRAISERS="topFundraisers",e.DONOR_MAP="donorMap",e.LIGHTBOX="lightbox",e.FUNDRAISING_PAGE_LINK="fundraisingPageLink",e.FUNDRAISING_PAGE_INVITE_LINK="fundraisingPageInviteLink",e.LINK="link",e.DIRECT_LINK="direct",e.DEBUG_PANEL="debugPanel",e.TEST_MODE_PANEL="testModePanel",e.SPLIT_TESTING="splitTesting",e.JS_API="jsApi"}(ie||(ie={}));class re{constructor(e){this.checkoutConfiguration=e,this.eventEmitter=new h.A}getOpenParams(){var e,t,n,i,s,a,r,o,c;const l=this.checkoutConfiguration.campaign,u=this.checkoutConfiguration.externalConfig,d=this.checkoutConfiguration.queryParams,h=this.checkoutConfiguration.mergedCustomFields;return{customFields:Object.fromEntries(null!==(e=null==h?void 0:h.map((e=>{let{name:t,value:n}=e;return[t,n]})))&&void 0!==e?e:[]),livemode:this.checkoutConfiguration.infrastructureParams.livemode,campaign:{id:l.key,code:l.code||null,name:l.name},utm:{source:d.utm.source||(null===(t=this.checkoutConfiguration.infrastructureQueryParams)||void 0===t?void 0:t.utm_source)||"",campaign:d.utm.campaign||(null===(n=this.checkoutConfiguration.infrastructureQueryParams)||void 0===n?void 0:n.utm_campaign)||"",medium:d.utm.medium||(null===(i=this.checkoutConfiguration.infrastructureQueryParams)||void 0===i?void 0:i.utm_medium)||"",content:d.utm.content||(null===(s=this.checkoutConfiguration.infrastructureQueryParams)||void 0===s?void 0:s.utm_content)||"",term:d.utm.term||(null===(a=this.checkoutConfiguration.infrastructureQueryParams)||void 0===a?void 0:a.utm_term)||""},element:{id:null===(r=u.launcher)||void 0===r?void 0:r.elementKey,type:null===(o=u.launcher)||void 0===o?void 0:o.elementTitle,name:null===(c=u.launcher)||void 0===c?void 0:c.elementName}}}on(e,t){return this.eventEmitter.on(e,t),this}emitCheckoutOpen(){this.emit(y.OPEN,this.getOpenParams())}emitDonationComplete(e){this.emit(y.DONATION_COMPLETE,Object.assign(Object.assign({},this.getOpenParams()),e))}setDonationParams(e){this.donationParams=e}setIntentParams(e){this.intent=this.formatIntent(e)}getClosePublicJsApiPayload(){if(!this.donationParams)throw new Error("Call setDonationParams first to set public donation params");return Object.assign(Object.assign({},this.getOpenParams()),this.donationParams)}getIntent(){if(void 0===this.intent)throw new Error("Call setIntentParams on close to set public intent params");return this.intent}dispose(){this.eventEmitter.removeAllListeners()}canFormatIntent(e){var t;if(!e)return!1;const n=this.checkoutConfiguration.externalConfig,i=!!n.checkoutIntent,s=(null===(t=n.launcher)||void 0===t?void 0:t.elementType)===ie.JS_API;return!(e.isSavedEmailOnExit===ne.YES)&&(!i||s)}formatIntent(e){var t,n;if(!this.canFormatIntent(e))return null;const i=this.checkoutConfiguration.externalConfig,s=this.checkoutConfiguration.campaign,a=this.checkoutConfiguration.fundraisingPage,r={flowType:e.flowType,campaign:{id:s.key},element:{key:null===(t=i.launcher)||void 0===t?void 0:t.elementKey,type:null===(n=i.launcher)||void 0===n?void 0:n.elementType},checkoutSettings:{customFields:this.checkoutConfiguration.mergedCustomFields,designation:e.checkoutSettings.designation,modifyAmount:e.checkoutSettings.modifyAmount,modifyDesignation:e.checkoutSettings.modifyDesignation},comment:e.comment,donation:e.donation,supporter:e.supporter,tribute:e.tribute,feeCovered:e.feeCovered};return a&&(r.fundraisingPage={key:a.key,customerKey:a.admin}),r}emit(e,t){this.eventEmitter.emit(e,t)}}(ae=se||(se={})).ONCE="once",ae.DAILY="daily",ae.WEEKLY="weekly",ae.BIWEEKLY="biweekly",ae.EVERY_4_WEEKS="every4weeks",ae.MONTHLY="monthly",ae.BIMONTHLY="bimonthly",ae.QUARTERLY="quarterly",ae.SEMIANNUAL="semiannual",ae.ANNUAL="annual";const oe={[se.DAILY]:[2e4,1e4,5e3,3e3,1e3,500],[se.WEEKLY]:[2e4,1e4,5e3,3e3,1e3,500],[se.BIWEEKLY]:[2e4,1e4,5e3,3e3,1e3,500],[se.EVERY_4_WEEKS]:[2e4,1e4,5e3,3e3,1e3,500],[se.MONTHLY]:[2e4,1e4,5e3,3e3,1e3,500],[se.BIMONTHLY]:[2e4,1e4,5e3,3e3,1e3,500],[se.QUARTERLY]:[2e4,1e4,5e3,3e3,1e3,500],[se.SEMIANNUAL]:[2e4,1e4,5e3,3e3,1e3,500],[se.ANNUAL]:[2e4,1e4,5e3,3e3,1e3,500],[se.ONCE]:[1e5,5e4,25e3,1e4,5e3,2500]},ce="paymentSession",le={[se.ONCE]:10,[se.ANNUAL]:20,[se.SEMIANNUAL]:30,[se.QUARTERLY]:40,[se.MONTHLY]:50,[se.EVERY_4_WEEKS]:60,[se.BIMONTHLY]:70,[se.WEEKLY]:80,[se.BIWEEKLY]:90,[se.DAILY]:100},ue=[500,1e3,3e3],de=[2500,5e3,1e4],he=[500,1e3,3e3,5e3,1e4,2e4],me=[2500,5e3,1e4,25e3,5e4,1e5],pe=2500;class ge{static getDefaultFrequency(e){const t=Object.keys(e).find((t=>e[t].enabled&&e[t].default));if(!t)throw new Error("No default frequency found");return t}static getDefaultFrequencyWithOverride(e,t){return t&&this.getEnabledFrequencies(e).includes(t)?t:Object.keys(e).find((t=>e[t].enabled&&e[t].default))||null}static getSecondaryFrequency(e){return Object.keys(e).find((t=>e[t].enabled&&!e[t].default))}static getEnabledFrequencies(e){const t=Object.keys(e).filter((t=>e[t].enabled)).map((e=>e));if(0===t.length)throw new Error("No enabled frequencies found");return this.sortByWeights(t)}static isOnetimeOnly(e){const t=this.getEnabledFrequencies(e);return 1===t.length&&t.includes(se.ONCE)}static isRecurringOnly(e){return!this.getEnabledFrequencies(e).includes(se.ONCE)}static isOnetimeEnabled(e){return this.getEnabledFrequencies(e).includes(se.ONCE)}static isRecurringEnabled(e){return!!this.getEnabledFrequencies(e).find((e=>e!==se.ONCE))}static frequencySettingsToWidgetRepeat(e){const t=this.isOnetimeEnabled(e),n=this.isRecurringEnabled(e);return t&&!n?u.VN.ONLY_ONETIME:!t&&n?u.VN.ONLY_MONTHLY:this.getDefaultFrequency(e)===se.ONCE?u.VN.DEFAULT_ONETIME:u.VN.DEFAULT_MONTHLY}static isFrequencyEnabled(e,t){return null!==t&&(Object.values(se).includes(t)&&ge.getEnabledFrequencies(e).includes(t))}static sortByWeights(e){return e.sort(((e,t)=>le[e]-le[t]))}}var ye,fe,Se;!function(e){e.HELPING_HAND_STAGING="FUNTMDMPPAF",e.ISRAELI_AMERICAN_COUNCIL_1="FUNTWQULBUW",e.ISRAELI_AMERICAN_COUNCIL_2="FUNVUTSEZXA",e.ACCESS_FUND_1="FUNFWAWHCAJ",e.ACCESS_FUND_2="FUNYGCGZKAB",e.ACCESS_FUND_3="FUNUVSVAKSL",e.IAC_1="FUNRYLWADLU",e.IAC_2="FUNQNGXYKJA",e.IAC_3="FUNSWLJZBXE",e.IAC_4="FUNALPRPKQD"}(ye||(ye={})),function(e){e.MONEY="money",e.STOCK="stock",e.CRYPTO="crypto"}(fe||(fe={})),function(e){e.MODAL="modal",e.PAGE="page"}(Se||(Se={}));var Ae=n(5898);function Ee(e){return(0,Ae.Ay)(x(e),(e=>e))}const Ce=e=>`https://ucarecdn.com/7a2a472d-06d6-48fc-8c7d-37e313b717e0/-/resize/${e?"1248x":"624x"}/-/format/auto/`;var ve,Ne,be,Pe,De,_e,Te,Oe,xe,ke={getLinks:function(e){var t,n;return(null===(n=null===(t=e.campaignPage)||void 0===t?void 0:t.ask)||void 0===n?void 0:n.links)?[...e.campaignPage.ask.links]:[]},getAskTitle:function(e,t){var n,i,s;return(null===(i=null===(n=t.checkoutData)||void 0===n?void 0:n.ask)||void 0===i?void 0:i.show)?t.checkoutData.ask.title:(null===(s=e.campaignPage)||void 0===s?void 0:s.ask.title)||""},getLogoImageURL:function(e,t){var n,i,s,a,r,o;return t?null===(s=null===(i=null===(n=e.campaignPage)||void 0===n?void 0:n.ask)||void 0===i?void 0:i.logoImage)||void 0===s?void 0:s.previewUrlRetina:null===(o=null===(r=null===(a=e.campaignPage)||void 0===a?void 0:a.ask)||void 0===r?void 0:r.logoImage)||void 0===o?void 0:o.previewUrl},getAskDescription:function(e,t){var n,i,s,a;return(null===(i=null===(n=t.checkoutData)||void 0===n?void 0:n.ask)||void 0===i?void 0:i.show)?t.checkoutData.ask.text:(null===(a=null===(s=e.campaignPage)||void 0===s?void 0:s.ask)||void 0===a?void 0:a.text)||""},getAskMainImageURL:function(e,t){var n,i,s,a,r,o;const c=Ce(t);return(t?null===(s=null===(i=null===(n=e.campaignPage)||void 0===n?void 0:n.ask)||void 0===i?void 0:i.mainImage)||void 0===s?void 0:s.previewUrlRetina:null===(o=null===(r=null===(a=e.campaignPage)||void 0===a?void 0:a.ask)||void 0===r?void 0:r.mainImage)||void 0===o?void 0:o.previewUrl)||c},getCompanyImageURL:function(e,t){if(!e.logoUuid)return null;const n=t?"x112":"x56";return`https://ucarecdn.com/${e.logoUuid}/-/resize/${n}/-/format/auto/`},getLogoAltText:function(e){var t,n,i;return(null===(i=null===(n=null===(t=e.campaignPage)||void 0===t?void 0:t.ask)||void 0===n?void 0:n.logoImage)||void 0===i?void 0:i.alt)||null},getMainImageAltText:function(e){var t,n,i;return(null===(i=null===(n=null===(t=e.campaignPage)||void 0===t?void 0:t.ask)||void 0===n?void 0:n.mainImage)||void 0===i?void 0:i.alt)||null},getCompanyLogoImageAltText:function(e){return e.logoAlt||null}},Ie={getLinks:function(e){return[...e.ask.links]},getAskTitle:function(e,t){var n,i;return(null===(i=null===(n=t.checkoutData)||void 0===n?void 0:n.ask)||void 0===i?void 0:i.show)?t.checkoutData.ask.title:e.ask.title},getLogoImageURL:function(e,t){var n,i;return t?null===(n=e.ask.logoImage)||void 0===n?void 0:n.previewUrlRetina:null===(i=e.ask.logoImage)||void 0===i?void 0:i.previewUrl},getAskDescription:function(e,t){var n,i;return(null===(i=null===(n=t.checkoutData)||void 0===n?void 0:n.ask)||void 0===i?void 0:i.show)?t.checkoutData.ask.text:e.ask.text},getAskMainImageURL:function(e,t){var n,i;const s=Ce(t);return(t?null===(n=e.ask.mainImage)||void 0===n?void 0:n.previewUrlRetina:null===(i=e.ask.mainImage)||void 0===i?void 0:i.previewUrl)||s},getCompanyImageURL:function(e,t){if(!e.logoUuid)return null;const n=t?"x100":"x50";return`https://ucarecdn.com/${e.logoUuid}/-/resize/${n}/-/format/auto/`},getLogoAltText:function(e){var t;return(null===(t=e.ask.logoImage)||void 0===t?void 0:t.alt)||null},getMainImageAltText:function(e){var t;return(null===(t=e.ask.mainImage)||void 0===t?void 0:t.alt)||null},getCompanyLogoImageAltText:function(e){return e.logoAlt||null}};!function(e){e.RELATIVE="relative",e.ABSOLUTE="absolute"}(ve||(ve={})),function(e){e.TWO_WEEKS="2weeks",e.ONE_MONTH="1month",e.THREE_MONTHS="3months"}(Ne||(Ne={})),function(e){e.ASC="asc",e.DESC="desc"}(be||(be={})),function(e){e.WITHOUT="without",e.SELECT="select"}(Pe||(Pe={})),function(e){e.ENABLED="enabled",e.DISABLED="disabled"}(De||(De={})),function(e){e.ACTIVE="active",e.DISABLED="disabled",e.AUTO_ARCHIVE="autoArchive"}(_e||(_e={})),function(e){e.FULL_NAME="fullName",e.FIRST_NAME_LAST_INITIALS="firstNameLastInitials",e.FIRST_NAME="firstName",e.NONE="none"}(Te||(Te={})),function(e){e.SPECIFIED="specified",e.DETECTED="detected",e.ACTUAL="actual"}(Oe||(Oe={})),function(e){e.ROUNDED="rounded",e.SHARP="sharp",e.PILL="pill"}(xe||(xe={}));var we;Object.values({"2:1":1.5,"1:1":2,"1:2":3,"1:3":4,"1:4":5,"1:5":6,"1:6":7,"1:7":8,"1:8":9,"1:9":10,"1:10":11}),function(e){e.UP_TO_25="up_to_25",e.UP_TO_35="up_to_35",e.UP_TO_55="up_to_55",e.UP_TO_100="up_to_100",e.UP_TO_150="up_to_150",e.UP_TO_200="up_to_200"}(we||(we={}));const Re={ask:{logoImage:null,mainImage:null,text:"",title:"",links:[]},sharing:{twitter:!1,facebook:!1,linkedin:!1,copyLink:!1,email:!1},goal:{hasGoal:!1,amount:0,endDate:null,raisedAmount:0,donorsCount:0,showTotalRaisedAmount:!1},donorImpact:{show:!1,donorNameType:Te.NONE,showDonorComment:!1,showDonationAmount:!1,showDonationDate:!1,showDonorLocation:!1,currencyShowType:Oe.ACTUAL,currency:""},rateMatching:{show:!1,rate:0,sponsor:null,minAmount:0,endDate:null,showEndDate:!1,showSponsor:!1,sponsorEnabled:!1,startDate:null,totalAmountLimitEnabled:!1,totalAmountLimit:null,raised:null,remains:null},thankYouScreen:{type:u.N4.THANK_YOU_SCREEN,redirect:{url:null,includeSupporterData:!1},sharing:{link:null,text:null,channels:{twitter:!1,facebook:!1,email:!1,linkedin:!1}}},appearance:{color:"",type:xe.PILL}},Me={isActive:!0},Le={enabledForDonationFrequencies:Object.values(se),enabledTargetFrequencies:[se.ANNUAL,se.EVERY_4_WEEKS,se.MONTHLY],amountsMap:{[we.UP_TO_25]:[500,1e3],[we.UP_TO_35]:[1e3,1500],[we.UP_TO_55]:[1500,2e3],[we.UP_TO_100]:[2e3,2500],[we.UP_TO_150]:[2500,3e3],[we.UP_TO_200]:[3e3,4e3]},isAdaptiveSuggestionEnabled:!0},Ue={disabledPaymentMethods:[]},Fe={isEnabled:!0};var je,Be=n(2557);!function(e){e.RECURRING="recurring",e.ONE_TIME="one-time",e.ALL="all"}(je||(je={}));class He{static overrideWidgetGoalsConfig(e){const t=x(e);return ge.isOnetimeOnly(e.frequencies)||ge.isRecurringOnly(e.frequencies)?(this.hasDefaultGoalForAllFrequencies(e.goals)||(t.goals=t.goals.map(((e,t)=>Object.assign(Object.assign({},e),{repeat:je.ALL,default:0===t?je.ALL:null})))),t):t}static hasDefaultGoalForAllFrequencies(e){return e.some((e=>{const t=e.repeat===je.ALL,n=e.default===je.ALL;return t&&n}))}constructor(e,t,n,i,s,a,r,o,c,l,u,d){this.window=l,this._showcase=e.showcase;const h=this.cloneWidget(e.campaign);this._externalConfig=this.getExternalConfig(Object.assign(Object.assign({},t),{checkoutData:i}),h),this._queryParams=Ee(n),this._infrastructureParams=Ee(s),this._infrastructureQueryParams=u&&Ee(u),this._integrations=Ee(a),this._launcherParams=Ee(r),this._environmentConfig=Ee(o),this._campaign=Ee(Object.assign(Object.assign({},h),{config:D()(h.config,"ask")})),this._cryptoCurrencies=Ee(e.config.cryptoCurrencies),this._currencies=Ee(e.config.currencies),this._user=Ee(e.user),this._aiSuggestions=Ee(e.aiSuggestions),this._company=this.getResolvedCompany(e.company),this._fundraisingPage=e.fundraisingPage?this.getFundraisingPage(e.fundraisingPage,this.campaign.key):void 0,this._splitTest=d&&Ee(d),this._getAskPageConfig=this.getAskPageConfigGetter(h,t,this.company),this._checkoutType=c.checkoutType,this._recentDonations=e.campaign.recentDonations?Ee(e.campaign.recentDonations.filter((e=>e.donationType!==fe.STOCK)).map((t=>{var n;const i=function(e,t){if(!e||!t)return null;const n=Math.round(e*t-e);return Math.max(n,0)}(t.amount,null===(n=e.campaign.config.campaignPage)||void 0===n?void 0:n.rateMatching.rate);return Object.assign(Object.assign({},t),{matchedAmount:i})}))):null,this._totalRecentDonations=e.campaign.totalRecentDonations||null,this._commentSettings=c.commentSettings,this._preDonationUpsellSettings=c.preDonationUpsellSettings,this._paymentOptionsSettings=c.paymentOptionsSettings,this._remindMeLaterSettings=c.remindMeLaterSettings,this._aiConfig=Ee(e.campaign.config.ai)}get allowLegacyTributeLabel(){return["ASCBRLZS","APGYPDRM","AGPUPUKX","AGDVEKDU","ASMXWWKS","AYDKPHBH"].includes(this.company.key)}get successPaymentDelayBeforeLeave(){switch(this.checkoutType){case Se.MODAL:return 2e3;case Se.PAGE:return 0;default:throw new F(this.checkoutType)}}get campaignPagesSharingEnabled(){return this.campaignPage.sharing.linkedin||this.campaignPage.sharing.facebook||this.campaignPage.sharing.copyLink||this.campaignPage.sharing.twitter}get showDonorImpactSection(){return this.checkoutType===Se.PAGE&&this.campaignPage.donorImpact.show&&!!this.recentDonations}get showGoalMeterSection(){var e,t,n,i,s;return!!(null===(e=this.fundraisingPage)||void 0===e?void 0:e.goalAmount)||!!(null===(n=null===(t=this.campaign.config.campaignPage)||void 0===t?void 0:t.goal)||void 0===n?void 0:n.showTotalRaisedAmount)&&!!(null===(s=null===(i=this.campaign.config.campaignPage)||void 0===i?void 0:i.goal)||void 0===s?void 0:s.hasGoal)}get showAmountCounterSection(){var e,t,n,i;return!!(null===(t=null===(e=this.campaign.config.campaignPage)||void 0===e?void 0:e.goal)||void 0===t?void 0:t.showTotalRaisedAmount)&&!(null===(i=null===(n=this.campaign.config.campaignPage)||void 0===n?void 0:n.goal)||void 0===i?void 0:i.hasGoal)}get goalMeterData(){var e,t,n,i,s,a,r,o;const c=(null===(e=this.fundraisingPage)||void 0===e?void 0:e.currency)||this.campaign.config.defaultCurrency,l=(null===(t=this.fundraisingPage)||void 0===t?void 0:t.goalAmount)||(null===(i=null===(n=this.campaign.config.campaignPage)||void 0===n?void 0:n.goal)||void 0===i?void 0:i.amount)||null,u=(null===(s=this.fundraisingPage)||void 0===s?void 0:s.donationsAmount)||(null===(r=null===(a=this.campaign.config.campaignPage)||void 0===a?void 0:a.goal)||void 0===r?void 0:r.raisedAmount)||null;return{shown:this.showGoalMeterSection,currency:c,totalAmount:l,raisedAmount:u,isFundraisingPageGoalMeter:!!(null===(o=this.fundraisingPage)||void 0===o?void 0:o.goalAmount)}}get recentDonations(){return this._recentDonations}get totalRecentDonations(){return this._totalRecentDonations}get checkoutType(){return this._checkoutType}get aiSuggestions(){return this._aiSuggestions}get showcase(){return this._showcase}get featureConfig(){return this._company.featureConfig}get parentCompanyConfig(){return this._company.parentCompanyConfig}get fundraisingPage(){return this._fundraisingPage}get splitTest(){return this._splitTest}get defaultFlowType(){var e,t;return(null===(e=this.externalConfig.checkoutIntent)||void 0===e?void 0:e.flowType)?null===(t=this.externalConfig.checkoutIntent)||void 0===t?void 0:t.flowType:this.fundraisingPage&&this.enabledFlows.money?fe.MONEY:this.campaign.config.defaultDonationType}get queryParams(){return this._queryParams}get isLighthouse(){var e;return null!==(e=this._infrastructureParams.isLighthouse)&&void 0!==e&&e}get queryTrackerParams(){var e;if(this.checkoutType!==Se.PAGE)return{tags:[]};const t=null===(e=this.externalConfig.queryParams)||void 0===e?void 0:e.eventTags;return{tags:t?t.split(","):[]}}get infrastructureQueryParams(){return this._infrastructureQueryParams||{}}get infrastructureParams(){return this._infrastructureParams}get integrations(){return this._integrations}get launcherParams(){return this._launcherParams}get environmentConfig(){return this._environmentConfig}get element(){var e,t,n,i,s,a;return{key:(null===(e=this.externalConfig.launcher)||void 0===e?void 0:e.elementKey)||(null===(t=this.fundraisingPage)||void 0===t?void 0:t.elementKey)||"",type:(null===(n=this.externalConfig.launcher)||void 0===n?void 0:n.elementType)||(null===(i=this.fundraisingPage)||void 0===i?void 0:i.elementType)||ie.DIRECT_LINK,reminderKey:(null===(s=this.externalConfig.launcher)||void 0===s?void 0:s.elementReminderKey)||"",locale:null===(a=this.externalConfig.launcher)||void 0===a?void 0:a.elementLocale}}get hasExternalAmount(){var e;return!(!this.queryParams.amount&&"number"!=typeof(null===(e=this.externalConfig.checkoutData)||void 0===e?void 0:e.amount)&&!this.externalConfig.checkoutIntent)}get hasExternalFrequency(){var e,t,n;return!!this.queryParams.recurring||!!(null===(e=this.externalConfig.checkoutData)||void 0===e?void 0:e.recurring)||!!(null===(n=null===(t=this.externalConfig.checkoutIntent)||void 0===t?void 0:t.donation)||void 0===n?void 0:n.frequency)}get externalFrequency(){var e,t,n;return this.queryParams.recurring||(null===(e=this.externalConfig.checkoutData)||void 0===e?void 0:e.recurring)||(null===(n=null===(t=this.externalConfig.checkoutIntent)||void 0===t?void 0:t.donation)||void 0===n?void 0:n.frequency)||null}get campaign(){return this._campaign}get campaignPage(){return this.campaign.config.campaignPage||Re}get company(){return this._company}get user(){return this._user}get cryptoCurrencies(){return this._cryptoCurrencies}get currencies(){return this._currencies}get externalConfig(){return this._externalConfig}get mergedCustomFields(){return this.getMergedCustomFields()}get enabledFrequencies(){return ge.getEnabledFrequencies(this.campaign.config.frequencies)}get defaultAmounts(){const e=this.campaign.config.frequencies,t={};return this.frequencies.forEach((n=>{t[n]=e[n].defaultAmount})),t}get defaultAmountOptions(){const e=this.campaign.config.frequencies,t={};return this.frequencies.forEach((n=>{t[n]=e[n].amountOptions})),t}get enabledFlows(){return{[fe.MONEY]:this.campaign.config.donationTypes.money.enabled,[fe.CRYPTO]:this.campaign.config.donationTypes.crypto.enabled&&!!this.company.cryptoProvider,[fe.STOCK]:!1}}get preselectDesignation(){return!Object.values(ye).includes(this.campaign.key)}get isIOSFirefox(){return function(e){var t,n,i;return"string"==typeof(null===(t=e.navigator)||void 0===t?void 0:t.userAgent)&&!!(null===(i=null===(n=e.navigator)||void 0===n?void 0:n.userAgent)||void 0===i?void 0:i.match("FxiOS"))}(this.window)}get aiConfig(){return this._aiConfig}get commentSettings(){return Object.assign(Object.assign({},Me),this._commentSettings)}get preDonationUpsellSettings(){return Object.assign(Object.assign({},Le),this._preDonationUpsellSettings)}get paymentOptionsSettings(){return Object.assign(Object.assign({},Ue),this._paymentOptionsSettings)}get remindMeLaterSettings(){return Object.assign(Object.assign({},Fe),this._remindMeLaterSettings)}mergePreDonationUpsellSettings(e){this._preDonationUpsellSettings=Object.assign(Object.assign({},this._preDonationUpsellSettings),e)}getAskPageConfig(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return this._getAskPageConfig(e)}getInitialCustomFields(){var e;const t=this.getCustomFieldsHash(this.campaign.customFields||[],!0),n=((null===(e=this.externalConfig.launcher)||void 0===e?void 0:e.customFields)||[]).filter((e=>void 0!==t[e.name])),i=this.getCustomFieldsHash(n),s=Object.assign(t,i);return Object.keys(s).map((e=>{var t;return{name:e,value:Array.isArray(s[e])?null===(t=s[e])||void 0===t?void 0:t[0]:s[e]}}))}get frequencies(){const e=this.campaign.config.frequencies,t=[];for(const n of Object.keys(e))t.push(n);return t}getMergedCustomFields(){var e,t,n,i,s,a;const r=this.getCustomFieldsHash(this.campaign.customFields||[]),o=this.getCustomFieldsHash((null===(n=null===(t=null===(e=this.externalConfig.checkoutData)||void 0===e?void 0:e.intent)||void 0===t?void 0:t.checkoutSettings)||void 0===n?void 0:n.customFields)||[]),c=this.getCustomFieldsHash((null===(i=this.externalConfig.launcher)||void 0===i?void 0:i.customFields)||[]);let l=this.launcherParams;void 0!==(null===(s=this.fundraisingPage)||void 0===s?void 0:s.customFields)&&(null===(a=this.fundraisingPage)||void 0===a?void 0:a.customFields.length)>0&&(l=this.getCustomFieldsHash(this.fundraisingPage.customFields));const u=window.location.href,d=(0,Be.UA)(u),h=Object.assign(r,c,l,o,d);return Object.keys(h).map((e=>{var t;return{name:e,value:Array.isArray(h[e])?null===(t=h[e])||void 0===t?void 0:t[0]:h[e]}})).filter((e=>e.value))}getFundraisingPage(e,t){if(e&&e.key&&e.openWidget===t)return e}getCustomFieldsHash(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const n={};return e.forEach((e=>{e.name&&(t||e.value)&&(n[e.name]=e.value)})),n}getResolvedCompany(e){if(e.key!==this.campaign.company)throw new Error("Invalid resolved company");if(e.useParentPaymentAccounts){if(!e.parentCompanyConfig)throw new Error("Widget's Parent Company not found");return Object.assign(Object.assign({},e),{stripeFee:e.parentCompanyConfig.stripeFee,applicationFees:e.parentCompanyConfig.applicationFees,coverFees:e.parentCompanyConfig.coverFees})}return Object.assign({},e)}cloneWidget(e){const t=He.overrideWidgetGoalsConfig(e.config);return Ee(Object.assign(Object.assign({},e),{config:t}))}getAskPageConfigGetter(e,t,n){return i=>function(e,t,n,i){let{isRetina:s,checkoutType:a}=i;const r=function(e,t){var n,i;return Boolean(e.ask.show||(null===(i=null===(n=t.checkoutData)||void 0===n?void 0:n.ask)||void 0===i?void 0:i.show))}(e,t),o=n.name,c=function(e){return e===Se.MODAL?Ie:ke}(a),l=c.getAskTitle(e,t),u=c.getAskDescription(e,t),d=c.getLinks(e),h=c.getLogoImageURL(e,s),m=c.getAskMainImageURL(e,s);return{text:u,title:l,companyName:o,links:d,logoImage:h||c.getCompanyImageURL(n,s),fallbackCompanyLogo:c.getCompanyImageURL(n,s),mainImage:m,logoAltText:c.getLogoAltText(e)||c.getCompanyLogoImageAltText(n),mainImageAltText:c.getMainImageAltText(e),show:r,showLinks:!!d.length}}(e.config,t,n,{isRetina:i,checkoutType:this.checkoutType})}getExternalConfig(e,t){var n;const i=Object.assign(Object.assign({},e),{checkoutData:Object.assign({},D()(e.checkoutData,["ask","designationId"]))}),s=t.config.goals.map((e=>e.key));return(null===(n=e.checkoutData)||void 0===n?void 0:n.designationId)&&s.includes(e.checkoutData.designationId)?Ee(Object.assign(Object.assign({},i),{checkoutData:Object.assign(Object.assign({},i.checkoutData),{designationId:e.checkoutData.designationId})})):Ee(i)}}function qe(e){let t;try{t=new URL(e)}catch(e){return!1}return"http:"===t.protocol||"https:"===t.protocol}const Ge=99999900;class Ve{static format(e){return Object.assign(Object.assign({},e),{recurring:Ve.parseRecurring(e.recurring),amount:Ve.parseAmount(e.amount),successUrl:Ve.parseURL(e.successUrl)})}static parseAmount(e){return null==e||e<0?null:e>Ge?Ge:e}static parseRecurring(e){return e&&Object.values(se).includes(e)?e:null}static parseURL(e){return e&&qe(e)?e.trim():void 0}}var Ye,Ke=n(4601),ze=JSON.parse('{"GD":1.518,"CH":1.002,"SL":6145.659,"HU":180.67,"TW":13.811,"BB":2.292,"CI":240.968,"TN":1.04,"IT":0.645,"BJ":199.429,"ID":4764.324,"CV":45.652,"KN":1.647,"LA":4300.605,"UG":1348.76,"AD":0.602,"BI":1088.953,"ZA":7.163,"FR":0.728,"LY":1.272,"MX":9.998,"GA":291.061,"MK":19.739,"CN":3.759,"YE":416.043,"SB":7.042,"UZ":3115.457,"EG":7.3,"SN":244.407,"LK":55.699,"BD":32.913,"PE":1.855,"SG":0.891,"TR":10.819,"AF":21.476,"AW":1.244,"GB":0.682,"ZM":7.136,"FI":0.84,"NE":243.4,"GW":201.836,"AZ":0.672,"DJ":96.481,"MU":17.826,"CO":1612.196,"GR":0.54,"HR":0.466,"MA":3.763,"DZ":47.837,"NL":0.797,"SD":685.607,"FJ":0.827,"NP":36.943,"PR":0.86,"GE":0.942,"PK":65.169,"BW":5.349,"LB":949.837,"PG":2.735,"DO":25.147,"QA":2.639,"MG":1273.551,"IN":22.401,"ME":0.395,"SZ":6.589,"PY":2756.047,"SV":0.441,"UA":15.017,"NA":7.61,"AE":2.045,"BG":0.854,"DE":0.749,"KH":1361.159,"IQ":651.136,"SE":8.817,"KG":26.186,"RU":33.76,"MY":1.581,"ST":16.776,"CY":0.587,"CA":1.22,"MW":497.659,"SA":1.762,"BA":0.731,"ET":27.511,"ES":0.607,"SI":0.592,"OM":0.202,"MO":4.725,"SM":0.633,"LS":6.571,"MH":1.063,"IS":156.646,"LU":0.848,"AR":528.72,"NR":1.748,"DM":1.671,"CR":325.707,"AU":1.536,"TH":11.283,"HT":94.465,"TV":1.533,"HN":11.634,"GQ":222.86,"LC":1.931,"BY":0.973,"LV":0.538,"PW":1.003,"PH":19.073,"DK":6.131,"CM":225.324,"GN":4357.8,"BH":0.173,"SR":13.715,"CD":1250.999,"SO":0.376,"CZ":13.796,"VU":145.822,"TG":218.558,"KE":46.406,"RW":395.264,"EE":0.655,"RO":2.096,"TT":4.102,"GY":69.187,"TL":0.386,"VN":7209.154,"UY":30.433,"HK":5.573,"AT":0.791,"AG":2.03,"TM":2.202,"MZ":25.481,"PA":0.432,"FM":1.091,"IE":0.735,"NO":12.091,"CF":291.636,"BF":199.112,"ER":14.319,"TZ":859.187,"KR":765.841,"JO":0.269,"MR":12.024,"LT":0.521,"SK":0.546,"AO":304.472,"KZ":196.208,"MD":7.622,"ML":201.437,"AM":162.622,"WS":1.977,"JP":90.821,"BO":2.575,"CL":475.267,"US":1,"VC":1.428,"SC":7.158,"GT":4.039,"EC":0.453,"TJ":2.413,"MT":0.572,"GM":21.358,"NG":205.316,"BS":0.758,"KW":0.187,"MV":7.335,"SS":1546.212,"IR":115674.041,"AL":41.771,"BR":2.725,"RS":48.235,"BZ":1.267,"MM":554.135,"BT":20.862,"VE":26.701,"LR":0.454,"JM":84.375,"PL":2.029,"BN":0.61,"KM":176.299,"TO":1.875,"KI":1.022,"GH":4.353,"TD":232.671,"ZW":16556.168,"MN":1359.898,"PT":0.571,"CG":311.582,"BE":0.756,"IL":3.527,"NZ":1.477,"NI":12.553}'),$e=n(1217);class We{constructor(e,t){this.rates=e,this.sentry=t}getDigits(e){return this.currencyData[e]?this.currencyData[e].digits:2}getRate(e){return this.rates[e]||1}setData(e,t,n){this._currencyData=e,t&&(this._countriesData=t),n&&(this._pppexData=n)}convertBase(e,t,n){let i=arguments.length>3&&void 0!==arguments[3]&&arguments[3],s=arguments.length>4?arguments[4]:void 0;var a;if(!Number.isInteger(e)){const e=new Error("amount should be a finite number");return null===(a=this.sentry)||void 0===a||a.captureException(e),console.error(e),0}if(0===e)return 0;if(t===n)return e;const r=this.currencyData[t].type===$e.Z.FIAT,o=this.currencyData[n].type===$e.Z.FIAT,c=this.getDigits(t),l=this.getDigits(n),u=this.calcRate(t,n,r,o);return i&&s&&r&&o&&(e=this.toAiAmount(e,s)),Math.ceil(e/Math.pow(10,c)*u*Math.pow(10,l))}calcRate(e,t,n,i){let s;const a=this.getRate(e),r=this.getRate(t);return s=n&&i?r/a:n&&!i?1/(a*r):!n&&i?a*r:a/r,s}toAiAmount(e,t){const n=this.pppexData[t]||1,i=this.rates[this.getCountryCurrency(t)]||1;return 1===n||1===i?e:e*n/i}getCountryCurrency(e){return this.countriesData[e]?this.countriesData[e][0]:"USD"}get currencyData(){if(!this._currencyData)throw new Error("Currency data was not set");return this._currencyData}get countriesData(){if(!this._countriesData)throw new Error("Countries data was not set");return this._countriesData}get pppexData(){if(!this._pppexData)throw new Error("Pppex data was not set");return this._pppexData}}class Xe extends We{getCryptoCurrency(e){const t=this.currencyData[e];if(!t)throw new Error(`Currency ${e} was not found`);if(t.type!==$e.Z.CRYPTO)throw new Error(`Currency ${e} is not a crypto`);return t}getSymbol(e){return this.currencyData[e]?this.currencyData[e].symbol:""}getName(e){return this.currencyData[e]?this.currencyData[e].name:""}getRate(e){return this.rates[e]||1}convert(e,t,n){let i=arguments.length>3&&void 0!==arguments[3]&&arguments[3],s=arguments.length>4?arguments[4]:void 0;return this.convertBase(e,t,n,i,s)}round(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;const n=Math.ceil(Math.log10(e+1))-t,i=5*Math.pow(10,Math.max(n-3,0)+t);return Math.ceil(e/i)*i}toFloatUnformattedStr(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:2;const i=this.getDigits(t);return(e/Math.pow(10,i)).toFixed(n)}toFloat(e,t){const n=this.getDigits(t);return e/Math.pow(10,n)}fromFloat(e,t){const n=this.getDigits(t);return Math.round(e*Math.pow(10,n))}ceil(e,t){return this.fromFloat(Math.ceil(this.toFloat(e,t)),t)}getMinAmount(e){return this.convert(70,"USD",e)}toInt(e,t){if(!Number.isFinite(e))throw new Error("amount should be a finite number");const n=this.getDigits(t);return e*Math.pow(10,n)}getCurrencyCodesBySource(e){return Object.keys(this.currencyData).filter((t=>this.currencyData[t].sources.includes(e)))}isCrypto(e){return this.currencyData[e].type===$e.Z.CRYPTO}}class Qe extends Xe{constructor(e,t,n){super(t,n),this.currencyDataLoader=e,this.rates=t,this.sentry=n}loadFiat(e){const t=this.currencyDataLoader.loadFiat(e),n=Ke,i=ze,s=Object.assign(Object.assign({},t),this._currencyData);this.setData(s,n,i)}loadCrypto(){return(0,l.sH)(this,void 0,void 0,(function*(){const e=yield this.currencyDataLoader.loadCrypto(),t=Object.assign(Object.assign({},e),this._currencyData);this.setData(t)}))}convertFeeCurrency(e,t,n,i){const s=Math.abs(i||1);return this.convertBase(e,t,n)*s}}!function(e){e.PREFIX="prefix",e.POSTFIX="postfix"}(Ye||(Ye={}));var Ze=n(4850);class Je extends Ze.${getCryptoCurrencies(){return(0,l.sH)(this,void 0,void 0,(function*(){return(yield Promise.resolve().then(n.t.bind(n,472,19))).default}))}}function et(e){return!!e.campaign.config.donationTypes.crypto.enabled||e.checkoutType===Se.PAGE&&e.showDonorImpactSection}function tt(e){return!!e&&function(e){return/^(([a-zA-Z0-9-_+.']+(\.[a-zA-Z0-9-_+.']+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(String(e))}(e)}var nt=n(3954);n(3393);class it{static format(e){const t=it.parseAmount(e.amount);return{firstName:e.firstName?e.firstName.trim():null,lastName:e.lastName?e.lastName.trim():null,email:it.parseEmail(e.email),amount:t,currency:e.currency?e.currency.trim():null,modifyAmount:e.modifyAmount?"no"!==e.modifyAmount:null,recurring:it.parseRecurring(e.recurring),designationId:e.designationId||null,modifyDesignation:e.modifyDesignation?"no"!==e.modifyDesignation:null,tributeHonoree:e.tributeHonoree?e.tributeHonoree.trim():null,tributeSelected:e.tributeSelected?"yes"===e.tributeSelected:null,successUrl:it.parseURL(e.successUrl),member:e.member?e.member.trim():null,fundraiseupLivemode:e.fundraiseupLivemode?"no"!==e.fundraiseupLivemode:null,embedClientId:it.parseEmbedClientId(e.clientId),utm:{source:e.utm_source||null,campaign:e.utm_campaign||null,medium:e.utm_medium||null,content:e.utm_content||null,term:e.utm_term||null}}}static parseURL(e){return e&&qe(e)?e.trim():null}static parseEmail(e){return e&&tt(e)?e.trim():null}static parseRecurring(e){return Object.values(se).includes(e)?e:null}static parseEmbedClientId(e){return(t=e)&&20===t.length&&!/[^\d]/.test(t)?e:null;var t}static parseAmount(e){if(!e)return null;const t=Number.parseFloat(e);return Number.isNaN(t)?null:t>999999?99999900:t>0?t:null}}class st{}class at extends st{isEnabled(e,t){return t.showMailing?e>=t.showMailingFromAmount:t.showMailing}isRequired(e,t){return t.showMailing&&t.mailingRequired?e>=t.mailingRequiredFromAmount:!!t.showMailing&&t.mailingRequired}}class rt extends st{isEnabled(){return!0}isRequired(){return!0}}var ot;!function(e){e.DONOR_PORTAL_SUBSCRIPTION_EDITOR="donorPortalSubscriptionEditor",e.DASHBOARD_SUBSCRIPTION_EDITOR="dashboardSubscriptionEditor",e.WIDGET="widget",e.VIRTUAL_TERMINAL="virtualTerminal"}(ot||(ot={}));class ct extends st{constructor(e){super(),this.mailingAddressCheckoutScreenLogic=e}isEnabled(e,t){return!!this.mailingAddressCheckoutScreenLogic.isEnabled(e,t)||!!this.isRequiredByPaymentMethod(t)||!!this.isRequiredByGiftAid(t)}isRequired(e,t){return!!this.mailingAddressCheckoutScreenLogic.isRequired(e,t)||!!this.isRequiredByPaymentMethod(t)||!!this.isRequiredByGiftAid(t)}isRequiredByPaymentMethod(e){return!!e.paymentMethod&&e.paymentMethodAvailabilityManagerRepository.getManager(e.paymentMethod,ot.WIDGET).isRequired("address",{ibanCountry:e.paymentMethodCountry})}isRequiredByGiftAid(e){return e.isGiftAidAccepted}}function lt(e){return e.isException&&e.country===u.tg.CANADA?new rt:new at}const ut=[u.tg.CANADA,u.tg.GERMANY];class dt{constructor(e){this.widget=e.widget}}class ht extends dt{get currency(){return this.widget.defaultCurrency}}class mt extends dt{get currency(){return"EUR"}}class pt extends st{constructor(e,t){super(),this.checkoutScreenLogic=e,this.params=t}isEnabled(e,t){return this.checkoutScreenLogic.isEnabled(e,t)||this.mailingAddressForceRequired(t)}isRequired(e,t){return this.checkoutScreenLogic.isRequired(e,t)||this.mailingAddressForceRequired(t)}mailingAddressForceRequired(e){return e.paymentMethodAvailabilityManagerRepository.getManager(e.paymentMethod,ot.VIRTUAL_TERMINAL).isRequired("address",{ibanCountry:e.paymentMethodCountry})}}const gt={showMailing:!0,showMailingFromAmount:0,mailingRequired:!0,mailingRequiredFromAmount:3e4},yt={showMailing:!0,showMailingFromAmount:0,mailingRequired:!0,mailingRequiredFromAmount:0},ft={showMailing:!1,showMailingFromAmount:0,mailingRequired:!1,mailingRequiredFromAmount:0};class St{}class At extends St{getDefaults(){return ft}}class Et extends St{getDefaults(){return yt}}class Ct extends St{getDefaults(){return gt}}class vt{constructor(e){this.validator=e,this.legalText=""}getValidAmounts(e,t){return this.validator.isValid(e).isValid?{showMailingFromAmount:e.showMailingFromAmount,mailingRequiredFromAmount:e.mailingRequiredFromAmount}:{showMailingFromAmount:t,mailingRequiredFromAmount:t}}}class Nt extends vt{constructor(){super(...arguments),this.shouldHideEditor=!1,this.showMailingShouldAlwaysEnabled=!1,this.mailingRequiredShouldAlwaysEnabled=!1}}class bt extends vt{constructor(){super(...arguments),this.shouldHideEditor=!0,this.showMailingShouldAlwaysEnabled=!1,this.mailingRequiredShouldAlwaysEnabled=!1}}const Pt=3e4;class Dt extends vt{constructor(){super(...arguments),this.shouldHideEditor=!1,this.showMailingShouldAlwaysEnabled=!0,this.mailingRequiredShouldAlwaysEnabled=!0,this.legalText="We recommend leaving address optional if possible; requiring it prior to checkout may cause you to lose donations. Due to German receipt regulations, an address must be required on donations over 300 euros."}getValidAmounts(e,t){const n=super.getValidAmounts(e,t);let i=n.showMailingFromAmount,s=n.mailingRequiredFromAmount;const a=this.validator.isValid({showMailingFromAmount:n.showMailingFromAmount,mailingRequiredFromAmount:n.mailingRequiredFromAmount,showMailing:e.showMailing,mailingRequired:e.mailingRequired}),r=a.meta.isShowMailingFromAmountValid,o=a.meta.isMailingRequiredFromAmountValid;return e.showMailing&&!r&&(i=Dt.MAX_SHOW_MAILING_FROM_AMOUNT),e.mailingRequired&&!o&&(s=Dt.MAX_MAILING_REQUIRED_FROM_AMOUNT),{showMailingFromAmount:i,mailingRequiredFromAmount:s}}}Dt.MAX_SHOW_MAILING_FROM_AMOUNT=Pt,Dt.MAX_MAILING_REQUIRED_FROM_AMOUNT=3e4;class _t{isValid(e){if(e.showMailing&&e.mailingRequired){const t=e.showMailingFromAmount<=e.mailingRequiredFromAmount;return{isValid:t,meta:{isMailingRequiredFromAmountValid:t,isShowMailingFromAmountValid:t}}}return{isValid:!0,meta:{isMailingRequiredFromAmountValid:!0,isShowMailingFromAmountValid:!0}}}}class Tt extends _t{isValid(e){const t=super.isValid(e),n=e.showMailingFromAmount<=Pt,i=e.mailingRequiredFromAmount<=Pt;return{isValid:t.isValid&&i&&n,meta:{isMailingRequiredFromAmountValid:i,isShowMailingFromAmountValid:n}}}}class Ot{constructor(e){var t;this.company=Ot.resolveCompanyConfig(e),this.isDevelopmentMode=null!==(t=e.isDevelopmentMode)&&void 0!==t&&t}get isExceptionLogic(){return this.company.nonProfit&&ut.includes(this.company.country)}static resolveCompanyConfig(e){return e.company.useParentPaymentAccounts&&e.parentCompany?{nonProfit:e.parentCompany.nonProfit,country:e.parentCompany.country}:{nonProfit:e.company.nonProfit,country:e.company.country}}getWidgetDefaultsLogic(){return function(e){if(e.isException)switch(e.country){case u.tg.GERMANY:return new Ct;case u.tg.CANADA:return new Et;default:return new At}return new At}({country:this.company.country,isException:this.isExceptionLogic,isDevelopmentMode:this.isDevelopmentMode})}getCurrencyLogic(e){return function(e){return e.isException&&e.country===u.tg.GERMANY?new mt(e):new ht(e)}({country:this.company.country,isException:this.isExceptionLogic,isDevelopmentMode:this.isDevelopmentMode,widget:e.widget})}getWidgetEditorLogic(){return function(e){if(e.isException)switch(e.country){case u.tg.GERMANY:return new Dt(e.validator);case u.tg.CANADA:return new bt(e.validator);default:return new Nt(e.validator)}return new Nt(e.validator)}({country:this.company.country,isException:this.isExceptionLogic,isDevelopmentMode:this.isDevelopmentMode,validator:this.getValidator()})}getCheckoutScreenLogic(){return function(e){const t=lt(e);return new ct(t)}({country:this.company.country,isException:this.isExceptionLogic,isDevelopmentMode:this.isDevelopmentMode})}getVirtualTerminalLogic(){return function(e){const t=lt(e);return new pt(t,e)}({country:this.company.country,isException:this.isExceptionLogic,isDevelopmentMode:this.isDevelopmentMode,nonProfit:this.company.nonProfit})}getValidator(){return(e={country:this.company.country,isException:this.isExceptionLogic,isDevelopmentMode:this.isDevelopmentMode}).isException&&e.country===u.tg.GERMANY?new Tt:new _t;var e}}class xt{constructor(e,t,n,i){this.createFundraiseupAddressProvider=e,this.sentry=t,this.requestService=n,this.config=i}getPlaces(e){return(0,l.sH)(this,void 0,void 0,(function*(){const{customData:t,input:n,sessionToken:i,restrictCountries:s}=e,a=this.createFundraiseupAddressProvider(this.sentry,this.config);return""===n?[]:yield a.getPlaces({customData:t,input:n,sessionToken:i,restrictCountries:s})}))}shouldFindSubplaces(e){const{place:t,restrictCountries:n}=e;return this.createFundraiseupAddressProvider(this.sentry,this.config).shouldFindSubplaces({place:t,restrictCountries:n})}getSubplaces(e){const{place:t,input:n,sessionToken:i,restrictCountries:s}=e;return this.createFundraiseupAddressProvider(this.sentry,this.config).getSubplaces({place:t,input:n,sessionToken:i,restrictCountries:s})}getDetails(e){const{customData:t,place:n,sessionToken:i,restrictCountries:s}=e;return this.createFundraiseupAddressProvider(this.sentry,this.config).getDetails({customData:t,place:n,sessionToken:i,restrictCountries:s})}}var kt,It=n(6181),wt=n(3266);!function(e){e.PREFIX="prefix",e.POSTFIX="postfix"}(kt||(kt={}));const Rt={[w.D.EN_US]:kt.PREFIX,[w.D.EN_GB]:kt.PREFIX,[w.D.EN_CA]:kt.PREFIX,[w.D.FR_CA]:kt.POSTFIX,[w.D.ES]:kt.POSTFIX,[w.D.ES_US]:kt.PREFIX,[w.D.NL]:kt.PREFIX,[w.D.NO]:kt.PREFIX,[w.D.DE]:kt.POSTFIX,[w.D.FI_FI]:kt.POSTFIX,[w.D.FR_FR]:kt.POSTFIX,[w.D.SV]:kt.POSTFIX,[w.D.IT]:kt.POSTFIX,[w.D.PT_PT]:kt.POSTFIX,[w.D.PT_BR]:kt.PREFIX,[w.D.AR_001]:kt.PREFIX,[w.D.ZH_CN]:kt.PREFIX,[w.D.ZH_TW]:kt.PREFIX,[w.D.JA]:kt.PREFIX,[w.D.KO]:kt.PREFIX,[w.D.HU]:kt.POSTFIX,[w.D.DA]:kt.POSTFIX,[w.D.RU_RU]:kt.POSTFIX,[w.D.PL_PL]:kt.POSTFIX};class Mt{constructor(){this._currenciesData=null,this.notUseLetterSymbol=!1,this.currenciesExtraData=new Map}setData(e){if(this._currenciesData=e,!this._currenciesData)return;const t=this._currenciesData;Object.keys(t).forEach((e=>{this.currenciesExtraData.set(e,{symbolHasLetters:/[a-zA-Z]/.test(t[e].symbol)})}))}formatCurrency(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"USD",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"full",i=arguments.length>3&&void 0!==arguments[3]&&arguments[3],s=arguments.length>4&&void 0!==arguments[4]&&arguments[4],a=arguments.length>5?arguments[5]:void 0,r=arguments.length>6&&void 0!==arguments[6]?arguments[6]:"narrowSymbol";const o=this.currenciesData[t];e=(e||0)/Math.pow(10,o.digits);const c=this.buildOptions({amount:e,display:n,currency:t,displayCurrency:r,datum:o,withoutPrefix:i,withoutSuffix:s});e<0&&0===c.intlOptions.maximumFractionDigits&&(e=0),a===w.D.KO&&e>1e4&&(c.intlOptions.minimumFractionDigits=0,c.intlOptions.maximumFractionDigits=1);const l=this.currenciesExtraData.get(o.code);return(null==l?void 0:l.symbolHasLetters)&&this.notUseLetterSymbol&&(c.intlOptions.currencyDisplay="code"),Mt.castIntl({amount:e,locale:a,options:c,datum:o})}getCurrencyFormat(e){return{decimalSeparator:Intl.NumberFormat(e).format(1.1).replace(/\d/g,""),groupSeparator:Intl.NumberFormat(e).format(1e5).replace(/\d/g,"")}}static castIntl(e){let t,{amount:n,locale:i,options:s,datum:a}=e;try{t=Intl.NumberFormat(i,s.intlOptions).format(n)}catch(e){if(!Mt.isUnsupportedBrowserError(e,s))throw e;s.intlOptions.currencyDisplay=It.Uk,t=Intl.NumberFormat(i,s.intlOptions).format(n)}return a.symbol&&t.includes(a.code)&&"code"!==s.intlOptions.currencyDisplay&&(t=t.replace(a.code,a.symbol)),s.internalOptions.pushSuffix&&(t+=`${a.code}`),i===w.D.EN_CA&&"USD"===a.code&&"narrowSymbol"===s.intlOptions.currencyDisplay&&(t=t.replace("US$","$")),t}formatSymbol(e,t,n){const i=Mt.currencySymbolPosition(n);return i===kt.PREFIX&&t===Ye.PREFIX||i===kt.POSTFIX&&t===Ye.POSTFIX?e:""}get currenciesData(){if(!this._currenciesData)throw new Error("Currencies data was not set");return this._currenciesData}buildOptions(e){let{amount:t,display:n,currency:i,datum:s,withoutPrefix:a,withoutSuffix:r,displayCurrency:o="narrowSymbol"}=e;const c=s.type===$e.Z.CRYPTO,l=c?void 0:s.symbol,u={style:l?"currency":"decimal",currency:c?void 0:i,notation:"standard",currencyDisplay:o,minimumFractionDigits:0,maximumFractionDigits:0,numberingSystem:"latn"},d={pushSuffix:!l};switch(n){case"short":{const e=this.shortFormatNotation(t),n=this.shortFormatFractionDigits(t);"compact"===e&&(u.minimumFractionDigits=0,u.maximumFractionDigits=n),u.notation=e;break}case"shortlabel":{const e=this.shortFormatNotation(t),n=this.shortFormatFractionDigits(t);"compact"===e&&(u.minimumFractionDigits=0,u.maximumFractionDigits=n),u.notation=e,d.pushSuffix=!1;break}case"round":break;case"roundstrict":throw new Error("Used only in non-localized parts, not rewritten at the moment");case"roundlabel":d.pushSuffix=!1;break;case"full":c&&(u.style="decimal",d.pushSuffix=!0),u.maximumFractionDigits=s.digits,u.minimumFractionDigits=c?It.lt:s.digits;break;case"fullstrict":c&&(u.style="decimal"),d.pushSuffix=!0,u.maximumFractionDigits=s.digits,u.minimumFractionDigits=c?It.lt:s.digits;break;case"floatcents":Math.round(t)!==t?(u.maximumFractionDigits=s.digits,u.minimumFractionDigits=s.digits):(u.maximumFractionDigits=0,u.minimumFractionDigits=0);break;case"trimzeroes":c?(u.maximumFractionDigits=s.digits,u.minimumFractionDigits=0):Math.round(t)!==t?(u.maximumFractionDigits=s.digits,u.minimumFractionDigits=s.digits):(u.maximumFractionDigits=0,u.minimumFractionDigits=0);break;case"fulltrimzeroes":d.pushSuffix=!0,c?(u.maximumFractionDigits=s.digits,u.minimumFractionDigits=0,u.style="decimal"):Math.round(t)!==t?(u.maximumFractionDigits=s.digits,u.minimumFractionDigits=s.digits):(u.maximumFractionDigits=0,u.minimumFractionDigits=0);break;case"scopeFloatCents":throw new Error("Unused, not rewritten at the moment");default:throw new Error(`Unknown display type ${n}`)}return a&&(u.style="decimal"),(r||(0,wt.f)(i))&&(d.pushSuffix=!1),{intlOptions:u,internalOptions:d}}shortFormatNotation(e){return Math.abs(e)<1e4?"standard":"compact"}shortFormatFractionDigits(e){const t=Math.abs(e),n=this.calcDivisor(t);let i=Mt.calcDigits(t,n);return t>=Mt.TEN_THOUSAND&&t<Mt.HUNDRED_THOUSAND&&(i=1),t%n==0&&(i=0),i}calcDivisor(e){let t=1;return e>=Mt.MILLION?t=Mt.TEN_MILLIONS:e>=Mt.TEN_THOUSAND&&(t=Mt.THOUSAND),t}static calcDigits(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;const n=2-Math.ceil(Math.log10(e/t));return Math.max(0,n)}static currencySymbolPosition(e){return Rt[e]}static isUnsupportedBrowserError(e,t){const n="narrowSymbol"===t.intlOptions.currencyDisplay,i=e.toString()===It.yb;return n&&i}}Mt.THOUSAND=1e3,Mt.TEN_THOUSAND=1e4,Mt.HUNDRED_THOUSAND=1e5,Mt.MILLION=1e6,Mt.TEN_MILLIONS=1e7;class Lt extends Mt{constructor(e){super(),this.currencyDataLoader=e,this.loadFiat()}loadCrypto(){return(0,l.sH)(this,void 0,void 0,(function*(){const e=yield this.currencyDataLoader.loadCrypto(),t=Object.assign(Object.assign({},e),this._currenciesData);this.setData(t)}))}loadFiat(){const e=this.currencyDataLoader.loadFiat(),t=Object.assign(Object.assign({},e),this._currenciesData);this.setData(t)}}var Ut,Ft,jt;!function(e){e.SESSION="fundraiseup_session",e.FUNC="fundraiseup_func",e.PERFORMANCE="fundraiseup_stat",e.CONSENT="fundraiseup_consent",e.MARKETING="fundraiseup_mark",e.CID="fundraiseup_cid",e.DEBUG="fundraiseup_debug",e.EXPERIMENTS="fundraiseup_experiments",e.FUN_AB_STORAGE="fundraiseup_ab_test"}(Ut||(Ut={})),function(e){e.DEVELOPMENT="development",e.PRODUCTION="production",e.STAGING="staging",e.TESTING="testing"}(Ft||(Ft={})),function(e){e.STRING="string",e.OBJECT="object"}(jt||(jt={}));var Bt,Ht=n(3478);function qt(){const e=[],t=window.location.hostname.split(".");let n=t.splice(-1).join();for(let i=t.length;i>0;i--)n=t.splice(-1).join()+"."+n,e.push(n);return e}class Gt{constructor(e,t){this.field=e,this.storage=t}get(){return this.storage.get(this.field)}set(e,t){this.storage.set(this.field,e,t)}remove(e){this.storage.remove(this.field,e)}}!function(e){e.STRING="string",e.OBJECT="object"}(Bt||(Bt={}));var Vt=n(641);const Yt=class{static isFailure(e){return"Failure"===e._tag}static isSuccess(e){return"Success"===e._tag}static fail(e){return{_tag:"Failure",failureResult:e}}static success(e){return{_tag:"Success",successResult:e}}constructor(){throw new Error("Either can not be instantiated")}},Kt={withCredentials:!0,headers:{Accept:"application/json","Content-Type":"application/json"}};class zt{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0;this.baseURL=e,this.request=t}sendRequest(e){const t=Object.assign(Object.assign({},Kt),e);return t.url=this.baseURL+t.url,this.request(t).then((e=>{let{data:t,valid:n}=e;return n?Yt.success(t):Yt.fail(t)}))}get(e){return this.sendRequest(Object.assign(Object.assign({},e),{method:"GET"}))}post(e){return this.sendRequest(Object.assign(Object.assign({},e),{method:"POST"}))}}function $t(){return new zt(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",Vt.Em)}var Wt=n(7601),Xt=n.n(Wt);class Qt{constructor(e){this.currencyService=e,this.numbers=this.generateNumbers()}beautify(e,t,n){const i=Array.isArray(e);let s=Xt()(e).map((e=>this.currencyService.toFloat(e,t)));const a=this.sortAsc(s);s=a.list;const r=a.positions;let o=this.findNearestPosition(s[0],0,this.numbers.length-s.length);if(n){const e=this.currencyService.toFloat(n,t),i=this.numbers[this.numbers.length-1];for(;e&&this.numbers[o]<e&&e<i;)o++}const c=this.getPositionsArray(o,s.length);for(let e=c.length-1;e>0;e--){const t=this.findNearestPosition(s[e],c[e-1]+1,c[e+1]-1);c[e]=t||c[e]}return s=this.restoreSort(c.map((e=>this.numbers[e])),r).map((e=>this.currencyService.fromFloat(e,t))),i?s:s[0]}generateNumbers(){const e=[1,2,3,4,5,6,7,8,9,10,12,15,20,25,30,35,40,45,50,55,60,65,70,75,80,85,90,100,120,130,140,150,160,170,180,190,200,250,300,350,400,450,500,600,650,700,750,800,900],t=[10,12,15,20,25,30,35,40,50,60,70,80,90];for(let n=100;n<1e7;n*=10)t.forEach((t=>e.push(t*n)));return e}sortAsc(e){let t=0;const n=e.map((e=>({val:e,pos:t++}))).sort(((e,t)=>e.val-t.val));return{list:n.map((e=>e.val)),positions:n.map((e=>e.pos))}}restoreSort(e,t){let n=0;return t.map((t=>({pos:t,val:e[n++]}))).sort(((e,t)=>e.pos-t.pos)).map((e=>e.val))}findNearestPosition(e,t,n){if(t=t||0,n=n||this.numbers.length-1,e>=this.numbers[n])return n;for(let i=n;i>t;i--)if(this.numbers[i-1]<=e&&e<=this.numbers[i])return e-this.numbers[i-1]>=this.numbers[i]-e?i:i-1;return 0}getPositionsArray(e,t){const n=[];for(let i=e;i<e+t;i++)n.push(i);return n}}class Zt{constructor(e){this.window=e}subscribeOnUserInteraction(e){const t=function(e,t){let n=!1;return t=>{n||(e(t),n=!0,setTimeout((()=>{n=!1}),1e3))}}(e);return this.window.addEventListener("mousemove",t),this.window.addEventListener("touchstart",e),this.window.addEventListener("keypress",e),()=>{this.window.removeEventListener("mousemove",t),this.window.removeEventListener("touchstart",e),this.window.removeEventListener("keypress",e)}}}let Jt;function en(){return void 0===Jt&&(Jt=!1),Jt}var tn;!function(e){e.US_BANK_ACCOUNT="us-bank-account",e.US_BANK_ACCOUNT_DONATE_OPTIONS="us-bank-account-donate-options",e.US_BANK_ACCOUNT_CONFIRMATION="us-bank-account-confirmation",e.US_BANK_ACCOUNT_VERIFICATION_GUIDE="us-bank-account-verification-guide",e.AU_BECS="au-becs",e.CREDIT_CARD="credit-card",e.DONATE="donate-form",e.DOUBLE="double",e.GIFT_AID="gift-aid",e.PAYMENT_OPTIONS="payment-method",e.POST_DONATION_UPSELL="post-donation-upsell",e.SEPA="sepa",e.UK_BACS="uk-bacs",e.UK_BACS_CONFIRMATION="uk-bacs-confirmation",e.IDEAL_CONFIRMATION="ideal-confirmation",e.UPSELL="upsell",e.COMMUNICATION_CONSENT="communication-consent"}(tn||(tn={}));const nn="customEvent";class sn{constructor(){this.payload={}}merge(e){const t={};for(const n in e)t[n]=e[n];for(const e in this.payload)t[e]=this.payload[e];this.payload=t,e.eventComment&&this.mergeEventComment(e.eventComment)}validate(){return!(!this.payload.companyKey||8!==this.payload.companyKey.length||!this.payload.clientId||!this.eventType)}toObject(){const e={};for(const t in this.payload)e[t]=this.payload[t];return this.payload.eventComment&&(e.eventComment=JSON.stringify(this.payload.eventComment)),e.eventType=this.eventType,e}mergeEventComment(e){this.payload.eventComment||(this.payload.eventComment={}),Object.assign(this.payload.eventComment,e)}}class an extends sn{constructor(e){super(),this.eventId=e.options.eventID;const t={eventId:this.eventId,pixels:e.pixels,data:e.parameters,userData:{fbp:e.options.fbp}};this.payload={pixelEventName:e.eventName,pixelEventData:JSON.stringify(t)}}get eventType(){return"facebookPixel"}validate(){return!!this.payload.pixelEventName&&!!this.eventType}}var rn,on,cn;!function(e){e.INITIATE_CHECKOUT="InitiateCheckout",e.PURCHASE="Purchase",e.DONATE="Donate",e.SUBSCRIBE="Subscribe"}(rn||(rn={})),function(e){e.EVENT_DONATION_COMPLETE="donationComplete",e.EVENT_CHECKOUT_CLOSE="checkoutClose",e.EVENT_CHECKOUT_OPEN="checkoutOpen"}(on||(on={}));class ln{constructor(e){this.window=e}track(e,t){switch(e){case on.EVENT_CHECKOUT_OPEN:this.openEvent(e,t);break;case on.EVENT_CHECKOUT_CLOSE:this.closeEvent(e,t);break;case on.EVENT_DONATION_COMPLETE:this.donationEvent(e,t)}}openEvent(e,t){const n={event:"FundraiseUp."+e,FundraiseUp:t.data,ecommerce:{}};this.pushEvent(n)}closeEvent(e,t){const n={event:"FundraiseUp."+e,FundraiseUp:t.data,ecommerce:{}};this.pushEvent(n)}donationEvent(e,t){var n,i,s,a,r,o,c,l,u;const d=t.data,h={event:"FundraiseUp."+e,FundraiseUp:d,ecommerce:{transaction_id:null===(n=d.donation)||void 0===n?void 0:n.id,value:null===(i=d.donation)||void 0===i?void 0:i.amount,currency:null===(s=d.donation)||void 0===s?void 0:s.currency,items:[{item_id:t.widget.key,item_name:t.widget.name,index:0,item_brand:"Fundraise Up",item_category:null===(a=d.designation)||void 0===a?void 0:a.name,item_category2:null===(r=d.designation)||void 0===r?void 0:r.id,item_category3:null===(o=d.designation)||void 0===o?void 0:o.code,item_variant:null===(c=d.donation)||void 0===c?void 0:c.frequency,price:null===(l=d.donation)||void 0===l?void 0:l.amount,quantity:1,currency:null===(u=d.donation)||void 0===u?void 0:u.currency}]}};this.pushEvent(h)}pushEvent(e){this.window.dataLayer=this.window.dataLayer||[],this.window.dataLayer.push(e)}}class un{constructor(){this.queue=[]}pushEvent(e,t){this.queue.push({eventName:e,eventPayload:t})}[Symbol.iterator](){return this.queue.values()}}function dn(e,t){var n;return(null!==(n=null==t?void 0:t.document)&&void 0!==n?n:document).cookie.replace(new RegExp(`(?:(?:^|.*;\\s*)${e}\\s*\\=\\s*([^;]*).*$)|^.*$`),"$1")}class hn{constructor(e){this.observers=[],this.isActive=!0,this._eventsQueue=null,this.isEnabled=e.enabledByDefault,this.window=e.window,this.tracker=e.tracker,this.sentry=e.sentry,this.checkoutConfiguration=e.checkoutConfiguration,this.initialize()}donationComplete(e,t){if(!this.isEnabled)return;const n={widget:e,data:t};this.observe(on.EVENT_DONATION_COMPLETE,n)}checkoutClose(e,t){if(!this.isEnabled)return;const n={widget:e,data:t};this.observe(on.EVENT_CHECKOUT_CLOSE,n)}checkoutOpen(e,t){if(!this.isEnabled)return;const n={widget:e,data:t};this.observe(on.EVENT_CHECKOUT_OPEN,n)}observe(e,t){this.isEnabled&&(this.isActive?this.observeEvent(e,t):this.eventsQueue.pushEvent(e,t))}setActive(e){if(this.isActive=e,this.isActive)for(const{eventName:e,eventPayload:t}of this.eventsQueue)this.observeEvent(e,t)}get eventsQueue(){return this._eventsQueue||(this._eventsQueue=new un),this._eventsQueue}observeEvent(e,t){for(const n of this.observers)n.track(e,t)}resolveFacebookPixels(){var e;let t=[];const n=this.window.fbq;if(!n)return t;if("function"==typeof(null==n?void 0:n.getState)){const i=n.getState();if(null===(e=null==i?void 0:i.pixels)||void 0===e?void 0:e.length)return t=i.pixels.map((e=>e.id)),t}const i=n.queue;return i.length?(i.forEach((e=>{const n=e[0],i=e[1];"init"===n&&i&&t.push(i)})),t):t}resolveFacebookEventOptions(e){return Object.assign(Object.assign({},e),{fbp:dn("_fbp")})}initializeFacebookPixelTracking(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;this.overrideFacebookPixelQueuePush(),this.overrideFacebookPixelCallMethod()||e>24||setTimeout((()=>this.initializeFacebookPixelTracking(e+1)),100*e)}overrideFacebookPixelCallMethod(){const e=this.window.fbq;if(!e||!e.callMethod)return!1;if(e.callMethod.overridden)return!0;if(e.queue.length)return!1;const t=e.callMethod,n=this;return e.callMethod=function(){for(var e=arguments.length,i=new Array(e),s=0;s<e;s++)i[s]=arguments[s];const[a,r,o,c]=n.transformQueuePushArgs(i),l=n.resolveFacebookEventOptions(c);t.call(this,...arguments),"string"==typeof r&&n.trackFacebookEventToClickhouse({eventType:a,eventName:r,parameters:o,options:l,pixels:n.resolveFacebookPixels()})},e.callMethod.overridden=!0,!0}transformQueuePushArgs(e){if((e=Array.isArray(e)?e:Array.from(e)).length<4)return e;const t=e[3];return t&&"object"==typeof t?(t.content_ids&&!Array.isArray(t.content_ids)&&(t.content_ids=[t.content_ids]),e.splice(1,1),e):e}overrideFacebookPixelQueuePush(){const e=this.window.fbq;if(!e||e.callMethod)return;if(e.queue.push.overridden)return;const t=this,n=t.resolveFacebookPixels(),i=e.queue;i.length&&i.forEach((e=>{const i=(e=t.transformQueuePushArgs(e))[0],s=e[1],a=e[2],r=t.resolveFacebookEventOptions();"init"!==i&&t.trackFacebookEventToClickhouse({eventType:i,eventName:s,parameters:a,options:r,pixels:n})}));const s=e.queue.push;e.queue.push=function(e){const i=s.call(this,e);if(!e)return i;const a=(e=t.transformQueuePushArgs(e))[0],r=e[1],o=e[2],c=e[3],l=t.resolveFacebookEventOptions(c);return"string"!=typeof r||t.trackFacebookEventToClickhouse({eventType:a,eventName:r,parameters:o,options:l,pixels:n}),i},e.queue.push.overridden=!0}trackFacebookEventToClickhouse(e){let{eventType:t,eventName:n,parameters:i,options:s,pixels:a}=e;if(!this.isEnabled)return;if(!Object.values(rn).includes(n))return;var r;Array.isArray(a)&&a.length&&(a=a.filter((e=>"string"==typeof e)),r=a,a=Array.from(new Set(r)));const o=this.tracker;"string"==typeof n&&/^\d+$/.test(n)?this.sentry.captureException(new Error(`Facebook Pixel event name is a number: ${n} attempt 2`),{extra:{eventName:n,eventType:t,parameters:i,options:s,pixels:a}}):o.track(new an({eventType:t,eventName:n,parameters:i,options:s,pixels:a}))}initializeObservers(){this.observers.push(new ln(this.window))}initialize(){(this.checkoutConfiguration.infrastructureParams.livemode||this.checkoutConfiguration.company.trackToMarketingPixels.trackTestData)&&(this.initializeObservers(),this.initializeFacebookPixelTracking())}}!function(e){e.DUMMY_EXPERIMENT="DummyExperiment",e.UPSELL_CURTAIN_EXPERIMENT="UpsellCurtainExperiment",e.CHECKOUT_BUNDLE_EXPERIMENT="CheckoutBundleExperiment",e.UPSELL_SCREEN_V_3_EXPERIMENT="UpsellScreenV3Experiment",e.DONOR_PORTAL_TEST_EXPERIMENT="DonorPortalTestExperiment",e.CAMPAIGN_PAGE_TEST_EXPERIMENT="CampaignPageTestExperiment",e.EMBED_TEST_EXPERIMENT="EmbedTestExperiment",e.UPGRADE_LINKS_IN_INSTALLMENT_EMAILS_AI_V2_EXPERIMENT="UpgradeLinksInInstallmentEmailsAIv2Experiment",e.ML_POST_DONATION_UPSELL_CHECKOUT_EXPERIMENT="MlPostDonationUpsellCheckoutExperiment",e.ML_POST_DONATION_UPSELL_CAMPAIGN_PAGES_EXPERIMENT="MlPostDonationUpsellCampaignPagesExperiment",e.CHECKOUT_WITHOUT_PRE_DONATION_UPSELL_EXPERIMENT="CheckoutWithoutPreDonationUpsellExperiment",e.CAMPAIGN_PAGES_WITHOUT_PRE_DONATION_UPSELL_EXPERIMENT="CampaignPagesWithoutPreDonationUpsellExperiment",e.SMART_COVERING_FEE_CHECKOUT_V_2_EXPERIMENT="SmartCoveringFeeSuggestionCheckoutExperimentV2",e.SMART_COVERING_FEE_CAMPAIGN_PAGES_V_2_EXPERIMENT="SmartCoveringFeeSuggestionCampaignPagesExperimentV2",e.AA_CHECKOUT_EXPERIMENT="AACheckoutExperiment",e.AMOUNT_PRESETS_CHECKOUT_EXPERIMENT="AmountPresetsCheckoutV3Experiment",e.SMART_POST_DONATION_UPSELL_CHECKOUT_V_2_EXPERIMENT="SmartPostDonationUpsellCheckoutV2Experiment",e.SMART_POST_DONATION_UPSELL_CAMPAIGN_PAGES_V_2_EXPERIMENT="SmartPostDonationUpsellCampaignPagesV2Experiment",e.LESS_PAYMENT_OPTIONS_CAMPAIGN_PAGES_EXPERIMENT="LessPaymentOptionsCampaignPagesExperiment",e.UPSELL_AMOUNTS_DATASET_MODAL_EXPERIMENT="UpsellAmountsDatasetModalExperiment",e.UPSELL_AMOUNTS_DATASET_PAGES_EXPERIMENT="UpsellAmountsDatasetPagesExperiment",e.ML_DONATION_RETRY_V_2_EXPERIMENT="MlDonationRetryV2Experiment",e.UPGRADE_LINKS_PAGE_AI_V_2_EXPERIMENT="UpgradeLinksPageAIv2Experiment",e.PRESETS_IN_DONATION_FORM_V_3_EXPERIMENT="PresetsInDonationFormV3Experiment",e.STEPLESS_MOBILE_CHECKOUT_EXPERIMENT="SteplessMobileCheckoutExperiment",e.COLLECT_DATASET_POST_DONATION_UPSELL_AMOUNT_CHECKOUT_V_3_EXPERIMENT="CollectDatasetPostDonationUpsellAmountCheckoutV3Experiment",e.COLLECT_DATASET_POST_DONATION_UPSELL_AMOUNT_CAMPAIGN_PAGES_V_3_EXPERIMENT="CollectDatasetPostDonationUpsellAmountCampaignPagesV3Experiment",e.UPSELL_AMOUNTS_SUGGESTION_MODAL_EXPERIMENT="UpsellAmountsSuggestionModalExperiment",e.UPSELL_AMOUNTS_SUGGESTION_PAGES_EXPERIMENT="UpsellAmountsSuggestionPagesExperiment",e.BIRTHDAY_DONATION_CHECKOUT_EXPERIMENT="BirthdayDonationCheckoutExperiment",e.BIRTHDAY_DONATION_CAMPAIGN_PAGE_EXPERIMENT="BirthdayDonationCampaignPageExperiment",e.NEW_LABELS_IN_DP_CANCELLATION_FLOW_EXPERIMENT="NewLabelsInDPCancellationFlowExperiment",e.AMOUNT_PRESETS_PAGES_V_3_EXPERIMENT="AmountPresetsPagesV3Experiment",e.AMAZON_PAY_CAMPAIGN_PAGES_EXPERIMENT="AmazonPayCampaignPagesExperiment",e.AMAZON_PAY_CHECKOUT_EXPERIMENT="AmazonPayCheckoutExperiment",e.DEFAULT_FREQUENCY_V_2_MODAL_EXPERIMENT="DefaultFrequencyV2ModalExperiment",e.DEFAULT_FREQUENCY_V_2_CAMPAIGN_PAGES_EXPERIMENT="DefaultFrequencyV2CampaignPagesExperiment",e.ML_DEFAULT_FREQUENCY_IN_DONATION_FORM_EXPERIMENT="MlDefaultFrequencyInDonationFormExperiment"}(cn||(cn={}));const mn={[cn.DUMMY_EXPERIMENT]:"33802",[cn.UPSELL_CURTAIN_EXPERIMENT]:"43030",[cn.CHECKOUT_BUNDLE_EXPERIMENT]:"61172",[cn.UPSELL_SCREEN_V_3_EXPERIMENT]:"65613",[cn.DONOR_PORTAL_TEST_EXPERIMENT]:"68092",[cn.CAMPAIGN_PAGE_TEST_EXPERIMENT]:"68383",[cn.EMBED_TEST_EXPERIMENT]:"65492",[cn.ML_POST_DONATION_UPSELL_CHECKOUT_EXPERIMENT]:"70084",[cn.ML_POST_DONATION_UPSELL_CAMPAIGN_PAGES_EXPERIMENT]:"71732",[cn.CHECKOUT_WITHOUT_PRE_DONATION_UPSELL_EXPERIMENT]:"73814",[cn.CAMPAIGN_PAGES_WITHOUT_PRE_DONATION_UPSELL_EXPERIMENT]:"73816",[cn.SMART_COVERING_FEE_CHECKOUT_V_2_EXPERIMENT]:"82767-modal",[cn.SMART_COVERING_FEE_CAMPAIGN_PAGES_V_2_EXPERIMENT]:"82767-pages",[cn.AA_CHECKOUT_EXPERIMENT]:"77715",[cn.AMOUNT_PRESETS_CHECKOUT_EXPERIMENT]:"96929-modal",[cn.SMART_POST_DONATION_UPSELL_CHECKOUT_V_2_EXPERIMENT]:"79870-modal",[cn.SMART_POST_DONATION_UPSELL_CAMPAIGN_PAGES_V_2_EXPERIMENT]:"79870-pages",[cn.LESS_PAYMENT_OPTIONS_CAMPAIGN_PAGES_EXPERIMENT]:"86423",[cn.UPSELL_AMOUNTS_DATASET_MODAL_EXPERIMENT]:"87159-modal",[cn.UPSELL_AMOUNTS_DATASET_PAGES_EXPERIMENT]:"87159-pages",[cn.ML_DONATION_RETRY_V_2_EXPERIMENT]:"86213",[cn.UPGRADE_LINKS_IN_INSTALLMENT_EMAILS_AI_V2_EXPERIMENT]:"87202",[cn.UPGRADE_LINKS_PAGE_AI_V_2_EXPERIMENT]:"87190",[cn.PRESETS_IN_DONATION_FORM_V_3_EXPERIMENT]:"92387",[cn.STEPLESS_MOBILE_CHECKOUT_EXPERIMENT]:"60395",[cn.COLLECT_DATASET_POST_DONATION_UPSELL_AMOUNT_CHECKOUT_V_3_EXPERIMENT]:"89924-modal",[cn.COLLECT_DATASET_POST_DONATION_UPSELL_AMOUNT_CAMPAIGN_PAGES_V_3_EXPERIMENT]:"89924-pages",[cn.UPSELL_AMOUNTS_SUGGESTION_MODAL_EXPERIMENT]:"89701-modal",[cn.UPSELL_AMOUNTS_SUGGESTION_PAGES_EXPERIMENT]:"89701-pages",[cn.AMOUNT_PRESETS_PAGES_V_3_EXPERIMENT]:"92376-pages",[cn.BIRTHDAY_DONATION_CHECKOUT_EXPERIMENT]:"84301-modal",[cn.BIRTHDAY_DONATION_CAMPAIGN_PAGE_EXPERIMENT]:"84301-pages",[cn.NEW_LABELS_IN_DP_CANCELLATION_FLOW_EXPERIMENT]:"74047",[cn.AMAZON_PAY_CAMPAIGN_PAGES_EXPERIMENT]:"87699-pages",[cn.AMAZON_PAY_CHECKOUT_EXPERIMENT]:"87699-modal",[cn.DEFAULT_FREQUENCY_V_2_MODAL_EXPERIMENT]:"100054",[cn.DEFAULT_FREQUENCY_V_2_CAMPAIGN_PAGES_EXPERIMENT]:"100058",[cn.ML_DEFAULT_FREQUENCY_IN_DONATION_FORM_EXPERIMENT]:"100053"};var pn,gn,yn,fn,Sn,An,En,Cn,vn,Nn,bn,Pn,Dn,_n,Tn,On,xn,kn,In,wn,Rn,Mn,Ln,Un,Fn,jn,Bn,Hn,qn,Gn,Vn,Yn,Kn,zn,$n,Wn,Xn,Qn,Zn,Jn,ei,ti,ni,ii,si;!function(e){e.BILLING="billing",e.EMBED="embed",e.CAMPAIGN_PAGES="campaignPages",e.DONOR_PORTAL="donorPortal",e.EMAILS="emails"}(pn||(pn={})),function(e){e.CONTROL="control",e.TEST="test"}(gn||(gn={})),function(e){e.CONTROL="control",e.TEST_1="test-1",e.TEST_2="test-2",e.TEST_3="test-3"}(yn||(yn={})),function(e){e.CONTROL="control",e.TEST_1="test-1",e.TEST_2="test-2",e.TEST_3="test-3"}(fn||(fn={})),function(e){e.CONTROL="control",e.TEST="test"}(Sn||(Sn={})),function(e){e.CONTROL="control",e.TEST="test"}(An||(An={})),function(e){e.CONTROL="control",e.TEST="test"}(En||(En={})),function(e){e.CONTROL="control",e.TEST="test"}(Cn||(Cn={})),function(e){e.CONTROL="control",e.TEST="test"}(vn||(vn={})),function(e){e.CONTROL="control",e.TEST="test"}(Nn||(Nn={})),function(e){e.CONTROL="control",e.TEST="test"}(bn||(bn={})),function(e){e.CONTROL="control",e.TEST="test"}(Pn||(Pn={})),function(e){e.CONTROL="control",e.TEST="test"}(Dn||(Dn={})),function(e){e.TEST_1="test-1",e.TEST_2="test-2",e.TEST_3="test-3"}(_n||(_n={})),function(e){e.CONTROL="control",e.TEST="test"}(Tn||(Tn={})),function(e){e.CONTROL="control",e.TEST_1="test-1",e.TEST_2="test-2"}(On||(On={})),function(e){e.CONTROL="control",e.TEST="test"}(xn||(xn={})),function(e){e.CONTROL="control",e.TEST="test"}(kn||(kn={})),function(e){e.CONTROL="control",e.TEST="test"}(In||(In={})),function(e){e.CONTROL="control",e.TEST="test"}(wn||(wn={})),function(e){e.CONTROL="control",e.TEST="test"}(Rn||(Rn={})),function(e){e.CONTROL="control",e.TEST="test"}(Mn||(Mn={})),function(e){e.CONTROL="control",e.TEST="test"}(Ln||(Ln={})),function(e){e.CONTROL="control",e.TEST="test"}(Un||(Un={})),function(e){e.CONTROL="control",e.TEST="test"}(Fn||(Fn={})),function(e){e.CONTROL="control",e.TEST="test"}(jn||(jn={})),function(e){e.CONTROL="control",e.TEST="test"}(Bn||(Bn={})),function(e){e.CONTROL="control",e.TEST="test"}(Hn||(Hn={})),function(e){e.CONTROL="control",e.TEST="test"}(qn||(qn={})),function(e){e.CONTROL="control",e.TEST="test"}(Gn||(Gn={})),function(e){e.CONTROL="control",e.TEST="test"}(Vn||(Vn={})),function(e){e.CONTROL="control",e.TEST="test"}(Yn||(Yn={})),function(e){e.CONTROL="control",e.TEST="test"}(Kn||(Kn={})),function(e){e.CONTROL="control",e.TEST="test"}(zn||(zn={})),function(e){e.CONTROL="control",e.TEST="test"}($n||($n={})),function(e){e.DEVELOPMENT="development",e.PRODUCTION="production",e.STAGING="staging",e.TESTING="testing"}(Wn||(Wn={})),function(e){e.CONTROL="control",e.TEST="test"}(Xn||(Xn={})),function(e){e.CONTROL="control",e.TEST="test"}(Qn||(Qn={})),function(e){e.CONTROL="control",e.TEST="test"}(Zn||(Zn={})),function(e){e.CONTROL="control",e.TEST="test"}(Jn||(Jn={})),function(e){e.CONTROL="control",e.TEST="test"}(ei||(ei={})),function(e){e.CONTROL="control",e.TEST="test"}(ti||(ti={})),function(e){e.CONTROL="control",e.TEST="test"}(ni||(ni={})),function(e){e[e.COMPANY_NOT_FOUND=1]="COMPANY_NOT_FOUND",e[e.UNSUPPORTED_STORAGE_TYPE=2]="UNSUPPORTED_STORAGE_TYPE",e[e.BACKDROP_CONTAINER_IS_NOT_AVAILABLE=3]="BACKDROP_CONTAINER_IS_NOT_AVAILABLE",e[e.EXPERIMENT_ALREADY_STARTED=4]="EXPERIMENT_ALREADY_STARTED",e[e.INVALID_VARIANT_NAME_FOR_EXPERIMENT=5]="INVALID_VARIANT_NAME_FOR_EXPERIMENT",e[e.STORED_SETTINGS_MUST_BE_AN_OBJECT=6]="STORED_SETTINGS_MUST_BE_AN_OBJECT",e[e.INVALID_DISTRIBUTION_IN_EXPERIMENT=7]="INVALID_DISTRIBUTION_IN_EXPERIMENT",e[e.NO_SUCH_SETTINGS_FOR_EXPERIMENT=8]="NO_SUCH_SETTINGS_FOR_EXPERIMENT",e[e.NO_SUCH_EXPERIMENT=9]="NO_SUCH_EXPERIMENT",e[e.UNSUPPORTED_TYPE_OF_STORAGE=10]="UNSUPPORTED_TYPE_OF_STORAGE",e[e.FORM_OF_THIS_TYPE_HAS_NOT_BEEN_REGISTERED=11]="FORM_OF_THIS_TYPE_HAS_NOT_BEEN_REGISTERED",e[e.NO_FORM_ASSOCIATED_WITH_THIS_KEY_WAS_CREATED=12]="NO_FORM_ASSOCIATED_WITH_THIS_KEY_WAS_CREATED",e[e.UNSUPPORTED_LOCALE_CONFIG_TYPE=13]="UNSUPPORTED_LOCALE_CONFIG_TYPE",e[e.SERVICE_HAS_ALREADY_BEEN_PROVIDED=14]="SERVICE_HAS_ALREADY_BEEN_PROVIDED",e[e.MUST_PROVIDE_COMPANY_KEY=15]="MUST_PROVIDE_COMPANY_KEY",e[e.TRACKER_ALREADY_STARTED=16]="TRACKER_ALREADY_STARTED"}(ii||(ii={})),function(e){e.AUSTRALIA="AU",e.AUSTRIA="AT",e.BELGIUM="BE",e.BRAZIL="BR",e.BULGARIA="BG",e.CANADA="CA",e.CROATIA="HR",e.CYPRUS="CY",e.CZECH_REPUBLIC="CZ",e.DENMARK="DK",e.ESTONIA="EE",e.FINLAND="FI",e.FRANCE="FR",e.GERMANY="DE",e.GREECE="GR",e.HONG_KONG="HK",e.HUNGARY="HU",e.INDIA="IN",e.INDONESIA="ID",e.IRELAND="IE",e.ITALY="IT",e.JAPAN="JP",e.LATVIA="LV",e.LITHUANIA="LT",e.LUXEMBOURG="LU",e.MALAYSIA="MY",e.MALTA="MT",e.MEXICO="MX",e.NETHERLANDS="NL",e.NEW_ZEALAND="NZ",e.NORWAY="NO",e.POLAND="PL",e.PORTUGAL="PT",e.ROMANIA="RO",e.SINGAPORE="SG",e.SLOVAKIA="SK",e.SLOVENIA="SI",e.SPAIN="ES",e.SWEDEN="SE",e.SWITZERLAND="CH",e.THAILAND="TH",e.UNITED_ARAB_EMIRATES="AE",e.UNITED_KINGDOM="GB",e.UNITED_STATES="US",e.GIBRALTAR="GI",e.LIECHTENSTEIN="LI",e.PHILIPPINES="PH",e.ISRAEL="IL"}(si||(si={}));class ai extends Error{constructor(e){super(`${ii.EXPERIMENT_ALREADY_STARTED} - ${e}`)}}class ri extends Error{constructor(e){super(`${ii.STORED_SETTINGS_MUST_BE_AN_OBJECT} - ${e}`)}}class oi extends Error{constructor(e){super(`${ii.NO_SUCH_SETTINGS_FOR_EXPERIMENT} - ${e}`)}}class ci extends Error{constructor(e){super(`${ii.INVALID_VARIANT_NAME_FOR_EXPERIMENT} - ${e}`)}}class li extends Error{constructor(e){super(`${ii.NO_SUCH_EXPERIMENT} - ${e}`)}}class ui{constructor(e){this.excluded=!1,this.isInitialized=!1,this.isActive=!1;const{settings:t,companyKey:n,widgetKey:i,tracker:s,funStorage:a,user:r,parentCompanyKey:o,infrastructureParams:c,sentry:l,distribution:u,allowExperiments:d=!0}=e;this.sentry=l,this.companyKey=n,this.parentCompanyKey=o,this.widgetKey=i,this.tracker=s,this.funStorage=a,this.user=r,this.infrastructureParams=c;const{experimentId:h,name:m,disabledAccounts:p,enabledAccounts:g,enabled:y,enabledWidgets:f}=t;this.name=m,this.experimentId=h,this.disabledAccounts=p,this.enabledAccounts=g,this.enabledWidgets=f,this.disabledWidgets=t.disabledWidgets,this.settings=t,this.enabled=y,this.distribution=u;const S=Array.isArray(window.FUN_DISABLED_EXPERIMENTS)?window.FUN_DISABLED_EXPERIMENTS:[];this.globalDisabled=!d||window.FUN_DISABLE_EXPERIMENTS||-1!==S.indexOf(h)}get isExperimentEnabled(){return((e,t)=>{var n;if(!t)return!1;const{enabled:i,name:s}=t,a=e.get(),r=a&&(null===(n=a.settings[s])||void 0===n?void 0:n.enabled);return i||Boolean(r)})(this.funStorage,this.settings)}getDebugPanelEnabled(){var e,t;const n=null===(e=this.funStorage.get())||void 0===e?void 0:e.settings;return Boolean(n&&(null===(t=n[this.name])||void 0===t?void 0:t.enabled))}get active(){return this.isActive}get variantName(){return this.distribution.currentVariantName}start(e){if(!this.checkDisabled()&&(this.isInitialized=this.init(),this.isInitialized)){this.activate();const e=this.getTags();this.tracker.setEventTags(e)}}getTags(){const e=[this.experimentId,`${this.experimentId}-${this.variantName}`];return this.excluded&&e.push(`${this.experimentId}-exclusion`),e}isVariant(e){return this.variantName===e}setVariant(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];this.distribution.setVariant(e),this.excluded=t;const n=[this.experimentId];this.tracker.removeEventTags(n);const i=this.getTags();this.tracker.setEventTags(i)}restoreVariant(){this.distribution.previousVariantName&&this.setVariant(this.distribution.previousVariantName,!1)}exposure(){this.isActive&&this.tracker.customTrack({type:"testGroupExposed",data:{exclusion:this.excluded,experimentId:this.experimentId,variantName:this.variantName}})}init(){var e,t,n,i;const s=this.getDebugPanelVariant();if(s.variant&&s.enabled)return this.setVariant(s.variant),!0;if(s.enabled&&!s.variant&&(this.excluded=!0),!((e,t)=>{const{disabledAccounts:n,enabledAccounts:i}=e;if(null==n?void 0:n.find((e=>e===t)))return!1;const s=null==i?void 0:i.find((e=>e===t));return!((null==i?void 0:i.length)&&!s)})(this.settings,this.companyKey))return!1;const a=null===(e=this.enabledWidgets)||void 0===e?void 0:e.find((e=>e===this.widgetKey));if((null===(t=this.enabledWidgets)||void 0===t?void 0:t.length)&&!a)return!1;const r=null===(n=this.disabledWidgets)||void 0===n?void 0:n.find((e=>e===this.widgetKey));return!((null===(i=this.disabledWidgets)||void 0===i?void 0:i.length)&&r||(this.distribution.initCurrentVariantName(),0))}activate(){this.isActive?this.sentry.captureException(new ai(this.name)):this.isActive=!0}checkDisabled(){const e=this.getDebugPanelExperimentsSettings();if(e){const t=e[this.name];if(t&&t.enabled)return!1}return!this.enabled||this.globalDisabled}getDebugPanelExperimentsSettings(){const e=this.funStorage.get();return"object"!=typeof e?(this.sentry.captureException(new ri(e)),null):(null==e?void 0:e.settings)||null}getDebugPanelVariant(){var e;const t=null===(e=this.funStorage.get())||void 0===e?void 0:e.settings;if(!t)return{enabled:!1};const n=t[this.name];return n&&(null==n?void 0:n.enabled)?{enabled:!0,variant:n.variant}:{enabled:!1}}}var di=n(5448),hi=n(3836);class mi extends ui{get isTestGroup(){return this.isActive&&this.isVariant(Qn.TEST)}get isControlGroup(){return this.isActive&&this.isVariant(Qn.CONTROL)}get isBirthdayDonationEnabled(){return this.isTestGroup}tryStart(e){this.active||this.canBeStarted(e)&&this.start()}isEnabled(e){return this.canBeStarted(e)&&this.isTestGroup}tryToExpose(){this.exposure()}canBeStarted(e){return(0,hi.iJ)(e.intl.language)!==di.p.RTL}}class pi extends ui{get isTestGroup(){return this.isActive&&this.isVariant(Xn.TEST)}get isControlGroup(){return this.isActive&&this.isVariant(Xn.CONTROL)}isEnabled(e){return this.canBeStarted(e)&&this.isTestGroup}tryStart(e){this.active||this.canBeStarted(e)&&this.start(e)}tryToExpose(){this.exposure()}canBeStarted(e){const{isPhoneEnabled:t,isOnBehalfOfEnabled:n,isAnonymousEnabled:i,isGeneralConsentEnabled:s,isTermsAndConditionsEnabled:a,isTributeFilled:r,isDesktop:o,intl:c}=e;if((0,hi.iJ)(c.language)===di.p.RTL)return!1;const l=o&&t&&n&&r;return!(l&&i&&s&&a||l&&!i&&s&&a||l&&i&&!s&&a||l&&i&&s&&!a)}}class gi extends ui{constructor(){super(...arguments),this.isExposed=!1}get isControlGroup(){return this.isActive&&this.isVariant(ei.CONTROL)}get isTestGroup(){return this.isActive&&this.isVariant(ei.TEST)}tryExpose(){this.isExposed||(this.exposure(),this.isExposed=!0)}isEnabled(e){return this.canBeStarted(e)&&this.isTestGroup}tryStart(e){this.active||this.canBeStarted(e)&&this.start()}canBeStarted(e){return!(!e.enabledFrequencies.includes(se.ONCE)||!e.enabledFrequencies.includes(se.MONTHLY)||!e.aiFrequencyEnabled||e.hasExternalFrequencies||e.p2pUsed)}}class yi extends ui{isTestGroup(){return this.isActive&&this.isVariant(Mn.TEST)}tryStart(){this.isActive||this.start()}}class fi extends ui{constructor(){super(...arguments),this._openListeners=new Set,this._closeListeners=new Set}get isTestGroup(){return this.active&&!this.isVariant(yn.CONTROL)&&!this.isVariant(yn.TEST_3)}canOpenUpsellCurtain(e){return this.isTestGroup&&e.preDonationUpsellIsEnabled&&!this.isTributeAnnualUpsell(e.tributeIsFilled,e.targetFrequency)}canBeStarted(e){return!!e.preDonationUpsellIsEnabled&&!!fi.INCLUDED_LOCALES.includes(e.locale)&&e.currentFrequency===se.ONCE&&!this.isTributeAnnualUpsell(e.tributeIsFilled,e.targetFrequency)}tryStart(e){this.active||this.canBeStarted(e)&&this.start(e)}openCurtain(){this.trackCurtainOpen(),this._openListeners.forEach((e=>e()))}closeCurtain(){this.trackCurtainClose(),this._closeListeners.forEach((e=>e()))}onCurtainOpen(e){return this._openListeners.add(e),()=>this._openListeners.delete(e)}onCurtainClose(e){return this._closeListeners.add(e),()=>this._closeListeners.delete(e)}onBackDropClose(e){return this._onBackDropCloseListener=e,()=>this._onBackDropCloseListener=void 0}closeCurtainOnBackDrop(){this._onBackDropCloseListener&&this._onBackDropCloseListener()}isTributeAnnualUpsell(e,t){return e&&t===se.ANNUAL}trackCurtainOpen(){this.tracker.customTrack({type:"upsellCurtainExperimentOpen"})}trackCurtainClose(){this.tracker.customTrack({type:"upsellCurtainExperimentClose"})}}fi.INCLUDED_LOCALES=[w.D.EN_US,w.D.EN_GB,w.D.EN_CA];var Si,Ai,Ei,Ci,vi=n(8032);!function(e){e.GOOGLE_PLACES="google-places",e.LOB="lob",e.LOQATE="loqate"}(Si||(Si={})),function(e){e.DELIVERABLE="deliverable",e.UNDELIVERABLE="undeliverable"}(Ai||(Ai={})),function(e){e[e.STREET=200]="STREET",e[e.APARTMENT=200]="APARTMENT",e[e.CITY=40]="CITY",e[e.STATE=200]="STATE",e[e.ZIP=100]="ZIP"}(Ei||(Ei={})),function(e){e.AFGHANISTAN="AF",e.ALAND_ISLANDS="AX",e.ALBANIA="AL",e.ALGERIA="DZ",e.AMERICAN_SAMOA="AS",e.ANDORRA="AD",e.ANGOLA="AO",e.ANGUILLA="AI",e.ANTIGUA_AND_BARBUDA="AG",e.ARGENTINA="AR",e.ARMENIA="AM",e.ARUBA="AW",e.AUSTRALIA="AU",e.AUSTRIA="AT",e.AZERBAIJAN="AZ",e.BAHAMAS="BS",e.BAHRAIN="BH",e.BANGLADESH="BD",e.BARBADOS="BB",e.BELARUS="BY",e.BELGIUM="BE",e.BELIZE="BZ",e.BENIN="BJ",e.BERMUDA="BM",e.BHUTAN="BT",e.BOLIVIA="BO",e.BONAIRE="BQ",e.BOSNIA_AND_HERZEGOVINA="BA",e.BOTSWANA="BW",e.BRAZIL="BR",e.BRITISH_INDIAN_OCEAN_TERRITORY="IO",e.BRUNEI="BN",e.BULGARIA="BG",e.BURKINA_FASO="BF",e.BURUNDI="BI",e.CABO_VERDE="CV",e.CAMBODIA="KH",e.CAMEROON="CM",e.CANADA="CA",e.CAYMAN_ISLANDS="KY",e.CENTRAL_AFRICAN_REPUBLIC="CF",e.CHAD="TD",e.CHILE="CL",e.CHINA="CN",e.CHRISTMAS_ISLAND="CX",e.COCOS_KEELING_ISLANDS="CC",e.COLOMBIA="CO",e.COMOROS="KM",e.COOK_ISLANDS="CK",e.COSTA_RICA="CR",e.CROATIA="HR",e.CUBA="CU",e.CURACAO="CW",e.CYPRUS="CY",e.CZECH_REPUBLIC="CZ",e.COTE_DIVOIRE="CI",e.DEMOCRATIC_REPUBLIC_OF_THE_CONGO="CD",e.DENMARK="DK",e.DJIBOUTI="DJ",e.DOMINICA="DM",e.DOMINICAN_REPUBLIC="DO",e.ECUADOR="EC",e.EGYPT="EG",e.EL_SALVADOR="SV",e.EQUATORIAL_GUINEA="GQ",e.ERITREA="ER",e.ESTONIA="EE",e.ETHIOPIA="ET",e.FALKLAND_ISLANDS="FK",e.FAROE_ISLANDS="FO",e.FEDERATED_STATES_OF_MICRONESIA="FM",e.FIJI="FJ",e.FINLAND="FI",e.FORMER_YUGOSLAV_REPUBLIC_OF_MACEDONIA="MK",e.FRANCE="FR",e.FRENCH_GUIANA="GF",e.FRENCH_POLYNESIA="PF",e.FRENCH_SOUTHERN_TERRITORIES="TF",e.GABON="GA",e.GAMBIA="GM",e.GEORGIA="GE",e.GERMANY="DE",e.GHANA="GH",e.GIBRALTAR="GI",e.GREECE="GR",e.GREENLAND="GL",e.GRENADA="GD",e.GUADELOUPE="GP",e.GUAM="GU",e.GUATEMALA="GT",e.GUERNSEY="GG",e.GUINEA="GN",e.GUINEA_BISSAU="GW",e.GUYANA="GY",e.HAITI="HT",e.HOLY_SEE="VA",e.HONDURAS="HN",e.HONG_KONG="HK",e.HUNGARY="HU",e.ICELAND="IS",e.INDIA="IN",e.INDONESIA="ID",e.IRAN_ISLAMIC_REPUBLIC_OF="IR",e.IRAQ="IQ",e.IRELAND="IE",e.ISLE_OF_MAN="IM",e.ISRAEL="IL",e.ITALY="IT",e.JAMAICA="JM",e.JAPAN="JP",e.JERSEY="JE",e.JORDAN="JO",e.KAZAKHSTAN="KZ",e.KENYA="KE",e.KIRIBATI="KI",e.KUWAIT="KW",e.KYRGYZSTAN="KG",e.LAOS="LA",e.LATVIA="LV",e.LEBANON="LB",e.LESOTHO="LS",e.LIBERIA="LR",e.LIBYA="LY",e.LIECHTENSTEIN="LI",e.LITHUANIA="LT",e.LUXEMBOURG="LU",e.MACAU="MO",e.MADAGASCAR="MG",e.MALAWI="MW",e.MALAYSIA="MY",e.MALDIVES="MV",e.MALI="ML",e.MALTA="MT",e.MARSHALL_ISLANDS="MH",e.MARTINIQUE="MQ",e.MAURITANIA="MR",e.MAURITIUS="MU",e.MAYOTTE="YT",e.MEXICO="MX",e.MOLDOVA="MD",e.MONACO="MC",e.MONGOLIA="MN",e.MONTENEGRO="ME",e.MONTSERRAT="MS",e.MOROCCO="MA",e.MOZAMBIQUE="MZ",e.MYANMAR="MM",e.NAMIBIA="NA",e.NAURU="NR",e.NEPAL="NP",e.NETHERLANDS="NL",e.NEW_CALEDONIA="NC",e.NEW_ZEALAND="NZ",e.NICARAGUA="NI",e.NIGER="NE",e.NIGERIA="NG",e.NIUE="NU",e.NORFOLK_ISLAND="NF",e.NORTH_KOREA="KP",e.NORTHERN_MARIANA_ISLANDS="MP",e.NORWAY="NO",e.OMAN="OM",e.PAKISTAN="PK",e.PALAU="PW",e.PANAMA="PA",e.PAPUA_NEW_GUINEA="PG",e.PARAGUAY="PY",e.PERU="PE",e.PHILIPPINES="PH",e.PITCAIRN="PN",e.POLAND="PL",e.PORTUGAL="PT",e.PUERTO_RICO="PR",e.QATAR="QA",e.REPUBLIC_OF_THE_CONGO="CG",e.ROMANIA="RO",e.RUSSIA="RU",e.RWANDA="RW",e.REUNION="RE",e.SAINT_BARTHELEMY="BL",e.SAINT_HELENA="SH",e.SAINT_KITTS_AND_NEVIS="KN",e.SAINT_LUCIA="LC",e.SAINT_MARTIN="MF",e.SAINT_PIERRE_AND_MIQUELON="PM",e.SAINT_VINCENT_AND_THE_GRENADINES="VC",e.SAMOA="WS",e.SAN_MARINO="SM",e.SAO_TOME_AND_PRINCIPE="ST",e.SAUDI_ARABIA="SA",e.SENEGAL="SN",e.SERBIA="RS",e.SEYCHELLES="SC",e.SIERRA_LEONE="SL",e.SINGAPORE="SG",e.SINT_MAARTEN="SX",e.SLOVAKIA="SK",e.SLOVENIA="SI",e.SOLOMON_ISLANDS="SB",e.SOMALIA="SO",e.SOUTH_AFRICA="ZA",e.SOUTH_GEORGIA_AND_THE_SOUTH_SANDWICH_ISLANDS="GS",e.SOUTH_KOREA="KR",e.SOUTH_SUDAN="SS",e.SPAIN="ES",e.SRI_LANKA="LK",e.STATE_OF_PALESTINE="PS",e.SUDAN="SD",e.SURINAME="SR",e.SVALBARD_AND_JAN_MAYEN="SJ",e.SWAZILAND="SZ",e.SWEDEN="SE",e.SWITZERLAND="CH",e.SYRIAN_ARAB_REPUBLIC="SY",e.TAIWAN="TW",e.TAJIKISTAN="TJ",e.TANZANIA="TZ",e.THAILAND="TH",e.TIMOR_LESTE="TL",e.TOGO="TG",e.TOKELAU="TK",e.TONGA="TO",e.TRINIDAD_AND_TOBAGO="TT",e.TUNISIA="TN",e.TURKEY="TR",e.TURKMENISTAN="TM",e.TURKS_AND_CAICOS_ISLANDS="TC",e.TUVALU="TV",e.UGANDA="UG",e.UKRAINE="UA",e.UNITED_ARAB_EMIRATES="AE",e.UNITED_KINGDOM="GB",e.UNITED_STATES_MINOR_OUTLYING_ISLANDS="UM",e.UNITED_STATES_OF_AMERICA="US",e.URUGUAY="UY",e.UZBEKISTAN="UZ",e.VANUATU="VU",e.VENEZUELA="VE",e.VIETNAM="VN",e.VIRGIN_ISLANDS_BRITISH="VG",e.VIRGIN_ISLANDS_US="VI",e.WALLIS_AND_FUTUNA="WF",e.WESTERN_SAHARA="EH",e.YEMEN="YE",e.ZAMBIA="ZM",e.ZIMBABWE="ZW"}(Ci||(Ci={}));class Ni{constructor(e,t,n){this.sentry=e,this.requestService=t,this.config=n,this.baseURL="",this.basePrefix="",(null==n?void 0:n.baseURL)&&(this.baseURL=n.baseURL)}setForcedProviderType(e){this.forcedProviderType=e}getForcedProviderType(e){const{restrictCountries:t}=e;switch(t&&t[0]){case u.tg.UNITED_KINGDOM:case u.tg.IRELAND:return Si.LOQATE;default:return}}getPlaces(e){var t;const{customData:n,input:i,sessionToken:s,restrictCountries:a}=e,r=this.getForcedProviderType({restrictCountries:a});return this.requestService.get({url:`${this.baseURL}${this.basePrefix}/addresses/autocomplete`,withCredentials:!0,headers:Object.assign(Object.assign({},null===(t=this.config)||void 0===t?void 0:t.fundraiseupAddressProviderHeaders),{Accept:"application/json"}),params:{customData:vi.stringify(n),input:i,sessionToken:s,restrictCountries:a,forceAddressProviderType:r},rejectOnInvalid:!0}).then((e=>Yt.isFailure(e)?(this.sentry.captureException(new Vt.Ki,{extra:{failureResult:e.failureResult},tags:{service:Ni.name}}),[]):e.successResult)).catch((e=>(this.sentry.captureException(e,{tags:{service:Ni.name}}),[])))}shouldFindSubplaces(){return!1}getSubplaces(){return Promise.reject(new Error("There is no subplaces in fundraiseup provider"))}getDetails(e){var t;const{customData:n,place:i,sessionToken:s,restrictCountries:a}=e,r=this.getForcedProviderType({restrictCountries:a});if(i.address)return Promise.resolve(i.address);if(!i.placeId)return Promise.reject(new Error("Nor address field neither placeId field is defined in place object, something gone wrong"));const{placeId:o}=i;return this.requestService.get({url:`${this.baseURL}${this.basePrefix}/addresses/${o}`,withCredentials:!0,headers:Object.assign(Object.assign({},null===(t=this.config)||void 0===t?void 0:t.fundraiseupAddressProviderHeaders),{Accept:"application/json"}),params:{customData:vi.stringify(n),sessionToken:s,restrictCountries:a,forceAddressProviderType:r},rejectOnInvalid:!0}).then((e=>Yt.isFailure(e)?Promise.reject(new Vt.Ki):e.successResult))}}class bi extends Ni{constructor(e,t,n,i){super(e,t,n),this.sentry=e,this.requestService=t,this.config=n,this.checkoutSessionToken=i}getPlaces(e){var t,n;const{customData:i,input:s,sessionToken:a,restrictCountries:r}=e,o=this.checkoutSessionToken||(null==i?void 0:i.token);return o?this.requestService.get({url:`${this.baseURL}/${ce}/${o}/addresses/autocomplete`,withCredentials:!0,headers:Object.assign(Object.assign({},null===(t=this.config)||void 0===t?void 0:t.fundraiseupAddressProviderHeaders),{Accept:"application/json"}),params:{input:s,sessionToken:a,restrictCountries:r,forceAddressProviderType:this.getForcedProviderType({restrictCountries:r}),locale:null===(n=this.config)||void 0===n?void 0:n.locale},rejectOnInvalid:!0}).then((e=>Yt.isFailure(e)?(this.sentry.captureException(new Vt.Ki,{extra:{failureResult:e.failureResult},tags:{service:Ni.name}}),[]):e.successResult)):Promise.reject(new Error("Expected the widgetSession token"))}getDetails(e){var t,n;const{customData:i,place:s,sessionToken:a,restrictCountries:r}=e;if(s.address)return Promise.resolve(s.address);if(!s.placeId)return Promise.reject(new Error("Nor address field neither placeId field is defined in place object, something gone wrong"));const{placeId:o}=s,c=this.checkoutSessionToken||(null==i?void 0:i.token);return c?this.requestService.get({url:`${this.baseURL}/${ce}/${c}/addresses/${o}`,withCredentials:!0,headers:Object.assign(Object.assign({},null===(t=this.config)||void 0===t?void 0:t.fundraiseupAddressProviderHeaders),{Accept:"application/json"}),params:{sessionToken:a,forceAddressProviderType:this.getForcedProviderType({restrictCountries:r}),locale:null===(n=this.config)||void 0===n?void 0:n.locale},rejectOnInvalid:!0}).then((e=>Yt.isFailure(e)?Promise.reject(new Vt.Ki):e.successResult)):Promise.reject(new Error("Expected the widgetSession token"))}}const Pi={isFallback:!0},Di="USD";function _i(){return function(){if(!function(){try{return void 0!==window.Intl}catch(e){return!1}}())return;const e=window.Intl;if(e&&"object"==typeof e&&"function"==typeof e.DateTimeFormat){const t=new e.DateTimeFormat("en-US");if("object"!=typeof t)return;const n="function"==typeof t.resolvedOptions&&t.resolvedOptions();if("object"!=typeof n)return;const i=n.timeZone;if(!i)return;return i}}()||function(){const e=-(new Date).getTimezoneOffset()/60;return e>=0?`UTC+${e}`:`UTC${e}`}()}class Ti{constructor(e){this._options=e,this._suggestions={}}getSuggestionRequestDurationMs(e){const t=this._suggestions[e];return(null==t?void 0:t.requestDurationMs)||0}isSuggestionRequested(e){const t=this._suggestions[e];return Boolean(null==t?void 0:t.isSuggestionRequested)}getSuggestion(e){const t=this._suggestions[e];return t?t.suggestion:Pi}fetchSuggestion(e,t){return(0,l.sH)(this,void 0,void 0,(function*(){var n,i;if(this.needFetchSuggestion()&&!this.isSuggestionRequested(e)){this._suggestions[e]={isSuggestionRequested:!0,suggestion:Pi};try{const s=performance.now(),a=yield Promise.race([this.timeoutPromise,this.request(e,t)]);let r;(null===(n=a.data.v2)||void 0===n?void 0:n.isFallback)?r=a.data.v2:(null===(i=a.data.v2)||void 0===i?void 0:i.presets)&&(r={presets:this.convertAmountOptions(a.data.v2.presets,e),isFallback:!1}),this._suggestions[e].suggestion=a.data.isFallback?a.data:{presets:this.convertAmountOptions(a.data.presets,e),isFallback:!1,v2:r},this._suggestions[e].requestDurationMs=Math.round(performance.now()-s)}catch(t){this._suggestions[e]={suggestion:Pi,requestDurationMs:0}}}}))}get timeoutPromise(){return new Promise((e=>{setTimeout((()=>{e({data:Pi,valid:!0})}),1500)}))}get clientTimeOptions(){const e=new Date;return{clientTimeZone:_i(),clientWeekday:e.getDay(),clientHour:e.getHours(),eventTime:e.toISOString()}}needFetchSuggestion(){return!this._options.experimentsStorage||!this._options.experimentSettings||((e,t)=>{var n;if(!t)return!1;const{enabled:i,name:s}=t,a=e.get(),r=a&&(null===(n=a.settings[s])||void 0===n?void 0:n.enabled);return i||Boolean(r)})(this._options.experimentsStorage,this._options.experimentSettings)}convertAmountOptions(e,t){if(t===Di||!this._options.currencyService)return e;const n={};for(const[i,s]of Object.entries(e))n[i]={currency:t,defaultAmount:this._options.currencyService.convert(s.defaultAmount,Di,t),amountOptions:s.amountOptions.map((e=>this._options.currencyService.convert(e,Di,t)))};return n}request(e,t){return(0,l.sH)(this,void 0,void 0,(function*(){const n=yield(0,Vt.Em)({url:`${this._options.apiHost}/checkout/getAmountPresets?token=${this._options.token}`,method:"POST",headers:{"Content-Type":"text/plain; charset=utf-8"},params:Object.assign(Object.assign({},this.getRequestOptions(e)),{version:t})});if(!n.valid)throw new Error("Invalid response");return n}))}getRequestOptions(e){const t=this._options.currencyRates[e],n=Object.assign(Object.assign({companyKey:this._options.companyKey,campaignKey:this._options.campaignKey,clientLocale:this._options.clientLocale,utmSource:this._options.utmSource,currency:e,currencyRate:t},this.clientTimeOptions),{clientId:this._options.clientId,clientConnectionType:this._options.clientConnectionType,clientDeviceMemory:this._options.clientDeviceMemory,clientHardwareConcurrency:this._options.clientHardwareConcurrency,clientConnectionDownlink:this._options.clientConnectionDownlink,clientDoNotTrack:Boolean(this._options.clientDoNotTrack),clientDevicePixelRatio:this._options.clientDevicePixelRatio,clientBatteryLevel:this._options.clientBatteryLevel,checkoutType:this._options.checkoutType});return this.validateRequestOptionsSilently(n),n}validateRequestOptionsSilently(e){return void 0!==e.currency&&void 0!==e.currencyRate||(this._options.sentry.captureException(new Error("Amount Presets: request body is invalid"),{extra:{options:e}}),!1)}}const Oi={isFallback:!0,defaultFrequency:null};class xi{constructor(e){this._options=e,this._suggestion=Oi,this._requestDurationMs=0,this._fetchCallsCount=0}getMeta(){return{requestDurationMs:this._requestDurationMs,fetchCallsCount:this._fetchCallsCount}}getSuggestion(){return this._suggestion}fetchSuggestion(e){return(0,l.sH)(this,void 0,void 0,(function*(){try{if(this._options.isLighthouse||this._options.isShowcase)return Yt.fail(void 0);const t=performance.now(),n=yield Promise.race([this.timeoutPromise,this.request(e)]);return this._suggestion=n.data,this._requestDurationMs=Math.round(performance.now()-t),Yt.success(void 0)}catch(e){return this._suggestion=Oi,this._requestDurationMs=0,Yt.success(void 0)}finally{this._fetchCallsCount++}}))}get clientTimeOptions(){const e=new Date;return{clientTimeZone:_i(),clientWeekday:e.getDay(),clientHour:e.getHours()}}get timeoutPromise(){return new Promise((e=>{setTimeout((()=>{e({data:Oi,valid:!0})}),1500)}))}request(e){return(0,l.sH)(this,void 0,void 0,(function*(){const t=yield(0,Vt.Em)({url:`${this._options.apiHost}/checkout/getDefaultFrequency?token=${this._options.token}`,method:"POST",headers:{"Content-Type":"text/plain; charset=utf-8"},params:this.requestOptions(e)});if(!t.valid)throw new Error("Invalid response");return t}))}requestOptions(e){return Object.assign(Object.assign({},e),this.clientTimeOptions)}}class ki{constructor(e,t){this._locale=e,this.commonCurrencyFilter=t,this.formatCurrency=t.formatCurrency.bind(t),this.formatSymbol=t.formatSymbol.bind(t),this.getCurrencyFormat=t.getCurrencyFormat.bind(t)}changeLocale(e){return this.locale=e,this.locale}format(e,t){return this.formatCurrency(e,null==t?void 0:t.currency,null==t?void 0:t.display,null==t?void 0:t.withoutPrefix,null==t?void 0:t.withoutSuffix,this.locale,null==t?void 0:t.displayCurrency)}formatCurrencySymbol(e,t){return this.formatSymbol(e,t,this.locale)}getFormat(){return this.getCurrencyFormat(this.locale)}get locale(){return this._locale}set locale(e){this._locale=e}}class Ii extends ki{constructor(e,t){super(e,t)}replaceCurrencyFilter(e){this.formatCurrency=e.formatCurrency,this.formatSymbol=e.formatSymbol,this.getCurrencyFormat=e.getCurrencyFormat}}var wi;!function(e){e.SCREEN_CHANGED="screenChanged",e.FLOW_CHANGED="flowChanged",e.DONE="done",e.LOCKED="locked",e.UNLOCKED="unlocked"}(wi||(wi={}));const Ri=[fe.MONEY];class Mi{constructor(e,t,n,i,s,a,r,o,c,l,u,d,h,m,p,g,y,f,S,A,E,C,v,N,b,P,D){this.eventEmitter=e,this.checkoutConfiguration=t,this.intl=n,this.tracker=i,this.debug=s,this.currencyService=a,this.suggestionsService=r,this.targetWindow=o,this.globalWindow=c,this.sentry=l,this.paymentMethods=u,this.stripeLoadingPromise=d,this.applePayStripeLoadingPromise=h,this.userSession=m,this.addressService=p,this.checkoutAPIBridge=g,this._experiments=y,this.flowFactoryMap=f,this.logger=S,this.requestService=A,this.subscriptionPeriodLabelsService=E,this.mailingAddressModule=C,this.paymentMethodAvailabilityManagerRepository=v,this.mailingAddressCustomization=N,this.adaptiveDefaultFrequencyFetcher=b,this.adaptiveAmountPresetsFetcher=P,this.params=D,this.currentFlow=null,this._checkoutService=null,this._flowType=null,this._isFlowInitializedOnce=!1}get checkoutService(){if(!this._checkoutService)throw new Error("Checkout service is not defined");return this._checkoutService}get experiments(){if(!this._experiments)throw new Error("Checkout Experiments Controller is not defined");return this._experiments}get flowType(){if(!this._flowType)throw new Error("Flow is not initialized");return this._flowType}get isFlowInitializedOnce(){return this._isFlowInitializedOnce}get questionsScreenPageCount(){return this._checkoutService?this._checkoutService.checkoutUIState.pagesOfQuestionsScreen:null}dispose(){var e,t;null===(e=this._checkoutService)||void 0===e||e.dispose(),null===(t=this.currentFlow)||void 0===t||t.dispose()}setInitialScreen(e){return this.initialScreen=e,this}getCurrentFlow(){if(!this.currentFlow)throw new Error("Start flow first");return this.currentFlow}onScreenChanged(e){return this.eventEmitter.on(wi.SCREEN_CHANGED,e),()=>this.eventEmitter.removeListener(wi.SCREEN_CHANGED,e)}onFlowChanged(e){return this.eventEmitter.on(wi.FLOW_CHANGED,e),()=>this.eventEmitter.removeListener(wi.FLOW_CHANGED,e)}startDefaultFlow(){return(0,l.sH)(this,void 0,void 0,(function*(){yield this.start(this.checkoutConfiguration.defaultFlowType)}))}startFiatFlow(){return(0,l.sH)(this,void 0,void 0,(function*(){yield this.start(fe.MONEY)}))}startCryptoFlow(){return(0,l.sH)(this,void 0,void 0,(function*(){yield this.start(fe.CRYPTO)}))}restart(){return(0,l.sH)(this,void 0,void 0,(function*(){yield this.start(this.flowType)}))}canClose(e){if(this.checkoutConfiguration.company.blockedAt)return!0;if(!this.currentFlow)throw new Error("currentFlow is not defined");const t=this.checkoutService.isPaid,n=this.currentFlow.isLocked,i=this.checkoutService.getState().remindMeLater.isEnabled;if(n)return!1;if(this.checkoutConfiguration.infrastructureParams.showcase)return!1;if(i&&e.isFinalAvailableScreen&&this.currentFlow.tryExit())return!1;if(!t&&(!e.isUnrestrictedExitScreen||e.isMobile&&e.isMobileExitScreen)&&this.currentFlow.tryExit())return!1;if(!i&&!e.isUnrestrictedExitScreen&&!this.currentFlow.isExiting){const e=[this.intl.translate("confirmCloseDialog.question"),this.intl.translate("confirmCloseDialog.instructions")].join("\n\n");return confirm(e)}return!0}shouldNotifyAbandoned(e){var t;if(!Ri.includes(this.flowType))return!1;if(!this.currentFlow)throw new Error("currentFlow is not defined");if(e)return!1;if(!(null===(t=this.checkoutConfiguration.company.abandonedDonations)||void 0===t?void 0:t.enabled))return!1;const n=this.checkoutService.isPaid,i=this.checkoutService.isPaymentStarted;if(n||i)return!1;if(this.currentFlow.isExiting)return!0;const{remindMeLater:s}=this.checkoutService.getState();return!s.show}start(e){return(0,l.sH)(this,void 0,void 0,(function*(){var t,n;yield null===(t=this._checkoutService)||void 0===t?void 0:t.dispose(),null===(n=this.currentFlow)||void 0===n||n.dispose();const{flow:i,checkoutService:s,adaptiveSuggestionsService:a}=yield this.initializeFlow(e,{shouldRestoreFromIntent:this.isFlowInitializedOnce});this.currentFlow=i,this._checkoutService=s,this._flowType=e,this._isFlowInitializedOnce=!0,yield this.tryFetchAndApplyAdaptiveSuggestion(a),yield i.start(),this.eventEmitter.emit(wi.FLOW_CHANGED,e),this.tryTrackAdaptiveSuggestion(a)}))}tryFetchAndApplyAdaptiveSuggestion(e){return(0,l.sH)(this,void 0,void 0,(function*(){e&&(yield e.tryFetchSuggestion(),e.tryApplySuggestion())}))}tryTrackAdaptiveSuggestion(e){e&&e.tryTrackSuggestion()}canNavigateBackward(e,t){var n,i,s,a;const r=this.checkoutService.checkoutUIState.isCanNotGoBackScreen(e.getCurrentScreen().name),o=e.previousScreenName&&e.previousScreenName===t.getPaymentScreen(e.previousScreenName,e.getHistoricalScreens())&&t.isPaid,c=e.previousScreenName===(null===(n=this.params.screenSet)||void 0===n?void 0:n.creditCard)&&t.isPaid,l=e.previousScreenName===(null===(i=this.params.screenSet)||void 0===i?void 0:i.ukBacs)&&t.isPaid,u=e.previousScreenName===(null===(s=this.params.screenSet)||void 0===s?void 0:s.paymentOptions)&&t.isPaid,d=null===(a=this.currentFlow)||void 0===a?void 0:a.isLocked;return!(r||o||c||l||u||d)}initializeFlow(e,t){return(0,l.sH)(this,void 0,void 0,(function*(){const{flow:n,checkoutService:i,initialScreenDecider:s,adaptiveSuggestionsService:a}=yield this.createFlow(e);n.on(wi.SCREEN_CHANGED,(e=>{i.setCanGoBack(this.canNavigateBackward(n,i)),i.shouldFindMandatoryScreen=!1,i.checkoutUIState.setCloseButtonVisibility(n.getCurrentScreen().name,n.getHistoricalScreens()),this.eventEmitter.emit(wi.SCREEN_CHANGED,e)})),n.on(wi.LOCKED,(()=>{i.setCanGoBack(this.canNavigateBackward(n,i))})),n.on(wi.UNLOCKED,(()=>{i.setCanGoBack(this.canNavigateBackward(n,i))})),i.initialize(t);const r=void 0!==this.initialScreen?this.initialScreen:yield s.getInitialScreen();return n.setFirstScreen(r),this.tracker.setCurrentScreenDataGetter((()=>({screenName:n.getCurrentScreen().name,screenData:n.getCurrentScreen().getScreenData()}))),this.tracker.setCheckoutTrackerDataGetter((()=>i.getCheckoutTrackerData())),this.tracker.setCheckoutUIStateGetter((()=>i.checkoutUIState)),this.tracker.setDonationType(i.type),{flow:n,checkoutService:i,adaptiveSuggestionsService:a}}))}createFlow(e){return(0,l.sH)(this,void 0,void 0,(function*(){const t=this.flowFactoryMap[e],{formFlow:n,checkoutService:i,initialScreenDecider:s,adaptiveSuggestionsService:a}=t({checkoutConfiguration:this.checkoutConfiguration,intl:this.intl,tracker:this.tracker,debug:this.debug,currencyService:this.currencyService,suggestionsService:this.suggestionsService,targetWindow:this.targetWindow,globalWindow:this.globalWindow,sentry:this.sentry,paymentMethods:this.paymentMethods,stripeLoadingPromise:this.stripeLoadingPromise,applePayStripeLoadingPromise:this.applePayStripeLoadingPromise,subscriptionPeriodLabelsService:this.subscriptionPeriodLabelsService,userSession:this.userSession,addressService:this.addressService,eventEmitter:this.eventEmitter,checkoutAPIBridge:this.checkoutAPIBridge,experiments:this.experiments,logger:this.logger,requestService:this.requestService,mailingAddressModule:this.mailingAddressModule,paymentMethodAvailabilityManagerRepository:this.paymentMethodAvailabilityManagerRepository,mailingAddressCustomization:this.mailingAddressCustomization,adaptiveDefaultFrequencyFetcher:this.adaptiveDefaultFrequencyFetcher,adaptiveAmountPresetsFetcher:this.adaptiveAmountPresetsFetcher,stripe:{elementsOptions:this.params.stripe.elementsOptions,elementStyles:this.params.stripe.elementStyles,elementClasses:this.params.stripe.elementClasses}});return{flow:n,checkoutService:i,initialScreenDecider:s,adaptiveSuggestionsService:a}}))}}var Li,Ui;!function(e){e.DEFAULT="default",e.POSTAL_CODE_FIRST="postalCodeFirst"}(Li||(Li={})),function(e){e.DEFAULT="default",e.ALTERNATIVE="alternative"}(Ui||(Ui={}));class Fi{constructor(e){this._config=e}isLayoutPostalCodeFirst(e){return this.findOption(this._config.layout.type,e)===Li.POSTAL_CODE_FIRST}isAlternativeLabels(e){return this.findOption(this._config.labels.type,e)===Ui.ALTERNATIVE}isAutocompleteEnabled(e){return!!this.findOption(this._config.autocomplete.enabled,e)}isRegionEnabled(e){return!!this.findOption(this._config.region.enabled,e)}isRegionRequired(e){return!!this.findOption(this._config.region.required,e)}getPredefinedRegions(e){return this.findOption(this._config.region.predefinedRegions,e)}isPostalCodeRequired(e){return!!this.findOption(this._config.postalCode.required,e)}isPostalCodeAutocompleteEnabled(e){return!!this.findOption(this._config.postalCode.autocomplete.enabled,e)}getPostalCodeValidation(e){return this.findOption(this._config.postalCode.validation,e)}findOption(e,t){var n;const i=e.find((e=>{var n,i;if(!e.countries&&!e.companies)return!0;const s=t.country&&(null===(n=e.countries)||void 0===n?void 0:n.includes(t.country)),a=t.company&&(null===(i=e.companies)||void 0===i?void 0:i.includes(t.company));return s||a}));return null!==(n=null==i?void 0:i.option)&&void 0!==n?n:null}}const ji={autocomplete:{enabled:[{option:!0}]},layout:{type:[{option:Li.POSTAL_CODE_FIRST,countries:[u.tg.UNITED_KINGDOM]},{option:Li.DEFAULT}]},labels:{type:[{option:Ui.ALTERNATIVE,countries:[u.tg.UNITED_KINGDOM,u.tg.IRELAND]},{option:Ui.DEFAULT}]},region:{enabled:[{option:!1,countries:[u.tg.UNITED_KINGDOM,u.tg.ISRAEL,u.tg.FRANCE,u.tg.NETHERLANDS,u.tg.GERMANY,u.tg.NEW_ZEALAND]},{option:!0}],required:[{option:!1,countries:[u.tg.UNITED_KINGDOM,u.tg.ISRAEL,u.tg.FRANCE,u.tg.NETHERLANDS,u.tg.GERMANY,u.tg.NEW_ZEALAND]},{option:!0}],predefinedRegions:[{option:{"US States":[{code:"AL",name:"Alabama"},{code:"AK",name:"Alaska"},{code:"AZ",name:"Arizona"},{code:"AR",name:"Arkansas"},{code:"CA",name:"California"},{code:"CO",name:"Colorado"},{code:"CT",name:"Connecticut"},{code:"DC",name:"District of Columbia"},{code:"DE",name:"Delaware"},{code:"FL",name:"Florida"},{code:"GA",name:"Georgia"},{code:"HI",name:"Hawaii"},{code:"ID",name:"Idaho"},{code:"IL",name:"Illinois"},{code:"IN",name:"Indiana"},{code:"IA",name:"Iowa"},{code:"KS",name:"Kansas"},{code:"KY",name:"Kentucky"},{code:"LA",name:"Louisiana"},{code:"ME",name:"Maine"},{code:"MD",name:"Maryland"},{code:"MA",name:"Massachusetts"},{code:"MI",name:"Michigan"},{code:"MN",name:"Minnesota"},{code:"MS",name:"Mississippi"},{code:"MO",name:"Missouri"},{code:"MT",name:"Montana"},{code:"NE",name:"Nebraska"},{code:"NV",name:"Nevada"},{code:"NH",name:"New Hampshire"},{code:"NJ",name:"New Jersey"},{code:"NM",name:"New Mexico"},{code:"NY",name:"New York"},{code:"NC",name:"North Carolina"},{code:"ND",name:"North Dakota"},{code:"OH",name:"Ohio"},{code:"OK",name:"Oklahoma"},{code:"OR",name:"Oregon"},{code:"PA",name:"Pennsylvania"},{code:"RI",name:"Rhode Island"},{code:"SC",name:"South Carolina"},{code:"SD",name:"South Dakota"},{code:"TN",name:"Tennessee"},{code:"TX",name:"Texas"},{code:"UT",name:"Utah"},{code:"VT",name:"Vermont"},{code:"VA",name:"Virginia"},{code:"WA",name:"Washington"},{code:"WV",name:"West Virginia"},{code:"WI",name:"Wisconsin"},{code:"WY",name:"Wyoming"}],"US Territories":[{code:"AS",name:"American Samoa"},{code:"GU",name:"Guam"},{code:"MP",name:"Northern Mariana Islands"},{code:"PR",name:"Puerto Rico"},{code:"VI",name:"U.S. Virgin Islands"}],"US Military":[{code:"AA",name:"Armed Forces America"},{code:"AE",name:"Armed Forces"},{code:"AP",name:"Armed Forces Pacific"}]},countries:[u.tg.UNITED_STATES]},{option:[{code:"AB",name:"Alberta"},{code:"BC",name:"British Columbia"},{code:"MB",name:"Manitoba"},{code:"NB",name:"New Brunswick"},{code:"NL",name:"Newfoundland and Labrador"},{code:"NS",name:"Nova Scotia"},{code:"NT",name:"Northwest Territories"},{code:"NU",name:"Nunavut"},{code:"ON",name:"Ontario"},{code:"PE",name:"Prince Edward Island"},{code:"QC",name:"Quebec"},{code:"SK",name:"Saskatchewan"},{code:"YT",name:"Yukon"}],countries:[u.tg.CANADA]},{option:[{code:"Carlow",name:"Carlow"},{code:"Cavan",name:"Cavan"},{code:"Clare",name:"Clare"},{code:"Cork",name:"Cork"},{code:"Donegal",name:"Donegal"},{code:"Dublin",name:"Dublin"},{code:"Dublin 1",name:"Dublin 1"},{code:"Dublin 2",name:"Dublin 2"},{code:"Dublin 3",name:"Dublin 3"},{code:"Dublin 4",name:"Dublin 4"},{code:"Dublin 5",name:"Dublin 5"},{code:"Dublin 6",name:"Dublin 6"},{code:"Dublin 6W",name:"Dublin 6W"},{code:"Dublin 7",name:"Dublin 7"},{code:"Dublin 8",name:"Dublin 8"},{code:"Dublin 9",name:"Dublin 9"},{code:"Dublin 10",name:"Dublin 10"},{code:"Dublin 11",name:"Dublin 11"},{code:"Dublin 12",name:"Dublin 12"},{code:"Dublin 13",name:"Dublin 13"},{code:"Dublin 14",name:"Dublin 14"},{code:"Dublin 15",name:"Dublin 15"},{code:"Dublin 16",name:"Dublin 16"},{code:"Dublin 17",name:"Dublin 17"},{code:"Dublin 18",name:"Dublin 18"},{code:"Dublin 20",name:"Dublin 20"},{code:"Dublin 22",name:"Dublin 22"},{code:"Dublin 24",name:"Dublin 24"},{code:"Galway",name:"Galway"},{code:"Kerry",name:"Kerry"},{code:"Kildare",name:"Kildare"},{code:"Kilkenny",name:"Kilkenny"},{code:"Laois",name:"Laois"},{code:"Leitrim",name:"Leitrim"},{code:"Limerick",name:"Limerick"},{code:"Longford",name:"Longford"},{code:"Louth",name:"Louth"},{code:"Mayo",name:"Mayo"},{code:"Meath",name:"Meath"},{code:"Monaghan",name:"Monaghan"},{code:"Offaly",name:"Offaly"},{code:"Roscommon",name:"Roscommon"},{code:"Sligo",name:"Sligo"},{code:"Tipperary",name:"Tipperary"},{code:"Waterford",name:"Waterford"},{code:"Westmeath",name:"Westmeath"},{code:"Wexford",name:"Wexford"},{code:"Wicklow",name:"Wicklow"}],countries:[u.tg.IRELAND]}]},postalCode:{required:[{option:!1,countries:[u.tg.HONG_KONG]},{option:!0}],autocomplete:{enabled:[{option:!0}]},validation:[{option:/^\d{5}(-\d{4})?$/,countries:[u.tg.UNITED_STATES]},{option:/^[A-Z]\d[A-Z]\s?\d[A-Z]\d$/i,countries:[u.tg.CANADA]}]}},Bi=n(114);class Hi{constructor(e,t){this.schema=e,this.config=t}validate(e){return this.schema.validate(e)}allowed(e,t){const n=this.schema.path(e);return!!n&&!n.validate(t,{[e]:t},e)}isRequired(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=this.schema.path(e);return!!n&&!!n.validate(null,t,e)}getProvider(){return this.config.provider}}class qi{constructor(e,t){this.config=e,this.paymentMethodConfigParser=t,this.managersMap=new Map}createManager(e,t){const n=this.config[e],i=n[t],s=this.paymentMethodConfigParser.parse(i);return new Hi(s,Object.assign(Object.assign({},i),{name:n.name,provider:n.provider}))}getManager(e,t){const n=e+"_"+t;let i=this.managersMap.get(n);return i||(i=this.createManager(e,t),this.managersMap.set(n,i),i)}}var Gi=n(5519),Vi=n.n(Gi),Yi=n(9248),Ki=n.n(Yi),zi=n(1861),$i=n.n(zi),Wi=n(5157),Xi=n.n(Wi),Qi=n(5052),Zi=n.n(Qi),Ji=n(1058),es=n.n(Ji);const ts=(e,t,n)=>{const i=Xi()(t,"ibanCountry");return!n.includes(i)||!!e&&!Zi()(e)},ns=(e,t,n)=>!!es()(e)||e>=n.size,is=e=>!!es()(e)||!!e;var ss=n(5545),as=n(9205),rs=n.n(as);class os extends Error{constructor(e,t){super(e),cs(this,"path",t),cs(this,"expose",!0),cs(this,"status",400),Error.captureStackTrace&&Error.captureStackTrace(this,os)}}const cs=(e,t,n)=>{Object.defineProperty(e,t,{enumerable:!1,configurable:!0,writable:!0,value:n})},ls={type(e,t,n){return"function"==typeof n&&(n=n.name),`${e} must be of type ${n}.`},required(e){return`${e} is required.`},match(e,t,n){return`${e} must match ${n}.`},length(e,t,n){if("number"==typeof n)return`${e} must have a length of ${n}.`;const{min:i,max:s}=n;return i&&s?`${e} must have a length between ${i} and ${s}.`:s?`${e} must have a maximum length of ${s}.`:i?`${e} must have a minimum length of ${i}.`:void 0},size(e,t,n){if("number"==typeof n)return`${e} must have a size of ${n}.`;const{min:i,max:s}=n;return void 0!==i&&void 0!==s?`${e} must be between ${i} and ${s}.`:void 0!==s?`${e} must be less than ${s}.`:void 0!==i?`${e} must be greater than ${i}.`:void 0},enum(e,t,n){const i=n.slice(),s=i.pop();return`${e} must be either ${i.join(", ")} or ${s}.`},illegal(e){return`${e} is not allowed.`},default(e){return`Validation failed for ${e}.`}};var us=ls,ds=n(5096),hs=n.n(ds);function ms(e,t,n){"string"!=typeof e?Object.keys(e).forEach((t=>n[t]=e[t])):n[e]=t}function ps(e,t,n){const i=e.split(/\.\$(?=\.|$)/),s=i.shift(),a=ss.get(t,s);if(!i.length)return n(s,a);if(Array.isArray(a))for(let e=0;e<a.length;e++)ps(ys(e,s)+i.join(".$"),t,n)}function gs(e,t,n,i){const s=hs()(e);if("array"!==s){if("object"===s)for(const[s,a]of Object.entries(e)){const e=ys(s,n),r=ys(s,i);t(e,r)&&gs(a,t,e,r)}}else e.forEach(((e,s)=>gs(e,t,ys(s,n),ys("$",i))))}function ys(e,t){return t?`${t}.${e}`:e}class fs{constructor(e,t){this.name=e,this.registry={},this._schema=t,this._type=null,this.messages={}}message(e){"string"==typeof e&&(e={default:e});const t=Object.entries(e);for(const[e,n]of t)this.messages[e]=n;return this}schema(e){return this._schema.path(this.name,e),this}use(e){return Object.keys(e).forEach((t=>{let n=e[t];Array.isArray(n)||(n=[n]);const i=n.shift();this._register(t,n,i)})),this}required(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return this._register("required",[e])}type(e){return this._type=e,this._register("type",[e])}string(){return this.type(String)}number(){return this.type(Number)}array(){return this.type(Array)}date(){return this.type(Date)}length(e){return this._register("length",[e])}size(e){return this._register("size",[e])}enum(e){return this._register("enum",[e])}match(e){return this._register("match",[e])}each(e){return this._schema.path(ys("$",this.name),e),this}elements(e){return e.forEach(((e,t)=>{this._schema.path(ys(t,this.name),e)})),this}properties(e){for(const[t,n]of Object.entries(e))this._schema.path(ys(t,this.name),n);return this}path(){return this._schema.path(...arguments)}typecast(e){const t=this._schema;let n=this._type;if(!n)return e;"function"==typeof n&&(n=n.name);const i=t.typecasters[n]||t.typecasters[n.toLowerCase()];if("function"!=typeof i)throw new Error(`Typecasting failed: No typecaster defined for ${n}.`);return i(e)}validate(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.name;const i=Object.keys(this.registry);for(const s of i){const i=this._run(s,e,t,n);if(i)return i}return null}_run(e,t,n,i){if(!this.registry[e])return;const s=this._schema,{args:a,fn:r}=this.registry[e];return(r||s.validators[e])(t,n,...a,i)?void 0:this._error(e,n,a,i)}_register(e,t,n){return this.registry[e]={args:t,fn:n},this}_error(e,t,n,i){const s=this._schema;let a=this.messages[e]||this.messages.default||s.messages[e]||s.messages.default;return"function"==typeof a&&(a=a(i,t,...n)),new os(a,i)}}const Ss={required(e,t,n){return!1===n||null!=e&&""!==e},type(e,t,n){return null==e||("function"==typeof n?e.constructor===n:hs()(e)===n)},length(e,t,n){if(null==e)return!0;if("number"==typeof n)return e.length===n;const{min:i,max:s}=n;return!(i&&e.length<i||s&&e.length>s)},size(e,t,n){if(null==e)return!0;if("number"==typeof n)return e===n;const{min:i,max:s}=n;return!(null!=parseInt(i)&&e<i||null!=parseInt(s)&&e>s)},enum(e,t,n){return null==e||n.includes(e)},match(e,t,n){return null==e||n.test(e)}};var As,Es,Cs=Ss;class vs{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.opts=t,this.hooks=[],this.props={},this.messages=Object.assign({},us),this.validators=Object.assign({},Cs),this.typecasters=Object.assign({},rs()),Object.keys(e).forEach((t=>this.path(t,e[t])))}path(e,t){const n=e.split("."),i=n.pop(),s=n.join(".");if(s&&this.path(s),"$"===i&&this.path(s).type(Array),t instanceof vs)return t.hook(((t,n)=>this.path(ys(t,e),n))),this.path(e,t.props);if(t instanceof fs)return this.props[e]=t,this.propagate(e,t),t;const a=this.props[e]||new fs(e,this);if(this.props[e]=a,this.propagate(e,a),!t)return a;if("string"==typeof t||"function"==typeof t)return a.type(t),a;if(Array.isArray(t))return a.type(Array),1===t.length?a.each(t[0]):a.elements(t),a;const r=Object.keys(t);let o=!1;for(const e of r)if("function"!=typeof a[e]){a.type(Object),o=!0;break}return r.forEach((n=>{const i=t[n];if(o)return this.path(ys(n,e),i);a[n](i)})),a}typecast(e){for(const[t,n]of Object.entries(this.props))ps(t,e,((t,i)=>{if(null==i)return;const s=n.typecast(i);s!==i&&ss.set(e,t,s)}));return this}strip(e){return gs(e,((t,n)=>!!this.props[n]||(ss.delete(e,t),!1))),this}enforce(e){const t=[];return gs(e,((e,n)=>{if(this.props[n])return!0;const i=new os(us.illegal(e),e);return t.push(i),!1})),t}validate(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};t=Object.assign(this.opts,t);const n=[];t.typecast&&this.typecast(e),t.strict&&n.push(...this.enforce(e)),!1!==t.strip&&this.strip(e);for(const[t,i]of Object.entries(this.props))ps(t,e,((t,s)=>{const a=i.validate(s,e,t);a&&n.push(a)}));return n}assert(e,t){const[n]=this.validate(e,t);if(n)throw n}message(e,t){return ms(e,t,this.messages),this}validator(e,t){return ms(e,t,this.validators),this}typecaster(e,t){return ms(e,t,this.typecasters),this}hook(e){return this.hooks.push(e),this}propagate(e,t){return this.hooks.forEach((n=>n(e,t))),this}}vs.ValidationError=os;class Ns{constructor(e){this.validationMessagesService=e,this.props={},this.customValidations={requiredIfIbanCountry:ts,availableAll:is,minAmount:ns}}parse(e){return Vi()(e,((e,t)=>this._parse(t,e))),new vs(this.props,{strip:!1})}_parse(e,t){if("repeat"===e&&Ki()(t))return this.props.period={enum:$i()(t,se.ONCE),message:{enum:(e,n)=>this.validationMessagesService.get("period")(e,n,$i()(t,se.ONCE))}},void(this.props[e]={enum:t,message:{enum:(e,n)=>this.validationMessagesService.get("enum")(e,n,t)}});Ki()(t)?this.props[e]={enum:t,message:{enum:(e,n)=>this.validationMessagesService.get("enum")(e,n,t)}}:Vi()(t,((t,n)=>{n in this.customValidations?this.props[e]={use:{[n]:(e,i)=>this.customValidations[n](e,i,t)},message:{[n]:(e,i)=>this.validationMessagesService.get(n)(e,i,t)}}:this.props[e]={[n]:t,message:{[n]:(e,i)=>this.validationMessagesService.get(n)(e,i,t)}}}))}}(Es=As||(As={})).SHORT="short",Es.ADVERB="adverb",Es.NOUN="noun",Es.ADJECTIVE="adjective",As.SHORT,As.ADVERB,As.NOUN;const bs={daily:{short:"day",noun:"day",adverb:"daily",adjective:"daily"},weekly:{short:"w",noun:"week",adverb:"weekly",adjective:"weekly"},biweekly:{short:"2w",noun:"2 weeks",adverb:"biweekly",adjective:"biweekly"},every4weeks:{short:"4w",noun:"4 weeks",adverb:"every 4 weeks",adjective:"4-weekly"},monthly:{short:"mo",noun:"month",adverb:"monthly",adjective:"monthly"},bimonthly:{short:"2mo",noun:"2 months",adverb:"bimonthly",adjective:"bimonthly"},quarterly:{short:"qrt",noun:"quarter",adverb:"quarterly",adjective:"quarterly"},semiannual:{short:"6mo",noun:"6 months",adverb:"semiannually",adjective:"semiannual"},annual:{short:"yr",noun:"year",adverb:"annually",adjective:"annual"}};function Ps(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:As.ADVERB;const n=bs[e];return n&&n[t]}class Ds{constructor(e,t){this.currencyFormatter=e,this.translateServices=t}get(e){switch(e){case"enum":return this.enum.bind(this);case"minAmount":return this.minAmount.bind(this);case"required":case"requiredIfIbanCountry":return this.required.bind(this);case"period":return this.period.bind(this);default:return this.default.bind(this)}}enum(e,t,n){return this.translateServices?this.translateServices.intlService.translate("paymentMethodValidationMessages.enum",{enums:n.join(", ")}):`This value must be either ${n.join(", ")}`}period(e,t,n){if(this.translateServices){const e=this.translateServices.subscriptionPeriodLabelsService,t=n.map((t=>e.getLabel(t,As.ADJECTIVE))).join(", ");return this.translateServices.intlService.translate("paymentMethodValidationMessages.period",{periods:t})}return`The chosen payment method only works with the following frequencies: ${n.map((e=>Ps(e,As.ADJECTIVE))).join(", ")}`}minAmount(e,t,n){if(this.translateServices){const e=this.translateServices.intlService.formatCurrency(n.size,{currency:n.currency});return this.translateServices.intlService.translate("paymentMethodValidationMessages.minAmount",{minAmount:e})}return`This amount must be at least ${this.currencyFormatter.format(n.size,{currency:n.currency})} due to the payment method chosen.`}required(e){return this.translateServices?this.translateServices.intlService.translate("paymentMethodValidationMessages.required"):`${e} is required`}default(e){return this.translateServices?this.translateServices.intlService.translate("paymentMethodValidationMessages.default"):`Validation failed for ${e}`}}class _s{constructor(e){this.intl=e}get all(){return{daily:{short:this.intl.translate("widgetSubscriptionPeriodLabel.daily.short"),noun:this.intl.translate("widgetSubscriptionPeriodLabel.daily.noun"),adverb:this.intl.translate("widgetSubscriptionPeriodLabel.daily.adverb"),adjective:this.intl.translate("widgetSubscriptionPeriodLabel.daily.adjective")},weekly:{short:this.intl.translate("widgetSubscriptionPeriodLabel.weekly.short"),noun:this.intl.translate("widgetSubscriptionPeriodLabel.weekly.noun"),adverb:this.intl.translate("widgetSubscriptionPeriodLabel.weekly.adverb"),adjective:this.intl.translate("widgetSubscriptionPeriodLabel.weekly.adjective")},biweekly:{short:this.intl.translate("widgetSubscriptionPeriodLabel.biweekly.short"),noun:this.intl.translate("widgetSubscriptionPeriodLabel.biweekly.noun"),adverb:this.intl.translate("widgetSubscriptionPeriodLabel.biweekly.adverb"),adjective:this.intl.translate("widgetSubscriptionPeriodLabel.biweekly.adjective")},every4weeks:{short:this.intl.translate("widgetSubscriptionPeriodLabel.every4weeks.short"),noun:this.intl.translate("widgetSubscriptionPeriodLabel.every4weeks.noun"),adverb:this.intl.translate("widgetSubscriptionPeriodLabel.every4weeks.adverb"),adjective:this.intl.translate("widgetSubscriptionPeriodLabel.every4weeks.adjective")},monthly:{short:this.intl.translate("widgetSubscriptionPeriodLabel.monthly.short"),noun:this.intl.translate("widgetSubscriptionPeriodLabel.monthly.noun"),adverb:this.intl.translate("widgetSubscriptionPeriodLabel.monthly.adverb"),adjective:this.intl.translate("widgetSubscriptionPeriodLabel.monthly.adjective")},bimonthly:{short:this.intl.translate("widgetSubscriptionPeriodLabel.bimonthly.short"),noun:this.intl.translate("widgetSubscriptionPeriodLabel.bimonthly.noun"),adverb:this.intl.translate("widgetSubscriptionPeriodLabel.bimonthly.adverb"),adjective:this.intl.translate("widgetSubscriptionPeriodLabel.bimonthly.adjective")},quarterly:{short:this.intl.translate("widgetSubscriptionPeriodLabel.quarterly.short"),noun:this.intl.translate("widgetSubscriptionPeriodLabel.quarterly.noun"),adverb:this.intl.translate("widgetSubscriptionPeriodLabel.quarterly.adverb"),adjective:this.intl.translate("widgetSubscriptionPeriodLabel.quarterly.adjective")},semiannual:{short:this.intl.translate("widgetSubscriptionPeriodLabel.semiannual.short"),noun:this.intl.translate("widgetSubscriptionPeriodLabel.semiannual.noun"),adverb:this.intl.translate("widgetSubscriptionPeriodLabel.semiannual.adverb"),adjective:this.intl.translate("widgetSubscriptionPeriodLabel.semiannual.adjective")},annual:{short:this.intl.translate("widgetSubscriptionPeriodLabel.annual.short"),noun:this.intl.translate("widgetSubscriptionPeriodLabel.annual.noun"),adverb:this.intl.translate("widgetSubscriptionPeriodLabel.annual.adverb"),adjective:this.intl.translate("widgetSubscriptionPeriodLabel.annual.adjective")}}}}class Ts{get all(){return bs}}class Os{constructor(e){this.subscriptionPeriodLabelsProvider=e}getLabel(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:As.ADVERB;if(!e)return;const n=this.subscriptionPeriodLabelsProvider.all[e];return n&&n[t]}getValueWithLabel(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:As.SHORT;return function(e,t){let n,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:As.SHORT;return t?(n=(arguments.length>3?arguments[3]:void 0)||Ps(t,i),n?`${e}/${n}`:e):e}(e,t,n,this.getLabel(t,n))}}class xs{constructor(e,t,n,i){this.checkoutConfiguration=e,this.currencyService=t,this.screenDataFormatter=n,this.checkoutLocale=i,this.currentScreenDataGetter=null,this.checkoutTrackerDataGetter=null,this.checkoutUIStateGetter=null,this.donationType=null}getPayParams(){var e;const t=this.getCheckoutTrackerData();return t?{frequency:t.donation.frequency,currency:t.donation.currency,amount:null!==(e=t.donation.amount)&&void 0!==e?e:0,amountOptions:{[t.donation.frequency]:t.donation.amountOptions||[]}}:null}getCommonPayload(e){var t;const n=this.getCheckoutCurrencyRate(e),i=this.getCheckoutInUSDAmount(e),s=this.getFundraisingPageCustomerKey(),a=this.getExternalEventTags(),r=this.getEventComment();let o,c,l=null;const u=this.getCurrentScreenData();if(u){if(o=u.screenName,l=this.getCheckoutTrackerData(),!l)throw new Error("Checkout tracker data is required");const e=this.getCheckoutUIStateData();if(!e)throw new Error("Checkout UI state data is required");c=JSON.stringify(this.screenDataFormatter.format(o,u.screenData,l,e,this.checkoutConfiguration))}return{widgetKey:this.checkoutConfiguration.campaign.key,checkoutCompanyKey:this.checkoutConfiguration.campaign.company,checkoutFrequency:null==l?void 0:l.donation.frequency,checkoutLocale:this.checkoutLocale,elementReminderKey:this.checkoutConfiguration.element.reminderKey,elementKey:this.checkoutConfiguration.element.key,elementType:this.checkoutConfiguration.element.type,elementLocale:this.checkoutConfiguration.element.locale,checkoutViewId:e.checkoutViewId,checkoutOpenTime:e.checkoutOpenTimestamp,checkoutLifetime:Date.now()-e.checkoutOpenTimestamp,checkoutScreen:o,checkoutScreenData:c,checkoutInUSDAmount:i,checkoutCurrencyRate:n,checkoutDefaultAmount:(null==l?void 0:l.donation.defaultAmount)||0,splitTestName:this.checkoutConfiguration.splitTest&&this.checkoutConfiguration.splitTest.name||"",splitTestVariant:this.checkoutConfiguration.splitTest&&this.checkoutConfiguration.splitTest.variant||"",elementData:JSON.stringify(this.checkoutConfiguration.externalConfig.elementTrackingData),fundraisingPageKey:(null===(t=this.checkoutConfiguration.fundraisingPage)||void 0===t?void 0:t.key)||"",fundraisingPageCustomerKey:s,donationType:this.getDonationType(),checkoutType:this.checkoutConfiguration.checkoutType,eventTags:a,eventComment:r}}setCurrentScreenDataGetter(e){this.currentScreenDataGetter=e}setCheckoutTrackerDataGetter(e){this.checkoutTrackerDataGetter=e}setCheckoutUIStateGetter(e){this.checkoutUIStateGetter=e}setDonationType(e){this.donationType=e}getCurrentScreenData(){var e,t;try{return null!==(t=null===(e=this.currentScreenDataGetter)||void 0===e?void 0:e.call(this))&&void 0!==t?t:null}catch(e){if(e instanceof Error&&"Cannot identify current screen"===e.message)return null;throw e}}getCheckoutTrackerData(){var e,t;return null!==(t=null===(e=this.checkoutTrackerDataGetter)||void 0===e?void 0:e.call(this))&&void 0!==t?t:null}getCheckoutUIStateData(){var e,t;return null!==(t=null===(e=this.checkoutUIStateGetter)||void 0===e?void 0:e.call(this))&&void 0!==t?t:null}getDonationType(){var e;return null!==(e=this.donationType)&&void 0!==e?e:this.checkoutConfiguration.defaultFlowType}getCheckoutCurrencyRate(e){if(e.checkoutCurrency)return this.currencyService.getRate(e.checkoutCurrency)}getCheckoutInUSDAmount(e){if(e.checkoutAmount&&e.checkoutCurrency)return this.currencyService.convert(e.checkoutAmount,e.checkoutCurrency,"USD")}getFundraisingPageCustomerKey(){var e;return this.checkoutConfiguration.queryParams.member||(null===(e=this.checkoutConfiguration.fundraisingPage)||void 0===e?void 0:e.admin)||""}getEventComment(){const e={};return this.checkoutConfiguration.queryParams.embedClientId&&(e.embedClientId=this.checkoutConfiguration.queryParams.embedClientId),e}getExternalEventTags(){var e;const t=null===(e=this.checkoutConfiguration.externalConfig.queryParams)||void 0===e?void 0:e.eventTags;return t?t.split(","):[]}}var ks=n(8393);const Is=[[0,3,1,7,5,9,8,6,4,2],[7,0,9,2,1,5,4,8,6,3],[4,2,0,6,8,7,1,3,5,9],[1,7,5,0,9,8,3,4,2,6],[6,1,2,3,0,4,5,9,7,8],[3,6,7,4,2,0,9,5,8,1],[5,8,6,9,7,2,0,1,3,4],[8,9,4,5,3,6,2,0,1,7],[9,4,3,8,6,1,7,2,0,5],[2,5,8,1,4,3,6,7,9,0]];var ws,Rs;!function(e){e.CHECKOUT="checkout"}(ws||(ws={}));class Ms extends sn{get eventType(){return"ping"}}class Ls{constructor(e){this.tags=new Set,this.tracker=e}get companyKey(){return this.tracker.companyKey}get clientId(){return this.tracker.clientId}get livemode(){return this.tracker.livemode}get clientLocale(){return this.tracker.clientLocale}get debug(){return this.tracker.debug}get page(){return this.tracker.page}get isPingAvailable(){return this.tracker.isPingAvailable}getTags(){return Array.from(this.tags)}customTrack(e){return this.tracker.customTrack(e)}track(e,t){return this.tracker.track(e,t)}ping(e,t){const n=e||new Ms;this.tracker.ping(n,t)}initializePointerUsageTracking(){this.tracker.initializePointerUsageTracking()}subscribe(e,t){return this.tracker.subscribe(e,t)}setEventTags(e){e.forEach((e=>this.tags.add(e)))}removeEventTags(e){this.tags.forEach((t=>{e.some((e=>t.substring(0,e.length)===e))&&this.tags.delete(t)}))}mergeEventTags(e){let t=[];e.payload.eventTags&&(t=e.payload.eventTags.slice()),this.tags.forEach((e=>{-1===t.indexOf(e)&&t.push(e)})),e.payload.eventTags=t}}function Us(e,t){if(!e)return;if("test"===t&&e.FUN_SPLIT_TESTING_NAME)return{name:e.FUN_SPLIT_TESTING_NAME,node:e};if("variant"===t&&e.FUN_SPLIT_TESTING_VARIANT_NAME)return{name:e.FUN_SPLIT_TESTING_VARIANT_NAME,node:e};const n=(0,Be.cH)(e,`fun-${t}`);if(n)return{name:n,node:e};const i=e.getAttribute("href")||"",s=/#FUN/.test(i),a=/#X/.test(i);if(s||a){const n=(0,Be.dy)(i);if(n&&n.key&&n[t])return{name:n[t],node:e}}}class Fs{constructor(e){this.node=e,this.path="",this.purePath=this.createPath(this.node),this.convertPathToString(this.purePath),this.extractDataFromNode(),this.extractSplitTest()}createPath(e){let t=e;const n=[];for(;!(t instanceof HTMLHtmlElement)&&t.parentNode;)n.push(t),t=t.parentNode;return n}convertPathToString(e){this.path=e.map((e=>{if(e.tagName&&e.nodeName&&"HTML"!==e.tagName){const t=e.classList?[].slice.call(e.classList):[];return e.tagName.toLowerCase()+(t.length?"."+t.join("."):"")}return!1})).filter(Boolean).reverse().join(" ")}extractDataFromNode(){const e=this.findExtractableNode();if(!e)return;const t=e.innerText||e.textContent||e.value;if(this.text=t?t.replace(/\s+/g," ").trim().substr(0,200):void 0,e instanceof HTMLAnchorElement)this.link=e.href;else{let t=e;for(;t;){if(t.href){this.link=t.href;break}t=t.parentNode}}}findExtractableNode(){return this.purePath.find((e=>{if(e.nodeType!==Node.ELEMENT_NODE)return!1;const t=e.tagName.toLowerCase();return-1!==["a","button"].indexOf(t)||"input"===t&&-1!==["submit","button"].indexOf(e.type)}))}extractSplitTest(){const e=function(e){if(!function(e){if(!e)return!1;const t=(0,Be.Ru)(e,(e=>Boolean(e.FUN_SPLIT_TESTING)));return Boolean(t)}(e))return;const t=function(e){const t=(0,Be.Ru)(e,(e=>Boolean(e.FUN_SPLIT_TESTING_NAME||(0,Be.cH)(e,"fun-test"))));return Us(e,"test")||Us(t,"test")}(e),n=function(e){const t=(0,Be.Ru)(e,(e=>Boolean(e.FUN_SPLIT_TESTING_VARIANT_NAME||(0,Be.cH)(e,"fun-variant"))));return Us(e,"variant")||Us(t,"variant")}(e);return t&&n?{test:t.name,variant:n.name}:void 0}(this.node);e&&(this.test=e.test,this.variant=e.variant)}}class js extends sn{constructor(e,t){super(),this.payload={checkoutIsRecurring:e.frequency!==se.ONCE?1:0,checkoutCurrency:e.currency,checkoutAmount:e.amount,checkoutPresets:e.amountOptions[e.frequency],elementKey:t.elementKey,elementType:t.elementType,elementReminderKey:t.elementReminderKey}}}class Bs extends js{constructor(e,t,n,i,s){super(e,t),this.merge({checkoutScreen:n,checkoutClickElement:i,clickAHref:null==s?void 0:s.link,clickDOMPath:null==s?void 0:s.path,clickText:null==s?void 0:s.text})}get eventType(){return"checkoutClick"}}class Hs extends js{constructor(e,t,n){super(e,t),this.merge({customEventType:n.customEventType,customEventData:JSON.stringify(n.customEventData)})}get eventType(){return nn}}class qs extends Ls{constructor(e,t,n,i,s,a){var r;super(e),this.tracker=e,this.checkoutConfiguration=t,this.trackerCheckoutPayloadService=n,this.targetWindow=i,this.url=s,this.checkoutOpenTimestamp=a,this.isTrackingClicks=!1,this.checkoutViewId=`${r=(0,ks.i)().slice(0,-1)}${function(e){let t=0;for(let n=0;n<e.length;n++){const i=e.charAt(n);t=Is[t][i]}return t.toString()}(r)}`,this.clickHandler=this.handleClick.bind(this)}get pageViewId(){var e;return null===(e=this.tracker.page)||void 0===e?void 0:e.pageViewId}initialize(){this.tracker.initializePointerUsageTracking(this.targetWindow),this.trackClicks()}dispose(){this.untrackClicks()}initializePointerUsageTracking(){this.tracker.initializePointerUsageTracking(this.targetWindow)}track(e){this.showcase||(this.addTrackerData(e),this.tracker.track(e,{url:this.url,trackerType:ws.CHECKOUT}))}customTrack(e){if(this.showcase)return;const t=this.trackerCheckoutPayloadService.getPayParams();if(!t)return;const n={elementKey:this.checkoutConfiguration.element.key,elementReminderKey:this.checkoutConfiguration.element.reminderKey,elementType:this.checkoutConfiguration.element.type};this.track(new Hs(t,n,{customEventType:e.type,customEventData:e.data}))}ping(e){if(this.showcase)return;if(!this.tracker.isPingAvailable)return;const t=e||new Ms;this.addTrackerData(t),this.tracker.ping(t,{url:this.url})}trackClicks(){if(this.isTrackingClicks)throw new Error("Already tracking clicks");this.targetWindow.addEventListener("click",this.clickHandler,!0),this.isTrackingClicks=!0}getTags(){return[...super.getTags(),...this.tracker.getTags()]}setCurrentScreenDataGetter(e){this.trackerCheckoutPayloadService.setCurrentScreenDataGetter(e)}setCheckoutTrackerDataGetter(e){this.trackerCheckoutPayloadService.setCheckoutTrackerDataGetter(e)}setCheckoutUIStateGetter(e){this.trackerCheckoutPayloadService.setCheckoutUIStateGetter(e)}setDonationType(e){this.trackerCheckoutPayloadService.setDonationType(e)}trackClick(e,t){this.trackClickEvent(t,e)}get showcase(){return this.checkoutConfiguration.infrastructureParams.showcase}addTrackerData(e){const t=this.trackerCheckoutPayloadService.getCommonPayload({checkoutViewId:this.checkoutViewId,checkoutOpenTimestamp:this.checkoutOpenTimestamp,checkoutAmount:e.payload.checkoutAmount,checkoutCurrency:e.payload.checkoutCurrency});e.merge(t),this.mergeEventTags(e)}handleClick(e){const t=e.target;if(!t)return;if(t.closest("label")&&"INPUT"!==t.tagName)return;const n=(0,Be.Ru)(t,(e=>e&&e.hasAttribute&&e.hasAttribute(qs.ElementNameDataAttr)));this.trackClickEvent(t,null==n?void 0:n.getAttribute(qs.ElementNameDataAttr))}trackClickEvent(e,t){var n;const i=this.trackerCheckoutPayloadService.getPayParams();if(!i)return;const s={elementKey:this.checkoutConfiguration.element.key,elementReminderKey:this.checkoutConfiguration.element.reminderKey,elementType:this.checkoutConfiguration.element.type},a=new Fs(e),r=(null===(n=this.trackerCheckoutPayloadService.getCurrentScreenData())||void 0===n?void 0:n.screenName)||"";this.track(new Bs(i,s,r,t||"other",a))}untrackClicks(){this.targetWindow.removeEventListener("click",this.clickHandler),this.isTrackingClicks=!1}}qs.ElementNameDataAttr="data-tracking-element-name",function(e){e.SHOULD_SHOW="should-show",e.SHOULD_HIDE="should-hide",e.WAS_HIDDEN="was-hidden"}(Rs||(Rs={}));const Gs=(0,d.createContext)(null);function Vs(){const e=(0,d.useContext)(Gs);if(!e)throw new Error("View event emitter was not provided");return e}class Ys extends ui{tryStart(){this.isActive||super.start()}}class Ks extends ui{}function zs(e){let t,n,i,s,a,r,o,c,l=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;for(t=3&e.length,n=e.length-t,i=l,a=3432918353,r=461845907,c=0;c<n;)o=255&e.charCodeAt(c)|(255&e.charCodeAt(++c))<<8|(255&e.charCodeAt(++c))<<16|(255&e.charCodeAt(++c))<<24,++c,o=(65535&o)*a+(((o>>>16)*a&65535)<<16)&4294967295,o=o<<15|o>>>17,o=(65535&o)*r+(((o>>>16)*r&65535)<<16)&4294967295,i^=o,i=i<<13|i>>>19,s=5*(65535&i)+((5*(i>>>16)&65535)<<16)&4294967295,i=27492+(65535&s)+((58964+(s>>>16)&65535)<<16);switch(o=0,t){case 3:o^=(255&e.charCodeAt(c+2))<<16;break;case 2:o^=(255&e.charCodeAt(c+1))<<8;break;case 1:o^=255&e.charCodeAt(c),o=(65535&o)*a+(((o>>>16)*a&65535)<<16)&4294967295,o=o<<15|o>>>17,o=(65535&o)*r+(((o>>>16)*r&65535)<<16)&4294967295,i^=o}return i^=e.length,i^=i>>>16,i=2246822507*(65535&i)+((2246822507*(i>>>16)&65535)<<16)&4294967295,i^=i>>>13,i=3266489909*(65535&i)+((3266489909*(i>>>16)&65535)<<16)&4294967295,i^=i>>>16,i>>>0}function $s(e,t){if(t.length<3)return t;const n=zs(e)%t.length,i=(zs(e+"_secondary")%t.length+n+1)%t.length;return[t[n],t[i]].sort(((e,t)=>null===e||null===t?0:e-t))}class Ws extends ui{get isTestGroup(){return this.isActive&&this.isVariant(Ln.TEST)}get upsellAmountsMap(){const e=this.tracker.clientId;return{[we.UP_TO_25]:$s(e,[1500,2e3]),[we.UP_TO_35]:$s(e,[2e3,2500,3e3]),[we.UP_TO_55]:$s(e,[2500,3e3,3500,4e3]),[we.UP_TO_100]:$s(e,[3500,4500,5500]),[we.UP_TO_150]:$s(e,[4e3,5e3,6e3]),[we.UP_TO_200]:$s(e,[5e3,7500,1e4])}}tryStart(e){this.active||this.canBeStarted(e)&&this.start(e)}canBeStarted(e){return!!e.preDonationUpsellIsEnabled}isEnabled(e){return this.canBeStarted(e)&&this.isTestGroup}tryToExpose(e){e!==se.MONTHLY&&e!==se.EVERY_4_WEEKS||this.exposure()}}class Xs extends ui{get isTestGroup(){return this.isActive&&this.isVariant(Yn.TEST)}tryStart(e){this.active||e.isPreDonationUpsellEnabled&&this.start(e)}tryExposure(e){e.preDonationUpsellTargetFrequency!==se.MONTHLY&&e.preDonationUpsellTargetFrequency!==se.EVERY_4_WEEKS||this.exposure()}}class Qs{constructor(e){this._locale=e}get intl(){if(!this._intl)throw new Error("Intl service is undefined in date formatter");return this._intl}set intl(e){this._intl=e}changeLocale(e){return this.locale=e,this.locale}get locale(){return this._locale}set locale(e){this._locale=e}}var Zs;!function(e){e.LONG="long",e.SHORT="short",e.LONG_WITH_YEAR="longWithYear",e.SHORT_WITH_YEAR="shortWithYear"}(Zs||(Zs={}));class Js extends Qs{format(e){const t={numberingSystem:"latn"};switch((arguments.length>1&&void 0!==arguments[1]?arguments[1]:{type:Zs.SHORT}).type){case Zs.LONG:t.month="long",t.day="numeric";break;case Zs.LONG_WITH_YEAR:t.month="long",t.day="numeric",t.year="numeric";break;case Zs.SHORT_WITH_YEAR:t.month="short",t.day="numeric",t.year="numeric";break;default:t.month="short",t.day="numeric"}return new Date(e).toLocaleString(this.locale,t)}}class ea{load(e){const t=this.getTranslationFilename(e);return this.loadFile(t)}getTranslationFilename(e){return e.replace("-","_")}}class ta extends ea{loadFile(e){return(0,l.sH)(this,void 0,void 0,(function*(){return(yield n(3367)(`./${e}.json`)).default}))}}const na=["common.screenAriaLabel","common.thankYouBadge","common.paymentNotAuthorizedError","confirmCloseDialog.question","confirmCloseDialog.instructions","paymentLoader.text","sharing.label","sharing.ariaLabel","tributeBadge.tooltipLabel","blockedScreen.description","mailingAddressScreen.onBehalfOfSubtitle","privacyScreen.alert.message","privacyScreen.donateAnonymously.label","privacyScreen.donateAnonymously.helpAriaLabel","privacyScreen.donateAsOrganization.label","privacyScreen.donateAsOrganization.input.helpAriaLabel","privacyScreen.donateAsOrganization.input.tooltipLabel","privacyScreen.donateAsOrganization.input.error.required","privacyScreen.donateAsOrganization.input.error.minLength","thankYouScreen.description.once","thankYouScreen.description.recurring.default","thankYouScreen.description.recurring.withEndDate","thankYouScreen.description.upsell","thankYouScreen.description.tribute.once","thankYouScreen.description.tribute.recurring.default","thankYouScreen.description.tribute.recurring.withEndDate","thankYouScreen.share.emailSubject","thankYouScreen.makeAnotherTribute.button","creditCardScreen.payButtonLabel.annual","creditCardScreen.payButtonLabel.continue","creditCardScreen.payButtonLabel.once","creditCardScreen.payButtonLabel.daily","creditCardScreen.payButtonLabel.weekly","creditCardScreen.payButtonLabel.biweekly","creditCardScreen.payButtonLabel.every4weeks","creditCardScreen.payButtonLabel.monthly","creditCardScreen.payButtonLabel.bimonthly","creditCardScreen.payButtonLabel.quarterly","creditCardScreen.payButtonLabel.semiannual","donateForm.donationCurrency","donateForm.title","donateForm.frequencyAriaLabel","donateForm.donationCurrency","donateForm.donationAmountField.label","donateForm.donationAmountField.hint.average","donateForm.donationAmountField.error.required","donateForm.donationAmountField.error.min","donateForm.designation.error.required","donateForm.tribute.label.dedication","donateForm.tribute.tooltipLabel","donateForm.donateButton.once","donateForm.donateButton.daily","donateForm.donateButton.weekly","donateForm.donateButton.biweekly","donateForm.donateButton.every4weeks","donateForm.donateButton.monthly","donateForm.donateButton.bimonthly","donateForm.donateButton.quarterly","donateForm.donateButton.semiannual","donateForm.donateButton.annual","doubleDonationScreen.description.desktop","doubleDonationScreen.description.mobile","doubleDonationScreen.tooltipLabel","doubleDonationScreen.nameMatch","doubleDonationScreen.message","doubleDonationScreen.matchedCompanyBlock.name","doubleDonationScreen.smallDonationAmountExperiment.name","doubleDonationScreen.button.donate.once","doubleDonationScreen.button.donate.recurring","idealConfirmationScreen.nextStepOverview","idealConfirmationScreen.nextStep","idealConfirmationScreen.returnLabel","paymentMethodScreen.title","paymentMethodScreen.transactionCostsInfo","paymentMethodScreen.donateNow","paymentMethodScreen.applePayDonateButton","paymentMethodScreen.applePayDonateButtonAriaLabel","paymentMethodScreen.paypal.errors.unavailable","paymentMethodScreen.creditCardIsUnavailableInfo.part-1","paymentMethodScreen.creditCardIsUnavailableInfo.part-2","postDonationUpsellScreen.amount.another","postDonationUpsellScreen.title","postDonationUpsellScreen.screenTitle","postDonationUpsellScreen.description","postDonationUpsellScreen.error.minAmount","upsellScreen.questionShort","upsellScreen.questionShortEvery4Weeks","upsellScreen.description","upsellScreen.descriptionEvery4Weeks","upsellScreen.button.donate4Weeks","upsellScreen.button.donateMonthly","usBankAccountScreen.description.desktop","usBankAccountConfirmationScreen.button","usBankAccountGuideScreen.description.descriptorCode"];var ia=n(1324);class sa{static isLocaleCode(e){return void 0!==e&&ia.O.includes(e)}constructor(e,t,n,i,s,a,r){this.translationService=e,this.dateFormatter=t,this.currencyFormatter=n,this.numberFormatter=i,this.company=s,this.donateToPayTokens=a,this._locale=sa.DEFAULT_LOCALE,this.availableLocales=r.availableLocales,this.locale=r.locale,this.company=s,this.donateToPayTokens=a,this.dateFormatter.intl=this}get locale(){return this._locale}get language(){return this.locale.split("-")[0]}getCurrencyFormat(){return this.currencyFormatter.getFormat()}setLocale(e){const t=this.locale;this.locale=e;const n=[this.translationService.changeLocale(this.locale)];return Promise.all(n).then((()=>this.locale)).catch((e=>(this.locale=t,Promise.reject(e)))).finally((()=>{this.dateFormatter.changeLocale(this.locale),this.currencyFormatter.changeLocale(this.locale),this.numberFormatter.changeLocale(this.locale)}))}translate(e,t){const n=(0,hi.ZD)(this.translationService.translate(e,t));return this.replaceDonateToPay(e,n)}formatDate(e,t){return this.dateFormatter.format(e,t)}formatCurrency(e,t){return this.currencyFormatter.format(e,t)}formatSymbol(e,t){return this.currencyFormatter.formatCurrencySymbol(e,t)}formatNumber(e,t){return this.numberFormatter.format(e,t)}isLocaleAvailable(e){return this.availableLocales.some((t=>t===e))}replaceDonateToPay(e,t){if("AFJCHFEK"===this.company&&this.locale===w.D.EN_US&&this.donateToPayTokens.includes(e)){const e={donation:"payment",Donation:"Payment",Donate:"Pay",donate:"pay",donating:"paying"};return t.replace(/donation|Donation|Donate|donate|donating/g,(t=>e[t]))}return t}set locale(e){this.isLocaleAvailable(e)?this._locale=e:this._locale=sa.DEFAULT_LOCALE}}sa.DEFAULT_LOCALE=w.D.EN_US;class aa{constructor(e,t){this.translationProvider=e,this.translationLoader=t}changeLocale(e){return this.loadTranslation(e).then((t=>{this.translationProvider.locale(e),this.translationProvider.extend(t)}))}translate(e,t){return this.translationProvider.t(e,t)}loadTranslation(e){return this.translationLoader.load(e)}}var ra=n(9966),oa=n(6713);class ca{constructor(e,t){this.baseLocale=e,this.lingui=(0,ra.sK)({locale:e,messages:{[e]:t||{}},localeData:{[e]:ca.makeLocaleData(e)}})}static extractLanguageFromLocale(e){const[t]=e.split("-");return t}static makeLocaleData(e){const t=this.extractLanguageFromLocale(e);return{plurals:oa[t]}}get defaultMessages(){return this.lingui._messages[this.baseLocale]}locale(e){if(void 0!==e){const t=ca.makeLocaleData(e);this.lingui.loadLocaleData(e,t),this.lingui.activate(e)}return this.lingui.locale}t(e,t){const n=this.lingui._(e,t,{formats:{number:{numberingSystem:"latn"}}});return n===e?"":n}extend(e){const t=Object.assign({},this.defaultMessages,e);this.lingui.load(this.locale(),t)}}function la(e,t,n,i){return(Number(e)||0).toLocaleString(i||"en-US",{style:"decimal",currency:"USD",minimumFractionDigits:t||0,maximumFractionDigits:n||0,numberingSystem:"latn"})}class ua{constructor(e){this._locale=e}changeLocale(e){return this.locale=e,this.locale}get locale(){return this._locale}set locale(e){this._locale=e}}class da extends ua{constructor(e){super(e),this.formatNumber=la}format(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{minimumFractionDigits:0,maximumFractionDigits:0};return this.formatNumber(e,t.minimumFractionDigits,t.maximumFractionDigits,this.locale)}}class ha{constructor(e,t,n){this.locale=e,this.widgetLocalizationConfig=t,this.companyLocalizationConfig=n}getDataLanguage(){const e=(0,hi.Qk)(this.locale);return-1!==this.widgetLocalizationConfig.supportedLanguages.indexOf(e)?e:(0,hi.Qk)(this.widgetLocalizationConfig.defaultLocale)}getUILocale(){const e=this.locale,t=this.widgetLocalizationConfig.useCompanyInterfaceLocales,n=-1!==this.companyLocalizationConfig.interfaceLocales.indexOf(e),i=-1!==this.widgetLocalizationConfig.supportedLanguages.indexOf((0,hi.Qk)(e));return t&&!n||!t&&!i?this.widgetLocalizationConfig.defaultLocale:e}}var ma=n(1755);const pa={base:{color:"#222832",fontWeight:400,fontFamily:"'IBM Plex Sans', sans-serif",fontSize:"16px",lineHeight:"24px",fontSmoothing:"antialiased",":focus":{color:"#222832"},"::placeholder":{color:"#697484"},":focus::placeholder":{color:"#697484"}},invalid:{color:"#dA2243",":focus":{color:"#dA2243"},"::placeholder":{color:"#697484"},":focus::placeholder":{color:"#697484"}}},ga={focus:"focused",empty:"empty",invalid:"invalid"},ya={fonts:[{family:"IBM Plex Sans",src:`url(${ma}) format('woff2')`,weight:"400",style:"normal"}]},fa=/#([\da-z_-]{1,25})(\?|&|$)/i,Sa=e=>{var t,n,i;return"string"==typeof(null===(t=e.navigator)||void 0===t?void 0:t.userAgent)&&!!(null===(i=null===(n=e.navigator)||void 0===n?void 0:n.userAgent)||void 0===i?void 0:i.match("CriOS"))},Aa=/^X[\dA-Z]{7}/,Ea=new RegExp("\\/-\\/(N[\\dA-Z]{7})");var Ca,va,Na;new RegExp(`${Ea.source}(?!\\/join)`),new RegExp(`${Ea.source}\\/join`),function(e){e.WIDGET="WIDGET",e.ELEMENT="ELEMENT",e.FUNDRAISING_PAGE="FUNDRAISING_PAGE"}(Ca||(Ca={})),function(e){e.type="type",e.recurring="recurring",e.amount="amount",e.modifyAmount="modifyAmount",e.designationId="designationId",e.fundraiser="fundraiser",e.modifyDesignation="modifyDesignation",e.firstName="firstName",e.lastName="lastName",e.email="email",e[e.fundraiseupLivemode=p]="fundraiseupLivemode"}(va||(va={})),function(e){e.fundraiser="fundraiser",e.element="element"}(Na||(Na={}));let ba=!1;class Pa{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:window;this.keysKeeper=e,this._disabled=!1,this.originalQueryStringAndHash="",this.window=t}get disabled(){return this._disabled}set disabled(e){e!==this._disabled&&(this._disabled=e)}checkUrl(){if(this.disabled)return;if(!this.window.location.hash)return;if(!this.keysKeeper.exists(Ca.WIDGET,this.window.location.hash))return;ba=!1;const e=this.keysKeeper.getOriginalWidgetKey(this.window.location.hash),t=this.window.location.href.replace(this.window.location.hash,"#"+e);this.window.history.replaceState(null,this.window.document.title,t)}setUrl(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",i=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if(this.disabled)return;if(!this.keysKeeper.exists(Ca.WIDGET,e)&&!this.isModalKey(e))return;const s=this.getQueryString({keyOrHash:e,hrefParams:t,queryString:this.window.location.search,hash:this.window.location.hash,fundraisingPageKey:n}),a=this.cleanHash(this.window.location.hash);this.originalQueryStringAndHash=this.cleanQueryString(s,t,i)+a;const r=this.window.location.origin+this.normalizePathname(this.window.location.pathname)+s+a;this.window.history.replaceState(null,this.window.document.title,r),ba=!1}back(){Sa(this.window)||this.window.history.go(-2),setTimeout((()=>{const e=(0,Be.UA)(this.window.location.search,!1).form;if(this.keysKeeper.exists(Ca.WIDGET,e)||this.isModalKey(e))return ba?void this.window.history.back():this.clearUrl()}),150)}clearUrl(){if(this.disabled)return;const e=(0,Be.UA)(this.window.location.search,!1).form;if(!this.keysKeeper.exists(Ca.WIDGET,e)&&!this.isModalKey(e))return;const t=this.window.location.origin+this.normalizePathname(this.window.location.pathname)+this.originalQueryStringAndHash;this.window.history.replaceState(null,this.window.document.title,t),ba=!0}isModalKey(e){return[ie.P2P_BUTTON,ie.P2P_LINK].some((t=>this.keysKeeper.checkElementType(t,e)))}getQueryString(e){let{keyOrHash:t,hrefParams:n,hash:i,queryString:s,fundraisingPageKey:a}=e;const r=(0,Be.UA)(n,!0),o={form:t},c=(0,Be.UA)(i,!1),l=(0,Be.UA)(s,!1),u=function(e){const t=fa.exec(e);return t&&t[1]?t[1]:""}(i)||l.form||"",d=0!==u.length&&u.toLowerCase()!==t.toLowerCase();return a&&(o.fundraiser=a),Object.keys(c).forEach((e=>{d&&e in o||(o[e]=c[e])})),Object.keys(l).forEach((e=>{d&&e in o||(o[e]=l[e])})),Object.assign(o,r),o.form=t,o.element&&Aa.test(o.element)&&delete o.element,"?"+(0,Be.Ws)(o,!1)}cleanHash(e){const t=e.split("&",1)[0];return this.keysKeeper.exists(Ca.WIDGET,t)||"#"===t||-1!==t.indexOf("=")?"":t}cleanQueryString(e,t,n){const i=(0,Be.UA)(t,!1),s=(0,Be.UA)(e,!1);delete s.form,Object.keys(va).forEach((e=>delete s[e])),Object.keys(Na).forEach((e=>delete s[e])),n||Object.keys(i).forEach((e=>delete s[e]));const a=(0,Be.Ws)(s,!1);return""===a?"":"?"+a}normalizePathname(e){return e.startsWith("//")?e.slice(1):e}}function Da(e){return new Promise((t=>{setTimeout(t,e)}))}class _a{static forKey(e){return new _a(e)}constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];this.key=e,this.params=t,this.customParams=n}toString(){const e=[].concat(this.params,this.customParams);return["#"+this.key,e.map((e=>{let[t,n]=e;return t+"="+encodeURIComponent(n)})).join("&")].filter(Boolean).join("&")}addRecurring(e){return e&&this.params.push([va.recurring,e]),this}addAmount(e){return e&&this.params.push([va.amount,e.toString()]),this}addModifyAmount(e){return!1!==e&&"no"!==e||this.params.push([va.modifyAmount,"no"]),this}addModifyDesignation(e){return!1!==e&&"no"!==e||this.params.push([va.modifyDesignation,"no"]),this}addDesignation(e){return"no"===e?this.params.push(["designation",e]):e&&this.params.push([va.designationId,e]),this}addFirstName(e){return e&&this.params.push([va.firstName,e]),this}addLastName(e){return e&&this.params.push([va.lastName,e]),this}addEmail(e){return e&&this.params.push([va.email,e]),this}addFundraiseupLivemode(e){return!1!==e&&"no"!==e||this.params.push([va.fundraiseupLivemode,"no"]),this}addCustomQueryParams(e){if(!e)return this;for(const[t,n]of Object.entries(e))n&&this.customParams.push([t,n]);return this}}var Ta,Oa,xa,ka,Ia,wa,Ra,Ma,La,Ua,Fa,ja;!function(e){e.POP="popstate"}(Ta||(Ta={})),function(e){e.INITIAL="initial",e.LOOP="loop"}(Oa||(Oa={}));class Ba{constructor(e){this.window=e,this.navigationHandlers=new Set,this.isLoop=!1,this.historyStateStack=[],this.historyApi=this.window.history,this._handleNavigation=this.handleNavigation.bind(this)}initialize(e){var t;this.historyStateStack=[],this.url=e;const n=(null===(t=this.historyApi.state)||void 0===t?void 0:t.state)||this.historyApi.state;return n!==Oa.INITIAL&&this.setInitialNavigationState(n),this.window.addEventListener(Ta.POP,this._handleNavigation),this}dispose(){this.historyStateStack.length&&(this.historyApi.go(-this.historyStateStack.length),this.historyStateStack=[]),this.window.removeEventListener(Ta.POP,this._handleNavigation)}onNavigation(e){this.navigationHandlers.add(e)}activateLoop(){this.isLoop||(this.isLoop=!0,this.setNavigationState(Oa.LOOP,{replace:!0}))}deactivateLoop(){this.isLoop&&(this.isLoop=!1,this.setNavigationState(Oa.INITIAL,{replace:!0}))}callNavigationHandlers(){this.navigationHandlers.forEach((e=>{e()}))}handleNavigationInitialState(){this.historyApi.length>2?this.historyApi.back():this.setNavigationState(Oa.INITIAL)}handleNavigation(e){var t;const n=(null===(t=e.state)||void 0===t?void 0:t.state)||e.state,i=null===n||""===n,s=n===Oa.INITIAL;this.historyStateStack.pop(),this.isLoop&&(s||i)&&this.setNavigationState(Oa.LOOP),this.isLoop||!s&&!i?this.callNavigationHandlers():this.handleNavigationInitialState()}setNavigationState(e,t){(null==t?void 0:t.replace)?this.historyApi.replaceState({state:e},"",this.url):(this.historyApi.pushState({state:e},"",this.url),this.historyStateStack.push(e))}setInitialNavigationState(e){const t=e===Oa.LOOP;this.setNavigationState(Oa.INITIAL,{replace:t})}}class Ha extends Ba{handleNavigationInitialState(){this.callNavigationHandlers()}}!function(e){e.CHECKOUT_INTENT="checkoutIntent",e.TRIBUTE_SELECTED="tributeSelected",e.EMAIL_LOG="emailLog",e.EMAIL_LOG_ID="emailLogId"}(xa||(xa={}));class qa{constructor(e,t,n,i,s,a){this.globalWindow=e,this.keysKeeper=t,this.checkoutConfiguration=n,this.queryParams=i,this.launcherParams=s,this.isOpenedFromUrl=a}initialize(){this.setUrl();const e=this.clearUrl();this.flowNavigationRouter.initialize(e)}dispose(){return(0,l.sH)(this,void 0,void 0,(function*(){this.flowNavigationRouter.dispose(),yield Da(150),this.urlRouter.clearUrl()}))}onNavigation(e){this.flowNavigationRouter.onNavigation(e)}activateNavigationLoop(){this.flowNavigationRouter.activateLoop()}deactivateNavigationLoop(){this.flowNavigationRouter.deactivateLoop()}get urlRouter(){return this._urlRouter||(this._urlRouter=new Pa(this.keysKeeper,this.globalWindow)),this._urlRouter}get flowNavigationRouter(){return this._flowNavigationRouter||(this._flowNavigationRouter=new Ha(this.globalWindow)),this._flowNavigationRouter}clearUrl(){const e=(0,Be.UA)(this.globalWindow.location.search,!1),t={},n=Object.values(xa);Object.keys(e).forEach((i=>{n.includes(i)||(t[i]=e[i])}));const i=(0,Be.Ws)(t,!1);return`${this.globalWindow.location.origin}${this.globalWindow.location.pathname}${i?`?${i}`:""}`}setUrl(){var e,t;this.urlRouter.disabled=!!this.checkoutConfiguration.showcase;const n=_a.forKey("").addAmount(this.queryParams.amount).addDesignation(this.queryParams.designationId).addModifyDesignation(this.queryParams.modifyDesignation).addRecurring(this.queryParams.recurring).addModifyAmount(this.queryParams.modifyAmount).addFirstName(this.queryParams.firstName).addLastName(this.queryParams.lastName).addEmail(this.queryParams.email).addFundraiseupLivemode(this.queryParams[p]).addCustomQueryParams(this.checkoutConfiguration.externalConfig.queryParams);this.urlRouter.checkUrl(),this.urlRouter.setUrl(this.checkoutConfiguration.campaign.customHash||this.checkoutConfiguration.campaign.key,n.toString().slice(1),null!==(t=null===(e=this.checkoutConfiguration.fundraisingPage)||void 0===e?void 0:e.key)&&void 0!==t?t:"",this.isOpenedFromUrl)}}!function(e){e.COMMENT="comment",e.MAILING_ADDRESS="mailing-address",e.PRIVACY="privacy",e.THANK_YOU="thank-you",e.REMIND_ME="remind-me",e.QUESTIONS="questions",e.BLOCKED="blocked"}(ka||(ka={})),function(e){e.CRYPTO_CURRENCY="crypto-currency",e.CRYPTO_WALLET="crypto-wallet"}(Ia||(Ia={})),function(e){e.DONATION="CryptoDonation"}(wa||(wa={})),function(e){e.DONOR_NAME="DonorName",e.DONOR_EMAIL="DonorEmail",e.MAILING_ADDRESS="MailingAddress",e.TRIBUTE="Tribute",e.DESIGNATION="Designation",e.QUESTIONS="Questions",e.PHONE_NUMBER="PhoneNumber",e.TERMS_AND_CONDITIONS="TermsAndConditions",e.REMIND_ME_LATER="RemindMeLater",e.ON_BEHALF_OF="OnBehalfOf",e.DONATE_ANONYMOUS="DonateAnonymous",e.CUSTOMER_TITLE="CustomerTitle",e.COMMENT="Comment",e.COMMUNICATION_CONSENT="CommunicationConsent",e.BIRTHDAY_DATE="BirthdayDate"}(Ra||(Ra={})),function(e){e.SHARING="Sharing",e.TRIBUTE="Tribute",e.DEFAULT="Default"}(Ma||(Ma={})),function(e){e.PENDING="pending",e.SUCCESS="success",e.ERROR="error",e.IDLE="idle"}(La||(La={})),function(e){e.FUNDRAISER="fundraiser",e.CAUSE="cause"}(Ua||(Ua={})),function(e){e.CARD_NUMBER="cardNumber",e.CARD_EXPIRY="cardExpiry",e.CARD_CVC="cardCvc",e.AU_BANK_ACCOUNT="auBankAccount",e.IBAN="iban",e.IDEAL_BANK="idealBank"}(Fa||(Fa={})),function(e){e.CARD="card",e.PAYMENT_OPTIONS="paymentOptions"}(ja||(ja={}));const Ga=[tn.DONATE,tn.DOUBLE,tn.GIFT_AID,tn.PAYMENT_OPTIONS,tn.POST_DONATION_UPSELL,tn.UK_BACS,tn.UPSELL,tn.COMMUNICATION_CONSENT,ka.COMMENT,ka.MAILING_ADDRESS,ka.PRIVACY,ka.THANK_YOU,ka.REMIND_ME,Ia.CRYPTO_CURRENCY];class Va{format(e,t,n,i,s){return function(e,t,n,i,s){if(a=e,!Ga.some((e=>e===a)))return{};var a;switch(e){case tn.DONATE:return function(e,t,n,i){var s,a,r,o;return{isFiatEnabled:!0,isCryptoEnabled:e.enabledFlows.crypto,frequency:{value:e.donation.frequency,options:[e.leftButtonFrequency,e.rightButtonFrequency],editable:e.donation.canModifyFrequency,isEndDateActive:e.donation.showDonationEndDate?e.donation.isDonationEndDateActive:null},amountOptions:{selected:e.donation.amountOptions.includes(null!==(s=e.donation.amount)&&void 0!==s?s:0),values:e.donation.amountOptions,shown:e.donation.amountOptions.length>0},amount:{filled:!!e.donation.amount,value:null!==(a=e.donation.amount)&&void 0!==a?a:0,editable:e.donation.canModifyAmount,hasExternalAmount:i.hasExternalAmount},currency:{value:e.donation.currency,editable:e.donation.canSelectCurrency},tribute:{filled:e.tribute.isFilled,type:e.tribute.show?e.tribute.labelType:null,shown:e.tribute.show},comment:{shown:e.comment.isEnabled,filled:!!e.comment.content},goal:{value:e.designation.goalKey,editable:e.designation.isEditable,shown:e.designation.show},askPage:{shown:i.getAskPageConfig().show},fundraisingPage:{shown:Boolean((null===(r=i.fundraisingPage)||void 0===r?void 0:r.key)&&n.askPageActiveTab===Ua.FUNDRAISER)},hint:t.donation.currentHint&&{amount:t.donation.currentHint.amount,description:t.donation.currentHint.description,amountUsd:t.donation.currentHint.amountUsd}||null,hintOptions:(null===(o=t.donation.hintOptions)||void 0===o?void 0:o.map((e=>({amount:e.amount,description:e.description,amountUsd:e.amountUsd,default:e.default}))))||null,hintVariantName:t.donation.hintVariantName||null,aiEnabled:i.campaign.config.enableAI,goalMeter:t.goalMeter}}(t,n,i,s);case tn.UPSELL:return function(e){var t,n,i,s;return{amount:{value:e.upsell.fromAmount,valueInUsd:e.upsell.fromAmountInUSD},currency:{value:e.currency},smallAmount:{shown:null!==e.lowAmount,value:null!==(t=e.lowAmount)&&void 0!==t?t:0,valueInUsd:null!==(n=e.lowAmountInUSD)&&void 0!==n?n:0},bigAmount:{value:null!==(i=e.highAmount)&&void 0!==i?i:0,valueInUsd:null!==(s=e.highAmountInUSD)&&void 0!==s?s:0,frequency:e.targetFrequency}}}(t);case tn.PAYMENT_OPTIONS:return function(e,t,n){var i;const s=e.availableOptions.filter((t=>e.buttonOptions[t].visible));return{coverFees:{checked:e.isFeeCovered,fees:e.processingFee,total:e.total,currency:e.currency},frequency:e.frequency,paymentMethods:s,paymentOptions:{visible:e.visiblePaymentOptions,hidden:e.hiddenPaymentOptions},askPage:{shown:n.getAskPageConfig().show},fundraisingPage:{shown:Boolean((null===(i=n.fundraisingPage)||void 0===i?void 0:i.key)&&t.askPageActiveTab===Ua.FUNDRAISER)},card:{number:{filled:e.cardFilledFields[Fa.CARD_NUMBER]},expiry:{filled:e.cardFilledFields[Fa.CARD_EXPIRY]},cvc:{filled:e.cardFilledFields[Fa.CARD_CVC]}}}}(t,i,s);case tn.GIFT_AID:return{shown:!0};case tn.UK_BACS:return function(e){return{accountNumber:{filled:!!e.accountNumber},sortCode:{filled:!!e.sortCode}}}(t);case tn.DOUBLE:return function(e){return{upsell:{currency:e.currency,currentAmount:e.total,matchingFromAmount:e.minimumMatchedAmount,matchingPromisedAmount:e.matchingPromisedAmount,matchingRatio:e.matchingRatio,proposedAmount:e.proposedAmount,proposedAmountBeforeFeeCovered:e.proposedAmountBeforeFeeCovered,show:e.showDTDUpsellExperiment&&e.showDTDUpsell},employer:{filled:!!e.employer.name,filledFromList:e.companies.some((t=>{let{company_name:n}=t;return n===e.employer.name}))}}}(t);case tn.POST_DONATION_UPSELL:return function(e){var t,n,i;return{amount:{value:null!==(t=e.amount)&&void 0!==t?t:0},minAmount:{value:e.recurringMinAmount},total:{value:null!==(n=e.amount)&&void 0!==n?n:0},currency:{value:e.currency},period:{value:e.period},amountInUSD:{value:null!==(i=e.amountInUSD)&&void 0!==i?i:0}}}(t);case ka.COMMENT:return function(e){return{comment:{filled:!!e.comment}}}(t);case ka.PRIVACY:return function(e,t,n){var i;return{firstName:{filled:!!e.firstName},lastName:{filled:!!e.lastName},email:{filled:!!e.email,validated:!1,valid:null},phoneNumber:{shown:e.showPhone,required:e.phoneRequired,filled:!!e.phone},anonymous:{shown:e.showAnonymous,filled:e.anonymousChecked},onBehalfOf:{shown:e.onBehalfOf.isEnabled,filled:!!e.onBehalfOf.companyName},terms:{shown:e.termsAndConditions.isEnabled,checked:e.termsAndConditions.isAccepted},subscription:{shown:e.mailingListSubscription.show,checked:e.mailingListSubscription.show&&e.mailingListSubscription.checked},generalConsent:{shown:e.generalConsent.isEnabled,checked:e.generalConsent.isEnabled&&e.generalConsent.isAccepted},askPage:{shown:n.getAskPageConfig().show},birthday:{shown:e.birthday.isEnabled,filled:!!e.birthday.value,date:e.birthday.convertedDate},fundraisingPage:{shown:Boolean((null===(i=n.fundraisingPage)||void 0===i?void 0:i.key)&&t.askPageActiveTab===Ua.FUNDRAISER)}}}(t,i,s);case ka.MAILING_ADDRESS:return function(e){return{mailingAddressRequired:e.isRequired,city:{filled:!!e.city},country:{filled:!!e.countryCode,value:e.countryCode},line1:{filled:!!e.line1},line2:{filled:!!e.line2},postal:{filled:!!e.postal},region:{filled:!!e.region,value:e.region}}}(t);case ka.THANK_YOU:return function(e){return{amount:{value:e.total},currency:{value:e.currency},email:{shown:e.sharing.showEmail},facebook:{shown:e.sharing.showFacebook},linkedin:{shown:e.sharing.showLinkedin},twitter:{shown:e.sharing.showTwitter},makeAnotherDonation:{shown:e.tribute.makeAnotherDonation},completeDedication:{shown:e.tribute.completeDedication}}}(t);case ka.REMIND_ME:return function(e){return{email:{filled:!!e.email.value},terms:{shown:e.isTermsAndConditionsEnabled,checked:e.termsAndConditions.isAccepted}}}(t);case Ia.CRYPTO_CURRENCY:return function(e,t,n){var i;return{isFiatEnabled:e.enabledFlows.money,isCryptoEnabled:!0,tribute:{filled:e.tribute.isFilled,type:e.tribute.show?e.tribute.labelType:null,shown:e.tribute.show},comment:{shown:e.comment.isEnabled,filled:!!e.comment.content},goal:{value:e.designation.goalKey,editable:e.designation.isEditable,shown:e.designation.show},askPage:{shown:n.getAskPageConfig().show},fundraisingPage:{shown:Boolean((null===(i=n.fundraisingPage)||void 0===i?void 0:i.key)&&t.askPageActiveTab===Ua.FUNDRAISER)},cryptocurrency:e.currencyCode}}(t,i,s);case tn.COMMUNICATION_CONSENT:return(e=>{const t=t=>{const n=e.channels.find((e=>e.type===t));return{shown:Boolean(n),checked:!!n&&n.isAccepted}};return{channels:{email:t(u.ax.EMAIL),sms:t(u.ax.SMS),phoneCalls:t(u.ax.PHONE_CALLS),postalMail:t(u.ax.POSTAL_MAIL),socialMedia:t(u.ax.SOCIAL_MEDIA)}}})(t);default:throw new F(e,`Unknown screen name "${e}"`)}}(e,t,n,i,s)}}class Ya{constructor(e){let{distributionId:t,name:n,variants:i,sentry:s}=e;this.variants=new Map,this.distributionId=t,this.name=n,this.sentry=s,i.forEach((e=>{this.variants.set(e.name,{name:e.name,weight:e.weight})})),this.variantSelectors=this.getDistributedSelectors()}get currentVariantName(){return this._currentVariantName}get previousVariantName(){return this._previousVariantName}initCurrentVariantName(){var e;const t=this.getSelection(),n=[];this.variantSelectors.forEach(((e,t)=>{n.push([t,e])})),this.currentVariantName=null===(e=n.find((e=>{let[,[n,i]]=e;return t>=n&&t<i})))||void 0===e?void 0:e[0]}setVariant(e){this.variants.has(e)?this.currentVariantName=e:this.sentry.captureException(new ci(this.name))}set currentVariantName(e){this._previousVariantName=this._currentVariantName,this._currentVariantName=e}getSelection(){const e=this.getMaxDistributionValue();return Number(zs(`${this.distributionId}:${this.name}`)%e)}getDistributedSelectors(){let e=0;const t=new Map;return this.assertVariantsWithWeight(this.variants),this.variants.forEach(((n,i)=>{let{weight:s}=n;const a=this.getWeightSum(),r=this.getMaxDistributionValue()/a;t.set(i,[e,e+r*s]),e+=r*s})),t}getWeightSum(){let e=0;return this.assertVariantsWithWeight(this.variants),this.variants.forEach((t=>{let{weight:n}=t;return e+=n})),e}getMaxDistributionValue(){return 100*this.variants.size}assertVariantsWithWeight(e){if(![...e.entries()].every((e=>{let[,{weight:t}]=e;return void 0!==t})))throw new Error("Every variant should have weight")}}class Ka{constructor(e){this.experiments=new Map;const{experimentsSettings:t,tracker:n,funStorage:i,companyKey:s,widgetKey:a,user:r,parentCompanyKey:o,infrastructureParams:c,sentry:l,distributionId:u,isDebugMode:d,isFundraiseupVisitor:h,isAbTestMode:m=!1}=e;if(this.experimentsSettings=t,this.tracker=n,this.funStorage=i,this.companyKey=s,this.parentCompanyKey=o,this.widgetKey=a,this.user=r,this.infrastructureParams=c,this.sentry=l,this.distributionId=u,this.isDebugMode=d,this.isFundraiseupVisitor=h,this.isAbTestMode=m,!this.distributionId)throw new Error("ExperimentController: Distribution ID is required")}get allowExperiments(){return!!this.isDebugMode||!this.isFundraiseupVisitor&&!this.isAbTestMode}register(e,t){if(this.experiments.has(e))return;const n=this.createExperiment(e,t);n&&this.experiments.set(e,n)}get(e){if(!this.experiments.has(e)){const t=new li(e);throw this.sentry.captureException(t),t}return this.experiments.get(e)}has(e){return this.experiments.has(e)}createExperiment(e,t){const n=this.experimentsSettings.find((t=>t.name===e));if(!n)return this.sentry.captureException(new oi(e)),null;const i=this.getDistributionExperimentName(n),s=new Ya({distributionId:this.distributionId,name:i,variants:n.variants,sentry:this.sentry});return new t({settings:n,companyKey:this.companyKey,parentCompanyKey:this.parentCompanyKey,tracker:this.tracker,funStorage:this.funStorage,user:this.user,widgetKey:this.widgetKey,infrastructureParams:this.infrastructureParams,sentry:this.sentry,distribution:s,allowExperiments:this.allowExperiments})}getDistributionExperimentName(e){return e.experimentId===mn[cn.PRESETS_IN_DONATION_FORM_V_3_EXPERIMENT]||e.experimentId===mn[cn.AMOUNT_PRESETS_PAGES_V_3_EXPERIMENT]?cn.AMOUNT_PRESETS_CHECKOUT_EXPERIMENT:e.name}}const za={experimentId:mn[cn.CAMPAIGN_PAGE_TEST_EXPERIMENT],name:cn.CAMPAIGN_PAGE_TEST_EXPERIMENT,enabled:!1,scope:pn.CAMPAIGN_PAGES,variants:[{name:En.CONTROL,weight:1},{name:En.TEST,weight:1}]},$a={experimentId:mn[cn.ML_POST_DONATION_UPSELL_CAMPAIGN_PAGES_EXPERIMENT],name:cn.ML_POST_DONATION_UPSELL_CAMPAIGN_PAGES_EXPERIMENT,enabled:!1,scope:pn.CAMPAIGN_PAGES,variants:[{name:"control",weight:1},{name:"test",weight:1}]},Wa={experimentId:mn[cn.CAMPAIGN_PAGES_WITHOUT_PRE_DONATION_UPSELL_EXPERIMENT],name:cn.CAMPAIGN_PAGES_WITHOUT_PRE_DONATION_UPSELL_EXPERIMENT,enabled:!1,scope:pn.CAMPAIGN_PAGES,variants:[{name:Dn.CONTROL,weight:1},{name:Dn.TEST,weight:1}]},Xa={experimentId:mn[cn.SMART_COVERING_FEE_CAMPAIGN_PAGES_V_2_EXPERIMENT],name:cn.SMART_COVERING_FEE_CAMPAIGN_PAGES_V_2_EXPERIMENT,enabled:!1,scope:pn.CAMPAIGN_PAGES,variants:[{name:xn.CONTROL,weight:1},{name:xn.TEST,weight:1}]},Qa={experimentId:mn[cn.SMART_POST_DONATION_UPSELL_CAMPAIGN_PAGES_V_2_EXPERIMENT],name:cn.SMART_POST_DONATION_UPSELL_CAMPAIGN_PAGES_V_2_EXPERIMENT,enabled:!1,scope:pn.CAMPAIGN_PAGES,variants:[{name:Rn.CONTROL,weight:1},{name:Rn.TEST,weight:1}]},Za={experimentId:mn[cn.LESS_PAYMENT_OPTIONS_CAMPAIGN_PAGES_EXPERIMENT],name:cn.LESS_PAYMENT_OPTIONS_CAMPAIGN_PAGES_EXPERIMENT,enabled:!1,scope:pn.CAMPAIGN_PAGES,variants:[{name:Mn.CONTROL,weight:1},{name:Mn.TEST,weight:1}]},Ja={experimentId:mn[cn.UPSELL_AMOUNTS_DATASET_PAGES_EXPERIMENT],name:cn.UPSELL_AMOUNTS_DATASET_PAGES_EXPERIMENT,enabled:!1,scope:pn.CAMPAIGN_PAGES,variants:[{name:Un.CONTROL,weight:0},{name:Un.TEST,weight:1}]},er={experimentId:mn[cn.COLLECT_DATASET_POST_DONATION_UPSELL_AMOUNT_CAMPAIGN_PAGES_V_3_EXPERIMENT],name:cn.COLLECT_DATASET_POST_DONATION_UPSELL_AMOUNT_CAMPAIGN_PAGES_V_3_EXPERIMENT,enabled:!1,scope:pn.CAMPAIGN_PAGES,variants:[{name:Vn.CONTROL,weight:0},{name:Vn.TEST,weight:1}]},tr={experimentId:mn[cn.UPSELL_AMOUNTS_SUGGESTION_PAGES_EXPERIMENT],name:cn.UPSELL_AMOUNTS_SUGGESTION_PAGES_EXPERIMENT,enabled:!1,scope:pn.CAMPAIGN_PAGES,variants:[{name:Kn.CONTROL,weight:1},{name:Kn.TEST,weight:1}]},nr={experimentId:mn[cn.AMOUNT_PRESETS_PAGES_V_3_EXPERIMENT],name:cn.AMOUNT_PRESETS_PAGES_V_3_EXPERIMENT,enabled:!1,scope:pn.CAMPAIGN_PAGES,variants:[{name:$n.CONTROL,weight:1},{name:$n.TEST,weight:1}]},ir={experimentId:mn[cn.BIRTHDAY_DONATION_CAMPAIGN_PAGE_EXPERIMENT],name:cn.BIRTHDAY_DONATION_CAMPAIGN_PAGE_EXPERIMENT,enabled:!1,scope:pn.CAMPAIGN_PAGES,variants:[{name:Qn.CONTROL,weight:1},{name:Qn.TEST,weight:1}]},sr={experimentId:mn[cn.AMAZON_PAY_CAMPAIGN_PAGES_EXPERIMENT],name:cn.AMAZON_PAY_CAMPAIGN_PAGES_EXPERIMENT,enabled:!1,scope:pn.CAMPAIGN_PAGES,variants:[{name:Zn.CONTROL,weight:0},{name:Zn.TEST,weight:1}]},ar={experimentId:mn[cn.DEFAULT_FREQUENCY_V_2_CAMPAIGN_PAGES_EXPERIMENT],name:cn.DEFAULT_FREQUENCY_V_2_CAMPAIGN_PAGES_EXPERIMENT,enabled:!1,scope:pn.CAMPAIGN_PAGES,variants:[{name:ti.CONTROL,weight:1},{name:ti.TEST,weight:1}]};const rr={experimentId:mn[cn.DUMMY_EXPERIMENT],name:cn.DUMMY_EXPERIMENT,enabled:!1,scope:pn.EMBED,variants:[{name:gn.CONTROL,weight:1},{name:gn.TEST,weight:1}]},or={experimentId:mn[cn.UPSELL_CURTAIN_EXPERIMENT],name:cn.UPSELL_CURTAIN_EXPERIMENT,enabled:!1,scope:pn.EMBED,variants:[{name:yn.CONTROL,weight:33},{name:yn.TEST_1,weight:33},{name:yn.TEST_2,weight:33},{name:yn.TEST_3,weight:1}]},cr={experimentId:mn[cn.UPSELL_SCREEN_V_3_EXPERIMENT],name:cn.UPSELL_SCREEN_V_3_EXPERIMENT,enabled:!1,scope:pn.EMBED,variants:[{name:Sn.CONTROL,weight:1},{name:Sn.TEST,weight:1}]},lr={experimentId:mn[cn.ML_POST_DONATION_UPSELL_CHECKOUT_EXPERIMENT],name:cn.ML_POST_DONATION_UPSELL_CHECKOUT_EXPERIMENT,enabled:!1,scope:pn.EMBED,variants:[{name:bn.CONTROL,weight:1},{name:bn.TEST,weight:1}]},ur={experimentId:mn[cn.CHECKOUT_WITHOUT_PRE_DONATION_UPSELL_EXPERIMENT],name:cn.CHECKOUT_WITHOUT_PRE_DONATION_UPSELL_EXPERIMENT,enabled:!1,scope:pn.EMBED,variants:[{name:Pn.CONTROL,weight:1},{name:Pn.TEST,weight:1}]},dr={experimentId:mn[cn.SMART_COVERING_FEE_CHECKOUT_V_2_EXPERIMENT],name:cn.SMART_COVERING_FEE_CHECKOUT_V_2_EXPERIMENT,enabled:!1,scope:pn.EMBED,variants:[{name:On.CONTROL,weight:1},{name:On.TEST_1,weight:1},{name:On.TEST_2,weight:1}]},hr={experimentId:mn[cn.AA_CHECKOUT_EXPERIMENT],name:cn.AA_CHECKOUT_EXPERIMENT,enabled:!1,scope:pn.EMBED,variants:[{name:kn.CONTROL,weight:1},{name:kn.TEST,weight:1}]},mr={experimentId:mn[cn.AMOUNT_PRESETS_CHECKOUT_EXPERIMENT],name:cn.AMOUNT_PRESETS_CHECKOUT_EXPERIMENT,enabled:!1,scope:pn.EMBED,variants:[{name:In.CONTROL,weight:1},{name:In.TEST,weight:1}]},pr={experimentId:mn[cn.SMART_POST_DONATION_UPSELL_CHECKOUT_V_2_EXPERIMENT],name:cn.SMART_POST_DONATION_UPSELL_CHECKOUT_V_2_EXPERIMENT,enabled:!1,scope:pn.EMBED,variants:[{name:wn.CONTROL,weight:1},{name:wn.TEST,weight:1}]},gr={experimentId:mn[cn.UPSELL_AMOUNTS_DATASET_MODAL_EXPERIMENT],name:cn.UPSELL_AMOUNTS_DATASET_MODAL_EXPERIMENT,enabled:!1,scope:pn.EMBED,variants:[{name:Ln.CONTROL,weight:0},{name:Ln.TEST,weight:1}]},yr={experimentId:mn[cn.COLLECT_DATASET_POST_DONATION_UPSELL_AMOUNT_CHECKOUT_V_3_EXPERIMENT],name:cn.COLLECT_DATASET_POST_DONATION_UPSELL_AMOUNT_CHECKOUT_V_3_EXPERIMENT,enabled:!1,scope:pn.EMBED,variants:[{name:Gn.CONTROL,weight:0},{name:Gn.TEST,weight:1}]},fr={experimentId:mn[cn.UPSELL_AMOUNTS_SUGGESTION_MODAL_EXPERIMENT],name:cn.UPSELL_AMOUNTS_SUGGESTION_MODAL_EXPERIMENT,enabled:!1,scope:pn.EMBED,variants:[{name:Yn.CONTROL,weight:1},{name:Yn.TEST,weight:1}]},Sr={experimentId:mn[cn.BIRTHDAY_DONATION_CHECKOUT_EXPERIMENT],name:cn.BIRTHDAY_DONATION_CHECKOUT_EXPERIMENT,enabled:!1,scope:pn.EMBED,variants:[{name:Xn.CONTROL,weight:1},{name:Xn.TEST,weight:1}]},Ar={experimentId:mn[cn.AMAZON_PAY_CHECKOUT_EXPERIMENT],name:cn.AMAZON_PAY_CHECKOUT_EXPERIMENT,enabled:!1,scope:pn.EMBED,variants:[{name:Jn.CONTROL,weight:0},{name:Jn.TEST,weight:1}]},Er={experimentId:mn[cn.DEFAULT_FREQUENCY_V_2_MODAL_EXPERIMENT],name:cn.DEFAULT_FREQUENCY_V_2_MODAL_EXPERIMENT,enabled:!1,scope:pn.EMBED,variants:[{name:ei.CONTROL,weight:1},{name:ei.TEST,weight:1}]};var Cr=function(e){return[rr,or,cr,lr,ur,dr,hr,mr,pr,gr,fr,yr,Sr,Ar,Er].map((t=>{const n=e.find((e=>e.experimentId===t.experimentId));return n?{experimentId:n.experimentId,enabledWidgets:n.enabledWidgets,disabledWidgets:n.disabledWidgets,scope:n.scope,name:n.name,enabled:n.enabled,variants:n.variants,disabledAccounts:n.disabledAccounts,enabledAccounts:n.enabledAccounts}:t}))};class vr extends ee{constructor(e,t,n,i,s,a,r,o,c,l){super(),this.embedTracker=e,this.debug=t,this.keysKeeper=n,this.checkoutViewEventEmitter=i,this.targetWindow=s,this.globalWindow=a,this.params=r,this.servicesFactoryMap=o,this.funSessionStorage=l,this.sentryInstance=c;const u=this.createCoreInstances();this.flowManager=u.flowManager,this.intl=u.intl,this.trackerCheckout=u.trackerCheckout,this.experiments=u.experiments,this.currencyService=u.currencyService,this.checkoutConfiguration=u.checkoutConfiguration,this.checkoutAPIBridge=u.checkoutAPIBridge,this.checkoutRouter=u.checkoutRouter,this.logger=u.logger,this.userInteraction=u.userInteraction,this.currencyFilter=u.currencyFilter,this.checkoutCurrencyFormatter=u.checkoutCurrencyFormatter}setLocale(e){return(0,l.sH)(this,void 0,void 0,(function*(){yield this.intl.setLocale(e||this.intl.locale)}))}initializePublicJsApi(){}initializePageGuardManager(){}initializeCookieConsent(){}initializeUserSession(){}initializeRouter(){this.checkoutConfiguration.infrastructureParams.showcase||this.checkoutRouter.initialize()}initializeTracker(){this.trackerCheckout.initialize()}initializeExperiments(){this.experiments.register(cn.LESS_PAYMENT_OPTIONS_CAMPAIGN_PAGES_EXPERIMENT,yi),this.experiments.register(cn.UPSELL_CURTAIN_EXPERIMENT,fi),this.experiments.register(cn.BIRTHDAY_DONATION_CAMPAIGN_PAGE_EXPERIMENT,mi),this.experiments.register(cn.BIRTHDAY_DONATION_CHECKOUT_EXPERIMENT,pi),this.initializeAACheckoutExperiment(),this.initializeUpsellAmountsDatasetModalExperiment(),this.initializeUpsellAmountsSuggestionModalExperiment(),this.initializeDefaultFrequencyV2ModalExperiment()}initializeAACheckoutExperiment(){this.experiments.register(cn.AA_CHECKOUT_EXPERIMENT,Ys),this.experiments.get(cn.AA_CHECKOUT_EXPERIMENT).tryStart()}initializeUpsellAmountsDatasetModalExperiment(){this.experiments.register(cn.UPSELL_AMOUNTS_DATASET_MODAL_EXPERIMENT,Ws);const e=this.experiments.get(cn.UPSELL_AMOUNTS_DATASET_MODAL_EXPERIMENT);e.tryStart({preDonationUpsellIsEnabled:this.checkoutConfiguration.campaign.config.showUpsell}),this.checkoutConfiguration.mergePreDonationUpsellSettings(this.getUpsellAmountsDatasetConfiguration(e))}initializeUpsellAmountsSuggestionModalExperiment(){this.experiments.register(cn.UPSELL_AMOUNTS_SUGGESTION_MODAL_EXPERIMENT,Xs),this.experiments.get(cn.UPSELL_AMOUNTS_SUGGESTION_MODAL_EXPERIMENT).tryStart({isPreDonationUpsellEnabled:this.checkoutConfiguration.campaign.config.showUpsell})}initializeDefaultFrequencyV2ModalExperiment(){var e;this.experiments.register(cn.DEFAULT_FREQUENCY_V_2_MODAL_EXPERIMENT,gi),this.experiments.get(cn.DEFAULT_FREQUENCY_V_2_MODAL_EXPERIMENT).tryStart({enabledFrequencies:this.checkoutConfiguration.enabledFrequencies,aiFrequencyEnabled:this.checkoutConfiguration.aiConfig.frequencies.enabled,hasExternalFrequencies:this.checkoutConfiguration.hasExternalFrequency,p2pUsed:!!(null===(e=this.checkoutConfiguration.fundraisingPage)||void 0===e?void 0:e.key)})}initializeCurrencyService(){return(0,l.sH)(this,void 0,void 0,(function*(){yield function(e,t,n){return(0,l.sH)(this,void 0,void 0,(function*(){e.loadFiat(n),et(t)&&(yield e.loadCrypto())}))}(this.currencyService,this.checkoutConfiguration,this.intl)}))}initializeCurrencyFilter(){return(0,l.sH)(this,void 0,void 0,(function*(){yield function(e,t,i){return(0,l.sH)(this,void 0,void 0,(function*(){if(function(){try{Intl.NumberFormat("fr-FR",{style:"currency",currency:"VND",currencyDisplay:"narrowSymbol",minimumFractionDigits:0,maximumFractionDigits:0}).format(8e3)}catch(e){return!1}return!0}())et(i)&&(yield e.loadCrypto());else{const e=yield function(){return(0,l.sH)(this,void 0,void 0,(function*(){const e=yield n.e(173).then(n.bind(n,6787));return{formatCurrency:e.currencyFilter,formatSymbol:(e,t)=>t===Ye.PREFIX?e:"",getCurrencyFormat:e.getCurrencyFormat,loadCrypto:()=>Promise.resolve()}}))}();t.replaceCurrencyFilter(e)}}))}(this.currencyFilter,this.checkoutCurrencyFormatter,this.checkoutConfiguration)}))}subscribeOnUserInteraction(){return this.userInteraction.subscribeOnUserInteraction((()=>{this.trackerCheckout.ping()}))}subscribeOnHistoryInteraction(){this.checkoutRouter.onNavigation((()=>{const e=this.flowManager.getCurrentFlow();e.isCurrentScreenFirst()||e.isCurrentScreenLast()?this.checkoutViewEventEmitter.emit(Rs.SHOULD_HIDE,{}):this.flowManager.checkoutService.canGoBack&&e.prev()})),this.flowManager.onScreenChanged((()=>{const e=this.flowManager.getCurrentFlow();e.isCurrentScreenFirst()||e.isCurrentScreenLast()?this.checkoutRouter.deactivateNavigationLoop():this.checkoutRouter.activateNavigationLoop()}))}startFlow(e){return(0,l.sH)(this,void 0,void 0,(function*(){yield this.flowManager.setInitialScreen(e).startDefaultFlow()}))}createCoreInstances(){var e,t,n;const i=function(e){const t=function(e){const t=e.customFields;if(!t)return e;for(const n of t)e[n.name]=n.value;return D()(e,"customFields")}(x(e));return Object.assign({},T()(t,b()))}(this.params.externalConfig.queryParams||{}),s=it.format(this.params.externalConfig.queryParams||{}),r=Ve.format(this.params.externalConfig.checkoutData||{}),c=(null===(e=this.params.externalConfig.launcher)||void 0===e?void 0:e.elementType)===ie.DIRECT_LINK,l={livemode:this.params.livemode,env:this.params.env,isMobile:this.params.isMobile,showcase:this.params.showcase,isDevelopmentMode:en(),OS:this.params.browserData.os.name||"",browser:this.params.browserData.browser.name||"",isInAppBrowser:this.params.browserData.isInAppBrowser,isSSLEnabled:"https:"===window.location.protocol},u=this.params.steplessCheckoutExperimentVariant===qn.CONTROL,d=new He(this.params.resolvedConfig,this.params.externalConfig,s,r,l,this.params.integrations,i,{locale:this.params.localeCode},Object.assign({checkoutType:Se.MODAL},u?{preDonationUpsellSettings:{enabledForDonationFrequencies:[se.ONCE,se.MONTHLY],enabledTargetFrequencies:[se.MONTHLY],isAdaptiveSuggestionEnabled:!1},paymentOptionsSettings:{disabledPaymentMethods:[nt._.US_BANK_ACCOUNT]},remindMeLaterSettings:{isEnabled:!1}}:{}),this.globalWindow,this.params.infrastructureQueryParams,this.params.test),m=new qa(this.globalWindow,this.keysKeeper,d,s,i,c),p=function(e,t,n){const i=function(e,t){return Object.assign(Object.assign({},e),Object.fromEntries(Object.entries(t).map((e=>{let[n]=e;var i;return[n,Number(null!==(i=t[n])&&void 0!==i?i:1)]}))))}(e,t.cryptoCurrencies),s=new Je;return new Qe(s,i,n)}(this.params.currencyRates,d,this.sentryInstance),g=new Qt(p),y=new Lt(new Je),S=new Ii(sa.DEFAULT_LOCALE,y),A=function(e,t,n){const i=new ha(e,{defaultLocale:t.campaign.config.localization.defaultLocale,useCompanyInterfaceLocales:t.campaign.config.localization.useCompanyInterfaceLocales,supportedLanguages:[...t.campaign.config.localization.supportedLanguages]},{interfaceLocales:[...t.company.localization.interfaceLocales]}).getUILocale();return function(e){let{dateFormatter:t,currencyFormatter:n,numberFormatter:i,availableLocales:s=[sa.DEFAULT_LOCALE],translationLoader:a,locale:r=sa.DEFAULT_LOCALE,phrases:o,company:c="",donateToPayTokens:l=[]}=e;const u=new ca(r,o),d=new aa(u,a);return new sa(d,t,n,i,c,l,{locale:r,availableLocales:s})}({dateFormatter:new Js(sa.DEFAULT_LOCALE),currencyFormatter:n,numberFormatter:new da(sa.DEFAULT_LOCALE),availableLocales:ia.O,translationLoader:new ta,locale:i,company:t.campaign.company,donateToPayTokens:na})}(this.params.localeCode,d,S),E=new Va,C=new xs(d,p,E,A.locale),v=new qs(this.embedTracker,d,C,this.targetWindow,this.params.trackingUrls.checkout,this.params.checkoutOpenTimestamp),N=v.checkoutViewId,P=$t(),_=(O={sentry:this.sentryInstance,requestService:P,createFundraiseupAddressProvider:(e,t)=>new bi(e,P,t,N),baseURL:a,locale:A.locale},new xt(O.createFundraiseupAddressProvider,O.sentry,O.requestService,{locale:O.locale,baseURL:O.baseURL,fundraiseupAddressProviderHeaders:O.fundraiseupAddressProviderHeaders}));var O;const k=new I(this.funSessionStorage),w=d.company,R=this.params.livemode?f.LIVE:f.TEST,M=J({publicKey:this.params.paymentMethods.stripePublicKey[R],targetWindow:this.targetWindow,locale:A.locale,stripeAccount:w.stripeAccount,showcase:this.params.showcase},this.sentryInstance),L=J({publicKey:this.params.paymentMethods.stripePublicKey[R],targetWindow:this.globalWindow,locale:A.locale,stripeAccount:w.stripeAccount,showcase:this.params.showcase},this.sentryInstance),U=function(e,t){if(!Object.keys(Bt).find((e=>Bt[e]===t)))throw new Error(`${o.UNSUPPORTED_TYPE_OF_STORAGE} ${t}`);return new Gt(e,function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Ht.A;function n(e,n){t.remove(e,n)}function i(e){return!!window.FUN_DO_NOT_TRACK||!!window.FUN_ONLY_STRICTLY_NECESSARY_COOKIES&&e!==Ut.CID}return window.FUN_DO_NOT_TRACK&&qt().forEach((e=>{n(Ut.CID,{domain:e}),n(Ut.SESSION,{domain:e}),n(Ut.FUNC,{domain:e}),n(Ut.PERFORMANCE,{domain:e})})),window.FUN_ONLY_STRICTLY_NECESSARY_COOKIES&&qt().forEach((e=>{n(Ut.SESSION,{domain:e}),n(Ut.FUNC,{domain:e}),n(Ut.PERFORMANCE,{domain:e})})),{get:function(n){if(i(n))return null;const s=t.get(n);if(!s)return null;if(e===jt.OBJECT){let e=null;return e=JSON.parse(s),e}return s},set:function(n,s,a){i(n)||(e===jt.OBJECT&&(s=JSON.stringify(s)),t.set(n,s,a))},remove:n}}(t))}(Ut.EXPERIMENTS,Bt.OBJECT),F=new Ka({companyKey:w.key,parentCompanyKey:w.parentKey,widgetKey:d.campaign.key,tracker:v,experimentsSettings:[...(j=this.params.experimentsConfig.experiments,[za,$a,Wa,Xa,Qa,Za,Ja,tr,er,nr,ir,sr,ar].map((e=>{const t=j.find((t=>t.experimentId===e.experimentId));return t?{experimentId:t.experimentId,enabledWidgets:t.enabledWidgets,disabledWidgets:t.disabledWidgets,scope:t.scope,name:t.name,enabled:t.enabled,variants:t.variants,disabledAccounts:t.disabledAccounts,enabledAccounts:t.enabledAccounts}:e}))),...Cr(this.params.experimentsConfig.experiments)],user:d.user,funStorage:U,infrastructureParams:d.infrastructureParams,sentry:this.sentryInstance,isDebugMode:this.params.isDebugMode,isFundraiseupVisitor:this.params.isFundraiseupVisitor,isAbTestMode:this.params.isAbTestMode,distributionId:v.clientId});var j;F.register(cn.DUMMY_EXPERIMENT,Ks),F.get(cn.DUMMY_EXPERIMENT).start();const B=new h.A,H=new re(d),q=new hn({window:window,tracker:v,enabledByDefault:!0,sentry:this.sentryInstance,checkoutConfiguration:d}),G=$t(),V=function(e){return function(e){const t=e||new Ts;return new Os(t)}(new _s(e))}(A),Y=new Ot({company:d.company,parentCompany:d.parentCompanyConfig,isDevelopmentMode:en()}),K=function(e,t,n){const i=new Ds(e,{intlService:t,subscriptionPeriodLabelsService:n}),s=new Ns(i);return new qi(Bi,s)}(S,A,V),z=new Fi(ji),$=new xi({apiHost:a,isShowcase:this.params.showcase,isLighthouse:!1,token:N}),W=Cr(this.params.experimentsConfig.experiments).find((e=>e.name===cn.AMOUNT_PRESETS_CHECKOUT_EXPERIMENT)),X=null===(t=this.embedTracker.page)||void 0===t?void 0:t.toObject(),Q=new Ti({sentry:this.sentryInstance,apiHost:a,companyKey:d.company.key,campaignKey:d.campaign.key,clientLocale:this.params.localeCode,currencyRates:this.params.currencyRates,utmSource:(null===(n=this.params.externalConfig.queryParams)||void 0===n?void 0:n.utmSource)||"",currencyService:p,token:N,experimentSettings:W,experimentsStorage:U,clientId:this.embedTracker.clientId,clientConnectionType:null==X?void 0:X.clientConnectionType,clientDeviceMemory:null==X?void 0:X.clientDeviceMemory,clientHardwareConcurrency:null==X?void 0:X.clientHardwareConcurrency,clientConnectionDownlink:null==X?void 0:X.clientConnectionDownlink,clientDoNotTrack:null==X?void 0:X.clientDoNotTrack,clientDevicePixelRatio:null==X?void 0:X.clientDevicePixelRatio,clientBatteryLevel:null==X?void 0:X.clientBatteryLevel,checkoutType:Se.MODAL});return{flowManager:new Mi(B,d,A,v,this.debug,p,g,this.targetWindow,this.globalWindow,this.sentryInstance,this.params.paymentMethods,M,L,k,_,H,F,this.servicesFactoryMap,q,G,V,Y,K,z,$,Q,{stripe:{elementsOptions:ya,elementStyles:pa,elementClasses:ga},screenSet:{ukBacs:tn.UK_BACS,paymentOptions:tn.PAYMENT_OPTIONS}}),intl:A,trackerCheckout:v,experiments:F,currencyService:p,checkoutConfiguration:d,checkoutAPIBridge:H,checkoutRouter:m,logger:q,userInteraction:new Zt(this.targetWindow),currencyFilter:y,checkoutCurrencyFormatter:S}}getUpsellAmountsDatasetConfiguration(e){const t={};return e.active&&(t.isAdaptiveSuggestionEnabled=!1),e.isEnabled({preDonationUpsellIsEnabled:this.checkoutConfiguration.campaign.config.showUpsell})&&(t.amountsMap=e.upsellAmountsMap),t}}var Nr=n(1085),br=n(8254),Pr=n(8227),Dr=n(3225),_r=n(1138);class Tr extends d.Component{constructor(){super(...arguments),this.state={hasError:!1}}static getDerivedStateFromError(){return{hasError:!0}}componentDidCatch(e,t){if(!this.context)throw new Error("SentryService is not provided");this.context.captureException(e,{extra:{componentStack:t.componentStack}})}render(){return this.state.hasError?(0,Nr.jsx)("h1",{children:this.props.fallback||"something went wrong"}):this.props.children}}Tr.contextType=_r.z;var Or,xr=n(4357),kr=n(503);!function(e){e.CLICK_SHOWCASE="click-showcase"}(Or||(Or={}));var Ir=n(148),wr=n(8583),Rr=n(9970),Mr=n(1362),Lr=n(9679),Ur=n(5940);const Fr=["button","input","select","textarea","iframe","object","embed","a","[tabindex]","[href]","[contenteditable]"].join(", ");function jr(e){const{rootElRef:t,disabled:n,trapStartRef:i,trapStopRef:s}=e,[a,r]=(0,d.useState)(),o=(0,d.useCallback)((function(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!i.current)return;if(!s.current)return;if(!t.current)return;const n=t.current.querySelectorAll(Fr);let a=[].slice.call(n);a=a.filter((e=>e!==i.current&&e!==s.current)),e&&(a=a.reverse()),a.length&&a[0].focus()}),[t,i,s]),c=(0,d.useCallback)((e=>{n||i.current&&s.current&&(e.target===i.current&&o(a!==s.current),e.target===s.current&&o(a===i.current))}),[o,a,n,i,s]),l=(0,d.useCallback)((e=>{n||r(e.target)}),[n]);return{trapStartRef:i,trapStopRef:s,handleFocus:c,handleBlur:l}}var Br=n(6172),Hr=n(4780),qr=n(606);const Gr=e=>{const{tab:t,setActiveTab:n}=e,i=(0,qr.t)(),s=(0,Ur.k)();return(0,Nr.jsx)("div",{className:s("campaign-tabs-holder"),role:"tablist",children:(0,Nr.jsxs)("div",{className:"campaign-tabs",children:[(0,Nr.jsx)("button",{type:"button",className:(0,xr.A)("campaign-tab",{active:t===Ua.FUNDRAISER}),onClick:()=>n(Ua.FUNDRAISER),"data-qa":"p2p-component-button","data-tracking-element-name":"switchToFundraisingPageTab",role:"tab","aria-selected":t===Ua.FUNDRAISER,children:i.translate("campaign.campaignTabs.fundraiser")}),(0,Nr.jsx)("button",{type:"button",className:(0,xr.A)("campaign-tab",{active:t===Ua.CAUSE}),onClick:()=>n(Ua.CAUSE),"data-qa":"ask-component-button","data-tracking-element-name":"switchToAskPageTab",role:"tab","aria-selected":t===Ua.CAUSE,children:i.translate("campaign.campaignTabs.cause")})]})})},Vr=e=>{const t=(0,wr.P)(),n=(0,Ur.k)();return(0,Nr.jsx)("div",{className:(0,xr.A)(n("campaign-links-wrap"),e.className),children:(0,Nr.jsx)("div",{className:n("campaign-links"),children:e.links.map(((e,i)=>(0,Nr.jsxs)(d.Fragment,{children:[!!i&&!t&&(0,Nr.jsx)("span",{className:(0,xr.A)("text-gray-60 px-1-5",t?"link-2":"link-3"),"aria-hidden":!0,children:""}),(0,Nr.jsx)("a",{href:e.url,className:n("campaign-link"),target:"_blank",rel:"noreferrer","data-tracking-element-name":"askPageLink","data-qa":"ask-link",children:e.label})]},i)))})})};var Yr=(0,d.memo)(Vr);const Kr=e=>{const t=(0,wr.P)(),n=(0,Ur.k)(),i=!!e.links.length;return(0,Nr.jsxs)(Nr.Fragment,{children:[(e.title||e.description)&&(0,Nr.jsxs)("div",{className:"min-h-0","data-qa":"ask-component",children:[!e.hideTitle&&e.title&&(0,Nr.jsx)("h2",{className:n("campaign-title"),"data-qa":"ask-title",dangerouslySetInnerHTML:{__html:e.title},dir:"auto"}),e.showText&&e.description&&(0,Nr.jsx)("p",{"data-qa":"ask-message",className:(0,xr.A)(n("campaign-text"),{"mt-0":!e.title,"campaign-text-sm":i&&e.title,"campaign-text-md":i&&!e.title||!i&&e.title,"campaign-text-lg":!i&&!e.title}),dangerouslySetInnerHTML:{__html:e.description},dir:"auto"})]}),!t&&i&&(0,Nr.jsx)(Yr,{links:e.links})]})};class zr{static calculateProgressData(e){const t=zr.round(e.currentAmount/e.targetAmount),n=e.increaseAmount?zr.round(e.increaseAmount/e.targetAmount):0,i=e.increaseAmount?zr.applyMinIncreasePercent(n):0,s=e.unlimitedProgress?t:zr.limitMaxPercent(t),a=e.unlimitedProgress?i:Math.min(i,zr.MAX_PROGRESS-s),r=t+n,o=e.currentAmount+(e.increaseAmount||0);return{progressPercent:s,progressIncreasePercent:a,totalProgressPercent:e.unlimitedProgress?r:Math.min(r,zr.MAX_PROGRESS),totalAmount:o,isDone:r>=zr.MAX_PROGRESS}}static round(e){return Math.round(1e3*e)/10}static limitMaxPercent(e){return Math.min(e,zr.MAX_PROGRESS)}static applyMinIncreasePercent(e){return Math.max(e,zr.MIN_INCREASE_PERCENT)}}zr.MAX_PROGRESS=100,zr.MIN_INCREASE_PERCENT=4;var $r=n(8533);const Wr=e=>{const{fundraiser:t,userAmount:n,isActualProgressShown:i}=e,s=(0,qr.t)(),a=(0,$r.Q)(),r=(0,Lr.C)(),o=t.goalAmount||1,c=zr.calculateProgressData({currentAmount:t.donationsAmount||0,targetAmount:o,increaseAmount:n}),[l,u]=(0,d.useState)(c.progressPercent);(0,d.useEffect)((()=>{i&&u(c.totalProgressPercent)}),[c.totalProgressPercent,i]);const h=!!n,m=c.progressPercent>=100,p=c.isDone&&(i||m),g=r&&h?c.progressIncreasePercent:null,y=function(e,t,n){return(t?100-t-e:100)*(n?1:-1)}(c.progressPercent,g,a),f={transform:`translate3d(${y}%, 0, 0)`},S={width:`${l}%`,borderLeft:a&&l>0&&l<100?"1px solid #fff":void 0,borderRight:!a&&l>0&&l<100?"1px solid #fff":void 0},A=i?c.totalAmount:t.donationsAmount;return(0,Nr.jsxs)("div",{className:e.className,children:[(0,Nr.jsx)("p",{className:"subtitle-4 text-line-clamp-2","data-qa":"fundraiser-display-name",children:t.name}),(0,Nr.jsxs)("div",{className:"campaign-meter mt-2",children:[(0,Nr.jsx)("div",{className:(0,xr.A)("campaign-meter-progress-increase",{"campaign-meter-done":p}),"data-testid":"progress-increase",style:f}),(0,Nr.jsx)("div",{className:(0,xr.A)("campaign-meter-progress",{"campaign-meter-hidden":!r,"campaign-meter-done":p}),"data-testid":"progress",style:S,children:(l>20||!h)&&(0,Nr.jsxs)("div",{className:(0,xr.A)("campaign-meter-percent",{"campaign-meter-percent-right":l<20}),"data-qa":"raised-percent",children:[l,"%"]})})]}),(0,Nr.jsxs)("div",{className:"body-3 d-flex justify-between mt-1",children:[(0,Nr.jsx)("div",{className:"pe-1","data-qa":"fundraiser-raised-amount",children:s.translate("campaign.campaignMeter.raisedAmount",{amount:s.formatCurrency(A||0,{currency:t.currency||"USD"})})}),(0,Nr.jsx)("div",{className:"ps-1 text-right","data-qa":"fundraiser-goal-amount",children:s.translate("campaign.campaignMeter.goalAmount",{amount:s.formatCurrency(t.goalAmount||0,{currency:t.currency||"USD"})})})]})]})},Xr=(0,d.memo)(Wr);var Qr=n(5102);const Zr=(0,d.createContext)(null);function Jr(){const e=(0,d.useContext)(Zr);if(!e)throw new Error("FlowManager is not provided");return e}function eo(e){const t=function(e){const t=Jr(),[n,i]=(0,d.useState)((()=>t.getCurrentFlow().getScreen(e))),s=(0,Qr.a)();return(0,d.useEffect)((()=>{let n=t.getCurrentFlow();const a=t.onScreenChanged((()=>{s.current&&i(n.getScreen(e))})),r=t.onFlowChanged((()=>{const i=t.getCurrentFlow();i.checkHasScreen(e)&&(n=i)}));return()=>{r(),a()}}),[t,e,s]),n}(e);return{controller:t,state:function(e){const[t,n]=(0,d.useState)((()=>e.getScreenData()));return(0,d.useEffect)((()=>{const t=()=>n(e.getScreenData());return t(),e.onUpdate(t),()=>e.removeUpdateListener(t)}),[e]),t}(t)}}function to(){const e=Jr(),[t,n]=(0,d.useState)((()=>e.getCurrentFlow().getCurrentScreen().name));return(0,d.useEffect)((()=>e.onScreenChanged((()=>{n(e.getCurrentFlow().getCurrentScreen().name)}))),[e]),t}function no(){const e=(0,d.useRef)();return void 0===e.current&&(e.current=(0,ks.i)()),e.current}const io=e=>{const t=no();return(0,Nr.jsxs)("svg",{className:(0,xr.A)(e.className),"aria-hidden":!!e.ariaHidden||void 0,fill:"none",height:"17",viewBox:"0 0 23 17",width:"23",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",children:[(0,Nr.jsx)("clipPath",{id:`a-${t}`,children:(0,Nr.jsx)("path",{d:"m0 0h23v17h-23z"})}),(0,Nr.jsxs)("g",{clipPath:`url(#a-${t})`,clipRule:"evenodd",fillRule:"evenodd",children:[(0,Nr.jsx)("path",{d:"m22.2969 0c-.8672 1.46655-3.7617 6.01807-8.2266 9.52246-5.39647 4.23534-13.499988 5.99994-13.499988 5.99994s5.046878-2.8235 6.499998-7.99994c1.10547-3.93921-1.07226-6.51587-2.17578-7.52246z",fill:"#fff"}),(0,Nr.jsx)("path",{d:"m7.55191 7.65746c.77276-2.75336.03501-4.90001-.89849-6.3473-.34341-.532424-.71273-.96995-1.0419-1.31016h-1.49731c.01863.0139417.04001.0301894.06389.0487302.10229.0794108.25003.2005208.42446.3622868.34964.324253.80182.807553 1.2105 1.441163.81179 1.25859 1.45612 3.11195.77605 5.53506-.69276 2.46832-2.24912 4.39336-3.65535 5.71146-.70079.6569-1.35754 1.1566-1.83782 1.4913-.239927.1673-.435221.2929-.569177.3759-.06696.0415-.11854.0724-.152646.0924l-.037771.022-.008553.0049-.001621.0009.000718.0012.350605.9231c-.000919-.0033-.009786-.0417-.106988-.4881l.106988.4881h.00157l.005114-.0011.018933-.0043.071831-.0163c.062651-.0144.154403-.0359.272607-.0647.2364-.0576.57873-.1442 1.0058-.2614.85387-.2343 2.04806-.5911 3.41269-1.0815 2.72174-.9783 6.15406-2.5 8.91316-4.66543 2.7453-2.15464 4.9007-4.69229 6.3676-6.68516.7343-.9977 1.2984-1.86198 1.6796-2.478191.1907-.308179.3358-.554524.4336-.7247323.0055-.0094298.0107-.0186262.0159-.0275867h-1.1613c-.043.0708235-.0892.146313-.1386.226197-.3693.597029-.9185 1.438623-1.6346 2.411523-1.4341 1.9483-3.5286 4.41065-6.1796 6.49131-2.6371 2.06977-5.95479 3.54807-8.63399 4.51097-.75169.2702-1.45055.4989-2.06666.688.18093-.1557.36719-.3223.55648-.4997 1.48056-1.3878 3.17421-3.4627 3.93428-6.17084z",fill:"#c7cdd6"})]})]})},so=(0,d.memo)(io),ao=window.devicePixelRatio>1?"128x128":"64x64",ro=e=>{var t;const{fundraiser:n}=e,i=(0,wr.P)(),s=to(),[a,r]=(0,d.useState)(!1);(0,d.useEffect)((()=>{s===ka.THANK_YOU&&r(!0)}),[s]);const o=(0,$r.Q)(),c=(0,qr.t)(),l=(0,d.useMemo)((()=>{var e;const t=null===(e=n.image)||void 0===e?void 0:e.uuid;return t?`https://ucarecdn.com/${t}/-/preview/${ao}/-/format/auto/`:null}),[n]);return(0,Nr.jsxs)("div",{"data-qa":"p2p-component",children:[(0,Nr.jsxs)("div",{className:(0,xr.A)("campaign-quote-bubble",i?"mb-6":"mb-7"),children:[(0,Nr.jsx)("p",{className:"text-line-clamp-3","data-qa":"fundraiser-message",children:n.message}),(0,Nr.jsx)(so,{className:(0,xr.A)("campaign-quote-bubble-edge",{"icon-flip-horizontal":o}),ariaHidden:!0})]}),(0,Nr.jsxs)("div",{className:"d-flex items-start",children:[l&&(0,Nr.jsx)("img",{className:"campaign-fundraiser-photo shrink-0 me-4",src:null!=l?l:"",alt:(null===(t=n.image)||void 0===t?void 0:t.alt)||c.translate("campaign.fundraiser.imageAlt"),width:64,height:64,"data-qa":"fundraiser-photo"}),(0,Nr.jsx)(Xr,{className:"grow-1",isActualProgressShown:a,fundraiser:n,userAmount:e.userAmount})]})]})},oo=(0,d.createContext)(!1),co=(0,d.createContext)(null);function lo(){const e=(0,d.useContext)(co);if(!e)throw new Error("currency service is not provided");return e}function uo(){const e=Jr(),[t,n]=(0,d.useState)(e.checkoutService);return(0,d.useEffect)((()=>e.onFlowChanged((()=>{n(e.checkoutService)}))),[e]),t}function ho(){const e=uo(),[t,n]=(0,d.useState)((()=>e.getState()));return(0,d.useEffect)((()=>(n(e.getState()),e.onStateUpdate((()=>{n(e.getState())})))),[e]),t}function mo(){const e=uo(),[t,n]=(0,d.useState)((()=>e.checkoutUIState));return(0,d.useEffect)((()=>(n((t=>{const n=e.checkoutUIState;return e.checkoutUIState.askPageActiveTab=t.askPageActiveTab,n})),e.onStateUpdate((()=>{n(e.checkoutUIState)})))),[e]),t}const po=e=>window.matchMedia(`(min-width: ${e}px)`),go={sm:536,lg:916};function yo(e){return function(e){const t=(0,d.useRef)(po(e)),[n,i]=(0,d.useState)(po(e).matches);return(0,d.useEffect)((()=>{const e=t.current,n=e=>{i(e.matches)};return e.addListener(n),()=>e.removeListener(n)}),[]),n}(go[e])}const fo=window.devicePixelRatio>1,So=()=>{const e=(0,qr.t)(),t=(0,Ur.k)(),n=lo(),i=uo(),s=mo(),a=to(),r=ho(),o=(0,Pr.n)(),c=(0,d.useCallback)((e=>{s.askPageActiveTab=e,i.syncUpdateCheckoutState()}),[i,s]),l=(0,d.useMemo)((()=>o.getAskPageConfig(fo)),[o]),u=(0,wr.P)(),h=yo("lg"),m=o.fundraisingPage,p=!!u&&s.isMobileScreenWithoutAskTitle(a),g=!u||s.isMobileScreenWithAskText(a),y=g||!p,f=!p&&l.title||g&&l.text,S=a===tn.DONATE||a===Ia.CRYPTO_CURRENCY,A=!!m&&l.show&&S,E=!m||s.askPageActiveTab===Ua.CAUSE,C=m&&s.askPageActiveTab===Ua.FUNDRAISER;(0,d.useEffect)((()=>{m&&l.show&&!S&&c(Ua.FUNDRAISER)}),[l.show,m,c,S]);const v=(0,d.useMemo)((()=>m&&m.currency?n.convert(r.donation.amount||0,r.donation.currency,m.currency):0),[r.donation.amount,r.donation.currency,n,m]),N=(0,d.useRef)(null),b=(0,d.useRef)(null);!function(e,t){const n=(0,Dr.M)(),i=(0,wr.P)(),s=(0,d.useContext)(oo),a=(0,d.useCallback)((()=>{if(!i||s)return;const t=e.current;if(!t)throw new Error("scrollRef was not passed");const a=window.pageYOffset||n.pageYOffset;t.offsetTop>a||t.scrollIntoView(!0)}),[e,n,i,s]);(0,d.useEffect)(a,[t,a])}(y?N:b,a);const[P,D]=(0,d.useState)(!0),[_,T]=(0,d.useState)(!1),O=(0,d.useRef)(null);(0,d.useEffect)((()=>{D(s.isScreenWithoutAskOverlay(a))}),[a,D,s]);const x=(0,Hr.G)(O);return(0,Nr.jsxs)("div",{className:(0,xr.A)(t("campaign"),{"p-rel":!P&&!u}),onMouseEnter:()=>T(!0),onMouseLeave:()=>T(!1),ref:b,"data-qa":"campaign-info-section",children:[y&&(0,Nr.jsxs)("div",{className:t("campaign-image-holder"),children:[l.mainImage&&(0,Nr.jsx)("img",{className:t("campaign-image"),src:l.mainImage,alt:l.mainImageAltText||e.translate("campaign.imageAlt"),width:516,height:289,"data-qa":"ask-image","data-testid":"campaign-preview"}),A&&(0,Nr.jsx)(Gr,{tab:s.askPageActiveTab,setActiveTab:c})]}),(0,Nr.jsx)("div",{className:t("campaign-header"),"data-qa":"ask-company-name",children:l.logoImage?(0,Nr.jsx)("img",{src:l.logoImage,alt:l.logoAltText||l.companyName,className:t("campaign-header-logo"),"data-testid":"campaign-logo"}):(0,Nr.jsx)("p",{className:t("campaign-header-name"),dir:"auto",title:l.companyName,"data-testid":"campaign-name",children:l.companyName})}),y&&(0,Nr.jsxs)("div",{ref:N,className:(0,xr.A)(t("campaign-body"),{"p-5":u&&(f||s.askPageActiveTab===Ua.FUNDRAISER),"justify-end":s.askPageActiveTab===Ua.FUNDRAISER&&!u}),role:m?"tabpanel":"",children:[E&&(0,Nr.jsx)(Kr,{title:l.title,description:l.text,links:l.links,hideTitle:p,showText:g}),C&&(0,Nr.jsx)(ro,{fundraiser:m,userAmount:v})]}),(0,Nr.jsx)(kr.A,{classNames:"rtg-fade",nodeRef:O,in:!P&&!_&&!u&&h,addEndListener:x,mountOnEnter:!0,unmountOnExit:!0,children:(0,Nr.jsx)("div",{ref:O,className:"campaign-faded-overlay"})})]})},Ao=[u.tg.UNITED_STATES,u.tg.CANADA,u.tg.MEXICO,u.tg.AUSTRALIA];var Eo;function Co(){return Co=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},Co.apply(this,arguments)}var vo=function(e,t){return d.createElement("svg",Co({xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:1.4,strokeLinecap:"round",strokeLinejoin:"round",ref:t},e),Eo||(Eo=d.createElement("polyline",{points:"9 18 15 12 9 6"})))},No=(0,d.forwardRef)(vo),bo=(0,d.memo)(No),Po=n(9145),Do=n(6448);const _o=[Po.b.CLICK],To=e=>{const t=(0,wr.P)(),n=(0,$r.Q)(),i=(0,Ur.k)(),[s,a]=(0,d.useState)(!1),r=(0,d.useRef)(null),o=(0,d.useRef)(null);return(0,Nr.jsxs)("li",{className:(0,xr.A)(i("faq-link-item"),e.className),"data-qa":e.dataQa,children:[(0,Nr.jsxs)("button",{ref:o,type:"button",className:(0,xr.A)(i("faq-link"),{"font-weight-600":s&&t}),"data-qa":e.dataQa+"-button",onClick:()=>a(!s),children:[t&&(0,Nr.jsx)("span",{className:"icon-slot icon-slot-14 me-0-5 shrink-0","aria-hidden":!0,children:(0,Nr.jsx)("span",{className:"p-abs centered font-size-14",children:(0,Nr.jsx)(bo,{className:(0,xr.A)("icon d-block faq-link-icon",{"icon-rotate-90":!n&&s,"icon-rotate-180":n&&!s,"icon-rotate-270":n&&s})})})}),(0,Nr.jsx)("span",{className:"faq-link-title",children:e.title})]}),t?(0,Nr.jsx)(kr.A,{nodeRef:r,in:s,timeout:200,classNames:"rtg-fade",mountOnEnter:!0,unmountOnExit:!0,children:(0,Nr.jsx)("div",{ref:r,className:"body-3 py-2 ps-4 shrink-0","data-qa":`${e.dataQa}-popover`,children:e.children})}):(0,Nr.jsxs)(Do.S,{triggerRef:o,trigger:_o,maxWidth:"312px",withoutPortal:!0,dataQa:`${e.dataQa}-popover`,children:[(0,Nr.jsx)("p",{className:"subtitle-5",children:e.title}),(0,Nr.jsx)("div",{className:"body-3 mt-1",children:e.children})]})]})},Oo=(0,d.memo)(To),xo=e=>{const t=(0,qr.t)(),n=(0,wr.P)(),i=(0,Ur.k)(),s=uo(),a=(0,Pr.n)(),r=a.campaign.config.frequencies,o=a.company,c=yo("lg"),l=(0,d.useMemo)((()=>s.type===fe.MONEY),[s]),u=(0,d.useMemo)((()=>s.type===fe.CRYPTO),[s.type]),h=(m=o.country,p=o.nonProfit,Ao.includes(m)&&p);var m,p;const g=l&&!ge.isOnetimeOnly(r)&&o.donorPortal.canCancelSubscription;return(0,Nr.jsxs)("ul",{className:i("faq-links"),children:[(0,Nr.jsxs)(Oo,{title:t.translate("faq.isDonationSecure.title"),dataQa:"is-donation-secure",children:[(0,Nr.jsxs)("p",{className:"faq-link-text",children:[l&&t.translate("faq.isDonationSecure.message.fiat.part-1"),u&&t.translate("faq.isDonationSecure.message.crypto.part-1")]}),(0,Nr.jsxs)("p",{className:"faq-link-text mt-1",children:[l&&t.translate("faq.isDonationSecure.message.fiat.part-2"),u&&t.translate("faq.isDonationSecure.message.crypto.part-2")]}),l&&(0,Nr.jsx)("p",{className:"faq-link-text mt-1",children:t.translate("faq.isDonationSecure.message.fiat.part-3")})]}),h&&(0,Nr.jsxs)(Nr.Fragment,{children:[e.showAskPage&&!n&&c&&(0,Nr.jsx)("li",{className:"body-4 text-white opacity-80 mx-3","aria-hidden":!0,children:""}),(0,Nr.jsxs)(Oo,{title:t.translate("faq.isTaxDeductible.title"),dataQa:"is-tax-deductible",children:[(0,Nr.jsxs)("p",{className:"faq-link-text",children:[l&&t.translate("faq.isTaxDeductible.message.fiat.part-1"),u&&t.translate("faq.isTaxDeductible.message.crypto.part-1")]}),(0,Nr.jsxs)("p",{className:"faq-link-text mt-1",children:[l&&t.translate("faq.isTaxDeductible.message.fiat.part-2"),u&&t.translate("faq.isTaxDeductible.message.crypto.part-2")]}),u&&(0,Nr.jsx)("p",{className:"faq-link-text mt-1",children:t.translate("faq.isTaxDeductible.message.crypto.part-3")})]})]}),g&&(0,Nr.jsxs)(Nr.Fragment,{children:[e.showAskPage&&!n&&c&&(0,Nr.jsx)("li",{className:"body-4 text-white opacity-80 mx-3","aria-hidden":!0,children:""}),(0,Nr.jsx)(Oo,{title:t.translate("faq.cancelRecurringDonation.title"),dataQa:"cancel-recurring-donation",children:(0,Nr.jsx)("p",{className:"faq-link-text",children:t.translate("faq.cancelRecurringDonation.message")})})]})]})},ko=(0,d.memo)(xo);var Io;!function(e){e[e.BACKWARD=1]="BACKWARD",e[e.FORWARD=2]="FORWARD"}(Io||(Io={}));var wo=n(7627);const Ro=e=>{const t=(0,Ur.k)();return(0,Nr.jsx)("div",{className:(0,xr.A)(t("flow"),e.className),children:e.children})},Mo=(0,d.forwardRef)((function(e,t){const{children:n,hide:i,className:s}=e,a=(0,Ur.k)();return(0,Nr.jsx)("div",{className:(0,xr.A)(a("flow-slide"),s,{"flow-slide-hidden":i}),ref:t,children:n})})),Lo=e=>{const{alwaysMount:t,show:n,Screen:i,screenDirection:s,currentScreen:a,animationDisabled:r,onScreenEntered:o}=e,c=(0,d.useRef)(null),[l,u]=(0,d.useState)(!n),h=!n&&l,m=function(e){const t=(0,Pr.n)(),n=ho();return i=mo(),s=n.tribute,!(a={isShowcase:t.infrastructureParams.showcase,currentScreen:e}).isShowcase&&!i.isScreenWithoutTributeBadge(a.currentScreen)&&s.isEnabled&&s.isActive&&!!s.name;var i,s,a}(a),p=(0,d.useCallback)((()=>{u(!1)}),[]),g=(0,d.useCallback)((()=>{o()}),[o]),y=(0,d.useCallback)((()=>{u(!0)}),[]),f=(0,Hr.G)(c);return(0,Nr.jsx)(kr.A,{in:n,classNames:`rtg-${s}`,addEndListener:f,onEnter:p,onEntered:g,onExited:y,nodeRef:c,mountOnEnter:!t,unmountOnExit:!t,children:e=>(0,Nr.jsx)(Mo,{ref:c,hide:h,className:r?"no-animation":"",children:(0,Nr.jsx)(d.Suspense,{fallback:(0,Nr.jsx)("span",{}),children:(0,Nr.jsx)(i,{transitionEntered:"entered"===e,showBadge:m})})})})};var Uo=n(6630);const Fo=e=>{var t,n;const i=(0,Uo.Y)();return(0,Nr.jsxs)("svg",{className:(0,xr.A)(e.className),"aria-hidden":!!e.ariaHidden||void 0,fill:"none",viewBox:"0 0 56 56",height:null!==(t=e.height)&&void 0!==t?t:56,width:null!==(n=e.width)&&void 0!==n?n:56,xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink","data-qa":"attention-icon",children:[(0,Nr.jsxs)("filter",{id:`a-${i}`,colorInterpolationFilters:"sRGB",filterUnits:"userSpaceOnUse",height:"52",width:"43",x:"7",y:"2.5",children:[(0,Nr.jsx)("feFlood",{floodOpacity:"0",result:"BackgroundImageFix"}),(0,Nr.jsx)("feColorMatrix",{in:"SourceAlpha",result:"hardAlpha",type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0"}),(0,Nr.jsx)("feOffset",{dx:".5",dy:".5"}),(0,Nr.jsx)("feGaussianBlur",{stdDeviation:"2"}),(0,Nr.jsx)("feComposite",{in2:"hardAlpha",operator:"out"}),(0,Nr.jsx)("feColorMatrix",{type:"matrix",values:"0 0 0 0 0.958333 0 0 0 0 0.345 0 0 0 0 0 0 0 0 1 0"}),(0,Nr.jsx)("feBlend",{in2:"BackgroundImageFix",mode:"normal",result:"effect1_dropShadow_8986_17752"}),(0,Nr.jsx)("feBlend",{in:"SourceGraphic",in2:"effect1_dropShadow_8986_17752",mode:"normal",result:"shape"})]}),(0,Nr.jsxs)("filter",{id:`b-${i}`,colorInterpolationFilters:"sRGB",filterUnits:"userSpaceOnUse",height:"32",width:"14.7373",x:"21.1348",y:"11.5",children:[(0,Nr.jsx)("feFlood",{floodOpacity:"0",result:"BackgroundImageFix"}),(0,Nr.jsx)("feColorMatrix",{in:"SourceAlpha",result:"hardAlpha",type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0"}),(0,Nr.jsx)("feOffset",{dx:".5",dy:".5"}),(0,Nr.jsx)("feGaussianBlur",{stdDeviation:"2"}),(0,Nr.jsx)("feComposite",{in2:"hardAlpha",operator:"out"}),(0,Nr.jsx)("feColorMatrix",{type:"matrix",values:"0 0 0 0 0.958333 0 0 0 0 0.345 0 0 0 0 0 0 0 0 1 0"}),(0,Nr.jsx)("feBlend",{in2:"BackgroundImageFix",mode:"normal",result:"effect1_dropShadow_8986_17752"}),(0,Nr.jsx)("feBlend",{in:"SourceGraphic",in2:"effect1_dropShadow_8986_17752",mode:"normal",result:"shape"})]}),(0,Nr.jsxs)("linearGradient",{id:`c-${i}`,gradientUnits:"userSpaceOnUse",x1:"16.9167",x2:"54.2937",y1:"13.1351",y2:"54.7877",children:[(0,Nr.jsx)("stop",{offset:"0",stopColor:"#ffdc62"}),(0,Nr.jsx)("stop",{offset:"1",stopColor:"#ffdc62",stopOpacity:".15"})]}),(0,Nr.jsxs)("linearGradient",{id:`d-${i}`,gradientUnits:"userSpaceOnUse",x1:"23.3333",x2:"36.1947",y1:"26.1546",y2:"31.9633",children:[(0,Nr.jsx)("stop",{offset:"0",stopColor:"#ffeeb1"}),(0,Nr.jsx)("stop",{offset:"1",stopColor:"#ffeeb1",stopOpacity:"0"})]}),(0,Nr.jsx)("clipPath",{id:`e-${i}`,children:(0,Nr.jsx)("path",{d:"m0 0h56v56h-56z"})}),(0,Nr.jsxs)("g",{clipPath:`url(#e-${i})`,children:[(0,Nr.jsx)("path",{d:"m29.3957.519694c-.9003-.335221-1.8911-.335221-2.7915 0l-20.80207 7.745476c-.78289.2915-1.30213 1.03889-1.30213 1.87433v17.8605c0 17.5 18.4643 28 23.5 28s23.5-10.5 23.5-28v-17.8605c0-.83544-.5192-1.58283-1.3021-1.87433z",fill:"#ffa800"}),(0,Nr.jsxs)("g",{filter:`url(#a-${i})`,children:[(0,Nr.jsx)("path",{clipRule:"evenodd",d:"m10.5 12.6455v15.205c0 6.6656 3.4432 12.2152 7.7738 16.2673 2.1476 2.0096 4.4134 3.549 6.3471 4.566.9661.5081 1.8026.8611 2.4565 1.0783.5577.1851.8514.2276.9186.2373l.004.0006.004-.0006c.0672-.0097.3609-.0522.9186-.2373.6539-.2172 1.4904-.5702 2.4565-1.0783 1.9337-1.017 4.1995-2.5564 6.3471-4.566 4.3306-4.0521 7.7738-9.6017 7.7738-16.2673v-15.205l-17.5-6.6455z",fill:"#ffa800",fillRule:"evenodd"}),(0,Nr.jsx)("path",{d:"m28.7178 49.1452c-.3645.121-.5992.1738-.7178.1961-.1187-.0223-.3533-.0751-.7178-.1961-.6142-.204-1.4178-.5419-2.3587-1.0367-1.8834-.9905-4.1014-2.4964-6.2056-4.4653-4.2479-3.9747-7.5679-9.3643-7.5679-15.7927v-14.7565l16.85-6.39871 16.85 6.39871v14.7565c0 6.4284-3.32 11.818-7.5679 15.7927-2.1042 1.9689-4.3222 3.4748-6.2056 4.4653-.9409.4948-1.7445.8327-2.3587 1.0367z",stroke:`url(#c-${i})`,strokeWidth:"1.3"})]}),(0,Nr.jsxs)("g",{filter:`url(#b-${i})`,children:[(0,Nr.jsx)("path",{d:"m30.3683 15c.6011 0 1.0662.5266.9968 1.1237-.548 4.7133-.8884 9.4483-1.5544 14.1405h-3.5607c-.6658-4.6909-1.0302-9.4239-1.6072-14.1342-.0734-.5992.3925-1.13.9962-1.13zm-4.7016 21.5342c0-.3397.0599-.663.1796-.9698.1307-.3069.3049-.5699.5227-.7891.2287-.2191.4954-.3945.8003-.526s.6316-.1972.98-.1972c.3376 0 .6588.0657.9637.1972s.5662.3069.784.526c.2287.2192.4083.4822.539.7891.1307.3068.196.6301.196.9698 0 .3507-.0653.6795-.196.9863-.1307.2959-.3103.5535-.539.7726-.2178.2192-.4791.3891-.784.5096-.3049.1315-.6261.1973-.9637.1973-.3484 0-.6751-.0658-.98-.1973-.3049-.1205-.5716-.2904-.8003-.5096-.2178-.2191-.392-.4767-.5227-.7726-.1197-.3068-.1796-.6356-.1796-.9863z",fill:"#ffe792"}),(0,Nr.jsx)("path",{d:"m29.631 35.0397h-.0001l.0066.0064c.1902.1822.3416.4025.4535.6652.1105.2595.166.5327.166.8229 0 .302-.0558.5798-.1651.8371-.1112.2511-.2624.4671-.4544.6511l-.0001-.0001-.0064.0065c-.1792.1803-.3961.3225-.6559.4252v-.0002l-.0106.0046c-.2572.1109-.5278.1666-.8152.1666-.2999 0-.5758-.0563-.8314-.1666v-.0002l-.0107-.0042c-.2598-.1027-.4838-.2456-.6754-.4284-.1806-.1826-.3272-.3979-.4391-.649-.0998-.2585-.151-.5383-.151-.8424 0-.2925.051-.5677.1519-.8282.1126-.2626.2592-.4821.4382-.6631.1941-.1853.4218-.3353.6861-.4492.2556-.1103.5315-.1666.8314-.1666.2874 0 .558.0556.8152.1666.2643.1139.4849.2632.6665.446zm.7373-19.6647c.3749 0 .6681.3291.6243.7054-.2146 1.8462-.3967 3.6864-.5783 5.5223-.2741 2.7698-.5471 5.5299-.9297 8.2865h-2.9086c-.3677-2.6452-.6417-5.2899-.9166-7.9435-.2019-1.9478-.4042-3.9003-.6444-5.8613-.0462-.3776.2475-.7094.624-.7094z",stroke:`url(#d-${i})`,strokeWidth:".75"})]})]})]})},jo=(0,d.memo)(Fo),Bo=(0,d.forwardRef)((function(e,t){return(0,Nr.jsx)("div",{ref:t,className:(0,xr.A)("body",e.className),children:e.children})}));var Ho,qo;function Go(){return Go=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},Go.apply(this,arguments)}var Vo,Yo=function(e,t){return d.createElement("svg",Go({xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:1.4,strokeLinecap:"round",strokeLinejoin:"round",ref:t},e),Ho||(Ho=d.createElement("line",{x1:19,y1:12,x2:5,y2:12})),qo||(qo=d.createElement("polyline",{points:"12 19 5 12 12 5"})))},Ko=(0,d.forwardRef)(Yo),zo=(0,d.memo)(Ko);function $o(){return $o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},$o.apply(this,arguments)}var Wo=function(e,t){return d.createElement("svg",$o({xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:1.4,strokeLinecap:"round",strokeLinejoin:"round",ref:t},e),Vo||(Vo=d.createElement("polyline",{points:"15 18 9 12 15 6"})))},Xo=(0,d.forwardRef)(Wo),Qo=(0,d.memo)(Xo);const Zo=e=>{let{type:t,className:n,disabled:i,onClick:s}=e;const a=(0,qr.t)(),r=(0,$r.Q)();return(0,Nr.jsx)(Nr.Fragment,{children:"header"===t?(0,Nr.jsx)("button",{className:(0,xr.A)("header-back-btn",n),type:"button","aria-label":a.translate("common.backButton"),onClick:s,"data-qa":"back-checkout","data-testid":"back.checkout.header",disabled:i,"data-tracking-element-name":"backButton",children:(0,Nr.jsx)(Qo,{className:(0,xr.A)("icon-stroke icon-stroke-2 d-block",{"icon-flip-horizontal":r}),"aria-hidden":!0,"data-testid":"back-icon"})}):(0,Nr.jsxs)("button",{type:"button",className:(0,xr.A)("btn-link link-1 d-flex items-center justify-center",n),onClick:s,disabled:i,"data-qa":"back-checkout","data-testid":"back.checkout","data-tracking-element-name":"backButton",children:[(0,Nr.jsx)("span",{className:"icon-slot icon-slot-14 shrink-0 me-1","aria-hidden":!0,children:(0,Nr.jsx)("span",{className:"p-abs centered font-size-14",children:(0,Nr.jsx)(zo,{className:(0,xr.A)("icon-stroke d-block",{"icon-flip-horizontal":r}),"data-testid":"back-icon"})})}),(0,Nr.jsx)("span",{className:"text-truncate",children:a.translate("common.backButton")}),(0,Nr.jsx)("span",{className:"icon-slot icon-slot-14 shrink-0 ms-1"})]})})},Jo=(0,d.memo)(Zo),ec=e=>{const t=(0,wr.P)(),n=(0,Ur.k)(),i=Jr(),[s,a]=(0,d.useState)((()=>i.getCurrentFlow())),[r,o]=(0,d.useState)(s.isLocked),[c,l]=(0,d.useState)((()=>i.checkoutService.canGoBack)),[u,h]=(0,d.useState)((()=>s.canGoBack)),m=(0,wo.Q)();(0,d.useEffect)((()=>{m&&(l(i.checkoutService.canGoBack),h(i.getCurrentFlow().canGoBack))}),[i,m]),(0,d.useEffect)((()=>{const e=s.on(wi.LOCKED,(()=>{o(!0)})),t=s.on(wi.UNLOCKED,(()=>{o(!1)}));return()=>{e(),t()}}),[s]),(0,d.useEffect)((()=>i.onFlowChanged((()=>{a(i.getCurrentFlow())}))),[i]);const p=(0,d.useCallback)((()=>{u&&c&&s.prev()}),[s,u,c]),g=t&&(e.forceShowBackButton||c);return(0,Nr.jsx)("div",{className:(0,xr.A)(n("footer"),e.className),children:(0,Nr.jsxs)("div",{className:"fixed-container p-rel",children:[e.children,g&&(0,Nr.jsx)("div",{className:(0,xr.A)("d-flex justify-center",{"mt-6":e.children}),children:(0,Nr.jsx)(Jo,{className:(0,xr.A)(e.backButtonClass),onClick:e.backButtonClickHandler||p,type:"footer",disabled:r})})]})})},tc=()=>{const e=(0,qr.t)(),t=(0,wr.P)(),n=Vs();return(0,Nr.jsxs)("div",{className:"flow-screen",children:[(0,Nr.jsx)(Bo,{className:(0,xr.A)("px-body justify-center",t?"pt-8 pb-16":"pt-2"),children:(0,Nr.jsxs)("div",{className:"fixed-container",children:[(0,Nr.jsx)(jo,{className:"d-block mx-auto",ariaHidden:!0}),(0,Nr.jsx)("p",{className:"text-center text-ellipsis mt-6","data-qa":"blocked-message-text",children:e.translate("blockedScreen.description")})]})}),!t&&(0,Nr.jsx)(ec,{children:(0,Nr.jsx)("div",{className:"d-flex justify-center",children:(0,Nr.jsx)("button",{type:"button",className:"btn-link text-truncate",onClick:()=>{n.emit(Rs.SHOULD_HIDE,{})},"data-qa":"close","data-tracking-element-name":"closeButton",children:e.translate("blockedScreen.button")})})})]})};var nc;!function(e){e[e.MAX_LENGTH=500]="MAX_LENGTH"}(nc||(nc={}));var ic=n(1885);function sc(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];const t=(0,d.useRef)(null),n=(0,ic.k)(),i=(0,Br.$)();return(0,d.useEffect)((()=>{if(i)return;if(!e||!n)return;if(!t.current)throw new Error("ref is not provided");const s=window.setTimeout((()=>{var e,n;null===(e=t.current)||void 0===e||e.setAttribute("tabindex","0"),null===(n=t.current)||void 0===n||n.focus({preventScroll:!0})}),50);return()=>window.clearTimeout(s)}),[t,e,n,i]),t}function ac(e){const t=sc(e.autoFocus);return(0,Nr.jsx)("div",{className:"sr-only",role:"status","aria-live":"polite",ref:t,children:e.children})}var rc,oc=n(8489),cc=n(7314);function lc(){return lc=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},lc.apply(this,arguments)}var uc=function(e,t){return d.createElement("svg",lc({width:24,height:24,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",ref:t},e),rc||(rc=d.createElement("path",{d:"M12 20C28.659 10.9628 18.2615 0.617428 12 6.95101C5.73851 0.617357 -4.659 10.9627 12 20Z",fill:"currentColor"})))},dc=(0,d.forwardRef)(uc),hc=(0,d.memo)(dc);const mc=[Po.b.HOVER],pc=[Po.b.CLICK],gc=["bottom"],yc=e=>{const t=(0,qr.t)(),n=(0,$r.Q)(),i=(0,wr.P)(),s=(0,Ur.k)(),a=(0,Pr.n)(),r=(0,d.useRef)(null),o=a.campaign.config.tribute.showAddress||a.campaign.config.tribute.showEmail;return(0,Nr.jsxs)(Nr.Fragment,{children:[(0,Nr.jsxs)("p",{ref:r,className:(0,xr.A)(s("tribute-badge"),{"cursor-pointer":o}),"data-qa":"tribute-badge","data-tracking-element-name":"tributeBadge",children:[(0,Nr.jsxs)("span",{className:"body-2 d-flex",children:[(0,Nr.jsx)("span",{className:"icon-slot icon-slot-18 shrink-0 me-1","aria-hidden":!0,children:(0,Nr.jsx)("span",{className:"p-abs centered font-size-18 text-red-60",children:(0,Nr.jsx)(hc,{className:"icon-fill d-block"})})}),(0,Nr.jsx)("span",{className:"text-truncate me-1",children:t.translate("tributeBadge.label")})]}),(0,Nr.jsx)("span",{className:(0,xr.A)("label-2",i?"text-ellipsis":"text-truncate"),dir:"auto",children:e.name})]}),o&&(0,Nr.jsx)(Do.S,{triggerRef:r,trigger:i?pc:mc,placement:n?"left-start":"right-start",fallbackPlacements:gc,maxWidth:"var(--fixed-container-width-desktop)",children:t.translate("tributeBadge.tooltipLabel")})]})},fc=window.devicePixelRatio>1,Sc=e=>{const t=(0,wr.P)(),n=(0,Ur.k)(),i=Jr(),[s,a]=(0,d.useState)((()=>i.getCurrentFlow())),[r,o]=(0,d.useState)(s.isLocked),[c,l]=(0,d.useState)((()=>i.checkoutService.canGoBack)),[u,h]=(0,d.useState)((()=>s.canGoBack)),m=(0,wo.Q)(),p=(0,Pr.n)(),g=p.getAskPageConfig(fc),y=ho(),f=g.show||!!p.fundraisingPage,S=g.show?g.logoImage:g.fallbackCompanyLogo;(0,d.useEffect)((()=>{m&&(l(i.checkoutService.canGoBack),h(i.getCurrentFlow().canGoBack))}),[i,m]),(0,d.useEffect)((()=>{const e=s.on(wi.LOCKED,(()=>{o(!0)})),t=s.on(wi.UNLOCKED,(()=>{o(!1)}));return()=>{e(),t()}}),[s,e]),(0,d.useEffect)((()=>i.onFlowChanged((()=>{const e=i.getCurrentFlow();a(e)}))),[i]);const A=(0,d.useCallback)((()=>{u&&c&&s.prev()}),[s,u,c]);return(0,Nr.jsxs)(Nr.Fragment,{children:[e.showBadge&&(0,Nr.jsx)(yc,{name:y.tribute.name}),(0,Nr.jsxs)("div",{className:(0,xr.A)(n("header"),e.className),"data-qa":"header-block",children:[!t&&!e.titleFullWidth&&(0,Nr.jsx)("div",{className:"header-aside",children:(0,Nr.jsx)("div",{className:"icon-slot icon-slot-24",children:(0,Nr.jsx)("div",{className:"p-abs centered",children:(e.forceShowBackButton||c)&&(0,Nr.jsx)(Jo,{type:"header",disabled:r,onClick:e.backButtonClickHandler||A})})})}),t&&!f&&(0,Nr.jsx)("div",{className:"header-company",children:S?(0,Nr.jsx)("img",{src:S,alt:g.logoAltText||g.companyName,className:"header-company-logo",height:"32","data-qa":"campaign-logo-image"}):(0,Nr.jsx)("p",{className:"header-company-name",title:g.companyName,children:g.companyName})}),(e.children||e.title)&&(0,Nr.jsx)("div",{className:(0,xr.A)(n("header-main"),{"header-main-full":!t&&e.titleFullWidth}),children:e.title?(0,Nr.jsx)("h2",{className:(0,xr.A)("title-2",t?"text-ellipsis":"text-line-clamp-2"),"data-testid":e.titleTestId,"data-qa":e.titleQa,children:e.title}):e.children}),!t&&!e.titleFullWidth&&(0,Nr.jsx)("div",{className:"header-aside",children:(0,Nr.jsx)("div",{className:"icon-slot icon-slot-24"})})]})]})},Ac={minHeight:"200px"},Ec=e=>{const{showBadge:t}=e,{state:n,controller:i}=eo(ka.COMMENT),s=(0,qr.t)(),a=(0,wr.P)(),r=no(),o=(0,d.useRef)(null);(0,cc.f)({ref:o,autoFocus:!0,mode:oc.Q.ALL});const c=(0,d.useCallback)((e=>{e.preventDefault(),i.submitComment()}),[i]),l=(0,d.useCallback)((e=>{i.setComment(e.target.value)}),[i]);return(0,Nr.jsxs)("form",{"data-testid":"comment-form",onSubmit:c,className:"flow-screen","data-qa":"active-screen-comment",children:[(0,Nr.jsx)(ac,{autoFocus:a,children:s.translate("common.screenAriaLabel",{screenTitle:`${s.translate("commentScreen.title")}`})}),(0,Nr.jsx)(Sc,{title:s.translate("commentScreen.title"),showBadge:t}),(0,Nr.jsx)(Bo,{className:(0,xr.A)("px-body",{"pt-8 pb-10":!a}),children:(0,Nr.jsx)("div",{className:(0,xr.A)("fixed-container",{"grow-1 d-flex flex-column":!a}),children:(0,Nr.jsxs)("div",{className:(0,xr.A)({"grow-1 d-flex flex-column":!a}),children:[(0,Nr.jsx)("label",{htmlFor:`comment-${r}`,className:"sr-only","data-qa":"comment-label",children:s.translate("commentScreen.textareaPlaceholder")}),(0,Nr.jsx)("textarea",{ref:o,id:`comment-${r}`,className:(0,xr.A)("form-control",{"grow-1":!a}),style:Ac,onChange:l,value:n.comment,placeholder:s.translate("commentScreen.textareaPlaceholder"),"data-qa":"comment","data-testid":"comment-input",maxLength:nc.MAX_LENGTH})]})})}),(0,Nr.jsx)(ec,{children:(0,Nr.jsx)("button",{type:"submit",className:"btn btn-primary","data-qa":"save-comment","data-tracking-element-name":"nextButton",children:s.translate("commentScreen.button")})})]})};var Cc;function vc(e,t,n){switch(n){case se.ONCE:return e.translate("creditCardScreen.payButtonLabel.once",{amount:t});case se.DAILY:return e.translate("creditCardScreen.payButtonLabel.daily",{amount:t});case se.WEEKLY:return e.translate("creditCardScreen.payButtonLabel.weekly",{amount:t});case se.BIWEEKLY:return e.translate("creditCardScreen.payButtonLabel.biweekly",{amount:t});case se.EVERY_4_WEEKS:return e.translate("creditCardScreen.payButtonLabel.every4weeks",{amount:t});case se.MONTHLY:return e.translate("creditCardScreen.payButtonLabel.monthly",{amount:t});case se.BIMONTHLY:return e.translate("creditCardScreen.payButtonLabel.bimonthly",{amount:t});case se.QUARTERLY:return e.translate("creditCardScreen.payButtonLabel.quarterly",{amount:t});case se.SEMIANNUAL:return e.translate("creditCardScreen.payButtonLabel.semiannual",{amount:t});case se.ANNUAL:return e.translate("creditCardScreen.payButtonLabel.annual",{amount:t});default:throw new Error(`Unknown frequency "${n}"`)}}function Nc(e,t){switch(t){case se.ONCE:return e.translate("donateForm.giveOnce");case se.DAILY:return e.translate("donateForm.daily");case se.WEEKLY:return e.translate("donateForm.weekly");case se.EVERY_4_WEEKS:return e.translate("donateForm.every4weeks");case se.BIWEEKLY:return e.translate("donateForm.biweekly");case se.MONTHLY:return e.translate("donateForm.monthly");case se.BIMONTHLY:return e.translate("donateForm.bimonthly");case se.QUARTERLY:return e.translate("donateForm.quarterly");case se.SEMIANNUAL:return e.translate("donateForm.semiannual");case se.ANNUAL:return e.translate("donateForm.annual");default:throw new F(t)}}function bc(){return bc=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},bc.apply(this,arguments)}var Pc,Dc,_c=function(e,t){return d.createElement("svg",bc({xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:1.4,strokeLinecap:"round",strokeLinejoin:"round",ref:t},e),Cc||(Cc=d.createElement("polyline",{points:"20 6 9 17 4 12"})))},Tc=(0,d.forwardRef)(_c),Oc=(0,d.memo)(Tc);function xc(){return xc=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},xc.apply(this,arguments)}var kc=function(e,t){return d.createElement("svg",xc({xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:1.4,strokeLinecap:"round",strokeLinejoin:"round",ref:t},e),Pc||(Pc=d.createElement("line",{x1:18,y1:6,x2:6,y2:18})),Dc||(Dc=d.createElement("line",{x1:6,y1:6,x2:18,y2:18})))},Ic=(0,d.forwardRef)(kc),wc=(0,d.memo)(Ic),Rc=n(7042),Mc=n(4379);const Lc=e=>{const{children:t,setRef:n,className:i,role:s,dataQa:a,dataTestId:r}=e;return(0,Nr.jsx)("div",{ref:n,className:(0,xr.A)("text-red-80 bg-red-10 p-3 border border-red-20 border-radius-5",i),role:null!=s?s:"alert","data-qa":a,"data-testid":r,children:t})},Uc=(0,d.memo)(Lc),Fc=e=>(0,Nr.jsxs)(Nr.Fragment,{children:[e.errorTitle&&(0,Nr.jsx)("p",{className:"subtitle-5 text-red-80 text-ellipsis","data-qa":e.dataQa+"-error-title","data-testid":e.dataTestId+"-error-title",dangerouslySetInnerHTML:{__html:e.errorTitle}}),e.errorMessage&&(0,Nr.jsx)("p",{className:"body-3 text-color text-ellipsis mt-1","data-qa":e.dataQa+"-error-message","data-testid":e.dataTestId+"-error-message",dangerouslySetInnerHTML:{__html:e.errorMessage}})]}),jc=(0,d.memo)(Fc),Bc=e=>{const{buttonType:t,type:n,processingState:i,className:s,spinnerColorDefault:a,children:r,errorTitle:o,errorMessage:c,disabled:l,testMode:u,setRef:h,dataQa:m,dataTestId:p,trackingElement:g,serverErrors:y,onClick:f}=e,S=(0,qr.t)(),A=(0,wr.P)(),E=(0,d.useRef)(null),C=(0,d.useRef)(null),v="link"===t,N=i===La.IDLE,b=i===La.PENDING,P=i===La.SUCCESS,D=i===La.ERROR,_=!N&&!D||l,T=D&&(!!o||!!c),[O,x]=(0,d.useState)(D),[k,I]=(0,d.useState)(T);(0,d.useImperativeHandle)(h,(()=>C.current),[]);const w=!(null==y?void 0:y.email),R=(0,Mc.D)((()=>{x(!1),I(!1)})),M=()=>{O&&x(!1),k&&I(!1)};return function(e){const{document:t}=(0,Dr.M)();(0,d.useEffect)((()=>{const n=()=>{e()};return t.addEventListener("stripeElementEvent",n),t.addEventListener("click",n),()=>{t.removeEventListener("click",n),t.removeEventListener("stripeElementEvent",n)}}),[t,e])}(M),function(e){const{document:t}=(0,Dr.M)();(0,d.useEffect)((()=>{const n=t=>{"Tab"===t.key&&e()};return t.addEventListener("keydown",n),()=>{t.removeEventListener("keydown",n)}}),[t,e])}(M),(0,d.useEffect)((()=>{w&&(x(D),I(T))}),[D,T,w]),(0,d.useEffect)((()=>{O?R.set([],5e3):R.clear()}),[O,R]),(0,Nr.jsxs)(Nr.Fragment,{children:[A?(0,Nr.jsx)(kr.A,{nodeRef:E,in:k,timeout:200,classNames:"rtg-fade",mountOnEnter:!0,unmountOnExit:!0,children:(0,Nr.jsx)(Uc,{setRef:E,className:"mb-3",role:O?"alert":"none",children:(0,Nr.jsx)(jc,{errorTitle:o,errorMessage:c,dataQa:m,dataTestId:p})})}):(0,Nr.jsx)(Rc.q,{triggerRef:C,show:k,maxWidth:"var(--fixed-container-width-desktop)",role:k?"alert":"none",children:(0,Nr.jsx)(jc,{errorTitle:o,errorMessage:c,dataQa:m,dataTestId:p})}),(0,Nr.jsxs)("button",{ref:C,type:null!=n?n:"button",className:(0,xr.A)(v?"btn-link p-rel max-w-100":"btn",s,{"w-100":v&&!N,"btn-testmode":!v&&u,"btn-loading":b||P||O,"is-success":P,"has-error":O}),disabled:_,"aria-disabled":_,"aria-busy":b,"data-qa":m,"data-tracking-element-name":g,"data-testid":p,onClick:f,children:[v?(0,Nr.jsxs)(Nr.Fragment,{children:[(0,Nr.jsx)("span",{className:(0,xr.A)("text-truncate",{invisible:b||P||O}),"data-testid":"link-children-container",children:r}),(b||P)&&(0,Nr.jsxs)("span",{className:"p-abs centered max-w-100 d-flex items-center justify-center",children:[(0,Nr.jsx)("span",{className:"spinner spinner-md spinner-primary shrink-0 me-1"}),(0,Nr.jsx)("span",{className:"text-truncate",children:S.translate("payButton.processingShort")})]}),O&&(0,Nr.jsx)("span",{className:"p-abs centered text-truncate text-red-80 max-w-100",children:S.translate("payButton.error")})]}):(0,Nr.jsxs)(Nr.Fragment,{children:[r,b&&(0,Nr.jsx)("span",{className:"p-abs centered",children:(0,Nr.jsx)("span",{className:(0,xr.A)("spinner spinner-lg",a?"spinner-default":"spinner-white")})}),(0,Nr.jsxs)("span",{className:"btn-loading-state",children:[P&&(0,Nr.jsx)(Oc,{className:"icon-stroke icon-stroke-2","data-testid":"pay-button-success-icon"}),O&&(0,Nr.jsx)(wc,{className:"icon-stroke icon-stroke-2","data-testid":"pay-button-error-icon"})]})]}),(0,Nr.jsx)("span",{className:"sr-only",role:"status","aria-live":"polite",children:b&&S.translate("payButton.processing")}),(0,Nr.jsx)("span",{className:"sr-only",role:"status","aria-live":"polite",children:P&&S.translate("payButton.done")})]})]})},Hc=(0,d.memo)(Bc),qc={4:4,8:8,12:12,16:14,18:16,20:18,24:20,28:24,32:26,36:28,40:32,48:36,56:40,64:48,80:56},Gc=e=>{const{className:t,size:n,sizeMin:i,isBreakpoint:s,notAdaptive:a}=e,[r,o]=(0,d.useState)(n);(0,d.useEffect)((()=>{o(s&&!a?qc[n]:n)}),[n,s,a]);const c=Object.assign({width:`${r}px`,height:`${r}px`},i&&{lineHeight:`${i}px`});return(0,Nr.jsx)("div",{className:(0,xr.A)("opacity-0",t),style:c,"aria-hidden":"true","data-testid":"spacer-base",children:""})},Vc=e=>{const{className:t,size:n,sizeMin:i}=e;return(0,Nr.jsx)(Gc,{className:t,size:n,sizeMin:i})};var Yc,Kc=n(1986);function zc(){return zc=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},zc.apply(this,arguments)}var $c=function(e,t){return d.createElement("svg",zc({width:14,height:10,viewBox:"0 0 14 10",fill:"none",xmlns:"http://www.w3.org/2000/svg",ref:t},e),Yc||(Yc=d.createElement("path",{d:"M12.3333 1L5 8.33333L1.66667 5",stroke:"currentColor",strokeWidth:1.5,strokeLinecap:"round",strokeLinejoin:"round"})))},Wc=(0,d.forwardRef)($c),Xc=(0,d.memo)(Wc);const Qc=e=>{var{setRef:t,innerRef:n,className:i,customLabelClasses:s,customControlClasses:a,disabled:r,error:o,checked:c,checkboxValue:u,children:h,hint:m,dataQa:p,dataTestId:g,trackingElement:y,onChange:f}=e,S=(0,l.Tt)(e,["setRef","innerRef","className","customLabelClasses","customControlClasses","disabled","error","checked","checkboxValue","children","hint","dataQa","dataTestId","trackingElement","onChange"]);const A=(0,d.useRef)(null);return(0,d.useImperativeHandle)(t,(()=>A.current),[]),(0,Nr.jsxs)("div",{ref:n,className:(0,xr.A)("ui-checkbox",{"ui-checkbox-disabled":r},i),children:[(0,Nr.jsxs)("label",{className:(0,xr.A)("ui-checkbox-label",s),"data-qa":p+"-label",children:[(0,Nr.jsxs)("span",{className:(0,xr.A)("ui-checkbox-control",a),children:[(0,Nr.jsx)("input",Object.assign({ref:A,type:"checkbox",className:(0,xr.A)("ui-checkbox-input",{"has-error":o}),disabled:r,checked:c,value:u,"aria-invalid":o,"data-qa":p,"data-tracking-element-name":y,"data-testid":g,onChange:()=>{r||f(!c)}},S)),(0,Nr.jsx)("span",{className:"ui-checkbox-icon","aria-hidden":!0,children:c&&(0,Nr.jsx)(Xc,{})})]}),h&&(0,Nr.jsx)("span",{className:"ui-checkbox-text",children:h})]}),m&&(0,Nr.jsx)("div",{className:"ui-checkbox-hint",children:m})]})},Zc=[Po.b.CLICK],Jc=["top","top-end","bottom","bottom-end"],el=e=>{const t=(0,qr.t)(),n=(0,$r.Q)(),i=(0,d.useRef)(null);return(0,Nr.jsxs)("div",{className:(0,xr.A)("d-flex",e.className),children:[(0,Nr.jsx)(Qc,{checked:e.anonymousChecked,disabled:e.locked,onChange:e.onToggle,dataQa:"anonymously-checkbox",trackingElement:"anonymousCheckbox",dataTestId:e.dataTestId,children:(0,Nr.jsx)("span",{className:"text-truncate",children:t.translate("privacyScreen.donateAnonymously.label")})}),(0,Nr.jsx)("div",{className:"shrink-0 icon-slot icon-slot-18 ms-2",children:(0,Nr.jsx)("button",{type:"button",ref:i,className:"btn-icon p-abs centered text-gray-60 font-size-18",disabled:e.locked,"aria-label":t.translate("privacyScreen.donateAnonymously.helpAriaLabel"),"data-qa":"anonymous-checkbox-help-button",children:(0,Nr.jsx)(Kc.A,{className:(0,xr.A)("icon-stroke d-block",{"icon-flip-horizontal":n}),"aria-hidden":!0})})}),!e.locked&&(0,Nr.jsx)(Do.S,{triggerRef:i,trigger:Zc,placement:n?"left-start":"right-start",fallbackPlacements:Jc,children:t.translate("privacyScreen.donateAnonymously.tooltipLabel")})]})},tl=(0,d.memo)(el);var nl=n(2762),il=n(6780);const sl=e=>{var t,{label:n,labelOptional:i,labelSrOnly:s,labelFloating:a,id:r,className:o,value:c,formGroupClass:u,formLabelClass:h,dataQa:m,dataTestId:p,options:g=[],groupedOptions:y,children:f,autoFocus:S,hasCustomValue:A,customPlaceholder:E,error:C,setRef:v,autoScroll:N}=e,b=(0,l.Tt)(e,["label","labelOptional","labelSrOnly","labelFloating","id","className","value","formGroupClass","formLabelClass","dataQa","dataTestId","options","groupedOptions","children","autoFocus","hasCustomValue","customPlaceholder","error","setRef","autoScroll"]);const P=(0,d.useRef)(null),D=""===(null===(t=null==g?void 0:g[0])||void 0===t?void 0:t.value);return(0,d.useImperativeHandle)(v,(()=>P.current),[]),(0,cc.f)({ref:P,autoFocus:S,mode:oc.Q.DESKTOP}),(0,il.Q)(P,{shouldScroll:N,shouldFocus:!0}),(0,Nr.jsxs)(nl.s,{htmlFor:r,label:n,labelOptional:i,labelSrOnly:s,labelFloating:a,formGroupClass:u,formLabelClass:(0,xr.A)(h,{"has-error":C}),formControlValue:c,dataQa:m+"-label",children:[(0,Nr.jsxs)("select",Object.assign({id:r,ref:P,className:(0,xr.A)("form-control form-control-select",o,{"has-label-floating":a,"has-error":C}),"aria-invalid":C,value:c,"data-qa":m,"data-testid":p},b,{children:[!D&&(0,Nr.jsx)("option",{value:"",disabled:!0}),g&&g.map((e=>{let{value:t,label:n}=e;return(0,Nr.jsx)("option",{value:t,children:n},t)})),y&&Object.entries(y).map((e=>{let[t,n]=e;return(0,Nr.jsx)("optgroup",{label:t,children:n.map((e=>{let{value:t,label:n}=e;return(0,Nr.jsx)("option",{value:t,children:n},t)}))},t)}))]})),(A||!a&&E)&&(0,Nr.jsx)("span",{className:(0,xr.A)("form-control-placeholder p-abs bottom-left bottom-right text-truncate pointer-events-none z-index-4",{"text-gray-60":!c,"has-label-floating":a}),children:c||E}),f]})};var al=n(6007),rl=n(1660);const ol={minWidth:"100px",maxWidth:"170px",width:"auto"},cl=e=>{let{validation:t,customerTitle:n,className:i,autoFocus:s,locked:a,dataTestId:r,onChange:o}=e;const c=(0,qr.t)(),l=no(),u=!t.customerTitle.isValid,h=t.customerTitle.fields.title.errors.required,m=n.list.map((e=>({value:e,label:e}))),p=(0,d.useRef)(null);return(0,rl.FM)(p,(e=>!e.validation.customerTitle.isValid)),(0,Nr.jsxs)("div",{className:(0,xr.A)("p-rel",i),style:ol,children:[(0,Nr.jsx)(sl,{id:`title-${l}`,label:c.translate("privacyScreen.customerTitle.label"),labelFloating:!0,formGroupClass:"p-abs top-left bottom-right",value:n.title,options:m,customPlaceholder:c.translate("privacyScreen.customerTitle.placeholder"),autoFocus:s,disabled:a,error:u,"aria-describedby":`customer-title-${l}-error`,dataTestId:r,onChange:e=>o(e.target.value),dataQa:"customer-title-select",setRef:p,children:h&&(0,Nr.jsxs)(Nr.Fragment,{children:[(0,Nr.jsx)(al.U,{className:"p-abs centered-right z-index-5 me-10",children:c.translate("privacyScreen.customerTitle.error.required")}),(0,Nr.jsx)("p",{id:`customer-title-${l}-error`,className:"sr-only",children:c.translate("privacyScreen.customerTitle.error.required")})]})}),(0,Nr.jsxs)("span",{className:"invisible form-control-placeholder has-label-floating d-flex","aria-hidden":!0,children:[c.translate("privacyScreen.customerTitle.placeholder"),(0,Nr.jsx)("span",{className:"icon-slot icon-slot-18 shrink-0 ms-2"})]})]})},ll=(0,d.memo)(cl);var ul;!function(e){e[e.NAME_MIN_LENGTH=1]="NAME_MIN_LENGTH",e[e.NAME_MAX_LENGTH=100]="NAME_MAX_LENGTH",e[e.EMAIL_MAX_LENGTH=320]="EMAIL_MAX_LENGTH",e[e.ON_BEHALF_OF_MAX_LENGTH=60]="ON_BEHALF_OF_MAX_LENGTH"}(ul||(ul={}));var dl=n(9196);const hl=[Po.b.CLICK],ml=["top","top-end","bottom","bottom-end"],pl=e=>{let{className:t,isDisabled:n}=e;const i=(0,qr.t)(),s=(0,$r.Q)(),a=(0,wr.P)(),r=(0,d.useRef)(null);return(0,Nr.jsxs)(Nr.Fragment,{children:[(0,Nr.jsx)("button",{type:"button",ref:r,className:(0,xr.A)("btn-icon font-size-18 text-gray-60",t),disabled:n,"aria-label":i.translate("privacyScreen.emailInput.helpAriaLabel"),"data-testid":"privacy-email-consent-tooltip-trigger","data-qa":"email-consent-tooltip-trigger",children:(0,Nr.jsx)(Kc.A,{className:(0,xr.A)("icon-stroke d-block",{"icon-flip-horizontal":s}),"data-qa":"privacy-email-consent-tooltip-trigger","aria-hidden":!0})}),!n&&(0,Nr.jsx)(Do.S,{triggerRef:r,trigger:hl,placement:s?"left-start":"right-start",fallbackPlacements:ml,maxWidth:a?"var(--fixed-container-width-desktop)":"232px",dataQa:"privacy-email-consent-tooltip",children:i.translate("privacyScreen.emailInput.tooltipLabel")})]})},gl=e=>{let{as:t,id:n,className:i,style:s,token:a,params:r,role:o,dataQa:c,dataTestId:l}=e;const u=(0,qr.t)();en()&&!/<\/?[a-z][\s\S]*>/i.test(u.translate(a))&&console.warn('Use "intl.translate" for translations without HTML');const d=null!=t?t:"span";return(0,Nr.jsx)(d,{id:n,className:i,style:s,dangerouslySetInnerHTML:{__html:u.translate(a,r)},role:o,"data-qa":c,"data-testid":l})},yl=(0,d.memo)(gl),fl=e=>{let{validation:t,emailConsent:n,className:i,email:s,serverError:a,locked:r,dataTestId:o,onChange:c}=e;const l=(0,qr.t)(),u=no(),h=!t.donorEmail.fields.email.isValid||a,m=t.donorEmail.fields.email.errors.required,p=t.donorEmail.fields.email.errors.email,g=(0,d.useRef)(null);return(0,rl.FM)(g,(e=>!e.validation.donorEmail.fields.email.isValid||Boolean(e.serverErrors.email))),(0,Nr.jsxs)(dl.t,{id:`personal-email-${u}`,setRef:g,type:"text",label:l.translate("privacyScreen.emailInput.label"),labelFloating:!0,className:(0,xr.A)({"pe-10":n.isEnabled&&!h||!n.isEnabled&&h,"pe-16":n.isEnabled&&h}),formGroupClass:i,formLabelClass:(0,xr.A)({"pe-6":n.isEnabled&&!h||!n.isEnabled&&h,"pe-12":n.isEnabled&&h}),placeholder:l.translate("privacyScreen.emailInput.placeholder"),value:s,maxLength:ul.EMAIL_MAX_LENGTH,inputMode:"email",autoComplete:"email",name:"email",error:h,disabled:r,"aria-required":!0,"aria-describedby":`personal-email-${u}-error`,onChange:e=>c(e.target.value),dataQa:"personal-email",dataTestId:o,children:[(0,Nr.jsxs)("div",{className:"p-abs centered-right d-flex items-center z-index-5 me-4",children:[h&&(0,Nr.jsxs)(al.U,{className:"shrink-0",dataQa:"personal-email",children:[m&&l.translate("privacyScreen.emailInput.error.required"),!m&&p&&l.translate("privacyScreen.emailInput.error.invalid"),a&&(0,Nr.jsx)(yl,{token:"privacyScreen.emailInput.error.server"})]}),n.isEnabled&&(0,Nr.jsx)(pl,{className:(0,xr.A)("shrink-0",{"ms-2":h}),isDisabled:r})]}),h&&(0,Nr.jsxs)("p",{id:`personal-email-${u}-error`,className:"sr-only",children:[m&&l.translate("privacyScreen.emailInput.error.required"),!m&&p&&l.translate("privacyScreen.emailInput.error.invalid"),a&&(0,Nr.jsx)(yl,{token:"privacyScreen.emailInput.error.server"})]})]})},Sl=(0,d.memo)(fl),Al=e=>e.fields.firstName.errors.required?"privacyScreen.firstNameInput.error.required":e.fields.firstName.errors.characters?"privacyScreen.firstNameInput.error.characters":e.fields.firstName.errors.minLength?"privacyScreen.firstNameInput.error.minLength":"privacyScreen.firstNameInput.error.required",El=e=>{let{validation:t,className:n,firstName:i,locked:s,autoFocus:a,dataTestId:r,onChange:o}=e;const c=(0,qr.t)(),l=no(),u=(0,d.useRef)(null),h=!t.donorName.fields.firstName.isValid;return(0,rl.FM)(u,(e=>!e.validation.donorName.fields.firstName.isValid)),(0,Nr.jsx)(dl.t,{id:`personal-first-name-${l}`,setRef:u,label:c.translate("privacyScreen.firstNameInput.label"),labelFloating:!0,className:(0,xr.A)({"pe-10":h}),formLabelClass:(0,xr.A)({"pe-6":h}),formGroupClass:n,placeholder:c.translate("privacyScreen.firstNameInput.placeholder"),value:i,maxLength:ul.NAME_MAX_LENGTH,autoComplete:"given-name",autoFocus:a,name:"firstName",disabled:s,error:h,"aria-required":!0,"aria-describedby":`personal-first-name-${l}-error`,onChange:e=>o(e.target.value),dataQa:"personal-first-name",dataTestId:r,children:h&&(0,Nr.jsxs)(Nr.Fragment,{children:[(0,Nr.jsx)(al.U,{className:"p-abs centered-right z-index-5 me-4",children:c.translate(Al(t.donorName))}),(0,Nr.jsx)("p",{id:`personal-first-name-${l}-error`,className:"sr-only",children:c.translate(Al(t.donorName))})]})})},Cl=(0,d.memo)(El),vl=[Po.b.CLICK],Nl=["top","top-end","bottom","bottom-end"],bl=e=>{const{onShowConsent:t}=e,n=(0,qr.t)(),i=(0,$r.Q)(),s=(0,d.useRef)(null),a=(0,Pr.n)(),{checkboxText:r}=a.campaign.config.consentText.general,{additionalInfoText:o}=a.campaign.config.consentText.general;return(0,d.useEffect)((()=>{t()}),[t]),(0,Nr.jsxs)("div",{className:(0,xr.A)("d-flex",e.className),children:[(0,Nr.jsx)(Qc,{checked:e.generalConsent.isAccepted,disabled:e.locked,onChange:e.onToggle,dataQa:"general-consent-checkbox",trackingElement:"generalConsentCheckbox",dataTestId:e.dataTestId,children:(0,Nr.jsx)("span",{className:"text-truncate",dir:"auto",children:r?(0,Nr.jsx)("span",{dangerouslySetInnerHTML:{__html:r},"data-qa":"general-consent-text"}):n.translate("privacyScreen.generalConsent.label")})}),o&&(0,Nr.jsxs)(Nr.Fragment,{children:[(0,Nr.jsx)("div",{className:"shrink-0 icon-slot icon-slot-18 ms-2",children:(0,Nr.jsx)("button",{type:"button",ref:s,className:"btn-icon p-abs centered text-gray-60 font-size-18",disabled:e.locked,"aria-label":n.translate("privacyScreen.generalConsent.helpAriaLabel"),"data-qa":"general-consent-checkbox-help-button","data-testid":"general-consent-checkbox-help-button",children:(0,Nr.jsx)(Kc.A,{className:(0,xr.A)("icon-stroke d-block",{"icon-flip-horizontal":i}),"aria-hidden":!0})})}),!e.locked&&(0,Nr.jsx)(Do.S,{triggerRef:s,trigger:vl,placement:i?"left-start":"right-start",dataQa:"general-consent-checkbox-text-popover",maxHeight:"220px",fallbackPlacements:Nl,children:(0,Nr.jsx)("p",{dangerouslySetInnerHTML:{__html:o},dir:"auto"})})]})]})},Pl=(0,d.memo)(bl),Dl=e=>e.fields.lastName.errors.required?"privacyScreen.lastNameInput.error.required":e.fields.lastName.errors.characters?"privacyScreen.lastNameInput.error.characters":e.fields.lastName.errors.minLength?"privacyScreen.lastNameInput.error.minLength":"privacyScreen.lastNameInput.error.required",_l=e=>{let{validation:t,className:n,lastName:i,locked:s,dataTestId:a,onChange:r}=e;const o=(0,qr.t)(),c=no(),l=(0,d.useRef)(null),u=!t.donorName.fields.lastName.isValid;return(0,rl.FM)(l,(e=>!e.validation.donorName.fields.lastName.isValid)),(0,Nr.jsx)(dl.t,{id:`personal-last-name-${c}`,setRef:l,label:o.translate("privacyScreen.lastNameInput.label"),labelFloating:!0,className:(0,xr.A)({"pe-10":u}),formLabelClass:(0,xr.A)({"pe-6":u}),formGroupClass:n,placeholder:o.translate("privacyScreen.lastNameInput.placeholder"),value:i,maxLength:ul.NAME_MAX_LENGTH,autoComplete:"family-name",name:"lastName",disabled:s,error:u,"aria-required":!0,"aria-describedby":`personal-last-name-${c}-error`,onChange:e=>r(e.target.value),dataQa:"personal-last-name",dataTestId:a,children:u&&(0,Nr.jsxs)(Nr.Fragment,{children:[(0,Nr.jsx)(al.U,{className:"p-abs centered-right z-index-5 me-4",children:o.translate(Dl(t.donorName))}),(0,Nr.jsx)("p",{id:`personal-last-name-${c}-error`,className:"sr-only",children:o.translate(Dl(t.donorName))})]})})},Tl=(0,d.memo)(_l),Ol=[Po.b.CLICK],xl=["top","top-end","bottom","bottom-end"],kl=e=>{let{validation:t,onBehalfOf:n,className:i,locked:s,dataTestIdCheckbox:a,dataTestIdInput:r,onToggleOnBehalfOf:o,onChangeCompanyName:c}=e;var l;const u=(0,qr.t)(),h=(0,$r.Q)(),m=no(),p=!t.onBehalfOf.isValid,g=t.onBehalfOf.fields.onBehalfOf.errors.required,y=t.onBehalfOf.fields.onBehalfOf.errors.minLength,[f,S]=(0,d.useState)(!1),A=(0,d.useRef)(null),E=(0,d.useRef)(null);return(0,rl.FM)(E,(e=>!e.validation.onBehalfOf.isValid)),(0,Nr.jsxs)(Nr.Fragment,{children:[(0,Nr.jsxs)("div",{className:(0,xr.A)("d-flex",i),children:[(0,Nr.jsx)(Qc,{checked:n.isActive,disabled:s,dataQa:"behalf-company-button",trackingElement:"showBehalfOfInput",dataTestId:a,onChange:()=>{o(),S(!0)},children:(0,Nr.jsx)("span",{className:"text-truncate",children:u.translate("privacyScreen.donateAsOrganization.label")})}),(0,Nr.jsx)("div",{className:"shrink-0 icon-slot icon-slot-18 ms-2",children:(0,Nr.jsx)("button",{type:"button",ref:A,className:"btn-icon p-abs centered text-gray-60 font-size-18",disabled:s,"aria-label":u.translate("privacyScreen.donateAsOrganization.input.helpAriaLabel"),"data-qa":"donate-as-organization-help-button",children:(0,Nr.jsx)(Kc.A,{className:(0,xr.A)("icon-stroke d-block",{"icon-flip-horizontal":h}),"aria-hidden":!0})})}),!s&&(0,Nr.jsx)(Do.S,{triggerRef:A,trigger:Ol,placement:h?"left-start":"right-start",fallbackPlacements:xl,maxWidth:"232px",children:u.translate("privacyScreen.donateAsOrganization.input.tooltipLabel")})]}),n.isActive&&(0,Nr.jsxs)(Nr.Fragment,{children:[(0,Nr.jsx)(Vc,{size:8,sizeMin:4}),(0,Nr.jsx)(dl.t,{id:`on-behalf-${m}`,setRef:E,label:u.translate("privacyScreen.donateAsOrganization.input.label"),labelFloating:!0,autoFocus:n.isActive&&f,autoFocusMode:oc.Q.ALL,className:(0,xr.A)({"pe-10":p}),formLabelClass:(0,xr.A)({"pe-6":p}),formGroupClass:"shrink-0",placeholder:u.translate("privacyScreen.donateAsOrganization.input.placeholder"),value:null!==(l=n.companyName)&&void 0!==l?l:"",maxLength:ul.ON_BEHALF_OF_MAX_LENGTH,autoComplete:"organization",disabled:s,error:p,"aria-required":!0,"aria-describedby":`on-behalf-${m}-error`,dataQa:"behalf-company-field",dataTestId:r,onChange:e=>c(e.target.value),children:p&&(0,Nr.jsxs)(Nr.Fragment,{children:[(0,Nr.jsxs)(al.U,{className:"p-abs centered-right z-index-5 me-4",children:[g&&u.translate("privacyScreen.donateAsOrganization.input.error.required"),!g&&y&&u.translate("privacyScreen.donateAsOrganization.input.error.minLength")]}),(0,Nr.jsxs)("p",{id:`on-behalf-${m}-error`,className:"sr-only",children:[g&&u.translate("privacyScreen.donateAsOrganization.input.error.required"),!g&&y&&u.translate("privacyScreen.donateAsOrganization.input.error.minLength")]})]})})]})]})},Il=(0,d.memo)(kl),wl=e=>{var t;const n=(0,wr.P)(),i=(0,qr.t)(),s=(0,Uo.Y)(),a=(0,d.useRef)(null);return(0,rl.FM)(a,(e=>!e.validation.isAccepted.isValid)),(0,Nr.jsxs)(Nr.Fragment,{children:[(0,Nr.jsx)(Qc,{setRef:a,className:e.className,checked:null!==(t=e.termsAndConditions.isAccepted)&&void 0!==t&&t,error:!e.validation.isAccepted.isValid,disabled:e.locked,"aria-required":!0,"aria-describedby":`terms-checkbox-${s}-error`,onChange:e.onToggle,dataQa:"accept-terms-checkbox",trackingElement:"termsChecked",dataTestId:e.dataTestId,children:(0,Nr.jsx)("span",{className:(0,xr.A)({"text-line-clamp-2":!n}),dir:"auto","data-qa":"accept-terms-text",children:e.termsAndConditions.text?(0,Nr.jsx)("span",{dangerouslySetInnerHTML:{__html:e.termsAndConditions.text},"data-qa":"accept-terms-link"}):(0,Nr.jsx)(yl,{token:"privacyScreen.terms.label"})})}),e.validation.isAccepted.fields.isAccepted.errors.required&&(0,Nr.jsx)("p",{id:`terms-checkbox-${s}-error`,className:"sr-only",children:i.translate("privacyScreen.terms.error.required")})]})},Rl=(0,d.memo)(wl);function Ml(e,t){const[n,i]=(0,d.useState)(!1);return(0,d.useEffect)((()=>{if(!t)return;i(!0);const e=setTimeout((()=>{i(!1)}),400);return()=>clearTimeout(e)}),[e,t]),n}const Ll=(0,d.lazy)((()=>Promise.all([n.e(681),n.e(16)]).then(n.bind(n,3016)))),Ul=(0,d.lazy)((()=>Promise.all([n.e(840),n.e(335)]).then(n.bind(n,1335)))),Fl=e=>{let{showBadge:t}=e;const{controller:n,state:i}=eo(ka.PRIVACY),s=(0,wr.P)(),a=(0,qr.t)(),r=Ml(i.shakeKey,0!==i.shakeKey),o=i.onBehalfOf.isEnabled||i.showAnonymous||i.termsAndConditions.isEnabled||i.generalConsent.isEnabled,c=(0,rl.pv)(),u=(0,d.useCallback)((e=>(0,l.sH)(void 0,void 0,void 0,(function*(){e.preventDefault(),yield n.leave(),c()}))),[n,c]),h=(0,d.useCallback)((e=>n.changeCustomerTitle(e)),[n]),m=(0,d.useCallback)((e=>n.changeFirstName(e)),[n]),p=(0,d.useCallback)((e=>n.changeLastName(e)),[n]),g=(0,d.useCallback)((e=>{n.clearEmailServerError(),n.changeEmail(e)}),[n]),y=(0,d.useCallback)((e=>n.changePhone(e)),[n]),f=(0,d.useCallback)((e=>n.changePlainPhone(e)),[n]),S=(0,d.useCallback)((e=>n.changeCountryCode(e)),[n]),A=(0,d.useCallback)((e=>n.changeCompanyName(e)),[n]),E=(0,d.useCallback)((()=>n.toggleOnBehalfOf()),[n]),C=(0,d.useCallback)((()=>n.toggleAnonymousChecked()),[n]),v=(0,d.useCallback)((e=>n.toggleGeneralConsentChecked(e)),[n]),N=(0,d.useCallback)((()=>n.toggleTermsAndConditionsAccepted()),[n]),b=(0,d.useCallback)((()=>n.setGeneralConsentShown()),[n]),P=(0,d.useCallback)((e=>n.changeBirthday(e)),[n]);return(0,Nr.jsxs)("form",{onSubmit:u,className:"flow-screen","data-qa":"active-screen-privacy","data-testid":"form",children:[(0,Nr.jsx)("div",{className:"sr-only",role:"status","aria-live":"polite","data-testid":"status",children:a.translate("common.screenAriaLabel",{screenTitle:`${a.translate("privacyScreen.title")}`})}),(0,Nr.jsxs)(Sc,{showBadge:t,children:[i.isApplePayAlertVisible&&s&&(0,Nr.jsx)("div",{className:"fixed-container mb-5",children:(0,Nr.jsxs)("div",{className:"py-2 px-3 border border-gray-20 bg-blue-10 border-radius-6 text-center",children:[(0,Nr.jsx)("p",{className:"subtitle-5 text-ellipsis",children:a.translate("privacyScreen.alert.title")}),(0,Nr.jsx)("p",{className:"body-3 text-ellipsis mt-0-5",children:a.translate("privacyScreen.alert.message")})]})}),(0,Nr.jsx)("h2",{className:(0,xr.A)("title-2",s?"text-ellipsis":"text-line-clamp-2"),"data-testid":"title",children:a.translate("privacyScreen.title")})]}),(0,Nr.jsx)(Bo,{className:(0,xr.A)("px-body",{"pt-5":!s,shake:r}),children:(0,Nr.jsxs)("div",{className:"fixed-container grow-1 min-h-0 d-flex flex-column","aria-label":a.translate("privacyScreen.fieldsetAriaLabel"),children:[(0,Nr.jsxs)("div",{className:"group-stacked-vertical shrink-0",children:[(0,Nr.jsxs)("div",{className:"group-stacked-vertical group-stacked-item","data-testid":"privacy-personal-information-container",children:[(0,Nr.jsxs)("div",{className:(0,xr.A)("group-stacked-item",{"group-stacked-horizontal":i.customerTitle.isEnabled}),children:[i.customerTitle.isEnabled&&(0,Nr.jsx)(ll,{className:"group-stacked-item shrink-0",customerTitle:i.customerTitle,locked:i.locked,validation:i.validation,autoFocus:i.autoFocus.customerTitle,dataTestId:"privacy-customer-title-select",onChange:h}),(0,Nr.jsx)(Cl,{className:(0,xr.A)({"group-stacked-item":i.customerTitle.isEnabled}),firstName:i.firstName,autoFocus:i.autoFocus.firstName,locked:i.locked,validation:i.validation,dataTestId:"privacy-first-name-input",onChange:m})]}),(0,Nr.jsx)(Tl,{className:"group-stacked-item",lastName:i.lastName,locked:i.locked,validation:i.validation,dataTestId:"privacy-last-name-input",onChange:p})]}),(0,Nr.jsxs)("div",{className:(0,xr.A)("group-stacked-item",{"group-stacked-vertical":i.showPhone||i.birthday.isEnabled}),children:[(0,Nr.jsx)(Sl,{className:(0,xr.A)({"group-stacked-item":i.showPhone||i.birthday.isEnabled}),email:i.email,emailConsent:i.emailConsent,locked:i.locked,validation:i.validation,serverError:Boolean(i.serverErrors.email),dataTestId:"privacy-email-input",onChange:g}),i.showPhone&&(0,Nr.jsx)(d.Suspense,{fallback:(0,Nr.jsx)("span",{"data-testid":"privacy-phone-input-fallback"}),children:(0,Nr.jsx)(Ll,{className:(0,xr.A)({"group-stacked-item":i.showPhone}),phone:i.phone,phoneRequired:i.phoneRequired,userCountryCode:i.userCountryCode,showPhoneLegalText:i.showPhoneLegalText,phoneLegalText:i.phoneLegalText,locked:i.locked,validation:i.validation,dataTestId:"privacy-phone-input",onChange:y,onChangeCountryCode:S,onChangePlain:f})}),i.birthday.isEnabled&&(0,Nr.jsx)(d.Suspense,{fallback:null,children:(0,Nr.jsx)(Ul,{birthday:i.birthday.value,dateMask:i.birthday.dateFormat,className:(0,xr.A)({"group-stacked-item":!0}),locked:i.locked,validation:i.validation,dataTestId:"privacy-birthday",onChange:P})})]})]}),o&&(0,Nr.jsx)(Vc,{size:16,sizeMin:8}),i.onBehalfOf.isEnabled&&(0,Nr.jsxs)(Nr.Fragment,{children:[(0,Nr.jsx)(Il,{className:"shrink-0",onBehalfOf:i.onBehalfOf,locked:i.locked,validation:i.validation,dataTestIdCheckbox:"privacy-on-behalf-on-checkbox",dataTestIdInput:"privacy-on-behalf-on-input",onToggleOnBehalfOf:E,onChangeCompanyName:A}),i.onBehalfOf.isActive?(0,Nr.jsx)(Vc,{size:16,sizeMin:8}):(0,Nr.jsx)(Vc,{size:8,sizeMin:4})]}),i.showAnonymous&&(0,Nr.jsxs)(Nr.Fragment,{children:[(0,Nr.jsx)(tl,{className:"shrink-0",anonymousChecked:i.anonymousChecked,locked:i.locked,dataTestId:"privacy-anonymous-checkbox",onToggle:C}),(0,Nr.jsx)(Vc,{size:8,sizeMin:4})]}),i.generalConsent.isEnabled&&(0,Nr.jsxs)(Nr.Fragment,{children:[(0,Nr.jsx)(Pl,{className:"shrink-0",generalConsent:i.generalConsent,locked:i.locked,dataTestId:"general-consent-checkbox",onToggle:v,onShowConsent:b}),(0,Nr.jsx)(Vc,{size:8,sizeMin:4})]}),i.termsAndConditions.isEnabled&&(0,Nr.jsxs)(Nr.Fragment,{children:[(0,Nr.jsx)(Rl,{className:"shrink-0",termsAndConditions:i.termsAndConditions,locked:i.locked,validation:i.validation,dataTestId:"privacy-terms-checkbox",onToggle:N}),(0,Nr.jsx)(Vc,{size:16,sizeMin:8})]})]})}),(0,Nr.jsx)(ec,{children:(0,Nr.jsx)(Hc,{type:"submit",className:"btn-primary",processingState:i.processingState,serverErrors:i.serverErrors,onClick:u,errorTitle:i.payErrorMessage||a.translate("common.errorOccurredText"),errorMessage:i.additionalPayErrorMessage,dataQa:"privacy-continue",trackingElement:i.isPaymentScreen?"payButton":"nextButton",dataTestId:"pay-button",children:i.isPaymentScreen?vc(a,i.donation.formattedAmount,i.donation.frequency):a.translate("privacyScreen.button")})})]})},jl=e=>{const{state:t}=eo(ka.PRIVACY);return(0,Nr.jsx)(rl.rp,{state:{validation:t.validation,serverErrors:t.serverErrors},children:(0,Nr.jsx)(Fl,Object.assign({},e))})};var Bl=n(3144),Hl=n(8706);const ql=e=>{const[t,n]=(0,d.useState)(!1),[i,s]=(0,d.useState)(!1),[a,r]=(0,d.useState)(!1),[o,c]=(0,d.useState)(!1),l=(0,d.useRef)(null),u=t||i||a||o,h=(0,d.useCallback)((()=>{if(!l.current)return;const e=l.current.clientWidth<l.current.scrollWidth,t=l.current.clientHeight<l.current.scrollHeight,i=Math.ceil(l.current.offsetWidth+l.current.scrollLeft),a=Math.ceil(l.current.offsetHeight+l.current.scrollTop),o=0===l.current.scrollTop,u=i>=l.current.scrollWidth,d=a>=l.current.scrollHeight,h=0===l.current.scrollLeft;n(t&&!o),s(e&&!u),r(t&&!d),c(e&&!h)}),[l]);return(0,d.useEffect)((()=>{if(!l.current)throw new Error("ScrollContainerRef is undefined");const e=(t=h,new ResizeObserver((e=>e.map(t))));var t;return null==e||e.observe(l.current),()=>null==e?void 0:e.disconnect()}),[l,h]),(0,Nr.jsx)("div",{className:(0,xr.A)({"scroll-wrap":u},e.className),children:(0,Nr.jsxs)("div",{ref:l,className:(0,xr.A)("scroll-container custom-scrollbar",e.scrollContainerClass),onScroll:()=>{h()},children:[e.children,u&&(0,Nr.jsxs)(Nr.Fragment,{children:[(0,Nr.jsx)("span",{className:(0,xr.A)("shadow-top",{"is-active":t})}),(0,Nr.jsx)("span",{className:(0,xr.A)("shadow-right",{"is-active":i})}),(0,Nr.jsx)("span",{className:(0,xr.A)("shadow-bottom",{"is-active":a})}),(0,Nr.jsx)("span",{className:(0,xr.A)("shadow-left",{"is-active":o})})]})]})})},Gl=(0,d.memo)(ql),Vl=(0,d.createContext)(null);var Yl;!function(e){e.CHECKBOX="checkbox",e.MULTIOPTION="multioption",e.RADIO="radio",e.DROPDOWN="dropdown",e.LINE="line",e.MULTILINE="multiline",e.DATE="date"}(Yl||(Yl={}));const Kl=e=>e.type===Yl.CHECKBOX,zl=e=>e.type===Yl.DROPDOWN,$l=e=>e.type===Yl.MULTILINE,Wl=e=>e.type===Yl.RADIO,Xl=e=>e.type===Yl.LINE,Ql=e=>e.type===Yl.MULTIOPTION;var Zl=n(2766);const{useAddFieldToScroll:Jl,useScrollToFieldsTrigger:eu,ScrollToFieldsProvider:tu}=(0,Zl.J)(),nu=e=>{let{id:t,className:n,question:i,questionText:s,answer:a,required:r,hasError:o,type:c,onChange:l}=e;const u=(0,qr.t)(),h=(0,Uo.Y)(),m=(0,d.useCallback)((()=>{l(!a)}),[l,a]),p=(0,d.useRef)(null);return Jl(p,(e=>!!e[t])),(0,Nr.jsxs)(Nr.Fragment,{children:[(0,Nr.jsxs)(Qc,{setRef:p,className:n,checked:!!a,error:o,onChange:m,dataQa:"question-"+c,"aria-required":r,"aria-describedby":`question-${c}-${h}-error`,"data-testid":"question-checkbox-single",children:[(0,Nr.jsx)("span",{dangerouslySetInnerHTML:{__html:i},dir:"auto"}),!r&&(0,Nr.jsxs)("span",{className:"text-gray-60",children:[" (",u.translate("common.optional"),")"]})]}),o&&(0,Nr.jsx)("p",{id:`question-${c}-${h}-error`,className:"sr-only",children:u.translate("questionsScreen.error.required",{question:s})})]})},iu=(0,d.memo)(nu),su={marginBottom:"13px"},au=e=>{let{id:t,className:n,question:i,questionText:s,answer:a,options:r,required:o,hasError:c,type:l,onChange:u}=e;const h=(0,qr.t)(),m=no(),p=(0,d.useCallback)((e=>{u(e.target.value)}),[u]),g=r.map((e=>({value:e,label:e}))),y=(0,d.useRef)(null);return Jl(y,(e=>!!e[t])),(0,Nr.jsx)(sl,{setRef:y,id:`dropdown-${m}`,label:(0,Nr.jsx)("span",{className:"text-break-word",dir:"auto",dangerouslySetInnerHTML:{__html:i}}),labelOptional:o?"":h.translate("common.optional"),options:g,className:(0,xr.A)({"pe-16":c}),formLabelClass:(0,xr.A)({"pe-12":c}),formGroupClass:n,error:c,value:a||"","aria-required":o,"aria-describedby":`question-${l}-${m}-error`,onChange:p,dataQa:"question-"+l,dataTestId:"question-dropdown",children:c&&(0,Nr.jsxs)(Nr.Fragment,{children:[(0,Nr.jsx)(al.U,{className:"p-abs bottom-right z-index-5 me-10",style:su,children:h.translate("questionsScreen.error.required",{question:s})}),(0,Nr.jsx)("p",{id:`question-${l}-${m}-error`,className:"sr-only",children:h.translate("questionsScreen.error.required",{question:s})})]})})},ru=(0,d.memo)(au);var ou;!function(e){e[e.ANSWER_MAX_LENGTH=500]="ANSWER_MAX_LENGTH"}(ou||(ou={}));const cu={marginTop:"13px"},lu=e=>{let{id:t,className:n,question:i,questionText:s,answer:a,required:r,hasError:o,type:c,onChange:l}=e;const u=(0,qr.t)(),h=no(),m=(0,d.useRef)(null);return Jl(m,(e=>!!e[t])),(0,Nr.jsxs)("div",{className:n,children:[(0,Nr.jsxs)("label",{htmlFor:`multiline-${h}`,className:"label-3 max-w-100","data-qa":"question-"+c+"-label",children:[(0,Nr.jsx)("span",{className:"text-break-word",dir:"auto",dangerouslySetInnerHTML:{__html:i}}),!r&&(0,Nr.jsxs)("span",{className:"text-gray-60",children:[" (",u.translate("common.optional"),")"]})]}),(0,Nr.jsxs)("div",{className:"p-rel",children:[(0,Nr.jsx)("textarea",{ref:m,id:`multiline-${h}`,className:(0,xr.A)("form-control mt-3",{"has-error":o}),rows:7,value:a||"",maxLength:ou.ANSWER_MAX_LENGTH,"aria-required":r,"aria-describedby":`question-${c}-${h}-error`,onChange:e=>{l(e.target.value)},"data-qa":"question-"+c,"data-testid":"question-multiline"}),o&&(0,Nr.jsxs)(Nr.Fragment,{children:[(0,Nr.jsx)(al.U,{className:"p-abs top-right z-index-5 me-4",style:cu,dataQa:"question-multiline",children:u.translate("questionsScreen.error.required",{question:s})}),(0,Nr.jsx)("p",{id:`question-${c}-${h}-error`,className:"sr-only",children:u.translate("questionsScreen.error.required",{question:s})})]})]})]})},uu=(0,d.memo)(lu),du=e=>{var{children:t,setRef:n,innerRef:i,className:s,customLabelClasses:a,checkedValues:r,checkboxValue:o,disabled:c,error:u,hint:h,dataQa:m,onChange:p}=e,g=(0,l.Tt)(e,["children","setRef","innerRef","className","customLabelClasses","checkedValues","checkboxValue","disabled","error","hint","dataQa","onChange"]);const y=r.includes(o),f=(0,d.useCallback)((()=>{if(c)return;const e=!y,t=new Set([...r]);e?t.add(o):t.delete(o),p([...t])}),[p,y,c,r,o]);return(0,Nr.jsx)(Qc,Object.assign({setRef:n,innerRef:i,className:s,customLabelClasses:a,checkboxValue:o,checked:y,disabled:c,error:u,hint:h,onChange:f,dataQa:m},g,{children:t}))},hu=e=>{let{id:t,className:n,question:i,questionText:s,answer:a,options:r,required:o,hasError:c,type:l,onChange:u}=e;const h=(0,qr.t)(),m=no(),p=(0,d.useCallback)((e=>{u(e)}),[u]),g=(0,d.useRef)(null);return Jl(g,(e=>!!e[t])),(0,Nr.jsxs)("div",{className:n,role:"group","aria-labelledby":`checkbox-group-${m}`,"data-testid":"question-multioption",children:[(0,Nr.jsxs)("p",{id:`checkbox-group-${m}`,className:"label-3",children:[(0,Nr.jsx)("span",{className:"text-break-word",dir:"auto",dangerouslySetInnerHTML:{__html:i}}),!o&&(0,Nr.jsxs)("span",{className:"text-gray-60",children:[" (",h.translate("common.optional"),")"]})]}),r.map(((e,t)=>{const n=0===t;return(0,Nr.jsx)(du,{setRef:n?g:void 0,className:t?"mt-2":"mt-3",checkedValues:a,checkboxValue:e,error:c,"aria-required":o,"aria-describedby":`question-${l}-${m}-error`,onChange:p,dataQa:"question-"+l,children:e},`${e}-${t}`)})),c&&(0,Nr.jsx)("p",{id:`question-${l}-${m}-error`,className:"sr-only",children:h.translate("questionsScreen.error.required",{question:s})})]})},mu=(0,d.memo)(hu),pu={marginBottom:"13px"},gu=e=>{let{id:t,className:n,question:i,questionText:s,answer:a,required:r,hasError:o,type:c,onChange:l}=e;const u=(0,qr.t)(),h=no(),m=(0,d.useRef)(null);return Jl(m,(e=>!!e[t])),(0,Nr.jsx)(dl.t,{id:`oneline-${h}`,setRef:m,error:o,className:(0,xr.A)({"pe-10":o}),formGroupClass:n,label:(0,Nr.jsx)("span",{className:"text-break-word",dir:"auto",dangerouslySetInnerHTML:{__html:i}}),labelOptional:r?"":u.translate("common.optional"),value:a||"",maxLength:ou.ANSWER_MAX_LENGTH,"aria-required":r,"aria-describedby":`question-${c}-${h}-error`,onChange:e=>{l(e.target.value)},dataQa:"question-"+c,"data-testid":"question-oneline",children:o&&(0,Nr.jsxs)(Nr.Fragment,{children:[(0,Nr.jsx)(al.U,{className:"p-abs bottom-right z-index-5 me-4",style:pu,children:u.translate("questionsScreen.error.required",{question:s})}),(0,Nr.jsx)("p",{id:`question-${c}-${h}-error`,className:"sr-only",children:u.translate("questionsScreen.error.required",{question:s})})]})})},yu=(0,d.memo)(gu),fu=e=>{var{setRef:t,children:n,className:i,customLabelClasses:s,disabled:a,radioName:r,radioValue:o,checked:c,error:u,hint:h,dataQa:m,trackingElement:p,onChange:g,onClick:y}=e,f=(0,l.Tt)(e,["setRef","children","className","customLabelClasses","disabled","radioName","radioValue","checked","error","hint","dataQa","trackingElement","onChange","onClick"]);const S=(0,d.useRef)(null);return(0,d.useImperativeHandle)(t,(()=>S.current),[]),(0,Nr.jsxs)("div",{className:(0,xr.A)("ui-radio",{"ui-radio-disabled":a},i),children:[(0,Nr.jsxs)("label",{className:(0,xr.A)(["ui-radio-label",s]),"data-qa":m+"-label",children:[(0,Nr.jsxs)("span",{className:"ui-radio-control",children:[(0,Nr.jsx)("input",Object.assign({type:"radio",ref:S,className:(0,xr.A)("ui-radio-input",{"has-error":u}),name:r,value:o,checked:c,disabled:a,"aria-invalid":u,"data-qa":m,"data-tracking-element-name":p,onChange:()=>{a||g(o)},onClick:()=>{y&&y()}},f)),(0,Nr.jsx)("span",{className:"ui-radio-icon"})]}),n&&(0,Nr.jsx)("span",{className:"ui-radio-text",children:n})]}),h&&(0,Nr.jsx)("div",{className:"ui-radio-hint",children:h})]})},Su=e=>{let{className:t,id:n,question:i,questionText:s,answer:a,options:r,required:o,hasError:c,type:l,onChange:u}=e;const h=(0,qr.t)(),m=(0,Uo.Y)(),p=(0,d.useRef)(null);return Jl(p,(e=>!!e[n])),(0,Nr.jsxs)("div",{className:t,role:"radiogroup","aria-labelledby":`radio-group-${m}`,"data-testid":"question-radio",children:[(0,Nr.jsxs)("p",{id:`radio-group-${m}`,className:"label-3",children:[(0,Nr.jsx)("span",{className:"text-break-word",dir:"auto",dangerouslySetInnerHTML:{__html:i}}),!o&&(0,Nr.jsxs)("span",{className:"text-gray-60",children:[" (",h.translate("common.optional"),")"]})]}),r.map(((e,t)=>{const i=0===t;return(0,Nr.jsx)(fu,{setRef:i?p:void 0,className:t?"mt-2":"mt-3",checked:e===a,radioValue:e,radioName:n,error:c,"aria-required":o,"aria-describedby":`question-${l}-${m}-error`,onChange:u,dataQa:"question-"+l,children:e},`${e}-${t}`)})),c&&(0,Nr.jsx)("p",{id:`question-${l}-${m}-error`,className:"sr-only",children:h.translate("questionsScreen.error.required",{question:s})})]})},Au=(0,d.memo)(Su),Eu=e=>{const{controller:t}=eo(ka.QUESTIONS),n=(0,_r.n)(),i=(0,d.useCallback)((n=>{t.answerQuestion(e.id,n)}),[t,e.id]),s=Ml(e.shakeKey,e.hasError),a=(0,d.useMemo)((()=>e.question.replace(/(<([^>]+)>)/gi,"")),[e.question]);return Object.values(Yl).includes(e.type)?(0,Nr.jsxs)("div",{className:"py-3",children:[Kl(e)&&(0,Nr.jsx)(iu,{id:e.id,answer:e.answer,options:e.options,question:e.question,questionText:a,required:e.required,hasError:e.hasError,onChange:i,className:(0,xr.A)({shake:s}),type:e.type}),zl(e)&&(0,Nr.jsx)(ru,{id:e.id,answer:e.answer,options:e.options,question:e.question,questionText:a,required:e.required,hasError:e.hasError,onChange:i,className:(0,xr.A)({shake:s}),type:e.type}),$l(e)&&(0,Nr.jsx)(uu,{id:e.id,answer:e.answer,options:e.options,question:e.question,questionText:a,required:e.required,hasError:e.hasError,onChange:i,className:(0,xr.A)({shake:s}),type:e.type}),Ql(e)&&(0,Nr.jsx)(mu,{id:e.id,answer:e.answer,options:e.options,question:e.question,questionText:a,required:e.required,hasError:e.hasError,onChange:i,className:(0,xr.A)({shake:s}),type:e.type}),Xl(e)&&(0,Nr.jsx)(yu,{id:e.id,answer:e.answer,options:e.options,question:e.question,questionText:a,required:e.required,hasError:e.hasError,onChange:i,className:(0,xr.A)({shake:s}),type:e.type}),Wl(e)&&(0,Nr.jsx)(Au,{id:e.id,answer:e.answer,options:e.options,question:e.question,questionText:a,required:e.required,hasError:e.hasError,onChange:i,className:(0,xr.A)({shake:s}),type:e.type})]}):(n.captureException(new Error(`Unknown type of question: "${e.type}"`)),null)},Cu=(0,d.memo)(Eu),vu={borderTop:"0"},Nu=e=>{let{showBadge:t}=e;const{state:n,controller:i}=eo(ka.QUESTIONS),s=(0,qr.t)(),a=(0,d.useRef)(null),r=(0,d.useRef)(null),[o,c]=(0,d.useState)("next"),l=(0,wr.P)(),u=(0,Ur.k)(),h=eu(),m=(0,d.useContext)(Vl)||null,p=(0,d.useCallback)((e=>{e.preventDefault(),(0,Bl.flushSync)((()=>{c("next")})),i.leave(),h()}),[i,h]),g=(0,d.useCallback)((()=>{(0,Bl.flushSync)((()=>{c("previous")})),i.back()}),[i]),y=(0,d.useMemo)((()=>n.isMeasuring?n.questions:n.questions.filter((e=>{let{page:t}=e;return t===n.page}))),[n.isMeasuring,n.page,n.questions]);(0,d.useEffect)((()=>{if(!n.isMeasuring)return;if(!a.current)throw new Error("bodyRef was not provided");if(!r.current)throw new Error("questionsContainerRef was not provided");const e=[].slice.call(r.current.children),t=a.current.getBoundingClientRect(),s=l?455:t.height-20;setTimeout((()=>{var t;const n=i.completeMeasurement(function(e){const{height:t,children:n}=e,i=new Map;let s=1,a=0;return n.map((e=>e.offsetHeight)).forEach(((e,n)=>{a+e>t&&n>0&&(s+=1,a=0),a+=e,i.set(n,s)})),i}({height:s,children:e}));m&&(null===(t=m.updateQuestionsScreenPageCount)||void 0===t||t.call(m,n))}))}),[n.isMeasuring,l,i,r,m]);const f=(0,d.useCallback)((e=>d.cloneElement(e,{classNames:`rtg-${o}`})),[o]),S={minHeight:l?"200px":void 0};return(0,Nr.jsxs)("form",{onSubmit:p,className:"flow-screen","data-testid":"questions-form",children:[(0,Nr.jsx)("div",{className:"sr-only",role:"status","aria-live":"polite",children:s.translate("common.screenAriaLabel",{screenTitle:`${s.translate("questionsScreen.title")}`})}),(0,Nr.jsx)(Sc,{backButtonClickHandler:g,forceShowBackButton:i.showBackButton.header,title:s.translate("questionsScreen.title"),showBadge:t}),(0,Nr.jsx)(Bo,{ref:a,children:(0,Nr.jsx)(Hl.A,{childFactory:f,children:(()=>{const e=(0,d.createRef)();return(0,Nr.jsx)(kr.A,{classNames:`rtg-${o}`,nodeRef:e,addEndListener:t=>{(0,Hr.v)(e,t)},mountOnEnter:!0,unmountOnExit:!0,children:(0,Nr.jsx)("div",{ref:e,className:u("flow-slide"),style:vu,children:(0,Nr.jsx)(Gl,{className:(0,xr.A)(l?"grow-1":"h-100"),scrollContainerClass:(0,xr.A)("px-body",l?"my-minus-3":"h-100",{"pt-8":!l}),children:(0,Nr.jsx)("div",{ref:r,className:(0,xr.A)("fixed-container",{"opacity-0":n.isMeasuring,"my-minus-3":!l}),style:S,children:y.map(((e,t)=>(0,Nr.jsx)(Cu,{id:e.key,type:e.type,answer:e.answer,options:e.options,question:e.question,required:e.required,hasError:!!n.questionErrors[e.key],shakeKey:n.shakeKey},e.key)))})})})},l||n.isShowcase?null:n.page)})()})}),(0,Nr.jsx)(ec,{className:(0,xr.A)({"pt-7":!l}),backButtonClickHandler:g,forceShowBackButton:i.showBackButton.footer,children:(0,Nr.jsx)(Hc,{type:"submit",className:"btn-primary",processingState:La.IDLE,dataQa:"questions-button",trackingElement:"nextButton",children:s.translate("questionsScreen.button")})})]})},bu=(0,d.memo)(Nu),Pu=e=>{let{showBadge:t}=e;const{state:n}=eo(ka.QUESTIONS);return(0,Nr.jsx)(tu,{state:n.questionErrors,children:(0,Nr.jsx)(bu,{showBadge:t})})},Du=e=>{var t,n;const i=(0,Uo.Y)();return(0,Nr.jsxs)("svg",{className:e.className,"aria-hidden":e.ariaHidden&&!0,fill:"none",viewBox:"0 0 64 67",height:null!==(t=e.height)&&void 0!==t?t:67,width:null!==(n=e.width)&&void 0!==n?n:64,xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink","data-qa":"thank-you-gift-icon",children:[(0,Nr.jsxs)("filter",{id:`a-${i}`,colorInterpolationFilters:"sRGB",filterUnits:"userSpaceOnUse",height:"36.4912",width:"34.2456",x:"14.8772",y:"12.5615",children:[(0,Nr.jsx)("feFlood",{floodOpacity:"0",result:"BackgroundImageFix"}),(0,Nr.jsx)("feBlend",{in:"SourceGraphic",in2:"BackgroundImageFix",mode:"normal",result:"shape"}),(0,Nr.jsx)("feColorMatrix",{in:"SourceAlpha",result:"hardAlpha",type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0"}),(0,Nr.jsx)("feOffset",{dx:"-1.12281",dy:"-2.24561"}),(0,Nr.jsx)("feGaussianBlur",{stdDeviation:"2.24561"}),(0,Nr.jsx)("feComposite",{in2:"hardAlpha",k2:"-1",k3:"1",operator:"arithmetic"}),(0,Nr.jsx)("feColorMatrix",{type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.25 0"}),(0,Nr.jsx)("feBlend",{in2:"shape",mode:"normal",result:"effect1_innerShadow_5232_86317"}),(0,Nr.jsx)("feColorMatrix",{in:"SourceAlpha",result:"hardAlpha",type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0"}),(0,Nr.jsx)("feOffset",{dx:"1.12281",dy:"2.24561"}),(0,Nr.jsx)("feGaussianBlur",{stdDeviation:"2.24561"}),(0,Nr.jsx)("feComposite",{in2:"hardAlpha",k2:"-1",k3:"1",operator:"arithmetic"}),(0,Nr.jsx)("feColorMatrix",{type:"matrix",values:"0 0 0 0 1 0 0 0 0 1 0 0 0 0 1 0 0 0 0.25 0"}),(0,Nr.jsx)("feBlend",{in2:"effect1_innerShadow_5232_86317",mode:"normal",result:"effect2_innerShadow_5232_86317"})]}),(0,Nr.jsxs)("filter",{id:`b-${i}`,colorInterpolationFilters:"sRGB",filterUnits:"userSpaceOnUse",height:"13.2564",width:"51.4444",x:"5.71532",y:"10.8599",children:[(0,Nr.jsx)("feFlood",{floodOpacity:"0",result:"BackgroundImageFix"}),(0,Nr.jsx)("feBlend",{in:"SourceGraphic",in2:"BackgroundImageFix",mode:"normal",result:"shape"}),(0,Nr.jsx)("feGaussianBlur",{result:"effect1_foregroundBlur_5232_86317",stdDeviation:"1.12281"})]}),(0,Nr.jsxs)("linearGradient",{id:`c-${i}`,gradientUnits:"userSpaceOnUse",x1:"19.8524",x2:"31.8565",y1:"12.6606",y2:"36.1232",children:[(0,Nr.jsx)("stop",{offset:"0",stopColor:"#eb5a68"}),(0,Nr.jsx)("stop",{offset:".376986",stopColor:"#b31d2b"})]}),(0,Nr.jsxs)("linearGradient",{id:`d-${i}`,gradientUnits:"userSpaceOnUse",x1:"44.4768",x2:"31.9006",y1:"12.6606",y2:"36.124",children:[(0,Nr.jsx)("stop",{offset:"0",stopColor:"#eb5a68"}),(0,Nr.jsx)("stop",{offset:".372516",stopColor:"#b31d2b"})]}),(0,Nr.jsxs)("linearGradient",{id:`e-${i}`,children:[(0,Nr.jsx)("stop",{offset:"0",stopColor:"#fcc9ce"}),(0,Nr.jsx)("stop",{offset:"1",stopColor:"#ed6774"})]}),(0,Nr.jsx)("linearGradient",{id:`f-${i}`,gradientUnits:"userSpaceOnUse",x1:"16.9891",x2:"32.4227",xlinkHref:`#e-${i}`,y1:"11.5166",y2:"42.4181"}),(0,Nr.jsx)("linearGradient",{id:`g-${i}`,gradientUnits:"userSpaceOnUse",x1:"16.9893",x2:"32.4228",xlinkHref:`#e-${i}`,y1:"11.5167",y2:"42.4182"}),(0,Nr.jsxs)("linearGradient",{id:`h-${i}`,children:[(0,Nr.jsx)("stop",{offset:".3",stopColor:"#eb5a68"}),(0,Nr.jsx)("stop",{offset:".79",stopColor:"#f28a94"})]}),(0,Nr.jsx)("linearGradient",{id:`i-${i}`,gradientUnits:"userSpaceOnUse",x1:"31.8777",x2:"-4.71206",xlinkHref:`#h-${i}`,y1:"67.5719",y2:"8.6199"}),(0,Nr.jsxs)("linearGradient",{id:`j-${i}`,children:[(0,Nr.jsx)("stop",{offset:".295"}),(0,Nr.jsx)("stop",{offset:".365",stopOpacity:"0"})]}),(0,Nr.jsx)("linearGradient",{id:`k-${i}`,gradientUnits:"userSpaceOnUse",x1:"35.8861",x2:"17.5942",xlinkHref:`#j-${i}`,y1:"30.9642",y2:"67.0163"}),(0,Nr.jsxs)("linearGradient",{id:`l-${i}`,children:[(0,Nr.jsx)("stop",{offset:"0",stopColor:"#eb5a68"}),(0,Nr.jsx)("stop",{offset:"1",stopColor:"#c61333"})]}),(0,Nr.jsx)("linearGradient",{id:`m-${i}`,gradientUnits:"userSpaceOnUse",x1:"60.5078",x2:"31.9223",xlinkHref:`#l-${i}`,y1:"21.2402",y2:"67.6003"}),(0,Nr.jsx)("linearGradient",{id:`n-${i}`,gradientUnits:"userSpaceOnUse",x1:"27.8678",x2:"46.1597",xlinkHref:`#j-${i}`,y1:"30.9642",y2:"67.0163"}),(0,Nr.jsxs)("linearGradient",{id:`o-${i}`,children:[(0,Nr.jsx)("stop",{offset:"0",stopColor:"#e7e8ed"}),(0,Nr.jsx)("stop",{offset:"1",stopColor:"#c7cdd6"})]}),(0,Nr.jsx)("linearGradient",{id:`p-${i}`,gradientUnits:"userSpaceOnUse",x1:"13.3492",x2:"23.8365",xlinkHref:`#o-${i}`,y1:"29.9469",y2:"76.1566"}),(0,Nr.jsx)("linearGradient",{id:`q-${i}`,gradientUnits:"userSpaceOnUse",x1:"31.3141",x2:"16.4147",xlinkHref:`#j-${i}`,y1:"31.6311",y2:"61.1672"}),(0,Nr.jsxs)("linearGradient",{id:`r-${i}`,children:[(0,Nr.jsx)("stop",{offset:".147453",stopColor:"#c7cdd6"}),(0,Nr.jsx)("stop",{offset:"1",stopColor:"#8791a1"})]}),(0,Nr.jsx)("linearGradient",{id:`s-${i}`,gradientUnits:"userSpaceOnUse",x1:"50.7762",x2:"41.6339",xlinkHref:`#r-${i}`,y1:"26.3883",y2:"81.8752"}),(0,Nr.jsx)("linearGradient",{id:`t-${i}`,gradientUnits:"userSpaceOnUse",x1:"32.4406",x2:"47.3405",xlinkHref:`#j-${i}`,y1:"31.6316",y2:"61.1676"}),(0,Nr.jsx)("linearGradient",{id:`u-${i}`,gradientUnits:"userSpaceOnUse",x1:"11.0808",x2:"31.6822",xlinkHref:`#e-${i}`,y1:"-4.89231",y2:"35.2353"}),(0,Nr.jsx)("linearGradient",{id:`v-${i}`,gradientUnits:"userSpaceOnUse",x1:"31.3158",x2:"19.6686",xlinkHref:`#h-${i}`,y1:"42.5929",y2:"4.03227"}),(0,Nr.jsx)("linearGradient",{id:`w-${i}`,gradientUnits:"userSpaceOnUse",x1:"62.7539",x2:"53.6777",xlinkHref:`#l-${i}`,y1:"18.7192",y2:"48.9663"}),(0,Nr.jsx)("linearGradient",{id:`x-${i}`,gradientUnits:"userSpaceOnUse",x1:"11.1055",x2:"12.4558",xlinkHref:`#o-${i}`,y1:"24.0242",y2:"41.3512"}),(0,Nr.jsxs)("linearGradient",{id:`y-${i}`,gradientUnits:"userSpaceOnUse",x1:"27.4497",x2:"35.6674",y1:"13.7356",y2:"30.8671",children:[(0,Nr.jsx)("stop",{offset:"0",stopColor:"#f7f7f8"}),(0,Nr.jsx)("stop",{offset:"1",stopColor:"#e7e8ed"})]}),(0,Nr.jsx)("linearGradient",{id:`z-${i}`,gradientUnits:"userSpaceOnUse",x1:"52.0873",x2:"51.7335",xlinkHref:`#r-${i}`,y1:"24.0242",y2:"48.622"}),(0,Nr.jsxs)("linearGradient",{id:`A-${i}`,gradientUnits:"userSpaceOnUse",x1:"18.4049",x2:"18.4049",y1:"3",y2:"19.8421",children:[(0,Nr.jsx)("stop",{offset:"0",stopColor:"#f4f4f4"}),(0,Nr.jsx)("stop",{offset:"1",stopColor:"#8e8e8e"})]}),(0,Nr.jsxs)("linearGradient",{id:`B-${i}`,gradientUnits:"userSpaceOnUse",x1:"16.3246",x2:"27.665",y1:"13.9444",y2:"18.0337",children:[(0,Nr.jsx)("stop",{offset:"0",stopColor:"#f7f7f8"}),(0,Nr.jsx)("stop",{offset:".986153",stopColor:"#e7e8ed"})]}),(0,Nr.jsxs)("linearGradient",{id:`C-${i}`,children:[(0,Nr.jsx)("stop",{offset:"0",stopColor:"#e7e8ed"}),(0,Nr.jsx)("stop",{offset:"1",stopColor:"#e7e8ed",stopOpacity:"0"})]}),(0,Nr.jsx)("linearGradient",{id:`D-${i}`,gradientUnits:"userSpaceOnUse",x1:"18.4049",x2:"18.4049",xlinkHref:`#C-${i}`,y1:"3",y2:"19.8421"}),(0,Nr.jsxs)("linearGradient",{id:`E-${i}`,gradientUnits:"userSpaceOnUse",x1:"53.187",x2:"35.2061",y1:"7.29677",y2:"20.7711",children:[(0,Nr.jsx)("stop",{offset:".511878",stopColor:"#f7f7f8"}),(0,Nr.jsx)("stop",{offset:"1",stopColor:"#e7e8ed"})]}),(0,Nr.jsx)("linearGradient",{id:`F-${i}`,gradientUnits:"userSpaceOnUse",x1:"44.2279",x2:"44.2279",xlinkHref:`#C-${i}`,y1:"3",y2:"19.8421"}),(0,Nr.jsxs)("linearGradient",{id:`G-${i}`,gradientUnits:"userSpaceOnUse",x1:"17.5667",x2:"15.4906",y1:"3.68776",y2:"18.806",children:[(0,Nr.jsx)("stop",{offset:"0",stopColor:"#e7e8ed"}),(0,Nr.jsx)("stop",{offset:"1",stopColor:"#8791a1"})]}),(0,Nr.jsxs)("linearGradient",{id:`H-${i}`,gradientUnits:"userSpaceOnUse",x1:"43.9769",x2:"45.9796",y1:"4.09851",y2:"20.0863",children:[(0,Nr.jsx)("stop",{offset:"0",stopColor:"#e7e8ed"}),(0,Nr.jsx)("stop",{offset:".985772",stopColor:"#8791a1"})]}),(0,Nr.jsxs)("linearGradient",{id:`I-${i}`,gradientUnits:"userSpaceOnUse",x1:"31.3176",x2:"31.7338",y1:"13.1053",y2:"23.6817",children:[(0,Nr.jsx)("stop",{offset:".483074",stopColor:"#f7f7f8"}),(0,Nr.jsx)("stop",{offset:".62425",stopColor:"#e0e3e8"})]}),(0,Nr.jsx)("clipPath",{id:`J-${i}`,children:(0,Nr.jsx)("path",{d:"m16 14.8071h32v32h-32z"})}),(0,Nr.jsx)("path",{clipRule:"evenodd",d:"m31.8777 66.9999-28.63161-14.5809v-31.1788l28.63161 14.581zm0 0 28.6316-14.5809v-31.1788l-28.6316 14.581z",fill:"#eb5a68",fillRule:"evenodd"}),(0,Nr.jsx)("path",{d:"m31.8777 6.36865-28.63161 14.87175 28.63161 14.8719z",fill:`url(#c-${i})`}),(0,Nr.jsx)("path",{d:"m31.8789 6.36865v29.74365l28.6316-14.8719z",fill:`url(#d-${i})`}),(0,Nr.jsx)("path",{clipRule:"evenodd",d:"m56.286 20.3363-24.4085-12.67823-24.83214 12.89833-1.27583-.6268 26.10797-13.56095 25.6625 13.32965z",fill:`url(#f-${i})`,fillRule:"evenodd"}),(0,Nr.jsxs)("g",{clipPath:`url(#J-${i})`,children:[(0,Nr.jsx)("g",{filter:`url(#a-${i})`,children:(0,Nr.jsx)("path",{d:"m32 14.8071c-8.8457 0-16 7.1543-16 16s7.1543 16 16 16 16-7.1543 16-16-7.1543-16-16-16z",fill:"#00c07b"})}),(0,Nr.jsx)("path",{d:"m24.8008 30.6167 4.9694 4.5714 9.1106-8.381",stroke:"#fff",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"3.36842"})]}),(0,Nr.jsx)("path",{clipRule:"evenodd",d:"m31.8777 36.1123-28.63161-14.8719 8.87671-4.6107 1.3345.5962-7.7288 4.0145 26.1492 13.5825 26.1491-13.5825-8.3542-4.3394 1.2892-.6198 9.5475 4.9592z",fill:`url(#g-${i})`,fillRule:"evenodd"}),(0,Nr.jsx)("path",{clipRule:"evenodd",d:"m20.2934 30.0943 1.2311-.65-7.903-4.1049-1.352.5871z",fill:"#f7f7f8",fillRule:"evenodd"}),(0,Nr.jsx)("path",{clipRule:"evenodd",d:"m43.4175 30.0943-1.231-.65 7.9029-4.1049 1.352.5871z",fill:"#e7e8ed",fillRule:"evenodd"}),(0,Nr.jsx)("path",{d:"m3.24609 52.419 28.63161 14.5809v-31.1787l-28.63161-14.581z",fill:`url(#i-${i})`}),(0,Nr.jsx)("path",{d:"m3.24609 52.419 28.63161 14.5809v-31.1787l-28.63161-14.581z",fill:`url(#k-${i})`,fillOpacity:".15"}),(0,Nr.jsx)("path",{d:"m60.5078 52.419-28.6316 14.5809v-31.1787l28.6316-14.581z",fill:`url(#m-${i})`}),(0,Nr.jsx)("path",{d:"m60.5078 52.419-28.6316 14.5809v-31.1787l28.6316-14.581z",fill:`url(#n-${i})`,fillOpacity:".15"}),(0,Nr.jsxs)("g",{clipRule:"evenodd",fillRule:"evenodd",children:[(0,Nr.jsx)("path",{d:"m12.4062 25.9058v31.1787l8.0169 4.0827v-31.1788z",fill:`url(#p-${i})`}),(0,Nr.jsx)("path",{d:"m12.4062 25.9058v31.1787l8.0169 4.0827v-31.1788z",fill:`url(#q-${i})`,fillOpacity:".15"}),(0,Nr.jsx)("path",{d:"m43.332 29.9889 8.0169-4.0827v31.1788l-8.0169 4.0826z",fill:`url(#s-${i})`}),(0,Nr.jsx)("path",{d:"m43.332 29.9889 8.0169-4.0827v31.1788l-8.0169 4.0826z",fill:`url(#t-${i})`,fillOpacity:".15"})]}),(0,Nr.jsx)("path",{d:"m31.8583 3.01103-30.8583 15.70827 30.8772 15.7193 30.8772-15.7193-30.8772-15.7193z",fill:"#ff7787"}),(0,Nr.jsx)("path",{d:"m31.8583 3.01103-30.8583 15.70827 30.8772 15.7193 30.8772-15.7193-30.8772-15.7193z",fill:`url(#u-${i})`}),(0,Nr.jsx)("path",{d:"m1 18.7192 30.8772 15.7193v7.7308l-30.8772-15.7193z",fill:`url(#v-${i})`}),(0,Nr.jsx)("path",{d:"m62.7539 18.7192-30.8772 15.7193v7.7308l30.8772-15.7193z",fill:`url(#w-${i})`}),(0,Nr.jsx)("path",{clipRule:"evenodd",d:"m18.9651 27.865v7.7308l-7.8596-4.0012v-7.7308z",fill:`url(#x-${i})`,fillRule:"evenodd"}),(0,Nr.jsx)("path",{clipRule:"evenodd",d:"m52.6452 23.8653-20.8771-10.7647-20.6626 10.7632 7.8881 4.0158 12.8831-6.9152 12.8909 6.9114z",fill:`url(#y-${i})`,fillRule:"evenodd"}),(0,Nr.jsx)("path",{clipRule:"evenodd",d:"m52.6487 23.8638-7.8596 4.0012v7.7308l7.8596-4.0012z",fill:"#dcdcdc",fillRule:"evenodd"}),(0,Nr.jsx)("path",{clipRule:"evenodd",d:"m52.6487 23.8638-7.8596 4.0012v7.7308l7.8596-4.0012z",fill:`url(#z-${i})`,fillRule:"evenodd"}),(0,Nr.jsx)("g",{filter:`url(#b-${i})`,children:(0,Nr.jsx)("path",{d:"m49.9488 13.2769c-4.3469-.932-8.9614 2.1424-12.0886 4.226-1.1296.7525-.8417-.6342-2.4368-1.5531-.8574-.494-2.0912-.682-2.7686-.682s-2.5509-.1428-3.6965-.0001c-1.1682.1454-1.3144-.0005-2.3578.6821-1.1577.7572-1.4491 1.0373-2.3579.4318-3.1273-2.0835-7.212-3.8651-11.559-2.9331-4.66947 1.0012-5.50769 5.8324-4.10835 7.4342 1.15945 1.3272 9.26715 1.7666 18.81105-1.6018.4096.3177.5721 1.6842 2.2457 1.6842h3.9298c1.0046 0 1.3548-1.2644 1.6843-1.6842 10.1052 3.3684 17.9649 2.4405 19.0877 1.1228 1.4351-1.6842.2846-6.1256-4.385-7.1268z",fill:"#000",fillOpacity:".2"})}),(0,Nr.jsx)("path",{d:"m8.53922 17.602-.0107-.0233-.01278-.0223c-.04401-.0766-.11625-.3094-.16425-.7507-.04525-.416-.06276-.9509-.04494-1.5718.03562-1.2409.21119-2.7881.56318-4.3502.35259-1.56479.87677-3.12019 1.59737-4.3916.7235-1.27647 1.614-2.2134 2.6756-2.63601 1.4668-.58388 3.0048-.26502 4.5925.65633 1.5937.92477 3.1627 2.41663 4.6197 4.03203 1.0289 1.14061 1.978 2.31475 2.8334 3.37285.3573.442.6982.8637 1.0217 1.2543.5414.6536 1.0403 1.2273 1.4757 1.6401.2175.2063.4346.3874.6464.5199.0555.0348.1151.069.1781.1004v3.0556c-7.1028.9234-12.0212.9338-15.2291.5701-1.6418-.1861-2.8186-.4684-3.60498-.7666-.39337-.1492-.67542-.2973-.86554-.4297-.19738-.1374-.25889-.2322-.27136-.2594z",fill:`url(#A-${i})`}),(0,Nr.jsx)("path",{d:"m8.53922 17.602-.0107-.0233-.01278-.0223c-.04401-.0766-.11625-.3094-.16425-.7507-.04525-.416-.06276-.9509-.04494-1.5718.03562-1.2409.21119-2.7881.56318-4.3502.35259-1.56479.87677-3.12019 1.59737-4.3916.7235-1.27647 1.614-2.2134 2.6756-2.63601 1.4668-.58388 3.0048-.26502 4.5925.65633 1.5937.92477 3.1627 2.41663 4.6197 4.03203 1.0289 1.14061 1.978 2.31475 2.8334 3.37285.3573.442.6982.8637 1.0217 1.2543.5414.6536 1.0403 1.2273 1.4757 1.6401.2175.2063.4346.3874.6464.5199.0555.0348.1151.069.1781.1004v3.0556c-7.1028.9234-12.0212.9338-15.2291.5701-1.6418-.1861-2.8186-.4684-3.60498-.7666-.39337-.1492-.67542-.2973-.86554-.4297-.19738-.1374-.25889-.2322-.27136-.2594z",fill:`url(#B-${i})`}),(0,Nr.jsx)("path",{d:"m8.53922 17.602-.0107-.0233-.01278-.0223c-.04401-.0766-.11625-.3094-.16425-.7507-.04525-.416-.06276-.9509-.04494-1.5718.03562-1.2409.21119-2.7881.56318-4.3502.35259-1.56479.87677-3.12019 1.59737-4.3916.7235-1.27647 1.614-2.2134 2.6756-2.63601 1.4668-.58388 3.0048-.26502 4.5925.65633 1.5937.92477 3.1627 2.41663 4.6197 4.03203 1.0289 1.14061 1.978 2.31475 2.8334 3.37285.3573.442.6982.8637 1.0217 1.2543.5414.6536 1.0403 1.2273 1.4757 1.6401.2175.2063.4346.3874.6464.5199.0555.0348.1151.069.1781.1004v3.0556c-7.1028.9234-12.0212.9338-15.2291.5701-1.6418-.1861-2.8186-.4684-3.60498-.7666-.39337-.1492-.67542-.2973-.86554-.4297-.19738-.1374-.25889-.2322-.27136-.2594z",stroke:`url(#D-${i})`,strokeWidth:"1.12281"}),(0,Nr.jsx)("path",{d:"m54.0936 17.602.0107-.0233.0128-.0223c.044-.0766.1162-.3094.1642-.7507.0453-.416.0628-.9509.045-1.5718-.0357-1.2409-.2112-2.7881-.5632-4.3502-.3526-1.56479-.8768-3.12019-1.5974-4.3916-.7235-1.27647-1.614-2.2134-2.6756-2.63601-1.4668-.58388-3.0048-.26502-4.5925.65633-1.5937.92477-3.1627 2.41663-4.6197 4.03203-1.0288 1.14061-1.978 2.31475-2.8334 3.37285-.3573.442-.6982.8637-1.0217 1.2543-.5414.6536-1.0403 1.2273-1.4757 1.6401-.2175.2063-.4346.3874-.6464.5199-.0555.0348-.1151.069-.1781.1004v3.0556c7.1029.9234 12.0212.9338 15.2291.5701 1.6418-.1861 2.8187-.4684 3.605-.7666.3934-.1492.6754-.2973.8655-.4297.1974-.1374.2589-.2322.2714-.2594z",fill:`url(#E-${i})`,stroke:`url(#F-${i})`,strokeWidth:"1.12281"}),(0,Nr.jsx)("path",{d:"m29.2967 15.1805c-2.0277.0002-9.6025-14.366635-16.34-11.86944-4.28745 1.99784 11.8259 12.73594 16.34 11.86944z",fill:`url(#G-${i})`}),(0,Nr.jsx)("path",{d:"m32.916 15.6102c2.0278.0002 10.0262-15.015105 16.7637-12.26819 4.2875 2.19762-12.2495 13.22129-16.7637 12.26819z",fill:`url(#H-${i})`}),(0,Nr.jsx)("path",{d:"m27.0681 15.2551c.0812-1.4123 1.5826-2.2921 2.9958-2.2285 1.0001.045 2.0417-.0083 2.9589-.0938 1.4353-.1338 2.7454.9841 2.6123 2.4194-.1709 1.8432-.4993 3.9703-1.1142 4.2884-1.1145.5766-2.8135-.4244-5.6803 0-1.6957.251-1.8937-2.2776-1.7725-4.3855z",fill:`url(#I-${i})`})]})},_u=(0,d.memo)(Du);var Tu;function Ou(){return Ou=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},Ou.apply(this,arguments)}var xu,ku=function(e,t){return d.createElement("svg",Ou({fill:"none",height:24,viewBox:"0 0 24 24",width:24,xmlns:"http://www.w3.org/2000/svg",ref:t},e),Tu||(Tu=d.createElement("path",{clipRule:"evenodd",d:"m21.999 12c0 5.5228-4.4771 10-10 10-5.52282 0-9.99998-4.4772-9.99998-10 0-5.52285 4.47716-10 9.99998-10 5.5229 0 10 4.47715 10 10zm-4.1446-2.84096c.2929-.29289.2929-.76777 0-1.06066-.2928-.29289-.7677-.29289-1.0606 0l-6.83456 6.83452-2.81739-2.8173c-.2929-.2929-.76777-.2929-1.06066 0s-.29289.7678.00001 1.0607l3.34772 3.3476c.29289.2929.76778.2929 1.06068 0z",fill:"currentColor",fillRule:"evenodd"})))},Iu=(0,d.forwardRef)(ku),wu=(0,d.memo)(Iu);function Ru(){return Ru=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},Ru.apply(this,arguments)}var Mu=function(e,t){return d.createElement("svg",Ru({width:14,height:14,viewBox:"0 0 14 14",fill:"none",xmlns:"http://www.w3.org/2000/svg",ref:t},e),xu||(xu=d.createElement("path",{d:"M7 0L8.48492 5.51508L14 7L8.48492 8.48492L7 14L5.51508 8.48492L0 7L5.51508 5.51508L7 0Z",fill:"currentColor"})))},Lu=(0,d.forwardRef)(Mu),Uu=(0,d.memo)(Lu);const Fu=e=>{let{className:t}=e;const n=(0,qr.t)(),i=(0,Ur.k)();return(0,Nr.jsxs)("div",{className:(0,xr.A)(i("thank-you-badge"),"p-rel d-flex items-center justify-center bg-green-10 px-8",t),"data-qa":"thank-you-badge",children:[(0,Nr.jsx)(Uu,{className:"star star-1 star-v1","aria-hidden":!0}),(0,Nr.jsx)(Uu,{className:"star star-2 star-sm-v1","aria-hidden":!0}),(0,Nr.jsx)(Uu,{className:"star star-3 star-v2","aria-hidden":!0}),(0,Nr.jsx)(Uu,{className:"star star-4 star-sm-v2","aria-hidden":!0}),(0,Nr.jsx)(wu,{className:"shrink-0 icon-fill font-size-20 text-green-90 me-2","aria-hidden":!0}),(0,Nr.jsx)("p",{className:"body-2 text-truncate",children:n.translate("common.thankYouBadge")})]})},ju=(0,d.memo)(Fu),Bu=()=>{const{controller:e}=eo(ka.THANK_YOU),t=(0,qr.t)(),n=(0,wr.P)(),i=Vs();return(0,Nr.jsxs)(Nr.Fragment,{children:[(0,Nr.jsx)(ju,{className:"shrink-0"}),(0,Nr.jsx)(Bo,{className:(0,xr.A)("px-body",n?"pt-10":"pt-8"),children:(0,Nr.jsx)("div",{className:"fixed-container d-flex flex-column grow-1",children:(0,Nr.jsxs)("div",{className:(0,xr.A)("grow-1 d-flex flex-column",{"justify-center":!n}),children:[(0,Nr.jsx)(_u,{className:"d-block mx-auto",width:64,height:67,ariaHidden:!0}),(0,Nr.jsx)("h2",{className:(0,xr.A)("title-1 text-center mt-4",n?"text-ellipsis":"text-line-clamp-3"),"data-qa":"sharing-disable-thank-you-title",children:e.thankYouTitle}),(0,Nr.jsx)("p",{className:(0,xr.A)("thank-you-description text-center mt-2",n?"text-ellipsis":"text-line-clamp-5"),dangerouslySetInnerHTML:{__html:e.descriptionUpsell?e.descriptionUpsell:e.descriptionSharing},"data-qa":"sharing-disable-thank-you-text"})]})})}),(0,Nr.jsx)(ec,{className:"pt-8",children:(0,Nr.jsx)("div",{className:"d-flex justify-center",children:(0,Nr.jsx)("button",{type:"button",className:"btn-link text-truncate",onClick:()=>{i.emit(Rs.SHOULD_HIDE,{})},"data-qa":"close","data-tracking-element-name":"closeButton",children:t.translate("thankYouScreen.button")})})})]})},Hu=(0,d.memo)(Bu);var qu,Gu;function Vu(){return Vu=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},Vu.apply(this,arguments)}var Yu,Ku,zu,$u=function(e,t){return d.createElement("svg",Vu({xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:1.4,strokeLinecap:"round",strokeLinejoin:"round",ref:t},e),qu||(qu=d.createElement("path",{d:"M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2z"})),Gu||(Gu=d.createElement("polyline",{points:"22,6 12,13 2,6"})))},Wu=(0,d.forwardRef)($u),Xu=(0,d.memo)(Wu);function Qu(){return Qu=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},Qu.apply(this,arguments)}var Zu,Ju=function(e,t){return d.createElement("svg",Qu({xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:1.4,strokeLinecap:"round",strokeLinejoin:"round",ref:t},e),Yu||(Yu=d.createElement("circle",{cx:12,cy:12,r:1})),Ku||(Ku=d.createElement("circle",{cx:19,cy:12,r:1})),zu||(zu=d.createElement("circle",{cx:5,cy:12,r:1})))},ed=(0,d.forwardRef)(Ju),td=(0,d.memo)(ed);function nd(){return nd=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},nd.apply(this,arguments)}var id,sd=function(e,t){return d.createElement("svg",nd({fill:"none",height:24,viewBox:"0 0 24 24",width:24,xmlns:"http://www.w3.org/2000/svg",ref:t},e),Zu||(Zu=d.createElement("path",{d:"m24 12c0-6.6288-5.3712-12-12-12s-12 5.3712-12 12c0 5.6256 3.8736 10.3488 9.1008 11.6448v-7.9776h-2.4768v-3.6672h2.4768v-1.5792c0-4.0848 1.848-5.976 5.856-5.976.7584 0 2.0736.1488 2.6064.2976v3.3216c-.2832-.0288-.7728-.0432-1.3872-.0432-1.968 0-2.7264.744-2.7264 2.6832v1.296h3.9216l-.672 3.6672h-3.2448v8.2464c5.9424-.72 10.5456-5.7792 10.5456-11.9136z",fill:"#0866ff"})))},ad=(0,d.forwardRef)(sd),rd=(0,d.memo)(ad);function od(){return od=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},od.apply(this,arguments)}var cd,ld=function(e,t){return d.createElement("svg",od({fill:"none",height:24,viewBox:"0 0 24 24",width:24,xmlns:"http://www.w3.org/2000/svg",ref:t},e),id||(id=d.createElement("g",{clipRule:"evenodd",fillRule:"evenodd"},d.createElement("path",{d:"m2.66641 23.9977h18.66489c1.4726 0 2.6664-1.1938 2.6664-2.6664v-18.66489c0-1.47262-1.1938-2.66641-2.6664-2.66641h-18.66489c-1.47262 0-2.66641 1.19379-2.66641 2.66641v18.66489c0 1.4726 1.19379 2.6664 2.66641 2.6664z",fill:"#007ebb"}),d.createElement("path",{d:"m20.6642 20.6647h-3.5611v-6.0654c0-1.663-.6319-2.5923-1.9481-2.5923-1.4319 0-2.18.9671-2.18 2.5923v6.0654h-3.43196v-11.55446h3.43196v1.55636s1.0319-1.90937 3.4838-1.90937c2.4508 0 4.2054 1.49657 4.2054 4.59187zm-15.21543-13.06743c-1.16899 0-2.11625-.95469-2.11625-2.13213s.94726-2.13213 2.11625-2.13213c1.16898 0 2.11568.95469 2.11568 2.13213s-.9467 2.13213-2.11568 2.13213zm-1.7721 13.06743h3.57861v-11.55446h-3.57861z",fill:"#fff"}))))},ud=(0,d.forwardRef)(ld),dd=(0,d.memo)(ud);function hd(){return hd=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},hd.apply(this,arguments)}var md,pd,gd,yd=function(e,t){return d.createElement("svg",hd({fill:"none",height:24,viewBox:"0 0 24 24",width:24,xmlns:"http://www.w3.org/2000/svg",ref:t},e),cd||(cd=d.createElement("path",{d:"m13.9139 10.4273 7.4524-8.6629h-1.766l-6.4709 7.52184-5.16835-7.52184h-5.96105l7.81552 11.3743-7.81552 9.0844h1.76609l6.83351-7.9433 5.4581 7.9433h5.9611l-8.1054-11.7958zm-2.4189 2.8117-.7919-1.1327-6.30067-9.01241h2.71261l5.08476 7.27331.7918 1.1326 6.6096 9.4543h-2.7127l-5.3935-7.7147z",fill:"#000"})))},fd=(0,d.forwardRef)(yd),Sd=(0,d.memo)(fd);!function(e){e.FACEBOOK="Facebook",e.TWITTER="Twitter",e.LINKEDIN="Linkedin",e.EMAIL="Email",e.MORE="More",e.LINK="Link"}(md||(md={})),function(e){e.PAGE="page_thankyou",e.MODAL="modal_thankyou",e.HEADER="top_sharing_button"}(pd||(pd={})),function(e){e.SHARE_MORE_OPTIONS_ABORTED="shareMoreOptionsAborted"}(gd||(gd={}));const Ad=(0,d.createContext)(null);function Ed(){const e=(0,d.useContext)(Ad);if(!e)throw new Error("Tracker is not provided");return e}const Cd={width:"44px",height:"44px"},vd=e=>{let{as:t,type:n,href:i,label:s,icon:a,className:r,trackingElement:o,dataQa:c,onClick:l}=e;const u=null!=t?t:"button";return(0,Nr.jsx)(u,{href:null!=i?i:void 0,type:null!=n?n:void 0,className:(0,xr.A)("btn btn-default d-flex justify-center items-center py-0",r),style:Cd,"aria-label":s,onClick:()=>null==l?void 0:l(),"data-tracking-element-name":o,"data-qa":c,children:a})},Nd=e=>{const{state:t,controller:n}=eo(ka.THANK_YOU),i=(0,qr.t)(),s=(0,wr.P)(),a=(0,Br.$)(),r=Ed(),{share:o,isAvailable:c}=((e,t)=>{const[n,i]=(0,d.useState)(!1),[s,a]=(0,d.useState)(!1),[r,o]=(0,d.useState)(null);(0,d.useEffect)((()=>{let t=!1;"function"==typeof navigator.share&&void 0!==navigator.canShare&&(t=navigator.canShare(e)),i(t)}),[e]);const c=(0,d.useCallback)((()=>(0,l.sH)(void 0,void 0,void 0,(function*(){if(n){a(!0);try{yield navigator.share(e)}catch(e){if(o(null==e?void 0:e.message),"AbortError"!==e.name||!t)throw e;t.customTrack({type:gd.SHARE_MORE_OPTIONS_ABORTED})}finally{a(!1)}}else o("Web Share API is not available or disabled.")}))),[n,e,t]);return(0,d.useMemo)((()=>({isAvailable:n,share:c,isSharing:s,errorMessage:r})),[n,c,s,r])})({text:t.sharing.sharingText,url:n.getSharingLink(md.MORE)},r),u=s&&c;return(0,Nr.jsx)("div",{className:(0,xr.A)("text-center",e.className),role:"group","aria-label":i.translate("sharing.ariaLabel"),children:(0,Nr.jsxs)("div",{className:"d-flex justify-center item-center",children:[t.sharing.showFacebook&&(0,Nr.jsx)(vd,{type:"button",label:i.translate("sharing.facebookAriaLabel"),icon:(0,Nr.jsx)(rd,{className:"icon font-size-20","aria-hidden":!0}),className:"shrink-0 mx-1",onClick:()=>n.share(md.FACEBOOK,pd.MODAL),trackingElement:"shareOnFacebook",dataQa:"share-via-facebook"}),t.sharing.showTwitter&&(0,Nr.jsx)(vd,{type:"button",label:i.translate("sharing.twitterAriaLabel"),icon:(0,Nr.jsx)(Sd,{className:"icon font-size-20","aria-hidden":!0}),className:"shrink-0 mx-1",onClick:()=>n.share(md.TWITTER,pd.MODAL),trackingElement:"shareOnTwitter",dataQa:"share-via-twitter"}),t.sharing.showLinkedin&&(0,Nr.jsx)(vd,{type:"button",label:i.translate("sharing.linkedinAriaLabel"),icon:(0,Nr.jsx)(dd,{className:"icon font-size-20","aria-hidden":!0}),className:"shrink-0 mx-1",onClick:()=>n.share(md.LINKEDIN,pd.MODAL),trackingElement:"shareOnLinkedin",dataQa:"share-via-linkedin"}),t.sharing.showEmail&&(0,Nr.jsx)(vd,{as:"a",href:a?void 0:n.getSharingLink(md.EMAIL),label:i.translate("sharing.emailAriaLabel"),icon:(0,Nr.jsx)(Xu,{className:"icon font-size-20","aria-hidden":!0}),className:"shrink-0 mx-1",trackingElement:"shareOnEmail",dataQa:"share-via-email"}),u&&(0,Nr.jsx)(vd,{type:"button",label:i.translate("sharing.moreOptionsAriaLabel"),icon:(0,Nr.jsx)(td,{className:"icon font-size-20","aria-hidden":!0}),className:"shrink-0 mx-1",onClick:o,trackingElement:"shareOnMoreOptions",dataQa:"share-via-more-options"})]})})},bd=(0,d.memo)(Nd),Pd=()=>{const{controller:e}=eo(ka.THANK_YOU),t=(0,qr.t)(),n=(0,wr.P)(),i=Vs();return(0,Nr.jsxs)(Nr.Fragment,{children:[(0,Nr.jsx)(ju,{className:"shrink-0"}),(0,Nr.jsx)(Bo,{className:(0,xr.A)("px-body",n?"pt-10":"pt-8"),children:(0,Nr.jsx)("div",{className:"fixed-container d-flex flex-column grow-1",children:(0,Nr.jsxs)("div",{className:(0,xr.A)("grow-1 d-flex flex-column",{"justify-center":!n}),children:[(0,Nr.jsx)(_u,{className:"d-block mx-auto",width:64,height:67,ariaHidden:!0}),(0,Nr.jsx)("h2",{className:(0,xr.A)("title-1 text-center",n?"text-ellipsis mt-6":"text-line-clamp-3 mt-4"),"data-qa":"thank-you-header-title",children:e.thankYouTitle}),(0,Nr.jsx)("p",{className:(0,xr.A)("thank-you-description text-center mt-2",n?"text-ellipsis":"text-line-clamp-5"),dangerouslySetInnerHTML:{__html:e.descriptionUpsell?e.descriptionUpsell:e.descriptionSharing},"data-qa":"thank-you-header-label"})]})})}),(0,Nr.jsxs)(ec,{className:n?"pt-12":"pt-8",children:[(0,Nr.jsx)("p",{className:(0,xr.A)("subtitle-4 text-center",n?"text-ellipsis":"text-line-clamp-2"),children:t.translate("sharing.label")}),(0,Nr.jsx)(bd,{className:"mt-4"}),(0,Nr.jsx)("div",{className:"d-flex justify-center mt-13",children:(0,Nr.jsx)("button",{type:"button",className:"btn-link text-truncate",onClick:()=>{i.emit(Rs.SHOULD_HIDE,{})},"data-qa":"close","data-tracking-element-name":"closeButton",children:t.translate("thankYouScreen.button")})})]})]})},Dd=(0,d.memo)(Pd),_d=e=>{var t,n;const i=no();return(0,Nr.jsxs)("svg",{className:(0,xr.A)(e.className),"aria-hidden":!!e.ariaHidden||void 0,fill:"none",height:null!==(t=e.height)&&void 0!==t?t:48,viewBox:"0 0 48 48",width:null!==(n=e.width)&&void 0!==n?n:48,xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",children:[(0,Nr.jsxs)("filter",{id:`a-${i}`,colorInterpolationFilters:"sRGB",filterUnits:"userSpaceOnUse",height:"52.4762",width:"45",x:"1.5",y:"-9.47619",children:[(0,Nr.jsx)("feFlood",{floodOpacity:"0",result:"BackgroundImageFix"}),(0,Nr.jsx)("feBlend",{in:"SourceGraphic",in2:"BackgroundImageFix",mode:"normal",result:"shape"}),(0,Nr.jsx)("feColorMatrix",{in:"SourceAlpha",result:"hardAlpha",type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0"}),(0,Nr.jsx)("feMorphology",{in:"SourceAlpha",operator:"erode",radius:"14.4762",result:"effect1_innerShadow_8986_17764"}),(0,Nr.jsx)("feOffset",{dy:"-14.4762"}),(0,Nr.jsx)("feGaussianBlur",{stdDeviation:"12.0635"}),(0,Nr.jsx)("feComposite",{in2:"hardAlpha",k2:"-1",k3:"1",operator:"arithmetic"}),(0,Nr.jsx)("feColorMatrix",{type:"matrix",values:"0 0 0 0 1 0 0 0 0 0.439937 0 0 0 0 0.429167 0 0 0 1 0"}),(0,Nr.jsx)("feBlend",{in2:"shape",mode:"normal",result:"effect1_innerShadow_8986_17764"}),(0,Nr.jsx)("feColorMatrix",{in:"SourceAlpha",result:"hardAlpha",type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0"}),(0,Nr.jsx)("feOffset",{dy:"-9.65079"}),(0,Nr.jsx)("feGaussianBlur",{stdDeviation:"4.8254"}),(0,Nr.jsx)("feComposite",{in2:"hardAlpha",k2:"-1",k3:"1",operator:"arithmetic"}),(0,Nr.jsx)("feColorMatrix",{type:"matrix",values:"0 0 0 0 0.941667 0 0 0 0 0.0293161 0 0 0 0 0.0117708 0 0 0 1 0"}),(0,Nr.jsx)("feBlend",{in2:"effect1_innerShadow_8986_17764",mode:"normal",result:"effect2_innerShadow_8986_17764"})]}),(0,Nr.jsxs)("filter",{id:`b-${i}`,colorInterpolationFilters:"sRGB",filterUnits:"userSpaceOnUse",height:"14",width:"14",x:"29.5",y:"26",children:[(0,Nr.jsx)("feFlood",{floodOpacity:"0",result:"BackgroundImageFix"}),(0,Nr.jsx)("feBlend",{in:"SourceGraphic",in2:"BackgroundImageFix",mode:"normal",result:"shape"}),(0,Nr.jsx)("feColorMatrix",{in:"SourceAlpha",result:"hardAlpha",type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0"}),(0,Nr.jsx)("feOffset",{dx:"-1",dy:"-1"}),(0,Nr.jsx)("feGaussianBlur",{stdDeviation:"1"}),(0,Nr.jsx)("feComposite",{in2:"hardAlpha",k2:"-1",k3:"1",operator:"arithmetic"}),(0,Nr.jsx)("feColorMatrix",{type:"matrix",values:"0 0 0 0 0.843137 0 0 0 0 0 0 0 0 0 0.14902 0 0 0 0.75 0"}),(0,Nr.jsx)("feBlend",{in2:"shape",mode:"normal",result:"effect1_innerShadow_8986_17764"})]}),(0,Nr.jsxs)("linearGradient",{id:`c-${i}`,children:[(0,Nr.jsx)("stop",{offset:"0",stopColor:"#ef5350"}),(0,Nr.jsx)("stop",{offset:".766418",stopColor:"#f00703"}),(0,Nr.jsx)("stop",{offset:"1",stopColor:"#d90400"})]}),(0,Nr.jsx)("linearGradient",{id:`d-${i}`,gradientUnits:"userSpaceOnUse",x1:"13.5",x2:"26",xlinkHref:`#c-${i}`,y1:"9",y2:"40"}),(0,Nr.jsxs)("radialGradient",{id:`e-${i}`,cx:"0",cy:"0",gradientTransform:"matrix(8.99996281 14.49996639 -14.49996639 8.99996281 32.5 30)",gradientUnits:"userSpaceOnUse",r:"1",children:[(0,Nr.jsx)("stop",{offset:"0",stopColor:"#fff"}),(0,Nr.jsx)("stop",{offset:".674662",stopColor:"#e7e7e7"}),(0,Nr.jsx)("stop",{offset:"1",stopColor:"#c4c4c4"})]}),(0,Nr.jsx)("linearGradient",{id:`f-${i}`,gradientUnits:"userSpaceOnUse",x1:"33.9667",x2:"38.7609",xlinkHref:`#c-${i}`,y1:"28.3684",y2:"38.4087"}),(0,Nr.jsx)("g",{filter:`url(#a-${i})`,children:(0,Nr.jsx)("path",{d:"m24 43c41.6475-22.8943 15.6537-49.10252 0-33.05744-15.65373-16.04526-41.6475 10.16294 0 33.05744z",fill:`url(#d-${i})`})}),(0,Nr.jsx)("circle",{cx:"37",cy:"33.5",fill:`url(#e-${i})`,r:"9.5"}),(0,Nr.jsx)("g",{filter:`url(#b-${i})`,children:(0,Nr.jsx)("path",{d:"m38.5 28.5c0-.8284-.6716-1.5-1.5-1.5s-1.5.6716-1.5 1.5v3.5h-3.5c-.8284 0-1.5.6716-1.5 1.5s.6716 1.5 1.5 1.5h3.5v3.5c0 .8284.6716 1.5 1.5 1.5s1.5-.6716 1.5-1.5v-3.5h3.5c.8284 0 1.5-.6716 1.5-1.5s-.6716-1.5-1.5-1.5h-3.5z",fill:`url(#f-${i})`})})]})},Td=(0,d.memo)(_d),Od=e=>{let{className:t}=e;const n=(0,wr.P)(),i=Vs();return(0,Nr.jsxs)("button",{type:"button",className:(0,xr.A)("btn btn-default h-auto d-flex items-center text-start text-wrap-normal px-6 py-4",t),onClick:()=>{i.emit(Rs.SHOULD_HIDE,{shouldReopen:!0,tributeSelected:!0})},"data-qa":"tribute-make-another","data-tracking-element-name":"makeAnotherTribute",children:[(0,Nr.jsx)(Td,{className:"shrink-0 me-5",width:32,height:32,ariaHidden:!0}),(0,Nr.jsx)(yl,{className:(0,xr.A)("body-1 grow-1",n?"text-ellipsis":"text-line-clamp-2"),token:"thankYouScreen.makeAnotherTribute.button"})]})},xd=(0,d.memo)(Od),kd=e=>{var t,n;const i=(0,Uo.Y)();return(0,Nr.jsxs)("svg",{className:e.className,"aria-hidden":e.ariaHidden&&!0,fill:"none",height:null!==(t=e.height)&&void 0!==t?t:48,viewBox:"0 0 48 48",width:null!==(n=e.width)&&void 0!==n?n:48,xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",children:[(0,Nr.jsxs)("linearGradient",{id:`a-${i}`,children:[(0,Nr.jsx)("stop",{offset:"0",stopColor:"#afd9ff"}),(0,Nr.jsx)("stop",{offset:"1",stopColor:"#afd9ff",stopOpacity:"0"})]}),(0,Nr.jsx)("linearGradient",{id:`b-${i}`,gradientUnits:"userSpaceOnUse",x1:"50.5",x2:"31.9257",xlinkHref:`#a-${i}`,y1:"32",y2:"6.87716"}),(0,Nr.jsxs)("linearGradient",{id:`c-${i}`,gradientUnits:"userSpaceOnUse",x1:"16",x2:"20",y1:"39.5",y2:"40.5",children:[(0,Nr.jsx)("stop",{offset:"0",stopColor:"#8fbcff"}),(0,Nr.jsx)("stop",{offset:".208333",stopColor:"#8fbcff",stopOpacity:".813559"}),(0,Nr.jsx)("stop",{offset:".234375",stopColor:"#8fbcff",stopOpacity:"0"})]}),(0,Nr.jsxs)("linearGradient",{id:`d-${i}`,gradientUnits:"userSpaceOnUse",x1:"67.2852",x2:"2.79451",y1:"17.1454",y2:"39.9202",children:[(0,Nr.jsx)("stop",{offset:".442708",stopColor:"#fff",stopOpacity:"0"}),(0,Nr.jsx)("stop",{offset:"1",stopColor:"#fff"})]}),(0,Nr.jsx)("linearGradient",{id:`e-${i}`,gradientUnits:"userSpaceOnUse",x1:"25.5",x2:"40",xlinkHref:`#a-${i}`,y1:"20.5",y2:"27"}),(0,Nr.jsx)("path",{d:"m4.88359 25.1745h.00002l.05609-.0474h.00001l.03057-.0259c3.24586-2.7466 4.28803-3.6284 39.39632-18.14832l-33.4844 25.29342c-4.27204 1.4893-7.23131 1.0342-8.7118-.4983-.40047-.6047-.53429-1.5383-.16141-2.6895.37824-1.1677 1.27292-2.5289 2.8746-3.884z",fill:"#8fbcff",stroke:`url(#b-${i})`}),(0,Nr.jsx)("path",{d:"m47.7789 5.00045-36.6327 27.66835 3.9702 10.7136 2.3144-11.4342z",fill:"#5a9bfc"}),(0,Nr.jsx)("path",{d:"m24.7306 34.3642-8.8354 7.6768 1.9178-9.4742z",fill:"#2169d6",stroke:`url(#c-${i})`}),(0,Nr.jsx)("path",{d:"m17.9212 32.183 29.061-25.80479c-.2055.91261-.5316 2.26188-1.0254 4.07169-1.0305 3.7768-2.791 9.5588-5.7082 17.5634-2.6186 7.1853-6.5442 10.3049-10.3618 11.2275-3.8293.9254-7.6707-.3285-10.191-2.1484-.9843-1.0568-1.4305-2.3209-1.6277-3.3432-.0993-.5145-.134-.9608-.144-1.2765-.0036-.1154-.0039-.213-.0029-.2897z",fill:"#6ca7ff"}),(0,Nr.jsx)("path",{d:"m17.9212 32.183 29.061-25.80479c-.2055.91261-.5316 2.26188-1.0254 4.07169-1.0305 3.7768-2.791 9.5588-5.7082 17.5634-2.6186 7.1853-6.5442 10.3049-10.3618 11.2275-3.8293.9254-7.6707-.3285-10.191-2.1484-.9843-1.0568-1.4305-2.3209-1.6277-3.3432-.0993-.5145-.134-.9608-.144-1.2765-.0036-.1154-.0039-.213-.0029-.2897z",fill:`url(#d-${i})`,fillOpacity:".4"}),(0,Nr.jsx)("path",{d:"m17.9212 32.183 29.061-25.80479c-.2055.91261-.5316 2.26188-1.0254 4.07169-1.0305 3.7768-2.791 9.5588-5.7082 17.5634-2.6186 7.1853-6.5442 10.3049-10.3618 11.2275-3.8293.9254-7.6707-.3285-10.191-2.1484-.9843-1.0568-1.4305-2.3209-1.6277-3.3432-.0993-.5145-.134-.9608-.144-1.2765-.0036-.1154-.0039-.213-.0029-.2897z",stroke:`url(#e-${i})`})]})},Id=(0,d.memo)(kd),wd=()=>{const{state:e}=eo(ka.THANK_YOU),t=(0,wr.P)();return(0,Nr.jsxs)("a",{href:e.tributeDonorPortalLink,className:"btn btn-default h-auto d-flex items-center text-start text-wrap-normal px-6 py-4",target:"_blank",rel:"noreferrer","data-qa":"tribute-send-card","data-tracking-element-name":"completeDedication",children:[(0,Nr.jsx)(Id,{className:"shrink-0 me-5",width:32,height:32,ariaHidden:!0}),(0,Nr.jsx)(yl,{className:(0,xr.A)("body-1 grow-1",t?"text-ellipsis":"text-line-clamp-2"),token:"thankYouScreen.sendCard.button"})]})},Rd=(0,d.memo)(wd),Md=()=>{const{controller:e}=eo(ka.THANK_YOU),t=(0,qr.t)(),n=(0,wr.P)(),i=Vs();return(0,Nr.jsxs)(Nr.Fragment,{children:[(0,Nr.jsx)(ju,{className:"shrink-0"}),(0,Nr.jsx)(Bo,{className:(0,xr.A)("px-body",n?"pt-10":"pt-8"),children:(0,Nr.jsx)("div",{className:"fixed-container d-flex flex-column grow-1",children:(0,Nr.jsxs)("div",{className:(0,xr.A)("grow-1 d-flex flex-column",{"justify-center":!n}),children:[(0,Nr.jsx)(_u,{className:"d-block mx-auto",width:64,height:67,ariaHidden:!0}),(0,Nr.jsx)("h2",{className:(0,xr.A)("title-1 text-center",n?"text-ellipsis mt-6":"text-line-clamp-3 mt-4"),children:e.thankYouTitle}),(0,Nr.jsx)("p",{className:(0,xr.A)("thank-you-description text-center mt-2",n?"text-ellipsis":"text-line-clamp-4"),dangerouslySetInnerHTML:{__html:e.descriptionTribute}})]})})}),(0,Nr.jsxs)(ec,{className:n?"pt-12":"pt-8",children:[(0,Nr.jsx)(Rd,{}),(0,Nr.jsx)(xd,{className:"mt-3"}),(0,Nr.jsx)("div",{className:"d-flex justify-center mt-8",children:(0,Nr.jsx)("button",{type:"button",className:"btn-link text-truncate",onClick:()=>{i.emit(Rs.SHOULD_HIDE,{})},"data-qa":"close","data-tracking-element-name":"closeButton",children:t.translate("thankYouScreen.button")})})]})]})},Ld=(0,d.memo)(Md),Ud={[Ma.SHARING]:Dd,[Ma.TRIBUTE]:Ld,[Ma.DEFAULT]:Hu},Fd=e=>{const{state:t}=eo(ka.THANK_YOU),n=(0,wr.P)(),i=Ud[t.variant],s=(0,Pr.n)().getAskPageConfig().show;return(0,Nr.jsxs)("div",{className:"flow-screen","data-qa":"active-screen-thank-you",children:[n&&!s&&(0,Nr.jsx)(Sc,{}),(0,Nr.jsx)(i,{})]})},jd=(0,d.memo)(Fd);var Bd;function Hd(){return Hd=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},Hd.apply(this,arguments)}var qd=function(e,t){return d.createElement("svg",Hd({fill:"none",height:28,viewBox:"0 0 28 28",width:28,xmlns:"http://www.w3.org/2000/svg",ref:t},e),Bd||(Bd=d.createElement("path",{clipRule:"evenodd",d:"m2 14c0-6.62742 5.37258-12 12-12 6.6274 0 12 5.37258 12 12 0 6.6274-5.3726 12-12 12-6.62742 0-12-5.3726-12-12zm12-14c-7.73199 0-14 6.26801-14 14 0 7.732 6.26801 14 14 14 7.732 0 14-6.268 14-14 0-7.73199-6.268-14-14-14zm-4.10223 5.74899c-.14294-.53346-.69128-.85004-1.22475-.7071-.53346.14294-.85005.69128-.7071 1.22474l.87766 3.27549c-1.42369 1.64968-2.03436 3.95478-1.42697 6.22158s2.2888 3.9578 4.34659 4.6746l.8777 3.2758c.143.5335.6913.85 1.2248.7071s.85-.6913.7071-1.2247l-.6378-2.3802c.6039.0055 1.2181-.0698 1.8287-.2334.3343-.0896.6565-.2027.965-.3371l.5933 2.214c.1429.5335.6913.8501 1.2247.7071.5335-.1429.8501-.6913.7071-1.2247l-.7558-2.8206c.8423-.7407 1.4859-1.6767 1.8788-2.7157.1953-.5166-.0651-1.0937-.5817-1.2891-.5166-.1953-1.0937.0651-1.2891.5817-.3369.8912-.9339 1.6736-1.7219 2.232-.452.3203-.9684.5679-1.538.7206-.8223.2203-1.649.214-2.417.0207-1.6417-.4133-3.01255-1.6788-3.48064-3.4257-.4681-1.747.08637-3.5283 1.30144-4.7071.5685-.55143 1.2813-.97021 2.1035-1.19054.5697-.15263 1.1407-.19634 1.6923-.14497.9617.08956 1.8698.46873 2.6072 1.07201.4275.3497 1.0575.2867 1.4072-.1408.3497-.42746.2867-1.05748-.1408-1.40719-.8597-.70339-1.885-1.19215-2.9848-1.41247l-.7557-2.82032c-.1429-.53347-.6913-.85005-1.2248-.70711-.5334.14294-.85.69128-.7071 1.22475l.5932 2.21369c-.3345.03787-.67.10099-1.0043.19056-.6106.1636-1.1801.40556-1.7004.71221z",fill:"currentColor",fillRule:"evenodd"})))},Gd=(0,d.forwardRef)(qd),Vd=(0,d.memo)(Gd);const Yd=e=>{const{className:t,prevContent:n,content:i,disabled:s,onAddComment:a,onHighlight:r}=e,o=(0,qr.t)(),[c,l]=(0,d.useState)(!1);return(0,d.useEffect)((()=>{if(n===i||!i)return void l(!1);r(),l(!0);const e=window.setTimeout((()=>{l(!1)}),400);return()=>{window.clearTimeout(e)}}),[i,n,r]),(0,Nr.jsx)("div",{className:t,children:(0,Nr.jsxs)("button",{type:"button",className:(0,xr.A)("comment-btn body-3",{"is-highlighted":c}),dir:"auto",disabled:s,onClick:()=>a(),"data-qa":"comment-link","data-tracking-element-name":"navigateToComment",children:[(0,Nr.jsx)("span",{className:"comment-highlight"}),i?(0,Nr.jsxs)(Nr.Fragment,{children:[(0,Nr.jsx)("span",{className:"comment-btn-title",children:o.translate("donateForm.comment.commentAdded")}),(0,Nr.jsx)("span",{className:"comment-btn-link",title:i,dir:"auto",children:i})]}):(0,Nr.jsx)(Nr.Fragment,{children:(0,Nr.jsx)("span",{className:"comment-btn-link",children:o.translate("donateForm.comment.label")})})]})})},Kd=(0,d.memo)(Yd);var zd=n(6994),$d=n(2599);class Wd{constructor(e){let{digits:t,withoutFraction:n,getCurrencyFormat:i,locale:s,donationType:a,setZeroOnBlur:r}=e;this.digits=t,this.withoutFraction=n,this.locale=s,this.donationType=a,this.getCurrencyFormat=i,this.setZeroOnBlur=r,this.groupSeparator=this.getCurrencyFormat().groupSeparator,this.decimalSeparator=this.getCurrencyFormat().decimalSeparator}get alternativeDecimalSeparator(){return"."===this.decimalSeparator?",":"."}parseAmountOrNull(e){return Number.isNaN(e)?null:e}formatValue(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;const n=null===e?"":la(e/Math.pow(10,this.digits),t,this.digits,this.locale);return this.removeFractionZeroes(n,t)}convertStringToNumber(e,t){const n=this.toJsFloatFormat(e),i=this.parsePrice(n,t);return Math.round(Number.parseFloat(i)*Math.pow(10,this.digits))}handleKeyDown(e,t,n){if(!(this.withoutFraction?Wd.DIGITS_REG_EXP:Wd.DIGITS_WITH_DOT_COMMA_REG_EXP).test(e.key)&&e.key&&1===e.key.length&&!e.ctrlKey&&!e.metaKey)return e.preventDefault();const i=t.value;if(i.includes(this.decimalSeparator)&&(","===e.key||"."===e.key))return e.preventDefault();const s=i.split(this.decimalSeparator),a=s[0],r=a?a.length:0,o=s[1];if((o?o.length:0)>=this.digits&&e.key&&1===e.key.length&&t.selectionStart&&t.selectionStart===t.selectionEnd&&t.selectionStart>r&&!e.ctrlKey&&!e.metaKey)return e.preventDefault();n()}handlePaste(e,t){e.preventDefault(),t((e.clipboardData||e.originalEvent&&e.originalEvent.clipboardData||window.clipboardData).getData("text"))}handleChange(e,t,n,i,s){let a=e.target.value;if(t){const e=this.getCommaPosition(n,a);-1!==e&&(a=a.substring(0,e)+this.decimalSeparator+a.substring(e+1))}const r=new RegExp(`\\${this.decimalSeparator}$`);(a.match(r)||n.match(r)&&!a.includes(this.decimalSeparator))&&i(a);const o=new RegExp(`[${this.decimalSeparator}][0-9]{0,${this.digits}}$`),c="0"===a[a.length-1]&&e.target.selectionStart===a.length,l="0"===n[n.length-1]&&n.length>a.length&&n.length===Number(e.target.selectionStart)+1;a.match(o)&&(c||l)&&i(a),s(a)}handleBlur(e,t){this.setZeroOnBlur&&""===e.target.value&&(e.target.value="0"),t(e)}getInputMode(){return this.withoutFraction?"numeric":"decimal"}calculateInitialCursorPosition(e,t){const n=e.slice(0,t),i=[...n].filter((e=>e===this.groupSeparator)).length;return n.length-i}calculateFormattedCursorPosition(e,t){let n=0,i=0;for(;i<t&&n<e.length;)e[n]!==this.groupSeparator&&i++,n++;return n}limitCryptoAmount(e){const t=e.split("."),n=t[0];if(n.length>Wd.CRYPTO_MAXIMUM_INTEGER_LENGTH&&(e=e.replace(/^([0-9]*)/,n.slice(0,Wd.CRYPTO_MAXIMUM_INTEGER_LENGTH))),e.includes(".")){const n=t[1];n.length>Wd.CRYPTO_MAXIMUM_FRACTION_LENGTH&&(e=e.replace(/[.]([0-9]*)/,n.slice(0,Wd.CRYPTO_MAXIMUM_FRACTION_LENGTH)))}return e}parsePrice(e,t){let n=e||"";if(n=n.replace(/[^\d.]/g,""),this.donationType===fe.MONEY){const e=(0,$d.Bm)(t);n=n.slice(0,e+2)}return this.donationType===fe.CRYPTO&&(n=this.limitCryptoAmount(n)),Number.parseFloat(n).toFixed(this.withoutFraction?0:this.digits)}getCommaPosition(e,t){const n=e.length>=t.length?e:t,i=e.length>=t.length?t:e,s=n.split("");for(const e in s)if(s[e]===this.alternativeDecimalSeparator&&s[e]!==i.charAt(Number(e)))return Number(e);return-1}toJsFloatFormat(e){return e.replace(new RegExp(`\\${this.groupSeparator}`,"g"),"").replace(new RegExp(`\\${this.decimalSeparator}`,"g"),".")}removeFractionZeroes(e,t){const n=new RegExp(`\\${this.decimalSeparator}0+$`);return 0!==t?e.replace(n,""):e}}Wd.DIGITS_WITH_DOT_COMMA_REG_EXP=/[0-9.,]/,Wd.DIGITS_REG_EXP=/[0-9]/,Wd.CRYPTO_MAXIMUM_FRACTION_LENGTH=8,Wd.CRYPTO_MAXIMUM_INTEGER_LENGTH=9;const Xd=(0,d.forwardRef)((function(e,t){var{className:n,placeholder:i,disabled:s,trackingElement:a,withoutFraction:r,digits:o,donationType:c,value:u,dataQa:h,currency:m,onChange:p,onFocus:g,onBlur:y,onClick:f}=e,S=(0,l.Tt)(e,["className","placeholder","disabled","trackingElement","withoutFraction","digits","donationType","value","dataQa","currency","onChange","onFocus","onBlur","onClick"]);const[A,E]=(0,d.useState)(!1),[C,v]=(0,d.useState)(null),N=(0,qr.t)(),b=function(e){let{withoutFraction:t,digits:n,donationType:i,intl:s}=e;return(0,d.useMemo)((()=>new Wd({withoutFraction:t,getCurrencyFormat:()=>s.getCurrencyFormat(),locale:s.locale,digits:n,donationType:i})),[n,i,s,t])}({withoutFraction:r,digits:o,intl:N,donationType:c}),P=(0,d.useMemo)((()=>b.alternativeDecimalSeparator),[b]),D=(0,d.useMemo)((()=>b.getInputMode()),[b]),_=(0,d.useRef)(null),T=(0,d.useCallback)((e=>b.formatValue(e,A?0:o)),[b,A,o]),[O,x]=(0,d.useState)(T(u)),[k,I]=(0,d.useState)(m),w=(0,d.useRef)(!1),R=(0,d.useCallback)(((e,t)=>b.convertStringToNumber(e,t)),[b]);(0,d.useEffect)((()=>{R(O,k)!==u&&(I(m),x(T(u)))}),[u,T,R,O,m,k]),(0,d.useEffect)((()=>{if(null===_.current||null===C)return;const e=b.calculateFormattedCursorPosition(O,C);_.current.selectionStart=e,_.current.selectionEnd=e}),[C,O,b]);const M=(0,d.useCallback)((e=>{const t=R(e,m);p(b.parseAmountOrNull(t))}),[R,p,b,m]);return(0,d.useImperativeHandle)(t,(()=>_.current)),(0,Nr.jsx)("input",Object.assign({ref:_,className:n,autoComplete:"off",value:O,onChange:e=>{A||E(!0),b.handleChange(e,w.current,O,x,(t=>{var n;const i=b.calculateInitialCursorPosition(t,null!==(n=e.target.selectionStart)&&void 0!==n?n:0);v(i),M(t)}))},onPaste:e=>{b.handlePaste(e,(e=>{M(e)}))},onKeyDown:e=>{_.current&&b.handleKeyDown(e,_.current,(()=>{w.current=e.key===P}))},onFocus:()=>{g&&g()},onBlur:e=>{y&&b.handleBlur(e,(()=>{y()}))},onClick:()=>{f&&f()},disabled:s,inputMode:D,placeholder:i,"data-qa":h,"data-tracking-element-name":a,"data-testid":"price-input"},S))})),Qd=(0,d.memo)(Xd),Zd=(0,d.forwardRef)(((e,t)=>{const[n,i]=(0,d.useState)(!1),{onAmountChange:s,onAmountInputBlur:a,onAmountInputFocus:r,currencyService:o,withoutFraction:c=!0,qaActiveAttribute:u,qaDisabledAttribute:h,trackingElement:m,placeholder:p,donationType:g,isCustomAmount:y,isPDUPriceInput:f,className:S,canModifyAmount:A,showCurrencySymbol:E,useSpaceAfterCurrencySymbol:C,showDisabledInput:v,disabled:N,currency:b,currencyCodeNode:P,canSelectCurrency:D,amount:_,hasError:T,errorLabel:O}=e,x=(0,l.Tt)(e,["onAmountChange","onAmountInputBlur","onAmountInputFocus","currencyService","withoutFraction","qaActiveAttribute","qaDisabledAttribute","trackingElement","placeholder","donationType","isCustomAmount","isPDUPriceInput","className","canModifyAmount","showCurrencySymbol","useSpaceAfterCurrencySymbol","showDisabledInput","disabled","currency","currencyCodeNode","canSelectCurrency","amount","hasError","errorLabel"]),k=(0,qr.t)(),I=(0,wr.P)(),w=(0,Uo.Y)(),R=(0,Ur.k)(),M=(0,d.useCallback)((e=>{s(e)}),[s]),L=(0,d.useCallback)((()=>{a&&a(),i(!1)}),[a]),U=(0,d.useCallback)((()=>{r&&r(),i(!0)}),[r]),F=/\s/.test(k.formatCurrency(null!=_?_:0,{currency:b,display:"short"})),j=C&&F,B=o.getDigits(b),H=la((_||0)/Math.pow(10,B),0,2);return(0,Nr.jsxs)("div",{className:(0,xr.A)(S,{"text-color":g===fe.CRYPTO,"text-white":v,"has-error":T,focus:n,disabled:!A}),"data-qa":"input-wrapper",children:[E&&o.getSymbol(b)&&(null!==_||f)&&(0,Nr.jsxs)("div",{className:(0,xr.A)("shrink-0 self-center text-sans-serif",{"label-3 text-gray-80 me-1":!f&&!y}),"aria-hidden":"true","data-qa":"currency-symbol",children:[o.getSymbol(b),j&&(0,Nr.jsx)(Nr.Fragment,{children:""})]}),(0,Nr.jsxs)("label",{className:(0,xr.A)("grow-1",{"p-rel":f}),"data-qa":u+"-label",children:[(0,Nr.jsxs)("span",{className:"sr-only",children:[k.translate("donateForm.donationAmountField.label")," ",b]}),f&&(0,Nr.jsx)("span",{className:"price-control invisible","aria-hidden":"true","data-qa":u+"-value",children:H}),A?(0,Nr.jsx)(Qd,Object.assign({ref:t,className:(0,xr.A)(R("price-control"),{"p-abs top-left bottom-right":f,"body-1":null===_&&!y&&!f||null===_&&y&&I,"body-3":null===_&&y&&!I,disabled:N}),digits:o.getDigits(b),value:_,onChange:M,onBlur:L,onFocus:U,withoutFraction:c,pattern:"[\\d,.\\s]*",placeholder:"string"==typeof p?p:k.translate("donateForm.donationAmountField.placeholder"),disabled:v||N,"aria-invalid":T,"aria-describedby":`price-control-${w}-error`,dataQa:u,trackingElement:m,donationType:g,currency:b},x)):(0,Nr.jsx)("span",{className:R("price-control"),"data-qa":h,children:k.formatCurrency(_||0,{currency:b,display:"floatcents",withoutPrefix:!0})})]}),T&&O&&(0,Nr.jsxs)(Nr.Fragment,{children:[!f&&(0,Nr.jsx)(al.U,{className:"shrink-0 self-center me-1","data-testId":"price-control-error",children:(0,Nr.jsx)("p",{dangerouslySetInnerHTML:{__html:O}})}),(0,Nr.jsx)("p",{id:`price-control-${w}-error`,className:"sr-only",dangerouslySetInnerHTML:{__html:O},"data-testid":"amount-input-error"})]}),f?P:(0,Nr.jsxs)("div",{className:"shrink-0 self-center p-rel",children:[P,(0,Nr.jsxs)("span",{className:(0,xr.A)("currency-select-label d-flex items-center",{"ps-2 pe-1-5 border-radius-6":D,"px-2-5":!D,"py-2":!y,"py-1":y}),"data-qa":"selected-currency","aria-hidden":"true",children:[b,D&&(0,Nr.jsx)(zd.A,{className:"currency-select-arrow icon-stroke font-size-16 shrink-0"})]})]})]})}));Zd.displayName="_CurrencyInputSection";const Jd=(0,d.memo)(Zd),eh=e=>{let{goal:t,className:n,disabled:i}=e;const s=(t?null==t?void 0:t.name:"").trim().split(" "),a=s.slice(0,-1).join(" "),r=s.length>1?` ${s.pop()}`:s.pop();return(0,Nr.jsxs)("span",{className:(0,xr.A)("text-decor",n,{"pointer-events-none":i}),"data-qa":"selected-goal",children:[a,(0,Nr.jsxs)("span",{className:"text-nowrap",children:[r,(0,Nr.jsx)("span",{className:"icon-slot icon-slot-14 d-inline-block font-size-14","aria-hidden":!0,children:(0,Nr.jsx)(zd.A,{className:"icon-stroke p-abs centered mt-0-5"})})]})]})},th=(0,d.memo)(eh),nh=(0,d.forwardRef)(((e,t)=>{var n;const{goal:i,goals:s,goalKey:a,isEditable:r,disabled:o,changeGoal:c,hasError:l,isDesignationRequired:u}=e,d=(0,qr.t)(),h=Ed(),m=(0,wr.P)(),p=no(),g=e=>{c(e.target.value),h.trackClick("goalSelector",e.target)},y=s.map((e=>({value:e.key,label:e.name})));return(0,Nr.jsx)(Nr.Fragment,{children:u?(0,Nr.jsx)(sl,{setRef:t,id:`designation-${p}`,label:d.translate("donateForm.designation.label"),labelFloating:!0,error:l,className:(0,xr.A)({"pe-16":l}),formLabelClass:(0,xr.A)({"pe-12":l}),formGroupClass:(0,xr.A)(e.className,{shake:e.shake}),value:null!=a?a:"",disabled:o,"aria-required":!0,"aria-describedby":`designation-${p}-error`,onChange:g,dataQa:"goal-selector","data-tracking-element-name":"goalSelect",options:y,children:l&&(0,Nr.jsxs)(Nr.Fragment,{children:[(0,Nr.jsx)(al.U,{className:"p-abs centered-right z-index-5 me-10",dataQa:"goal-select",children:d.translate("donateForm.designation.error.required")}),(0,Nr.jsx)("p",{id:`designation-${p}-error`,className:"sr-only",children:d.translate("donateForm.designation.error.required")})]})}):(0,Nr.jsx)("div",{className:(0,xr.A)("designation self-start",e.className),"data-qa":"goal-component",children:r?(0,Nr.jsxs)(Nr.Fragment,{children:[(0,Nr.jsx)("select",{id:`designation-${p}`,className:"designation-select p-abs top-left bottom-right max-w-100 font-size-16 text-noselect p-0 border-0 m-0 overflow-hidden cursor-pointer z-index-1",value:null!=a?a:"",disabled:o,"aria-hidden":"true",onChange:g,"data-qa":"goal-selector","data-tracking-element-name":"goalSelect",children:s.map((e=>(0,Nr.jsx)("option",{value:e.key,children:e.name},e.key)))}),(0,Nr.jsxs)("label",{htmlFor:`designation-${p}`,className:(0,xr.A)("designation-label",m?"text-ellipsis":"text-line-clamp-2"),"data-qa":"goal-selector-label",children:[d.translate("donateForm.designation.label"),(0,Nr.jsx)(th,{goal:i,className:"designation-text ms-1",disabled:o})]})]}):(0,Nr.jsxs)("p",{className:m?"text-ellipsis":"text-line-clamp-2",children:[d.translate("donateForm.designation.label"),(0,Nr.jsx)("span",{className:"ms-1","data-qa":"selected-goal",children:null!==(n=null==i?void 0:i.name)&&void 0!==n?n:""})]})})})}));nh.displayName="DesignationSection";const ih=(0,d.memo)(nh),sh={background:"rgba(255, 255, 255, 0.9)"},ah=[Po.b.CLICK],rh=["top","top-end","bottom","bottom-end"],oh=e=>{const{className:t,label:n,labelOptional:i,labelFloating:s,selectedOption:a,options:r,value:o,placeholder:c,displayName:u,inputClasses:h,loading:m,showIcons:p,showArrow:g,hint:y,hintAriaLabel:f,allowClear:S,maxLength:A,hasError:E,errorLabel:C,disabled:v,SelectedIconToRender:N,ListItemToRender:b,filterRegex:P,autoComplete:D="new-password",dataQa:_,trackingElement:T,autoFocus:O,autoFocusMode:x,onChange:k,onSelect:I,onBlur:w,onClear:R,onFocus:M}=e,L=(0,l.Tt)(e,["className","label","labelOptional","labelFloating","selectedOption","options","value","placeholder","displayName","inputClasses","loading","showIcons","showArrow","hint","hintAriaLabel","allowClear","maxLength","hasError","errorLabel","disabled","SelectedIconToRender","ListItemToRender","filterRegex","autoComplete","dataQa","trackingElement","autoFocus","autoFocusMode","onChange","onSelect","onBlur","onClear","onFocus"]),U=(0,qr.t)(),F=(0,$r.Q)(),j=(0,wr.P)(),[B,H]=(0,d.useState)(!1),[q,G]=(0,d.useState)(!1),[V,Y]=(0,d.useState)(null),K=B&&!!r.length,z=(0,d.useRef)(null),$=(0,d.useRef)(null),W=(0,d.useRef)(null),X=(0,d.useRef)(null),Q=(0,d.useRef)(null),Z=e=>{const t=I(e);G(!1),t||J()},J=()=>{if(H(!1),!$.current)throw new Error("inputRef was not provided");$.current.blur(),w&&w()},ee=no();(0,d.useImperativeHandle)(e.inputRef,(()=>$.current),[]);const te=void 0!==u?u:o,ne=(null==o?void 0:o.length)>0;return(0,Nr.jsxs)("div",{ref:z,className:(0,xr.A)("search-select",t),children:[(0,Nr.jsxs)(dl.t,Object.assign({setRef:$,id:`search-select-${ee}`,label:n,labelFloating:s,labelOptional:i?U.translate("common.optional"):"",placeholder:c,customPrefix:p&&N&&(0,Nr.jsx)(N,{option:a,value:o,options:r,disabled:v}),className:(0,xr.A)("search-select-input",h,{"search-select-input-active":K,"search-select-input-offset-start":p,"search-select-input-offset-end":S,"search-select-input-with-arrow":g,"pe-10":E}),formLabelClass:(0,xr.A)({"search-select-label-offset-start":p,"pe-6":S||E}),value:te,autoComplete:D,maxLength:A,disabled:v,error:E,role:"combobox","aria-autocomplete":"list","aria-controls":`${ee}-search-select-dropdown`,"aria-expanded":K,"aria-activedescendant":`search-select-option-${V}`,"aria-describedby":`search-select-${ee}-error`,dataQa:_,dataTestId:"search-input",dataTrackingElementName:T,onChange:e=>{return t=e.target.value,void(k&&k((n=t,void 0===P?n:n.split("").filter((e=>P.test(e))).join(""))));var t,n},onFocus:()=>{H(!0),M&&M()},onBlur:()=>!q&&J(),onKeyDown:e=>{if(void 0!==P&&!P.test(e.key))return void e.preventDefault();if(!K)return;const{currentOptionIdx:t,needSelectOption:n,closeDropdown:i}=(0,Ir.t)(e,V,r.length);i?J():n&&null!==t?Z(r[t].id):null!==t&&Y(t)},autoFocus:O,autoFocusMode:x},L,{children:[(!!y||S)&&(0,Nr.jsxs)("div",{className:"p-abs centered-right d-flex items-center me-4",children:[!!y&&(0,Nr.jsxs)(Nr.Fragment,{children:[(0,Nr.jsx)("button",{ref:X,type:"button",className:"btn-icon btn-icon-round font-size-18 text-gray-40 shrink-0 ms-1-5",disabled:v,"aria-label":f,"data-qa":"search-select-help-button",children:(0,Nr.jsx)(Kc.A,{className:(0,xr.A)("icon-stroke d-block",{"icon-flip-horizontal":F}),"aria-hidden":!0})}),!v&&(0,Nr.jsx)(Do.S,{triggerRef:X,trigger:ah,placement:F?"left-start":"right-start",fallbackPlacements:rh,maxWidth:j?"var(--fixed-container-width-desktop)":"232px",children:y})]}),(0,Nr.jsx)(kr.A,{classNames:"rtg-clear-button",nodeRef:Q,in:ne,timeout:100,mountOnEnter:!0,unmountOnExit:!0,children:(0,Nr.jsx)("button",{ref:Q,type:"button",className:"btn-icon font-size-18 text-gray-60 shrink-0 ms-1-5",disabled:v,"aria-label":U.translate("common.clearButtonAriaLabel"),"data-qa":"search-select-clear-button",onClick:R,children:(0,Nr.jsx)(wc,{className:"icon-stroke icon-stroke-2 d-block","aria-hidden":!0})})})]}),E&&C&&(0,Nr.jsxs)(Nr.Fragment,{children:[(0,Nr.jsx)(al.U,{className:"p-abs centered-right z-index-5 me-4",children:(0,Nr.jsx)("p",{dangerouslySetInnerHTML:{__html:C}})}),(0,Nr.jsx)("p",{id:`search-select-${ee}-error`,className:"sr-only",dangerouslySetInnerHTML:{__html:C}})]})]})),K&&(0,Nr.jsxs)("ul",{ref:W,id:`${ee}-search-select-dropdown`,className:"search-select-dropdown custom-scrollbar",role:"listbox","data-testid":"menu",children:[m&&(0,Nr.jsx)("li",{className:"p-abs top-left bottom-right d-flex items-center justify-center z-index-2",style:sh,"aria-label":U.translate("common.loading"),role:"status","aria-live":"polite",children:(0,Nr.jsx)("span",{className:"spinner spinner-lg spinner-primary","aria-hidden":!0})}),r.map(((e,t)=>(0,Nr.jsx)("li",{id:`search-select-option-${t}`,className:(0,xr.A)("search-select-option",{"search-select-option-highlighted":t===V}),role:"option","aria-selected":t===V,"data-testid":"menuitem","data-tracking-element-name":T,"data-qa":_+"-item",onMouseDown:()=>G(!0),onClick:()=>Z(e.id),onMouseMove:()=>Y(t),children:b?(0,Nr.jsx)(b,{option:e,showIcons:!0}):e.value},e.id)))]})]})};oh.displayName="_SearchManualSelect";const ch=(0,d.memo)(oh),lh=e=>{const{options:t,selectedOption:n,className:i,label:s,labelOptional:a,labelFloating:r,placeholder:o,shouldSearchById:c,displayName:u,clearOnFocus:h,isDynamicOptions:m,showArrow:p=!0,showIcons:g,SelectedIconToRender:y,ListItemToRender:f,disabled:S,hasError:A,trackingElement:E,dataQa:C,filterRegex:v,autoFocus:N,autoFocusMode:b,onChange:P,onSelect:D,onBlur:_}=e,T=(0,l.Tt)(e,["options","selectedOption","className","label","labelOptional","labelFloating","placeholder","shouldSearchById","displayName","clearOnFocus","isDynamicOptions","showArrow","showIcons","SelectedIconToRender","ListItemToRender","disabled","hasError","trackingElement","dataQa","filterRegex","autoFocus","autoFocusMode","onChange","onSelect","onBlur"]),[O,x]=(0,d.useState)((null==n?void 0:n.id)||""),[k,I]=(0,d.useState)(u),w=void 0!==u;(0,d.useEffect)((()=>{(null==n?void 0:n.id)&&x(null==n?void 0:n.id),w&&I(u)}),[u,w,n]);const R=(0,d.useCallback)((e=>(D(e),!1)),[D]),M=(0,d.useCallback)((e=>{x(e),P&&P(e),w&&I(e)}),[w,P]),L=(0,d.useMemo)((()=>{if(!t.length)return[];if(m)return t;const e=t.find((e=>{let{id:t}=e;return t===(null==n?void 0:n.id)}));if(O===(null==e?void 0:e.id))return[...t];const i=O.toLowerCase();return c?t.filter((e=>{let{id:t,value:n}=e;return n.toLowerCase().includes(i)||t.toLowerCase().includes(i)})):t.filter((e=>{let{value:t}=e;return t.toLowerCase().includes(i)}))}),[t,m,O,c,n]),U=(0,d.useCallback)((()=>{(null==n?void 0:n.id)?x(n.id):x(""),w&&I(u),null==_||_()}),[u,w,n,_]),F=(0,d.useCallback)((()=>{h&&w&&I("")}),[h,w]);return(0,Nr.jsx)(ch,Object.assign({options:L,value:O,onChange:M,onSelect:R,onBlur:U,onFocus:F,className:i,placeholder:o,label:s,labelOptional:a,labelFloating:r,displayName:k,isDynamicOptions:m,showArrow:p,showIcons:g,SelectedIconToRender:y,ListItemToRender:f,selectedOption:n,disabled:S,hasError:A,trackingElement:E,dataQa:C,filterRegex:v,autoFocus:N,autoFocusMode:b},T))};lh.displayName="_SearchFilterSelect";const uh=(0,d.memo)(lh),dh=e=>{const{inHonorOfMaxLength:t,className:n,isActive:i,sharingEnabled:s,labelType:a,name:r,disabled:o,onToggleTribute:c,onChangeTributeName:l}=e,h=(0,qr.t)(),m=(0,Br.$)(),p=(0,$r.Q)(),g=(0,wr.P)(),y=no(),[f,S]=(0,d.useState)(!1),A=(0,d.useRef)(null),[E,C]=(0,d.useState)(!1),v=i&&!m&&E,N=[p?"right":"left","top"],b=(0,Pr.n)(),P=t=>{C(t),e.onInputFocusChange&&e.onInputFocusChange(t)};return(0,Nr.jsxs)("div",{className:n,children:[(0,Nr.jsx)(Qc,{className:"body-3",customLabelClasses:"line-height-20",checked:null!=i&&i,onChange:()=>{S(!0),c()},dataQa:"tribute-give-checkbox",trackingElement:"tributeCheckbox",disabled:o,children:(0,Nr.jsx)("span",{className:"text-truncate body-3","data-qa":"tribute-label",children:{[u.dR.IN_HONOR_MEMORY]:b.allowLegacyTributeLabel?h.translate("donateForm.tribute.label.inHonorMemory"):h.translate("donateForm.tribute.label.dedication"),[u.dR.DEDICATION]:h.translate("donateForm.tribute.label.dedication")}[a]})}),i&&(0,Nr.jsxs)(Nr.Fragment,{children:[(0,Nr.jsx)(dl.t,{id:`tribute-${y}`,setRef:A,label:h.translate("donateForm.tribute.inputPlaceholder"),labelFloating:!0,formGroupClass:g?"mt-3":"mt-2",autoFocus:f,autoFocusMode:oc.Q.ALL,placeholder:h.translate("donateForm.tribute.inputPlaceholder"),value:null!=r?r:"",maxLength:t,disabled:o,onFocus:()=>P(!0),onBlur:()=>P(!1),onChange:e=>l(e.target.value),dataQa:"tribute-name"}),s&&(0,Nr.jsx)(Nr.Fragment,{children:g?(0,Nr.jsx)("p",{className:"body-3 text-ellipsis mt-1-5","data-qa":"tribute-hint",children:h.translate("donateForm.tribute.tooltipLabel")}):(0,Nr.jsx)(Rc.q,{triggerRef:A,show:v,placement:p?"left":"right",fallbackPlacements:N,dataQa:"tribute-hint",maxWidth:"232px",children:h.translate("donateForm.tribute.tooltipLabel")})})]})]})},hh=(0,d.memo)(dh);var mh,ph;function gh(){return gh=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},gh.apply(this,arguments)}var yh=function(e,t){return d.createElement("svg",gh({xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:1.4,strokeLinecap:"round",strokeLinejoin:"round",ref:t},e),mh||(mh=d.createElement("circle",{cx:11,cy:11,r:8})),ph||(ph=d.createElement("line",{x1:21,y1:21,x2:16.65,y2:16.65})))},fh=(0,d.forwardRef)(yh),Sh=(0,d.memo)(fh);const Ah=(0,d.forwardRef)(((e,t)=>{if(void 0!==e.options){const n=e.options.find((t=>{let{id:n,value:i}=t;return n===e.name||i===e.name}));let i="";return n&&(i=n.id.toLowerCase()),i?(0,Nr.jsx)("span",{ref:t,className:(0,xr.A)(`crypto-icon crypto-icon-${i} crypto-icon-${e.size}`,e.className),style:e.style,"aria-hidden":e.ariaHidden}):(0,Nr.jsx)(Sh,{className:"icon-stroke font-size-20 text-gray-60","aria-hidden":!0})}const n=e.name.toLowerCase();return(0,Nr.jsx)("span",{ref:t,className:(0,xr.A)(`crypto-icon crypto-icon-${n} crypto-icon-${e.size}`,e.className),style:e.style,"aria-hidden":e.ariaHidden})}));Ah.displayName="RawCryptoIcon";const Eh=(0,d.memo)(Ah),Ch=e=>(0,Nr.jsxs)(Nr.Fragment,{children:[e.showIcons&&(0,Nr.jsx)(Eh,{name:e.option.id,size:"sm",className:"shrink-0 me-2",ariaHidden:!0}),(0,Nr.jsx)("span",{className:"text-ellipsis",children:e.option.value})]}),vh=e=>(0,Nr.jsx)("div",{className:"search-select-input-icon","aria-hidden":!0,children:(0,Nr.jsx)(Eh,{name:e.value,size:"md",options:e.options})}),Nh=(0,d.memo)(vh),{useAddFieldToScroll:bh,useScrollToFieldsTrigger:Ph,ScrollToFieldsProvider:Dh}=(0,Zl.J)(),_h=()=>{const{state:e,controller:t}=eo(Ia.CRYPTO_CURRENCY),n=(0,qr.t)(),i=(0,wr.P)(),s=no(),a=(0,Br.$)(),r=(0,d.useRef)(null),o=(0,d.useRef)(null);(0,cc.f)({ref:r,autoFocus:!0,mode:oc.Q.DESKTOP});const c=(0,d.useRef)(null),l=(0,Pr.n)(),u=Ml(e.designationShakeKey,0!==e.designationShakeKey),h=lo(),[m,p]=(0,d.useState)(!1),[g,y]=(0,d.useState)(!1),[f,S]=(0,d.useState)(!1),A=(0,d.useCallback)((()=>f?n.translate("donateForm.donationAmountField.error.crypto.required"):m?n.translate("donateForm.donationAmountField.error.crypto.min",{amount:n.formatCurrency(e.minAmount,{currency:"USD",display:"round"})}):g?n.translate("donateForm.donationAmountField.error.crypto.max",{amount:n.formatCurrency(e.maxAmount,{currency:"USD",display:"round"})}):""),[n,g,m,f,e.maxAmount,e.minAmount]),E=(0,d.useMemo)((()=>m||g||f),[m,g,f]),C=(0,d.useMemo)((()=>e.currencies.map((e=>{let{name:t,code:n}=e;return{id:n,value:t}}))),[e.currencies]),v=(0,d.useMemo)((()=>({id:e.currencyCode,value:e.currencyName})),[e.currencyCode,e.currencyName]),N=(0,d.useCallback)((e=>{t.changeCryptoCurrency(e)}),[t]),b=(0,d.useCallback)((e=>{t.changeAmount(e)}),[t]),P=(0,d.useCallback)((()=>{t.validateAmount(),p(!a&&e.errors.amount.min),y(!a&&e.errors.amount.max),S(!a&&e.errors.amount.required)}),[t,a,e.errors.amount.min,e.errors.amount.max,e.errors.amount.required]);(0,d.useEffect)((()=>{o.current&&(p(!a&&e.errors.amount.min),y(!a&&e.errors.amount.max),S(!a&&e.errors.amount.required))}),[o,a,e.errors.amount.min,e.errors.amount.max,e.errors.amount.required]);const D=(0,d.useCallback)((()=>t.toggleTribute()),[t]),_=(0,d.useCallback)((e=>{t.changeTributeName(e)}),[t]),T=(0,d.useCallback)((e=>t.changeGoal(e)),[t]),O=(0,d.useCallback)((()=>t.savePrevComment()),[t]),x=(0,d.useCallback)((()=>t.addComment()),[t]),[k,I]=(0,d.useState)(!1),w=(0,Mc.D)((e=>I(e))),R=Ph();bh(r,(e=>e.amount.min||e.amount.max||e.amount.required)),bh(c,(e=>e.designation.required));const M=!l.preselectDesignation;return(0,Nr.jsxs)("form",{onSubmit:n=>{if(n.preventDefault(),R(),!e.livemode)return w.set([!0]),void w.set([!1],3e3);t.leave()},className:"flow-screen",children:[(0,Nr.jsx)(ac,{autoFocus:i,children:n.translate("common.screenAriaLabel",{screenTitle:`${n.translate("cryptoCurrencyScreen.title")}`})}),(0,Nr.jsx)(Sc,{className:"border-bottom-0",titleFullWidth:!0,children:(0,Nr.jsxs)("div",{className:(0,xr.A)("d-flex items-center justify-center",i?"pt-3 pb-2":"pt-6 pb-4"),children:[(0,Nr.jsx)(Vd,{className:"icon-fill shrink-0 font-size-28 text-green-80 me-2","aria-hidden":!0}),(0,Nr.jsx)("h2",{className:"title-1 text-truncate","data-qa":"crypto-donation-header",children:n.translate("cryptoCurrencyScreen.title")})]})}),(0,Nr.jsx)(Bo,{className:(0,xr.A)("px-body",{"pb-8":!i}),children:(0,Nr.jsxs)("div",{className:(0,xr.A)("fixed-container",{"grow-1 d-flex flex-column":!i}),children:[(0,Nr.jsx)(uh,{className:"search-select-crypto",label:n.translate("cryptoCurrencyScreen.selectCurrency.label"),labelFloating:!0,selectedOption:v,options:C,onSelect:N,displayName:e.currencyName,shouldSearchById:!0,clearOnFocus:!0,showIcons:!0,SelectedIconToRender:Nh,ListItemToRender:Ch,disabled:e.locked,dataQa:"currency"}),(0,Nr.jsxs)("div",{className:(0,xr.A)("mt-3",{shake:E}),children:[(0,Nr.jsx)("div",{ref:o,children:(0,Nr.jsx)(Jd,{ref:r,className:(0,xr.A)("group-price-control",{"has-error":E,disabled:e.locked}),currency:e.currencyCode,amount:e.amount,canModifyAmount:!0,withoutFraction:!1,disabled:e.locked,currencyService:h,donationType:fe.CRYPTO,hasError:E,errorLabel:A(),"aria-required":!0,"aria-invalid":E,"aria-describedby":`price-control-${s}-error`,qaActiveAttribute:"amount",onAmountChange:b,onAmountInputBlur:P})}),(0,Nr.jsx)("p",{className:"body-3 text-sans-serif d-flex items-center text-gray-60 mt-2",children:e.amount?(0,Nr.jsxs)(Nr.Fragment,{children:[(0,Nr.jsxs)("span",{className:"text-truncate",children:["",n.formatCurrency(e.amountInDefaultFiat,{currency:e.defaultFiatCurrency})]}),(0,Nr.jsx)("span",{className:"shrink-0 ms-1",children:e.defaultFiatCurrency})]}):(0,Nr.jsx)("span",{children:""})})]}),e.designation.shouldShowDesignation&&M&&(0,Nr.jsx)(ih,{className:"mt-5",goal:e.designation.goal,goals:a?[]:e.designation.goals,shake:u,hasError:e.errors.designation.required,disabled:e.locked,changeGoal:T,goalKey:e.designation.goalKey,isEditable:e.designation.isEditable,isDesignationRequired:M,ref:c}),e.tribute.show&&(0,Nr.jsx)(hh,{className:"mt-5",inHonorOfMaxLength:e.tribute.inHonorOfMaxLength,isActive:e.tribute.isActive,sharingEnabled:e.tribute.sharingEnabled,labelType:e.tribute.labelType,name:e.tribute.name,disabled:e.locked,onToggleTribute:D,onChangeTributeName:_}),e.designation.shouldShowDesignation&&!M&&(0,Nr.jsx)(ih,{className:(0,xr.A)({"mt-auto":!i&&e.tribute.show,"mt-5":!i&&!e.tribute.show,"mt-6":i}),goal:e.designation.goal,goals:e.designation.goals,shake:u,disabled:e.locked,hasError:e.errors.designation.required,changeGoal:T,goalKey:e.designation.goalKey,isEditable:e.designation.isEditable}),e.comment.isEnabled&&(0,Nr.jsx)(Kd,{className:(0,xr.A)({"mt-5":!e.designation.shouldShowDesignation&&!e.tribute.show||i&&!(e.designation.shouldShowDesignation&&!M),"mt-3":e.designation.shouldShowDesignation&&!M,"mt-auto":!i&&(e.designation.shouldShowDesignation&&M||e.tribute.show&&!e.designation.shouldShowDesignation)}),prevContent:e.comment.prevContent,content:e.comment.content,disabled:e.locked,onAddComment:x,onHighlight:O})]})}),(0,Nr.jsx)(ec,{children:e.isCryptoAccountConnected?(0,Nr.jsx)(Hc,{type:"submit",className:"btn-primary",processingState:e.processingState,errorTitle:e.errors.payment.title,errorMessage:e.errors.payment.message,disabled:k,testMode:k,dataQa:"donate-button",trackingElement:"payButton",children:k?n.translate("cryptoCurrencyScreen.testModeButton"):n.translate("cryptoCurrencyScreen.button")}):(0,Nr.jsx)("p",{className:"label-2 text-center text-red-80 text-ellipsis",dangerouslySetInnerHTML:{__html:n.translate("cryptoCurrencyScreen.connectionInfo")}})})]})};var Th=n(5777),Oh=n.n(Th);const xh=["bottom-end"],kh=[Po.b.CLICK],Ih=()=>{const e=(0,wr.P)(),t=(0,qr.t)(),n=(0,Ur.k)(),i=(0,d.useRef)(null),{countdown:s,isActive:a}=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:500;const n=(0,d.useRef)(Date.now()+e),i=(0,d.useRef)(null),[s,a]=(0,d.useState)(e),[r,o]=(0,d.useState)(!0),c=(0,wo.Q)(),l=(0,d.useCallback)((()=>{i.current&&(clearInterval(i.current),o(!1))}),[i]),u=(0,d.useCallback)((()=>{const e=n.current-Date.now();a(e)}),[n]);return(0,d.useEffect)((()=>{if(c)return o(!0),u(),i.current=setInterval(u,t),l}),[u,c,t,l]),(0,d.useEffect)((()=>{s<t&&l()}),[t,l,s]),{countdown:s,isActive:r}}(9e5),[r,o]=(0,d.useMemo)((()=>function(e){const t=new Date(e),[,n,i]=t.toISOString().slice(11,-5).split(":");return[n,i]}(s)),[s]),c=s<6e4;return(0,Nr.jsx)(Nr.Fragment,{children:a&&(0,Nr.jsxs)(Nr.Fragment,{children:[(0,Nr.jsxs)("button",{type:"button",ref:i,className:(0,xr.A)(n("crypto-timer"),{"crypto-timer-danger":c}),"aria-label":t.translate("cryptoWalletScreen.cryptoTimer.ariaLabel",{minutes:r,seconds:o}),"data-qa":"crypto-timer",children:[r,":",o]}),(0,Nr.jsx)(Do.S,{triggerRef:i,trigger:kh,placement:e?"bottom-end":"right-start",fallbackPlacements:xh,maxWidth:"232px",children:t.translate("cryptoWalletScreen.cryptoTimer.tooltipLabel")})]})})},wh=(0,d.memo)(Ih),Rh={src:"",height:40,width:40,excavate:!0},Mh={width:"168px",height:"168px"},Lh={[Ia.CRYPTO_CURRENCY]:()=>{const{state:e}=eo(Ia.CRYPTO_CURRENCY);return(0,Nr.jsx)(Dh,{state:e.errors,children:(0,Nr.jsx)(_h,{})})},[Ia.CRYPTO_WALLET]:e=>{const{showBadge:t}=e,{state:n}=eo(Ia.CRYPTO_WALLET),i=(0,wr.P)(),s=(0,qr.t)(),a=(0,Ur.k)(),r=(0,Dr.M)(),[o,c]=(0,d.useState)(!1),l=(0,Mc.D)((e=>c(e))),u=n.protocol?` (${n.protocol}) `:" ",h=`${n.networkName}${u}`;return(0,Nr.jsxs)("div",{className:"flow-screen",children:[(0,Nr.jsx)("div",{className:"sr-only",role:"status","aria-live":"polite",children:s.translate("common.screenAriaLabel",{screenTitle:`${s.translate("cryptoWalletScreen.title")}`})}),(0,Nr.jsx)(Sc,{showBadge:t,children:(0,Nr.jsxs)("div",{className:a("crypto-timer-holder"),children:[(0,Nr.jsx)("h2",{className:(0,xr.A)("title-2",i?"text-ellipsis":"text-line-clamp-2"),children:s.translate("cryptoWalletScreen.title")}),(0,Nr.jsx)(wh,{})]})}),(0,Nr.jsx)(Bo,{className:(0,xr.A)("px-body",{"py-6":!i}),children:(0,Nr.jsxs)("div",{className:"fixed-container",children:[(0,Nr.jsx)("p",{className:(0,xr.A)("text-center",i?"text-ellipsis":"text-line-clamp-4"),"data-qa":"crypto-wallet-screen",children:s.translate("cryptoWalletScreen.description")}),(0,Nr.jsxs)("p",{className:"text-center text-ellipsis mt-5",children:[(0,Nr.jsx)("span",{className:"subtitle-1 d-inline-block text-sans-serif",children:n.formattedAmount}),(0,Nr.jsx)("span",{className:"subtitle-2 d-inline-block ms-1-5",children:n.currencyCode})]}),(0,Nr.jsxs)("div",{className:"p-rel d-flex items-center justify-center bg-white border border-gray-20 border-radius-base mx-auto mt-2",style:Mh,"aria-hidden":!0,children:[(0,Nr.jsx)(Oh(),{value:n.walletAddress,renderAs:"svg",size:122,level:"H",imageSettings:Rh}),(0,Nr.jsx)(Eh,{name:n.currencyCode,size:"lg",className:"qr-code-icon"})]}),(0,Nr.jsxs)("button",{type:"button",className:"btn btn-default h-auto d-flex items-baseline text-left px-0 py-2-5 mt-8","aria-label":s.translate("cryptoWalletScreen.copyButtonAriaLabel"),disabled:o,"data-qa":"crypto-wallet-copy-button",onClick:()=>{if(l.set([!0]),l.set([!1],2e3),navigator.clipboard)navigator.clipboard.writeText(n.walletAddress);else{const e=r.document.createElement("textarea");e.value=n.walletAddress,e.setAttribute("readonly",""),e.style.position="absolute",e.style.left="-9999px",r.document.body.appendChild(e),e.select(),r.document.execCommand("copy"),r.document.body.removeChild(e)}},children:[(0,Nr.jsx)("span",{className:"btn-copy-address label-3 grow-1 text-nowrap ps-3 pe-2 overflow-x-auto","aria-hidden":!0,children:n.walletAddress}),(0,Nr.jsxs)("span",{className:(0,xr.A)("btn-copy-text caption-1 shrink-0 d-flex items-center p-rel pe-3",o?"text-green-80":"text-primary"),children:[o&&(0,Nr.jsx)("span",{className:"shrink-0 icon-slot icon-slot-18 me-1","aria-hidden":!0,children:(0,Nr.jsx)("span",{className:"p-abs centered font-size-18 text-green-80",children:(0,Nr.jsx)(Oc,{className:"icon-stroke icon-stroke-2 d-block"})})}),(0,Nr.jsx)("span",{className:"p-rel","aria-live":o?"polite":"off",children:o?s.translate("cryptoWalletScreen.copyButtonCopied"):s.translate("cryptoWalletScreen.copyButton")})]})]}),(0,Nr.jsxs)("p",{className:"body-4 mt-2 text-center text-truncate",dir:"ltr",children:[(0,Nr.jsx)("span",{className:"font-weight-500",children:h}),s.translate("cryptoWalletScreen.network")]})]})}),(0,Nr.jsx)(ec,{className:(0,xr.A)({"pt-8":i}),children:(0,Nr.jsx)("p",{className:(0,xr.A)("body-3 text-center",i?"text-ellipsis":"text-line-clamp-2"),children:s.translate("cryptoWalletScreen.message")})})]})},[ka.COMMENT]:Ec,[ka.PRIVACY]:jl,[ka.THANK_YOU]:jd,[ka.QUESTIONS]:Pu,[ka.BLOCKED]:tc};class Uh{constructor(e){this.intl=e}get default(){return{state:this.intl.translate("mailingAddressScreen.addressForm.state"),postcode:this.intl.translate("mailingAddressScreen.addressForm.postcode")}}get[u.tg.UNITED_KINGDOM](){return{state:this.intl.translate("mailingAddressScreen.addressForm.GB.state"),postcode:this.intl.translate("mailingAddressScreen.addressForm.GB.postcode")}}get[u.tg.CANADA](){return{state:this.intl.translate("mailingAddressScreen.addressForm.CA.state"),postcode:this.intl.translate("mailingAddressScreen.addressForm.CA.postcode")}}get[u.tg.IRELAND](){return{state:this.intl.translate("mailingAddressScreen.addressForm.IE.state"),postcode:this.intl.translate("mailingAddressScreen.addressForm.IE.postcode")}}get[u.tg.DENMARK](){return{state:this.intl.translate("mailingAddressScreen.addressForm.DK.state"),postcode:this.intl.translate("mailingAddressScreen.addressForm.DK.postcode")}}}var Fh;!function(e){e.AUSTRALIA="AU",e.AUSTRIA="AT",e.BELGIUM="BE",e.BRAZIL="BR",e.BULGARIA="BG",e.CANADA="CA",e.CROATIA="HR",e.CYPRUS="CY",e.CZECH_REPUBLIC="CZ",e.DENMARK="DK",e.ESTONIA="EE",e.FINLAND="FI",e.FRANCE="FR",e.GERMANY="DE",e.GREECE="GR",e.HONG_KONG="HK",e.HUNGARY="HU",e.INDIA="IN",e.INDONESIA="ID",e.IRELAND="IE",e.ITALY="IT",e.JAPAN="JP",e.LATVIA="LV",e.LITHUANIA="LT",e.LUXEMBOURG="LU",e.MALAYSIA="MY",e.MALTA="MT",e.MEXICO="MX",e.NETHERLANDS="NL",e.NEW_ZEALAND="NZ",e.NORWAY="NO",e.POLAND="PL",e.PORTUGAL="PT",e.ROMANIA="RO",e.SINGAPORE="SG",e.SLOVAKIA="SK",e.SLOVENIA="SI",e.SPAIN="ES",e.SWEDEN="SE",e.SWITZERLAND="CH",e.THAILAND="TH",e.UNITED_ARAB_EMIRATES="AE",e.UNITED_KINGDOM="GB",e.UNITED_STATES="US",e.GIBRALTAR="GI",e.LIECHTENSTEIN="LI",e.PHILIPPINES="PH",e.ISRAEL="IL"}(Fh||(Fh={}));class jh{get default(){return{state:"State",postcode:"Zip code"}}get[Fh.UNITED_KINGDOM](){return Object.assign(Object.assign({},this.default),{state:"County",postcode:"Postcode"})}get[Fh.CANADA](){return Object.assign(Object.assign({},this.default),{state:"Province",postcode:"Postal code"})}get[Fh.IRELAND](){return Object.assign(Object.assign({},this.default),{state:"Province",postcode:"Eircode"})}get[Fh.DENMARK](){return Object.assign(Object.assign({},this.default),{state:"Region",postcode:"Postcode"})}}const Bh=[Fh.UNITED_KINGDOM,Fh.CANADA,Fh.IRELAND,Fh.DENMARK];class Hh{constructor(e){this.addressLabelsProvider=e}get default(){return this.addressLabelsProvider.default}getByCountry(e){if(t=e,Bh.some((e=>t===e)))switch(e){case Fh.UNITED_KINGDOM:return this.addressLabelsProvider[Fh.UNITED_KINGDOM];case Fh.CANADA:return this.addressLabelsProvider[Fh.CANADA];case Fh.IRELAND:return this.addressLabelsProvider[Fh.IRELAND];case Fh.DENMARK:return this.addressLabelsProvider[Fh.DENMARK];default:throw new Error(`Unhandled custom country case: ${e}`)}var t;return this.default}}const qh=e=>{const{onChange:t,onSearch:n,onSelect:i,onClear:s,value:a,options:r,className:o,inputClasses:c,loading:u,placeholder:h,label:m,labelOptional:p,disabled:g,debounce:y=500,allowClear:f,hint:S,hintAriaLabel:A,hasError:E,errorLabel:C,dataQa:v,dataTestId:N,trackingElement:b,maxLength:P,selectedOption:D,ListItemToRender:_,SelectedIconToRender:T,showIcons:O,labelFloating:x,autoComplete:k,inputRef:I,autoFocus:w,autoFocusMode:R}=e,M=(0,l.Tt)(e,["onChange","onSearch","onSelect","onClear","value","options","className","inputClasses","loading","placeholder","label","labelOptional","disabled","debounce","allowClear","hint","hintAriaLabel","hasError","errorLabel","dataQa","dataTestId","trackingElement","maxLength","selectedOption","ListItemToRender","SelectedIconToRender","showIcons","labelFloating","autoComplete","inputRef","autoFocus","autoFocusMode"]),{set:L,clear:U}=(0,Mc.D)((e=>{n(e)})),F=(0,d.useCallback)((e=>{t(e),U(),L([e],y)}),[t,L,U,y]);return(0,Nr.jsx)(ch,Object.assign({inputRef:I,options:r,value:a,onChange:F,onSelect:i,className:o,inputClasses:c,placeholder:h,label:m,labelOptional:p,disabled:g,loading:u,hint:S,hintAriaLabel:A,allowClear:f,onClear:s,selectedOption:D,dataQa:v,dataTestId:N,hasError:E,errorLabel:C,trackingElement:b,ListItemToRender:_,SelectedIconToRender:T,showIcons:O,maxLength:P,labelFloating:x,autoComplete:k,autoFocus:w,autoFocusMode:R},M))};qh.displayName="_Autocomplete";const Gh=(0,d.memo)(qh),Vh=e=>{let{className:t}=e;const{state:n,controller:i}=eo(ka.MAILING_ADDRESS),s=(0,qr.t)(),a=no(),r=!n.validation.fields.countryCode.isValid,o=s.translate("mailingAddressScreen.addressForm.country"),c=n.countries.map((e=>{let{countryCode:t,countryName:n}=e;return{value:t,label:n}}));return(0,Nr.jsx)(sl,{id:`country-${a}`,label:o,labelFloating:!0,className:(0,xr.A)({"pe-16":r}),formLabelClass:(0,xr.A)({"pe-12":r}),formGroupClass:t,value:n.countryCode,disabled:n.locked,error:r,dataQa:"country-selector",onChange:e=>i.changeSelectedCountry(e.target.value),options:c,autoComplete:"country-name","aria-required":!0,"aria-describedby":`country-${a}-error`,children:r&&(0,Nr.jsxs)(Nr.Fragment,{children:[(0,Nr.jsx)(al.U,{className:"p-abs centered-right z-index-5 me-10",children:i.getAriaErrorMessage(o)}),(0,Nr.jsx)("p",{id:`country-${a}-error`,className:"sr-only",children:i.getAriaErrorMessage(o)})]})})},Yh=(0,d.memo)(Vh),Kh=e=>{let{setSelectRef:t,setInputRef:n,label:i,className:s}=e;const{state:a,controller:r}=eo(ka.MAILING_ADDRESS),o=r.getStates(a.countryCode),c=no(),l=!a.validation.fields.region.isValid,u=Array.isArray(o)?o.map((e=>{let{code:t,name:n}=e;return{value:t,label:n}})):[],d={};if(o&&!Array.isArray(o))for(const[e,t]of Object.entries(o))d[e]=t.map((e=>{let{code:t,name:n}=e;return{value:t,label:n}}));return(0,Nr.jsx)(Nr.Fragment,{children:o?(0,Nr.jsx)(sl,{id:`select-region-${c}`,setRef:t,label:i,labelFloating:!0,className:(0,xr.A)({"pe-16":l}),formLabelClass:(0,xr.A)({"pe-12":l}),formGroupClass:s,value:a.region,hasCustomValue:Boolean(a.region),customPlaceholder:i,options:u,groupedOptions:d,disabled:a.locked,error:l,"aria-required":!0,"aria-describedby":`region-${c}-error`,onChange:e=>r.changeRegion(e.target.value),dataQa:"state-selector",autoComplete:"address-level1",children:l&&(0,Nr.jsxs)(Nr.Fragment,{children:[(0,Nr.jsx)(al.U,{className:"p-abs centered-right me-10 z-index-5",children:r.getAriaErrorMessage(i)}),(0,Nr.jsx)("p",{id:`region-${c}-error`,className:"sr-only",children:r.getAriaErrorMessage(i)})]})}):(0,Nr.jsx)(dl.t,{id:`input-region-${c}`,setRef:n,label:i,labelFloating:!0,className:(0,xr.A)({"pe-10":l}),formLabelClass:(0,xr.A)({"pe-6":l}),formGroupClass:s,value:a.region,placeholder:i,autoComplete:"address-level1",disabled:a.locked,error:l,"aria-required":!0,"aria-describedby":`region-${c}-error`,onChange:e=>r.changeRegion(e.target.value),dataQa:"state-field",children:l&&(0,Nr.jsxs)(Nr.Fragment,{children:[(0,Nr.jsx)(al.U,{className:"p-abs centered-right me-4 z-index-5",children:r.getAriaErrorMessage(i)}),(0,Nr.jsx)("p",{id:`region-${c}-error`,className:"sr-only",children:r.getAriaErrorMessage(i)})]})})})},zh=(0,d.memo)(Kh),{useAddFieldToScroll:$h,useScrollToFieldsTrigger:Wh,ScrollToFieldsProvider:Xh}=(0,Zl.J)(),Qh=e=>{const{showBadge:t}=e,{state:n,controller:i}=eo(ka.MAILING_ADDRESS),s=(0,qr.t)(),a=(0,wr.P)(),r=(0,Br.$)(),o=no(),c=Wh(),l=(0,d.useCallback)((e=>{e.preventDefault(),c(),i.leave()}),[i,c]),u=(0,d.useMemo)((()=>function(e){return function(e){const t=e||new jh;return new Hh(t)}(new Uh(e))}(s)),[s]),h=(0,d.useMemo)((()=>u.getByCountry(n.countryCode)),[u,n.countryCode]),m=Ml(n.shakeKey,0!==n.shakeKey),p=i.isOnBehalfOf?s.translate("mailingAddressScreen.onBehalfOfTitle"):s.translate("mailingAddressScreen.title"),g=n.isAlternativeLabels?s.translate("mailingAddressScreen.addressForm.zipFirst.line1"):s.translate("mailingAddressScreen.addressForm.line1"),y=n.isAlternativeLabels?s.translate("mailingAddressScreen.addressForm.zipFirst.line2"):s.translate("mailingAddressScreen.addressForm.line2"),f=!n.validation.fields.postal.isValid,S=!n.validation.fields.line1.isValid,A=!n.validation.fields.line2.isValid,E=!n.validation.fields.city.isValid,C=(0,d.useCallback)((e=>{r||i.search(e)}),[i,r]),v=(0,d.useCallback)((e=>i.changeLine1(e)),[i]),N=(0,d.useCallback)((e=>i.changeLine2(e.target.value)),[i]),b=(0,d.useCallback)((e=>i.changePostalCode(e)),[i]),P=(0,d.useCallback)((e=>i.changePostalCode(e.target.value)),[i]),D=(0,d.useCallback)((e=>i.changeCity(e.target.value)),[i]),_=(0,d.useCallback)(((e,t)=>{const n=i.getPlaceById(e),s=i.shouldFindSubplaces(n);return s?i.retrieveSubplaces(n,t):i.retrieveDetails(n),s}),[i]),T=(0,d.useCallback)((e=>_(e,"line1")),[_]),O=(0,d.useCallback)((e=>_(e,"postal")),[_]),x=(0,d.useMemo)((()=>n.places.map((e=>{let{description:t,innerId:n}=e;return{id:n,value:t}}))),[n.places]),k=(0,d.useRef)(null),I=(0,d.useRef)(null),w=(0,d.useRef)(null),R=(0,d.useRef)(null),M=(0,d.useRef)(null),L=(0,d.useRef)(null);(0,cc.f)({ref:n.isLayoutPostalCodeFirst?I:k,autoFocus:!0,mode:oc.Q.DESKTOP});const U=n.isLayoutPostalCodeFirst;return $h(I,(e=>U&&!e.fields.postal.isValid)),$h(k,(e=>!e.fields.line1.isValid)),$h(w,(e=>!e.fields.city.isValid)),$h(R,(e=>!e.fields.region.isValid)),$h(M,(e=>!e.fields.region.isValid)),$h(L,(e=>!U&&!e.fields.postal.isValid)),(0,Nr.jsxs)("form",{className:"flow-screen",onSubmit:l,"data-qa":"active-screen-mailing-address","data-testid":"active-screen-mailing-address",children:[(0,Nr.jsx)("div",{className:"sr-only",role:"status","aria-live":"polite",children:s.translate("common.screenAriaLabel",{screenTitle:p})}),(0,Nr.jsx)(Sc,{title:p,showBadge:t}),(0,Nr.jsx)(Bo,{className:(0,xr.A)("px-body",{"py-8":!a,shake:m}),children:(0,Nr.jsxs)("div",{className:"fixed-container",children:[i.isOnBehalfOf&&(0,Nr.jsx)("p",{className:(0,xr.A)("text-center mb-5",a?"text-ellipsis":"text-line-clamp-3"),children:s.translate("mailingAddressScreen.onBehalfOfSubtitle")}),(0,Nr.jsxs)("div",{role:"group","aria-label":s.translate("mailingAddressScreen.addressGroupAriaLabel"),children:[n.isLayoutPostalCodeFirst&&(0,Nr.jsx)("div",{className:"mb-4",children:(0,Nr.jsx)(Gh,{labelFloating:!0,inputRef:I,inputClasses:"text-sans-serif",options:x,value:n.postal,onChange:b,onSelect:O,onSearch:C,hasError:f,errorLabel:s.translate("mailingAddressScreen.addressForm.error.valid",{field:h.postcode}),placeholder:h.postcode,label:h.postcode,disabled:n.locked,loading:n.isLoadingPlaces,dataQa:"post-code",maxLength:Ei.ZIP,autoComplete:"postal-code","aria-required":!0})}),(0,Nr.jsxs)("div",{className:"group-stacked-vertical",children:[(0,Nr.jsxs)("div",{className:"group-stacked-vertical group-stacked-item",children:[(0,Nr.jsx)(Gh,{inputRef:k,labelFloating:!0,label:g,className:"group-stacked-item",value:n.line1,placeholder:g,options:x,maxLength:Ei.STREET,loading:n.isLoadingPlaces,disabled:n.locked,hasError:S,errorLabel:i.getAriaErrorMessage(g),"aria-required":!0,onChange:v,onSelect:T,onSearch:C,dataQa:"street",dataTestId:"street",autoComplete:"address-line1"}),(0,Nr.jsx)(dl.t,{id:`address-line2-${o}`,label:y,labelFloating:!0,className:(0,xr.A)({"pe-10":A}),formLabelClass:(0,xr.A)({"pe-6":A}),formGroupClass:"group-stacked-item",value:n.line2,onChange:N,error:A,disabled:n.locked,autoComplete:"address-line2",placeholder:y,dataQa:"apartment-field",maxLength:Ei.APARTMENT,"aria-describedby":`line-2-${o}-error`,children:A&&(0,Nr.jsxs)(Nr.Fragment,{children:[(0,Nr.jsx)(al.U,{className:"p-abs centered-right z-index-5 me-4",children:i.getAriaErrorMessage(y)}),(0,Nr.jsx)("p",{id:`line-2-${o}-error`,className:"sr-only",children:i.getAriaErrorMessage(y)})]})})]}),(0,Nr.jsx)(dl.t,{label:s.translate("mailingAddressScreen.addressForm.city"),labelFloating:!0,id:`city-${o}`,setRef:w,className:(0,xr.A)({"pe-10":E}),formLabelClass:(0,xr.A)({"pe-6":E}),formGroupClass:"group-stacked-item",value:n.city,placeholder:s.translate("mailingAddressScreen.addressForm.city"),autoComplete:"address-level2",maxLength:Ei.CITY,disabled:n.locked,error:E,"aria-required":!0,"aria-describedby":`city-${o}-error`,onChange:D,dataQa:"city",dataTestId:"city",children:E&&(0,Nr.jsxs)(Nr.Fragment,{children:[(0,Nr.jsx)(al.U,{className:"p-abs centered-right z-index-5 me-4",children:i.getAriaErrorMessage(s.translate("mailingAddressScreen.addressForm.city"))}),(0,Nr.jsx)("p",{id:`city-${o}-error`,className:"sr-only",children:i.getAriaErrorMessage(s.translate("mailingAddressScreen.addressForm.city"))})]})})]}),(0,Nr.jsxs)("div",{className:"group-stacked-vertical mt-4",children:[!n.isLayoutPostalCodeFirst&&(0,Nr.jsxs)("div",{className:"group-stacked-horizontal group-stacked-item",children:[n.isRegionEnabled&&(0,Nr.jsx)(zh,{label:h.state,className:"group-stacked-item w-50 me-1",setInputRef:R,setSelectRef:M}),(0,Nr.jsx)(dl.t,{id:`postal-${o}`,setRef:L,label:h.postcode,labelFloating:!0,className:(0,xr.A)("text-sans-serif",{"pe-10":f}),formLabelClass:(0,xr.A)({"pe-6":f}),formGroupClass:(0,xr.A)("group-stacked-item",n.isRegionEnabled?"w-50 ms-1":"w-100"),value:n.postal,onChange:P,error:f,disabled:n.locked,autoComplete:"postal-code",placeholder:h.postcode,dataQa:"zip-code",maxLength:Ei.ZIP,"aria-required":!0,"aria-describedby":`postcode-${o}-error`,children:f&&(0,Nr.jsxs)(Nr.Fragment,{children:[(0,Nr.jsx)(al.U,{className:"p-abs centered-right z-index-5 me-4",children:s.translate("mailingAddressScreen.addressForm.error.valid",{field:h.postcode})}),(0,Nr.jsx)("p",{id:`postcode-${o}-error`,className:"sr-only",children:s.translate("mailingAddressScreen.addressForm.error.valid",{field:h.postcode})})]})})]}),(0,Nr.jsx)(Yh,{className:"group-stacked-item"})]})]})]})}),(0,Nr.jsxs)(ec,{children:[(0,Nr.jsx)(Hc,{type:"submit",className:"btn-primary",processingState:n.processingState,errorTitle:n.hasServerValidationError?s.translate("mailingAddressScreen.validationError.title"):n.payErrorMessage||s.translate("common.errorOccurredText"),errorMessage:n.additionalPayErrorMessage,dataQa:"mailing-continue",trackingElement:n.isPaymentScreen&&n.isRequired?"payButton":"nextButton",dataTestId:"mailing-continue-button",children:n.isPaymentScreen&&n.isRequired?vc(s,n.formattedAmount,n.frequency):s.translate("mailingAddressScreen.button.continue")}),!n.isRequired&&(0,Nr.jsx)("div",{className:"d-flex justify-center mt-5",children:(0,Nr.jsx)("button",{type:"button",className:"btn-link text-truncate",disabled:n.locked,onClick:()=>i.skip(),"data-qa":"skip-button","data-tracking-element-name":"skipButton","data-testid":"mailing-skip-button",children:s.translate("mailingAddressScreen.button.skip")})})]})]})},Zh=(0,d.memo)(Qh),Jh=e=>{let{disabled:t,onClose:n,onSave:i,processingState:s,serverErrors:a}=e;const r=(0,qr.t)();return(0,Nr.jsxs)(Nr.Fragment,{children:[(0,Nr.jsx)(Hc,{type:"submit",className:"btn-primary",disabled:t,onClick:i,trackingElement:"remindMeLaterConfirmButton",processingState:s,serverErrors:a,errorTitle:r.translate("common.errorOccurredText"),dataQa:"remind-me-later-confirm-button",children:r.translate("remindMeScreen.button.confirm")}),(0,Nr.jsx)("button",{type:"button",className:"btn btn-default mt-2",disabled:t,onClick:n,"data-tracking-element-name":"remindMeLaterCloseButton","data-qa":"remind-me-later-no-thanks-button",children:r.translate("remindMeScreen.button.close")})]})},em=(0,d.memo)(Jh),tm=e=>{let{onTermsAcceptionChange:t,checked:n,isValid:i,className:s,locked:a,text:r,setRef:o}=e;const c=(0,qr.t)(),l=(0,wr.P)(),u=(0,d.useRef)(null);return(0,d.useImperativeHandle)(o,(()=>u.current),[]),(0,Nr.jsx)(Qc,{setRef:u,className:s,checked:n,error:!i,disabled:a,onChange:t,dataQa:"remind-me-later-accept-terms-checkbox",children:(0,Nr.jsx)("span",{className:(0,xr.A)({"text-line-clamp-2":!l}),dir:"auto",children:void 0===r||""===r?c.translate("remindMeScreen.termsText"):(0,Nr.jsx)("span",{dangerouslySetInnerHTML:{__html:r}})})})},nm=e=>{const t=no();return(0,Nr.jsxs)("svg",{className:e.className,"aria-hidden":!!e.ariaHidden||void 0,height:e.height||24,width:e.width||22,fill:"none",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",children:[(0,Nr.jsxs)("radialGradient",{id:`a-${t}`,cx:"0",cy:"0",gradientTransform:"matrix(2.74225404 11.29096326 -11.5614986 2.80795938 12 10.9506)",gradientUnits:"userSpaceOnUse",r:"1",children:[(0,Nr.jsx)("stop",{offset:"0",stopColor:"#4cadf4"}),(0,Nr.jsx)("stop",{offset:".816847",stopColor:"#44b8f0"}),(0,Nr.jsx)("stop",{offset:".861287",stopColor:"#409ff2"}),(0,Nr.jsx)("stop",{offset:"1",stopColor:"#1f6fef"})]}),(0,Nr.jsxs)("radialGradient",{id:`b-${t}`,cx:"0",cy:"0",gradientTransform:"matrix(-2.81274751 -9.14752313 9.64618176 -2.96607873 12 11.4004)",gradientUnits:"userSpaceOnUse",r:"1",children:[(0,Nr.jsx)("stop",{offset:".561045",stopColor:"#4dd0f0",stopOpacity:"0"}),(0,Nr.jsx)("stop",{offset:".868337",stopColor:"#4dd0f0",stopOpacity:".754177"}),(0,Nr.jsx)("stop",{offset:"1",stopColor:"#4dd0f0",stopOpacity:"0"})]}),(0,Nr.jsxs)("radialGradient",{id:`c-${t}`,cx:"0",cy:"0",gradientTransform:"matrix(-4.76432055 -9.71917643 20.58418864 -10.09032748 13.0442 14.6319)",gradientUnits:"userSpaceOnUse",r:"1",children:[(0,Nr.jsx)("stop",{offset:".0102742",stopColor:"#4c9ef6"}),(0,Nr.jsx)("stop",{offset:".885024",stopColor:"#4b9ef6",stopOpacity:"0"})]}),(0,Nr.jsxs)("radialGradient",{id:`d-${t}`,cx:"0",cy:"0",gradientTransform:"matrix(3.31321384 4.86948528 -10.57415853 7.19469231 8.68678 7.00844)",gradientUnits:"userSpaceOnUse",r:"1",children:[(0,Nr.jsx)("stop",{offset:".173971",stopColor:"#4bcdf0"}),(0,Nr.jsx)("stop",{offset:".885024",stopColor:"#4ccef1",stopOpacity:"0"})]}),(0,Nr.jsxs)("linearGradient",{id:`e-${t}`,gradientUnits:"userSpaceOnUse",x1:"11.9996",x2:"13.77",y1:"6.09863",y2:"23.2126",children:[(0,Nr.jsx)("stop",{offset:"0",stopColor:"#fff"}),(0,Nr.jsx)("stop",{offset:"1",stopColor:"#fff",stopOpacity:"0"})]}),(0,Nr.jsxs)("radialGradient",{id:`f-${t}`,cx:"0",cy:"0",gradientTransform:"matrix(0 6.71448 -11.4928 0 11.9996 11.1869)",gradientUnits:"userSpaceOnUse",r:"1",children:[(0,Nr.jsx)("stop",{offset:"0",stopColor:"#fff",stopOpacity:"0"}),(0,Nr.jsx)("stop",{offset:".91",stopColor:"#fff"})]}),(0,Nr.jsx)("circle",{cx:"12",cy:"11.8779",fill:`url(#a-${t})`,r:"11"}),(0,Nr.jsx)("circle",{cx:"12",cy:"11.8779",fill:`url(#b-${t})`,fillOpacity:".3",r:"11"}),(0,Nr.jsx)("circle",{cx:"12",cy:"11.8779",fill:`url(#c-${t})`,r:"11"}),(0,Nr.jsx)("circle",{cx:"12",cy:"11.8779",fill:`url(#d-${t})`,fillOpacity:".8",r:"11"}),(0,Nr.jsx)("path",{d:"m11.2885 8.33683.7111.71934.7112-.71934c2.0415-2.06503 4.4425-1.26364 5.1381.30145.3554.79955.3807 1.98542-.4866 3.44802-.8318 1.4027-2.4787 3.034-5.3627 4.6715-2.88397-1.6375-4.53087-3.2689-5.36268-4.6716-.8673-1.4626-.84197-2.64841-.48661-3.44797.69559-1.56507 3.09662-2.36647 5.13819-.3014z",stroke:"#fff",strokeWidth:"2"}),(0,Nr.jsx)("path",{d:"m11.9996 17.9014c13.1081-7.111 4.9269-15.25119 0-10.26762-4.92684-4.98363-13.10811 3.15662 0 10.26762z",fill:"#6bb1d4",fillOpacity:".6"}),(0,Nr.jsx)("path",{d:"m11.9996 17.9014c13.1081-7.111 4.9269-15.25119 0-10.26762-4.92684-4.98363-13.10811 3.15662 0 10.26762z",fill:`url(#e-${t})`,fillOpacity:".8"}),(0,Nr.jsx)("path",{d:"m11.9996 17.9014c13.1081-7.111 4.9269-15.25119 0-10.26762-4.92684-4.98363-13.10811 3.15662 0 10.26762z",fill:`url(#f-${t})`}),(0,Nr.jsx)("path",{d:"m11.644 7.98531.3556.35967.3556-.35967c2.2525-2.27841 5.0915-1.48313 5.9506.4499.4334.97502.4199 2.33219-.5134 3.90609-.9147 1.5424-2.71 3.2801-5.7928 4.9898-3.08277-1.7097-4.8781-3.4474-5.79275-4.9898-.93333-1.574-.94679-2.93111-.51345-3.90614.85913-1.93302 3.69816-2.72829 5.9506-.44985z",stroke:"#3398f1"})]})},im=(0,d.memo)(nm),sm=e=>{const t=no();return(0,Nr.jsxs)("svg",{className:e.className,"aria-hidden":!!e.ariaHidden||void 0,height:e.height||46,width:e.width||41,viewBox:"0 0 41 46",fill:"none",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",children:[(0,Nr.jsxs)("filter",{id:`a-${t}`,colorInterpolationFilters:"sRGB",filterUnits:"userSpaceOnUse",height:"38",width:"40.3477",x:"0",y:"7",children:[(0,Nr.jsx)("feFlood",{floodOpacity:"0",result:"BackgroundImageFix"}),(0,Nr.jsx)("feBlend",{in:"SourceGraphic",in2:"BackgroundImageFix",mode:"normal",result:"shape"}),(0,Nr.jsx)("feColorMatrix",{in:"SourceAlpha",result:"hardAlpha",type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0"}),(0,Nr.jsx)("feOffset",{dx:"-1",dy:"-1"}),(0,Nr.jsx)("feGaussianBlur",{stdDeviation:".5"}),(0,Nr.jsx)("feComposite",{in2:"hardAlpha",k2:"-1",k3:"1",operator:"arithmetic"}),(0,Nr.jsx)("feColorMatrix",{type:"matrix",values:"0 0 0 0 0.722448 0 0 0 0 0.424883 0 0 0 0 0.0858854 0 0 0 0.59 0"}),(0,Nr.jsx)("feBlend",{in2:"shape",mode:"normal",result:"effect1_innerShadow_35866_79093"})]}),(0,Nr.jsxs)("radialGradient",{id:`b-${t}`,cx:"0",cy:"0",gradientTransform:"matrix(4.80000386 4.99999715 -4.99583475 4.79600795 18.6719 3.5)",gradientUnits:"userSpaceOnUse",r:"1",children:[(0,Nr.jsx)("stop",{offset:".394249",stopColor:"#f3c352"}),(0,Nr.jsx)("stop",{offset:"1",stopColor:"#d97922"})]}),(0,Nr.jsxs)("linearGradient",{id:`c-${t}`,children:[(0,Nr.jsx)("stop",{offset:"0",stopColor:"#fff"}),(0,Nr.jsx)("stop",{offset:"1",stopColor:"#fff",stopOpacity:"0"})]}),(0,Nr.jsx)("linearGradient",{id:`d-${t}`,gradientUnits:"userSpaceOnUse",x1:"17.6719",x2:"19.9748",xlinkHref:`#c-${t}`,y1:"2.66667",y2:"5.77561"}),(0,Nr.jsxs)("linearGradient",{id:`e-${t}`,gradientUnits:"userSpaceOnUse",x1:"1.17334",x2:"41.6738",y1:"34",y2:"34",children:[(0,Nr.jsx)("stop",{offset:".135247",stopColor:"#f3c352"}),(0,Nr.jsx)("stop",{offset:".249813",stopColor:"#ffd87c"}),(0,Nr.jsx)("stop",{offset:".409209",stopColor:"#f3c352"}),(0,Nr.jsx)("stop",{offset:".752403",stopColor:"#c57429"}),(0,Nr.jsx)("stop",{offset:"1",stopColor:"#bf7c19"})]}),(0,Nr.jsxs)("linearGradient",{id:`f-${t}`,gradientUnits:"userSpaceOnUse",x1:"40.6738",x2:"32.1738",y1:"28.5",y2:"31.5",children:[(0,Nr.jsx)("stop",{offset:"0",stopColor:"#f3c352"}),(0,Nr.jsx)("stop",{offset:"1",stopColor:"#f3c352",stopOpacity:"0"})]}),(0,Nr.jsx)("linearGradient",{id:`g-${t}`,gradientUnits:"userSpaceOnUse",x1:"4.67334",x2:"28.1733",xlinkHref:`#c-${t}`,y1:"20.5",y2:"40.5"}),(0,Nr.jsx)("path",{d:"m17.1719 5c0-1.933 1.567-3.5 3.5-3.5s3.5 1.567 3.5 3.5v5.5h-7z",fill:`url(#b-${t})`,stroke:`url(#d-${t})`}),(0,Nr.jsxs)("g",{filter:`url(#a-${t})`,children:[(0,Nr.jsx)("path",{d:"m20.6737 8c-8.8365 0-14.99999 7.1634-14.99999 16l-1 9.4441c0 1.9793-2.03499 3.6492-2.72998 5.5025l-.75 2c-.735473 1.9613.71437 4.0534 2.80899 4.0534h33.34198c2.0946 0 3.5445-2.0921 2.809-4.0534l-.75-2c-.695-1.8533-2.73-3.5232-2.73-5.5025l-1-9.4441c0-8.8366-6.1634-16-15-16z",fill:`url(#e-${t})`}),(0,Nr.jsx)("path",{d:"m20.6737 8c-8.8365 0-14.99999 7.1634-14.99999 16l-1 9.4441c0 1.9793-2.03499 3.6492-2.72998 5.5025l-.75 2c-.735473 1.9613.71437 4.0534 2.80899 4.0534h33.34198c2.0946 0 3.5445-2.0921 2.809-4.0534l-.75-2c-.695-1.8533-2.73-3.5232-2.73-5.5025l-1-9.4441c0-8.8366-6.1634-16-15-16z",fill:`url(#f-${t})`,fillOpacity:".8"})]}),(0,Nr.jsx)("path",{d:"m5.92232 24.0263.00139-.0131v-.0132c0-8.7202 6.07229-15.75 14.74999-15.75s14.75 7.0298 14.75 15.75v.0132l.0014.0131.9986 9.4313c.0046 1.0662.5526 2.0299 1.1461 2.9233.1312.1975.2644.3913.3959.5828.4816.7012.9414 1.3706 1.2039 2.0707l.75 2c.6742 1.7978-.6548 3.7156-2.5749 3.7156h-33.34198c-1.92007 0-3.249092-1.9178-2.57491-3.7156l.75-2c.26254-.7001.72236-1.3696 1.20396-2.0707.1315-.1915.26463-.3853.39581-.5828.59354-.8934 1.14152-1.8571 1.1461-2.9234z",stroke:`url(#g-${t})`,strokeOpacity:".6",strokeWidth:".5"})]})},am=(0,d.memo)(sm),rm=e=>{const t=no();return(0,Nr.jsxs)("svg",{className:e.className,"aria-hidden":!!e.ariaHidden||void 0,height:e.height||80,width:e.width||80,fill:"none",viewBox:"0 0 80 80",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",children:[(0,Nr.jsxs)("filter",{id:`a-${t}`,colorInterpolationFilters:"sRGB",filterUnits:"userSpaceOnUse",height:"67",width:"81",x:"-.972656",y:"30",children:[(0,Nr.jsx)("feFlood",{floodOpacity:"0",result:"BackgroundImageFix"}),(0,Nr.jsx)("feColorMatrix",{in:"SourceAlpha",result:"hardAlpha",type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0"}),(0,Nr.jsx)("feMorphology",{in:"SourceAlpha",operator:"dilate",radius:"3",result:"effect1_dropShadow_35224_19304"}),(0,Nr.jsx)("feOffset",{dy:"4"}),(0,Nr.jsx)("feGaussianBlur",{stdDeviation:"2"}),(0,Nr.jsx)("feComposite",{in2:"hardAlpha",operator:"out"}),(0,Nr.jsx)("feColorMatrix",{type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.25 0"}),(0,Nr.jsx)("feBlend",{in2:"BackgroundImageFix",mode:"normal",result:"effect1_dropShadow_35224_19304"}),(0,Nr.jsx)("feBlend",{in:"SourceGraphic",in2:"effect1_dropShadow_35224_19304",mode:"normal",result:"shape"})]}),(0,Nr.jsxs)("filter",{id:`b-${t}`,colorInterpolationFilters:"sRGB",filterUnits:"userSpaceOnUse",height:"52.8696",width:"72.2329",x:"8.26211",y:"35.5863",children:[(0,Nr.jsx)("feFlood",{floodOpacity:"0",result:"BackgroundImageFix"}),(0,Nr.jsx)("feColorMatrix",{in:"SourceAlpha",result:"hardAlpha",type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0"}),(0,Nr.jsx)("feOffset",{dx:"-.695652",dy:"-.695652"}),(0,Nr.jsx)("feGaussianBlur",{stdDeviation:".57971"}),(0,Nr.jsx)("feComposite",{in2:"hardAlpha",operator:"out"}),(0,Nr.jsx)("feColorMatrix",{type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.1 0"}),(0,Nr.jsx)("feBlend",{in2:"BackgroundImageFix",mode:"normal",result:"effect1_dropShadow_35224_19304"}),(0,Nr.jsx)("feBlend",{in:"SourceGraphic",in2:"effect1_dropShadow_35224_19304",mode:"normal",result:"shape"})]}),(0,Nr.jsxs)("filter",{id:`c-${t}`,colorInterpolationFilters:"sRGB",filterUnits:"userSpaceOnUse",height:"52.8696",width:"72.2329",x:"-.432518",y:"35.5863",children:[(0,Nr.jsx)("feFlood",{floodOpacity:"0",result:"BackgroundImageFix"}),(0,Nr.jsx)("feColorMatrix",{in:"SourceAlpha",result:"hardAlpha",type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0"}),(0,Nr.jsx)("feOffset",{dx:".695652",dy:"-.695652"}),(0,Nr.jsx)("feGaussianBlur",{stdDeviation:".57971"}),(0,Nr.jsx)("feComposite",{in2:"hardAlpha",operator:"out"}),(0,Nr.jsx)("feColorMatrix",{type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.1 0"}),(0,Nr.jsx)("feBlend",{in2:"BackgroundImageFix",mode:"normal",result:"effect1_dropShadow_35224_19304"}),(0,Nr.jsx)("feBlend",{in:"SourceGraphic",in2:"effect1_dropShadow_35224_19304",mode:"normal",result:"shape"})]}),(0,Nr.jsxs)("filter",{id:`d-${t}`,colorInterpolationFilters:"sRGB",filterUnits:"userSpaceOnUse",height:"29.7837",width:"82.3188",x:"-1.13208",y:"58.664",children:[(0,Nr.jsx)("feFlood",{floodOpacity:"0",result:"BackgroundImageFix"}),(0,Nr.jsx)("feColorMatrix",{in:"SourceAlpha",result:"hardAlpha",type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0"}),(0,Nr.jsx)("feOffset",{dy:"-.695652"}),(0,Nr.jsx)("feGaussianBlur",{stdDeviation:".57971"}),(0,Nr.jsx)("feComposite",{in2:"hardAlpha",operator:"out"}),(0,Nr.jsx)("feColorMatrix",{type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.1 0"}),(0,Nr.jsx)("feBlend",{in2:"BackgroundImageFix",mode:"normal",result:"effect1_dropShadow_35224_19304"}),(0,Nr.jsx)("feBlend",{in:"SourceGraphic",in2:"effect1_dropShadow_35224_19304",mode:"normal",result:"shape"})]}),(0,Nr.jsxs)("linearGradient",{id:`e-${t}`,gradientUnits:"userSpaceOnUse",x1:"40.0273",x2:"40.0273",y1:"44.5256",y2:"88.0038",children:[(0,Nr.jsx)("stop",{offset:"0",stopColor:"#2c3440"}),(0,Nr.jsx)("stop",{offset:"1",stopColor:"#2c2d31"})]}),(0,Nr.jsxs)("radialGradient",{id:`f-${t}`,cx:"0",cy:"0",gradientTransform:"matrix(0 -24 33.5 0 39.5273 57)",gradientUnits:"userSpaceOnUse",r:"1",children:[(0,Nr.jsx)("stop",{offset:"0",stopColor:"#eba837"}),(0,Nr.jsx)("stop",{offset:"1",stopColor:"#915b00",stopOpacity:"0"})]}),(0,Nr.jsxs)("linearGradient",{id:`g-${t}`,children:[(0,Nr.jsx)("stop",{offset:"0",stopColor:"#151518"}),(0,Nr.jsx)("stop",{offset:"1",stopColor:"#313b48"})]}),(0,Nr.jsx)("linearGradient",{id:`h-${t}`,gradientUnits:"userSpaceOnUse",x1:"62",x2:"62",xlinkHref:`#g-${t}`,y1:"88",y2:"51"}),(0,Nr.jsxs)("linearGradient",{id:`i-${t}`,children:[(0,Nr.jsx)("stop",{offset:"0",stopColor:"#cf8413"}),(0,Nr.jsx)("stop",{offset:"1",stopColor:"#2d3541",stopOpacity:"0"})]}),(0,Nr.jsx)("radialGradient",{id:`j-${t}`,cx:"0",cy:"0",gradientTransform:"matrix(27.50001912 27.50001912 -27.50001912 27.50001912 49.5352 60)",gradientUnits:"userSpaceOnUse",r:"1",xlinkHref:`#i-${t}`}),(0,Nr.jsxs)("radialGradient",{id:`k-${t}`,cx:"0",cy:"0",gradientTransform:"matrix(20.50001554 20.50001554 -20.50001554 20.50001554 52.5273 57)",gradientUnits:"userSpaceOnUse",r:"1",children:[(0,Nr.jsx)("stop",{offset:"0",stopColor:"#f1bf51"}),(0,Nr.jsx)("stop",{offset:"1",stopColor:"#cd8131",stopOpacity:"0"})]}),(0,Nr.jsx)("linearGradient",{id:`l-${t}`,gradientUnits:"userSpaceOnUse",x1:"18.0625",x2:"18.0625",xlinkHref:`#g-${t}`,y1:"88",y2:"51"}),(0,Nr.jsx)("radialGradient",{id:`m-${t}`,cx:"0",cy:"0",gradientTransform:"matrix(-27.50001912 27.50001912 -27.50001912 -27.50001912 30.5273 60)",gradientUnits:"userSpaceOnUse",r:"1",xlinkHref:`#i-${t}`}),(0,Nr.jsxs)("radialGradient",{id:`n-${t}`,cx:"0",cy:"0",gradientTransform:"matrix(-17.4999736 17.4999736 -17.4999736 -17.4999736 23.5273 55)",gradientUnits:"userSpaceOnUse",r:"1",children:[(0,Nr.jsx)("stop",{offset:"0",stopColor:"#fff"}),(0,Nr.jsx)("stop",{offset:".0001",stopColor:"#ffe24b"}),(0,Nr.jsx)("stop",{offset:"1",stopColor:"#fff",stopOpacity:"0"})]}),(0,Nr.jsxs)("radialGradient",{id:`o-${t}`,cx:"0",cy:"0",gradientTransform:"matrix(0 24.5 -24.5 0 40.0273 61.5)",gradientUnits:"userSpaceOnUse",r:"1",children:[(0,Nr.jsx)("stop",{offset:"0",stopColor:"#e4a946"}),(0,Nr.jsx)("stop",{offset:".542849",stopColor:"#b37c20",stopOpacity:".7"}),(0,Nr.jsx)("stop",{offset:"1",stopOpacity:"0"})]}),(0,Nr.jsxs)("linearGradient",{id:`p-${t}`,gradientUnits:"userSpaceOnUse",x1:"40.0273",x2:"40.0273",y1:"60.5",y2:"86.5",children:[(0,Nr.jsx)("stop",{offset:"0",stopColor:"#ffd267"}),(0,Nr.jsx)("stop",{offset:"1",stopOpacity:"0"})]}),(0,Nr.jsxs)("linearGradient",{id:`q-${t}`,gradientUnits:"userSpaceOnUse",x1:"65.0273",x2:"65.0273",y1:"80",y2:"51",children:[(0,Nr.jsx)("stop",{offset:"0",stopColor:"#222832"}),(0,Nr.jsx)("stop",{offset:"1",stopColor:"#31373f",stopOpacity:"0"})]}),(0,Nr.jsx)("clipPath",{id:`r-${t}`,children:(0,Nr.jsx)("rect",{height:"80",rx:"2",width:"80"})}),(0,Nr.jsx)("clipPath",{id:`s-${t}`,children:(0,Nr.jsx)("rect",{height:"80",rx:"1.3913",width:"80",x:".027344"})}),(0,Nr.jsx)("g",{clipPath:`url(#r-${t})`,children:(0,Nr.jsxs)("g",{clipPath:`url(#s-${t})`,children:[(0,Nr.jsx)("path",{d:"m.027344 37.4531h80v50.5507h-80z",fill:`url(#e-${t})`}),(0,Nr.jsx)("path",{d:"m.0273438 37.4531h79.9999562l-36.7516-26.4186c-1.9409-1.39512-4.5558-1.39513-6.4967 0z",fill:"#2c3440"}),(0,Nr.jsx)("path",{d:"m6.48047 37.4591h67.09683l-30.3001-21.7809c-1.9409-1.3952-4.5558-1.3952-6.4967 0z",fill:"#222832"}),(0,Nr.jsxs)("g",{filter:`url(#a-${t})`,children:[(0,Nr.jsx)("rect",{fill:"#4a4a4d",height:"53",rx:"1.15942",width:"67",x:"6.02734",y:"33"}),(0,Nr.jsx)("rect",{fill:`url(#f-${t})`,fillOpacity:".3",height:"53",rx:"1.15942",width:"67",x:"6.02734",y:"33"})]}),(0,Nr.jsxs)("g",{filter:`url(#b-${t})`,children:[(0,Nr.jsx)("path",{d:"m80.0312 37.4414-69.913 50.5507h69.913z",fill:`url(#h-${t})`}),(0,Nr.jsx)("path",{d:"m80.0312 37.4414-69.913 50.5507h69.913z",fill:`url(#j-${t})`,fillOpacity:".3"}),(0,Nr.jsx)("path",{d:"m79.7812 87.7421v-49.8114l-68.8906 49.8114z",stroke:`url(#k-${t})`,strokeOpacity:".5",strokeWidth:".5"})]}),(0,Nr.jsxs)("g",{filter:`url(#c-${t})`,children:[(0,Nr.jsx)("path",{d:"m.03125 37.4414 69.91305 50.5507h-69.91305z",fill:`url(#l-${t})`}),(0,Nr.jsx)("path",{d:"m.03125 37.4414 69.91305 50.5507h-69.91305z",fill:`url(#m-${t})`,fillOpacity:".3"}),(0,Nr.jsx)("path",{d:"m.28125 87.7421v-49.8114l68.89065 49.8114z",stroke:`url(#n-${t})`,strokeOpacity:".5",strokeWidth:".5"})]}),(0,Nr.jsxs)("g",{filter:`url(#d-${t})`,children:[(0,Nr.jsx)("path",{d:"m.0273438 87.9839h79.9999562l-36.7516-26.4186c-1.9409-1.3952-4.5558-1.3952-6.4967 0z",fill:"#1e2736"}),(0,Nr.jsx)("path",{d:"m.0273438 87.9839h79.9999562l-36.7516-26.4186c-1.9409-1.3952-4.5558-1.3952-6.4967 0z",fill:`url(#o-${t})`,fillOpacity:".3"}),(0,Nr.jsx)("path",{d:"m36.9249 61.7683-36.121461 25.9656h78.447861l-36.1215-25.9656c-1.8537-1.3325-4.3512-1.3325-6.2049 0z",stroke:`url(#p-${t})`,strokeWidth:".5"})]}),(0,Nr.jsx)("path",{d:"m.027344 51h80v29h-80z",fill:`url(#q-${t})`})]})})]})},om=(0,d.memo)(rm),cm=e=>{const t=no();return(0,Nr.jsxs)("svg",{className:e.className,"aria-hidden":!!e.ariaHidden||void 0,height:e.height||61,width:e.width||60,viewBox:"0 0 60 61",fill:"none",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",children:[(0,Nr.jsxs)("filter",{id:`a-${t}`,colorInterpolationFilters:"sRGB",filterUnits:"userSpaceOnUse",height:"62",width:"62",x:"0",y:"1",children:[(0,Nr.jsx)("feFlood",{floodOpacity:"0",result:"BackgroundImageFix"}),(0,Nr.jsx)("feBlend",{in:"SourceGraphic",in2:"BackgroundImageFix",mode:"normal",result:"shape"}),(0,Nr.jsx)("feGaussianBlur",{result:"effect1_foregroundBlur_35868_79127",stdDeviation:"4.5"})]}),(0,Nr.jsx)("clipPath",{id:`b-${t}`,children:(0,Nr.jsx)("path",{d:"m0 0h60v61h-60z"})}),(0,Nr.jsx)("g",{clipPath:`url(#b-${t})`,children:(0,Nr.jsx)("g",{filter:`url(#a-${t})`,children:(0,Nr.jsx)("path",{d:"m26.6492 13.8261c0-2.1131 1.7248-3.8261 3.8524-3.8261 2.1277 0 3.8525 1.713 3.8525 3.8261v3.3681c6.3974 1.7208 10.5959 7.6973 10.5959 14.8058l.9631 9.0335c0 1.1458.718-1.6428 1.4332-.6092.4665.6741.9319 1.3466 1.1961 2.0464l.7223 1.913c.7084 1.876 5.2393 9.6163 3.2219 9.6163l-15.3115-5.7391c-.4673 3.2448-2.962 3.8261-6.3584 3.8261s-6.5212-.5813-6.9886-3.8261l-14.19963 5.2608c-2.01735 0 1.40523-7.262 2.11353-9.138l.7224-1.913c.2642-.6998.7296-1.3723 1.1961-2.0464.7152-1.0336 1.4331 1.755 1.4331.6092l.9632-9.0335c0-7.1072 4.1969-13.0828 10.5924-14.8049z",fill:"#252525",fillOpacity:".7"})})})]})},lm=(0,d.memo)(cm),um=e=>{const t=no();return(0,Nr.jsxs)("svg",{className:e.className,"aria-hidden":!!e.ariaHidden||void 0,height:e.height||14,width:e.width||14,viewBox:"0 0 14 14",fill:"none",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",children:[(0,Nr.jsxs)("radialGradient",{id:`a-${t}`,cx:"0",cy:"0",gradientTransform:"matrix(-2.50005399 6.4999748 -9.01804898 -3.46856872 7 7)",gradientUnits:"userSpaceOnUse",r:"1",children:[(0,Nr.jsx)("stop",{offset:"0",stopColor:"#f3c352"}),(0,Nr.jsx)("stop",{offset:"1",stopColor:"#e38937"})]}),(0,Nr.jsxs)("radialGradient",{id:`b-${t}`,cx:"0",cy:"0",gradientTransform:"matrix(-1.99995166 7.00001393 -7.00001393 -1.99995166 5.5 14)",gradientUnits:"userSpaceOnUse",r:"1",children:[(0,Nr.jsx)("stop",{offset:".0899711",stopColor:"#f3c352",stopOpacity:"0"}),(0,Nr.jsx)("stop",{offset:"1",stopColor:"#b25b0a"})]}),(0,Nr.jsxs)("linearGradient",{id:`c-${t}`,gradientUnits:"userSpaceOnUse",x1:"4.5",x2:"9.5",y1:"19.5",y2:"8",children:[(0,Nr.jsx)("stop",{offset:"0",stopColor:"#ffeab4"}),(0,Nr.jsx)("stop",{offset:"1",stopColor:"#eaaf6a",stopOpacity:"0"})]}),(0,Nr.jsx)("circle",{cx:"7",cy:"7",fill:`url(#a-${t})`,r:"7"}),(0,Nr.jsx)("circle",{cx:"7",cy:"7",fill:`url(#b-${t})`,fillOpacity:".7",r:"7"}),(0,Nr.jsx)("circle",{cx:"7",cy:"7",r:"6.75",stroke:`url(#c-${t})`,strokeOpacity:".6",strokeWidth:".5"})]})},dm=(0,d.memo)(um),{useAddFieldToScroll:hm,useScrollToFieldsTrigger:mm,ScrollToFieldsProvider:pm}=(0,Zl.J)(),gm={maxWidth:"260px"},ym=()=>{const{state:e,controller:t}=eo(ka.REMIND_ME),n=(0,qr.t)(),i=(0,wr.P)(),s=Jr(),a=(0,d.useRef)(null),r=(0,d.useRef)(null),o=!e.email.isValid||e.serverErrors.email,c=Ml(e.shakeKey,0!==e.shakeKey),u=Vs(),h=(0,d.useId)(),m=mm(),p=(0,d.useCallback)((()=>{t.updateIsTermsAndConditionsAccepted(!e.termsAndConditions.isAccepted)}),[t,e]),g=(0,d.useCallback)((e=>{t.clearEmailServerError(),t.updateEmail(e.target.value)}),[t]),y=(0,d.useCallback)((()=>(0,l.sH)(void 0,void 0,void 0,(function*(){(yield t.save())&&u.emit(Rs.SHOULD_HIDE,{isManualCall:!0}),m()}))),[t,u,m]),f=(0,d.useCallback)((()=>{t.saveOnClose(),s.getCurrentFlow().isCurrentScreenLast()?u.emit(Rs.SHOULD_HIDE,{isManualCall:!0}):t.leave()}),[t,u,s]);return hm(a,(e=>{var t;return!e.validation.email.isValid||Boolean(null===(t=e.serverErrors)||void 0===t?void 0:t.email)})),hm(r,(e=>!e.validation.termsAndConditions.isValid)),(0,Nr.jsxs)("div",{className:"flow-screen dark-mode-screen","data-qa":"remind-me-later-screen",children:[(0,Nr.jsx)("div",{className:"sr-only",role:"status","aria-live":"polite",children:n.translate("common.screenAriaLabel",{screenTitle:`${n.translate("remindMeScreen.title")}`})}),(0,Nr.jsx)(Sc,{backButtonClickHandler:()=>{t.resetToDefaultState(),s.getCurrentFlow().prev()},children:(0,Nr.jsx)("h2",{className:(0,xr.A)(i?"title-1 text-ellipsis":"title-2 text-line-clamp-2"),children:n.translate("remindMeScreen.title")})}),(0,Nr.jsx)(Bo,{className:(0,xr.A)("px-body py-8",{shake:c}),children:(0,Nr.jsxs)("div",{className:"fixed-container",children:[(0,Nr.jsxs)("div",{className:"bell-wrap","aria-hidden":!0,children:[(0,Nr.jsx)(om,{className:"d-block mx-auto"}),(0,Nr.jsx)(lm,{className:"bell-shadow"}),(0,Nr.jsx)(dm,{className:"bell-tongue"}),(0,Nr.jsx)(am,{className:"bell"}),(0,Nr.jsx)(im,{className:"bell-heart"})]}),(0,Nr.jsx)("p",{className:(0,xr.A)("text-center mx-auto mt-6",i?"text-ellipsis":"text-line-clamp-5"),style:gm,children:n.translate("remindMeScreen.description")}),(0,Nr.jsxs)("div",{className:(0,xr.A)(i?"mt-6":"mt-8",{shake:o}),children:[(0,Nr.jsx)(dl.t,{id:h,setRef:a,name:"email",autoComplete:"email",autoFocus:!0,label:n.translate("remindMeScreen.emailInput.label"),labelFloating:!0,placeholder:n.translate("remindMeScreen.emailInput.placeholder"),className:(0,xr.A)({"pe-10":o}),formLabelClass:(0,xr.A)({"pe-6":o}),error:o,value:e.email.value,onChange:g,disabled:e.locked,dataQa:"remind-me-later-email-input","data-testid":"remind-me-later-email-input",inputMode:"email","aria-required":!0,"aria-describedby":`${h}-error`,children:o&&(0,Nr.jsxs)(Nr.Fragment,{children:[(0,Nr.jsxs)(al.U,{className:"p-abs centered-right z-index-5 me-4",children:[!e.email.isValid&&n.translate("remindMeScreen.emailInput.error.required"),e.serverErrors.email&&(0,Nr.jsx)(yl,{token:"remindMeScreen.emailInput.error.server"})]}),(0,Nr.jsxs)("p",{id:`${h}-error`,className:"sr-only",children:[!e.email.isValid&&n.translate("remindMeScreen.emailInput.error.required"),e.serverErrors.email&&(0,Nr.jsx)(yl,{token:"remindMeScreen.emailInput.error.server"})]})]})}),e.isTermsAndConditionsEnabled&&(0,Nr.jsx)(tm,{className:"mt-4",text:e.termsAndConditions.text,checked:e.termsAndConditions.isAccepted,isValid:e.termsAndConditions.isValid,onTermsAcceptionChange:p,setRef:r})]})]})}),(0,Nr.jsx)(ec,{backButtonClass:"text-white-hover-white",children:(0,Nr.jsx)(em,{disabled:e.locked,onClose:f,onSave:y,processingState:e.processingState,serverErrors:e.serverErrors})})]})};var fm=n(4367);const Sm={isEmpty:!0,error:null,isFocused:!1,isReady:!1};function Am(){const[e,t]=(0,d.useState)(Sm);return{stripeElementState:e,setStripeElementState:t}}const Em={boxShadow:"0 0 0 4px rgba(51, 113, 230, 0.5)"},Cm=e=>{let{className:t,firstNumber:n,secondNumber:i,firstNumberHighlighted:s,secondNumberHighlighted:a}=e;const r=no();return(0,Nr.jsxs)("div",{className:(0,xr.A)("check-image",t),"aria-hidden":"true",children:[(0,Nr.jsxs)("svg",{className:"d-block",width:266,height:104,viewBox:"0 0 266 104",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,Nr.jsx)("rect",{width:"266",height:"104",rx:"4",fill:"#F5FAFF"}),(0,Nr.jsx)("rect",{width:"266",height:"104",rx:"4",fill:`url(#${r}-paint0_linear_12221_26907)`}),(0,Nr.jsx)("rect",{x:"4.5",y:"4.5",width:"257",height:"95",rx:"0.5",stroke:`url(#${r}-paint1_linear_12221_26907)`}),(0,Nr.jsx)("path",{d:"M213.213 36.3C213.513 40.8 213.813 45.2 214.113 49.7C214.313 51.9 214.513 54.1 214.513 56.2C214.513 56.6 214.513 57.5 214.213 57.2C212.813 55.8 212.013 53 211.313 51.2C210.413 49.1 209.913 47 210.013 44.6C210.113 41 212.713 37.4 216.513 36.4C218.513 35.9 220.013 37 220.113 39C220.313 41.2 218.713 43.5 217.313 45.1C217.013 45.5 210.613 51.6 213.013 52.3C214.613 52.7 217.113 51.6 218.313 50.7C219.113 50.1 218.613 50.4 218.513 51.2C218.313 52.4 218.913 57.7 221.013 56.7C222.613 55.9 225.513 51.3 223.413 49.7C222.713 49.2 222.013 49.5 221.413 49.9C220.213 50.7 220.313 51.6 221.213 52.6C222.413 53.8 224.313 55.1 226.013 54C228.413 52.5 229.813 49.8 230.413 47.2C231.013 44.9 229.213 48 229.013 48.7C228.813 49.3 228.613 50.2 228.913 50.8C229.713 52.3 232.213 48.8 232.513 48.4C233.013 47.7 233.513 46.8 233.913 46.1C234.113 45.7 234.813 44.8 234.413 44.9C233.313 45.4 232.813 47.4 232.713 48.4C232.613 49.2 232.213 50.8 233.013 51.5C234.813 52.9 237.313 47.7 237.813 46.7C238.013 46.4 238.313 45.7 238.413 45.3C238.513 45 238.313 44.8 238.113 45.1C237.513 46 236.213 49.7 238.213 50C239.113 50.1 239.613 49.3 240.013 48.7C241.813 46.3 243.013 43.5 244.413 41C246.013 38.2 247.513 35.2 249.913 33",stroke:"#A6C2DD",strokeLinecap:"round",strokeLinejoin:"round"}),(0,Nr.jsx)("path",{d:"M20 14.5H48C50.2 14.5 52 16.3 52 18.5C52 20.7 50.2 22.5 48 22.5H20C17.8 22.5 16 20.7 16 18.5C16 16.3 17.8 14.5 20 14.5Z",fill:"#A4CDF3",fillOpacity:"0.5"}),(0,Nr.jsx)("path",{d:"M59 14.5H68C70.2 14.5 72 16.3 72 18.5C72 20.7 70.2 22.5 68 22.5H59C56.8 22.5 55 20.7 55 18.5C55 16.3 56.8 14.5 59 14.5Z",fill:"#A4CDF3",fillOpacity:"0.5"}),(0,Nr.jsx)("path",{d:"M19 32.5H118C119.7 32.5 121 33.8 121 35.5C121 37.2 119.7 38.5 118 38.5H19C17.3 38.5 16 37.2 16 35.5C16 33.8 17.3 32.5 19 32.5Z",fill:"#A4CDF3",fillOpacity:"0.5"}),(0,Nr.jsx)("path",{d:"M227 16.5H247C248.7 16.5 250 17.8 250 19.5C250 21.2 248.7 22.5 247 22.5H227C225.3 22.5 224 21.2 224 19.5C224 17.8 225.3 16.5 227 16.5Z",fill:"#A4CDF3",fillOpacity:"0.5"}),(0,Nr.jsx)("path",{d:"M19 42.5H100C101.7 42.5 103 43.8 103 45.5C103 47.2 101.7 48.5 100 48.5H19C17.3 48.5 16 47.2 16 45.5C16 43.8 17.3 42.5 19 42.5Z",fill:"#A4CDF3",fillOpacity:"0.5"}),(0,Nr.jsxs)("defs",{children:[(0,Nr.jsxs)("linearGradient",{id:`${r}-paint0_linear_12221_26907`,x1:"38.3423",y1:"21.9516",x2:"46.3388",y2:"103.855",gradientUnits:"userSpaceOnUse",children:[(0,Nr.jsx)("stop",{stopColor:"#F2F9FF",stopOpacity:"0.5"}),(0,Nr.jsx)("stop",{offset:"0.629481",stopColor:"#D1E1F0",stopOpacity:"0.5"})]}),(0,Nr.jsxs)("linearGradient",{id:`${r}-paint1_linear_12221_26907`,x1:"43.314",y1:"64.3826",x2:"226.883",y2:"215.125",gradientUnits:"userSpaceOnUse",children:[(0,Nr.jsx)("stop",{stopColor:"#CDE3FA"}),(0,Nr.jsx)("stop",{offset:"1",stopColor:"#9CBBDA"})]})]})]}),(0,Nr.jsxs)("div",{className:"check-image-numbers d-flex items-center text-sans-serif",dir:"ltr",children:[(0,Nr.jsx)("p",{className:(0,xr.A)("body-4 px-1 py-0-5 border-radius-2 me-3",{"text-white bg-primary":s}),style:s?Em:void 0,children:n}),(0,Nr.jsx)("p",{className:(0,xr.A)("body-4 px-1 py-0-5 border-radius-2",{"text-white bg-primary":a}),style:a?Em:void 0,children:i})]})]})},{ScrollToFieldsProvider:vm,useAddFieldToScroll:Nm,useScrollToFieldsTrigger:bm,useFakeStripeElement:Pm}=(0,Zl.J)(),Dm=e=>{const{transitionEntered:t,showBadge:n,stripeElementState:i,setStripeElementState:s}=e,{state:a,controller:r}=eo(tn.AU_BECS),o=(0,wr.P)(),c=(0,qr.t)(),u=(0,Br.$)(),h=(0,fm.j)(),m=(0,Dr.M)(),[p,g]=(0,d.useState)(),y=(0,d.useRef)(null),f=Ml(a.shakeKey,0!==a.shakeKey),S=(0,d.useRef)(!1),A=bm(),E=Pm({scrollIntoView:e=>{var t;return null===(t=y.current)||void 0===t?void 0:t.scrollIntoView(e)},focus:()=>{var e;return null===(e=null==p?void 0:p.getElement(Fa.AU_BANK_ACCOUNT))||void 0===e?void 0:e.focus()}});return Nm(E,(e=>Boolean(e.error)||e.isEmpty)),(0,d.useEffect)((()=>{(0,l.sH)(void 0,void 0,void 0,(function*(){if(u)return;if(!y.current)throw new Error("auBankAccountContainerRef is not provided");const{stripeElements:e}=yield r.initiateAuBECS(y.current,{onAuBankAccountElementReady:()=>{s((e=>Object.assign(Object.assign({},e),{isReady:!0})))}});g(e)}))}),[r,u,s]),(0,d.useEffect)((()=>{if(!i.isReady||!p||!t)return;const e=p.getElement(Fa.AU_BANK_ACCOUNT);if(!e){if(u)return;throw new Error("auBankAccount element is not initialized")}const n=()=>{S.current?m.document.dispatchEvent(new Event("stripeElementEvent")):S.current=!0,s((e=>Object.assign(Object.assign({},e),{isFocused:!0})))},a=()=>{s((e=>Object.assign(Object.assign({},e),{isFocused:!1})))},r=e=>{s((t=>{var n,i;return Object.assign(Object.assign({},t),{error:null!==(i=null===(n=e.error)||void 0===n?void 0:n.message)&&void 0!==i?i:null})}))};return e.on("focus",n),e.on("blur",a),e.on("change",r),h||S.current||e.focus(),()=>{e.off("focus",n),e.off("blur",a),e.off("change",r)}}),[r,t,p,u,m,s,i.isReady,h]),(0,Nr.jsxs)("form",{className:"flow-screen",onSubmit:e=>{e.preventDefault(),A(),r.leave()},children:[(0,Nr.jsx)("div",{className:"sr-only",role:"status","aria-live":"polite",children:c.translate("common.screenAriaLabel",{screenTitle:`${c.translate("auBECSScreen.title")}`})}),(0,Nr.jsx)(Sc,{title:c.translate("auBECSScreen.title"),showBadge:n,titleQa:"au-becs-title"}),(0,Nr.jsx)(Bo,{className:(0,xr.A)("px-body",{"pt-5 pb-8":!o}),children:(0,Nr.jsxs)("div",{className:(0,xr.A)("fixed-container",{"grow-1 d-flex flex-column":!o}),children:[(0,Nr.jsx)("p",{className:(0,xr.A)("text-center",o?"text-ellipsis":"text-line-clamp-4"),children:c.translate("auBECSScreen.description")}),(0,Nr.jsx)(Cm,{className:(0,xr.A)("mx-auto",o?"mt-7":"mt-5"),firstNumber:"000-000",secondNumber:"000123456",firstNumberHighlighted:i.isFocused,secondNumberHighlighted:i.isFocused}),(0,Nr.jsxs)("div",{className:(0,xr.A)("p-rel",o?"mt-7":"mt-5",{shake:f,"pointer-events-none":a.locked}),children:[(0,Nr.jsx)("div",{ref:y,className:"StripeElement"}),i.error&&(0,Nr.jsxs)(Nr.Fragment,{children:[(0,Nr.jsx)(al.U,{className:"p-abs centered-right z-index-5 me-4",children:i.error}),(0,Nr.jsx)("p",{role:"alert",className:"sr-only",children:i.error})]})]}),(0,Nr.jsx)("div",{className:o?"mt-5":"grow-1 min-h-0 p-rel mt-4",children:(0,Nr.jsx)("div",{className:(0,xr.A)({"p-abs top-left bottom-right text-scrollable custom-scrollbar":!o}),children:(0,Nr.jsx)(yl,{className:(0,xr.A)("body-4 text-gray-80 text-ellipsis",{"px-3 py-2-5":!o,"pointer-events-none":a.locked}),as:"p",token:"auBECSScreen.legalInformation",params:{link:"https://stripe.com/au/legal/becs-dd-service-agreement"}})})})]})}),(0,Nr.jsx)(ec,{children:(0,Nr.jsx)(Hc,{type:"submit",className:"btn-primary",errorTitle:a.payErrorMessage,processingState:a.processingState,dataQa:"au-becs-continue-button",trackingElement:"nextButton",children:a.isPaymentScreen?vc(c,a.formattedAmount,a.frequency):c.translate("auBECSScreen.button")})})]})};function _m(e){const[t,n]=(0,d.useState)(!1);return(0,d.useLayoutEffect)((()=>{const{current:t}=e;if(!t)return;const i=()=>{const e=t.offsetWidth<t.scrollWidth||t.offsetHeight<t.scrollHeight;n(e)},s=new ResizeObserver(i);return t&&(s.observe(t),i()),()=>s.disconnect()}),[e]),t}const Tm=e=>{var t,n;const i=(0,Uo.Y)();return(0,Nr.jsxs)("svg",{className:(0,xr.A)(e.className),"aria-hidden":!!e.ariaHidden||void 0,fill:"none",viewBox:"0 0 64 64",height:null!==(t=e.height)&&void 0!==t?t:64,width:null!==(n=e.width)&&void 0!==n?n:64,xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",children:[(0,Nr.jsxs)("filter",{id:`a-${i}`,colorInterpolationFilters:"sRGB",filterUnits:"userSpaceOnUse",height:"24.0263",width:"26",x:"14",y:"23.5",children:[(0,Nr.jsx)("feFlood",{floodOpacity:"0",result:"BackgroundImageFix"}),(0,Nr.jsx)("feBlend",{in:"SourceGraphic",in2:"BackgroundImageFix",mode:"normal",result:"shape"}),(0,Nr.jsx)("feColorMatrix",{in:"SourceAlpha",result:"hardAlpha",type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0"}),(0,Nr.jsx)("feOffset",{dy:"-1.5"}),(0,Nr.jsx)("feGaussianBlur",{stdDeviation:"2"}),(0,Nr.jsx)("feComposite",{in2:"hardAlpha",k2:"-1",k3:"1",operator:"arithmetic"}),(0,Nr.jsx)("feColorMatrix",{type:"matrix",values:"0 0 0 0 0.753923 0 0 0 0 0.0394018 0 0 0 0 0.468114 0 0 0 0.16 0"}),(0,Nr.jsx)("feBlend",{in2:"shape",mode:"normal",result:"effect1_innerShadow_5614_10321"})]}),(0,Nr.jsxs)("filter",{id:`b-${i}`,colorInterpolationFilters:"sRGB",filterUnits:"userSpaceOnUse",height:"15.5483",width:"14.1826",x:"14.085",y:"22.9985",children:[(0,Nr.jsx)("feFlood",{floodOpacity:"0",result:"BackgroundImageFix"}),(0,Nr.jsx)("feBlend",{in:"SourceGraphic",in2:"BackgroundImageFix",mode:"normal",result:"shape"}),(0,Nr.jsx)("feGaussianBlur",{result:"effect1_foregroundBlur_5614_10321",stdDeviation:"2"})]}),(0,Nr.jsxs)("filter",{id:`c-${i}`,colorInterpolationFilters:"sRGB",filterUnits:"userSpaceOnUse",height:"15.5483",width:"14.1826",x:"25.5386",y:"22.9985",children:[(0,Nr.jsx)("feFlood",{floodOpacity:"0",result:"BackgroundImageFix"}),(0,Nr.jsx)("feBlend",{in:"SourceGraphic",in2:"BackgroundImageFix",mode:"normal",result:"shape"}),(0,Nr.jsx)("feGaussianBlur",{result:"effect1_foregroundBlur_5614_10321",stdDeviation:"2"})]}),(0,Nr.jsxs)("linearGradient",{id:`d-${i}`,gradientUnits:"userSpaceOnUse",x1:"39.4602",x2:"43.2501",y1:"9.34783",y2:"49.635",children:[(0,Nr.jsx)("stop",{offset:"0",stopColor:"#d4e8ff"}),(0,Nr.jsx)("stop",{offset:"1",stopColor:"#aed0f9"})]}),(0,Nr.jsxs)("linearGradient",{id:`e-${i}`,gradientUnits:"userSpaceOnUse",x1:"14.1589",x2:"26.5091",y1:"19.2105",y2:"52.5764",children:[(0,Nr.jsx)("stop",{offset:"0",stopColor:"#ef505a"}),(0,Nr.jsx)("stop",{offset:".766418",stopColor:"#e61446"}),(0,Nr.jsx)("stop",{offset:"1",stopColor:"#d60443"})]}),(0,Nr.jsxs)("linearGradient",{id:`f-${i}`,gradientUnits:"userSpaceOnUse",x1:"20.9333",x2:"28.7525",y1:"27.4211",y2:"45.932",children:[(0,Nr.jsx)("stop",{offset:"0",stopColor:"#fff1f3"}),(0,Nr.jsx)("stop",{offset:".71",stopColor:"#ffe0e7"}),(0,Nr.jsx)("stop",{offset:"1",stopColor:"#fed4e1"})]}),(0,Nr.jsxs)("radialGradient",{id:`g-${i}`,cx:"0",cy:"0",gradientTransform:"matrix(0 15.1591 -13.8222 0 27 28.1364)",gradientUnits:"userSpaceOnUse",r:"1",children:[(0,Nr.jsx)("stop",{offset:"0",stopColor:"#fff",stopOpacity:".7"}),(0,Nr.jsx)("stop",{offset:"1",stopColor:"#fff",stopOpacity:"0"})]}),(0,Nr.jsxs)("linearGradient",{id:`h-${i}`,gradientUnits:"userSpaceOnUse",x1:"2.65798",x2:"2.65798",y1:"0",y2:"8.18031",children:[(0,Nr.jsx)("stop",{offset:"0",stopColor:"#fff"}),(0,Nr.jsx)("stop",{offset:"1",stopColor:"#fff",stopOpacity:"0"})]}),(0,Nr.jsx)("path",{d:"m28 9c-8.8366 0-16 7.1634-16 16v8c0 8.8366 7.1634 16 16 16h18c3.4031 0 6.5581-1.0625 9.1514-2.8738 3.0372.8662 5.5406.5697 7.9294-.4701.7855-.3419.6816-1.4562-.0809-1.8466-1.5753-.8065-2.6265-1.7568-3.2995-2.5406 1.4596-2.4131 2.2996-5.2429 2.2996-8.2689v-8c0-8.8366-7.1634-16-16-16z",fill:`url(#d-${i})`}),(0,Nr.jsx)("path",{d:"m18.0005 15c-8.83654 0-15.99998 7.1634-15.99998 16v8c0 3.0319.84333 5.8669 2.30821 8.2831-.67348.7811-1.72144 1.7247-3.28728 2.5264-.76252.3904-.86638 1.5047-.080911 1.8466 2.384981 1.0381 4.884101 1.3353 7.914641.4743 2.59212 1.8088 5.74482 2.8696 9.14532 2.8696h18c8.8366 0 16-7.1634 16-16v-8c0-8.8366-7.1634-16-16-16z",fill:`url(#e-${i})`}),(0,Nr.jsxs)("g",{filter:`url(#a-${i})`,children:[(0,Nr.jsx)("path",{d:"m25.5002 47.1028c.9081.5647 2.0915.5647 2.9996 0 21.9195-13.6308 7.3499-28.6137-1.4998-19.1112-8.8497-9.5026-23.4193 5.4802-1.4998 19.1112z",fill:`url(#f-${i})`}),(0,Nr.jsx)("path",{d:"m25.5002 47.1028c.9081.5647 2.0915.5647 2.9996 0 21.9195-13.6308 7.3499-28.6137-1.4998-19.1112-8.8497-9.5026-23.4193 5.4802-1.4998 19.1112z",fill:`url(#g-${i})`,fillOpacity:".4"})]}),(0,Nr.jsx)("g",{filter:`url(#b-${i})`,children:(0,Nr.jsx)("ellipse",{cx:"2.65798",cy:"4.09016",fill:`url(#h-${i})`,rx:"2.65798",ry:"4.09016",transform:"matrix(.754153 -.656699 .575342 .817913 16.8184 29.1728)"})}),(0,Nr.jsx)("g",{filter:`url(#c-${i})`,children:(0,Nr.jsx)("ellipse",{cx:"2.65798",cy:"4.09016",fill:`url(#h-${i})`,rx:"2.65798",ry:"4.09016",transform:"matrix(-.754153 -.656699 -.575342 .817913 36.9878 29.1728)"})})]})},Om=(0,d.memo)(Tm);var xm,km,Im=n(7710);function wm(){return wm=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},wm.apply(this,arguments)}!function(e){e.HIGH="high",e.LOW="low"}(xm||(xm={}));var Rm=function(e,t){return d.createElement("svg",wm({fill:"none",height:28,viewBox:"0 0 28 28",width:28,xmlns:"http://www.w3.org/2000/svg",ref:t},e),km||(km=d.createElement("g",{fill:"currentColor"},d.createElement("path",{clipRule:"evenodd",d:"m15.0393 2.44995c-.6707-.24772-1.4079-.24772-2.0786 0l-8.30715 3.06797c-.39274.14504-.65355.51939-.65355.93807v7.54411c0 3.6861 1.95965 6.6874 4.28911 8.8073 1.16017 1.0557 2.38789 1.8689 3.45309 2.4137 1.1081.5668 1.9145.779 2.2578.779s1.1497-.2122 2.2578-.779c1.0652-.5448 2.2929-1.358 3.4531-2.4137 2.3294-2.1199 4.2891-5.1212 4.2891-8.8073v-7.54411c0-.41868-.2608-.79303-.6536-.93807zm-2.7715-1.876139c1.1179-.412868 2.3465-.412868 3.4644 0l8.3071 3.067969c1.1783.43514 1.9607 1.55819 1.9607 2.81421v7.54411c0 4.4389-2.3618 7.9375-4.943 10.2865-1.2952 1.1786-2.6702 2.092-3.8885 2.7151-1.1754.6012-2.3332.9984-3.1685.9984s-1.9931-.3972-3.1685-.9984c-1.21831-.6231-2.59328-1.5365-3.88847-2.7151-2.58125-2.349-4.94303-5.8476-4.94303-10.2865v-7.54411c0-1.25602.78243-2.37907 1.96066-2.81421z",fillRule:"evenodd"}),d.createElement("path",{d:"m18.2906 11.75h-.2535v-1.1855c0-2.19278-1.7415-4.02451-3.9182-4.06361-.0595-.00107-.1783-.00107-.2378 0-2.1767.0391-3.91819 1.87083-3.91819 4.06361v1.1855h-.25354c-.39069 0-.70937.4028-.70937.9003v5.9463c0 .4969.31868.9035.7094.9035h8.5812c.3907 0 .7094-.4066.7094-.9035v-5.9463c0-.4974-.3187-.9003-.7094-.9003zm-3.4867 3.8674v1.7967c0 .2058-.1723.3799-.3784.3799h-.8509c-.2061 0-.3785-.1741-.3785-.3799v-1.7967c-.1999-.1966-.3162-.4684-.3162-.7691 0-.5698.4408-1.0594 1.0013-1.082.0594-.0024.1783-.0024.2377 0 .5605.0226 1.0013.5122 1.0013 1.082 0 .3007-.1164.5725-.3163.7691zm1.5623-3.8674h-4.7323v-1.1855c0-1.30621 1.0623-2.38623 2.3661-2.38623s2.3662 1.08002 2.3662 2.38623z"}))))},Mm=(0,d.forwardRef)(Rm),Lm=(0,d.memo)(Mm);const Um=(0,d.createContext)(null);function Fm(){const e=(0,d.useContext)(Um);if(!e)throw new Error("Experiments is not provided");return e}const jm=e=>{let{hint:t,donation:n,currency:i,disabled:s,errors:a,onSelect:r}=e;const o=(0,qr.t)(),c=(0,Ur.k)(),l=(0,d.useMemo)((()=>t.default),[t.default]),u=(0,d.useRef)(null),h=a.amount.min&&l;return(0,cc.f)({ref:u,mode:oc.Q.ALL,autoFocus:l,preventScroll:!0}),(0,Nr.jsxs)("div",{className:(0,xr.A)("amount-hint",{"amount-hint-checked":l}),children:[(0,Nr.jsx)("input",{type:"radio",id:`${t.id}-hint`,className:(0,xr.A)("amount-hint-radio",{"has-error":h}),value:t.id,title:o.formatCurrency(t.amount,{currency:i,display:"short"})+", "+t.description,name:"hintOptions",checked:l,disabled:s,"aria-invalid":h,"aria-describedby":`${t.id}-hint-error`,"data-qa":"suggested-amount-hint-button",onChange:()=>r(t),ref:u}),(0,Nr.jsxs)("label",{htmlFor:`${t.id}-hint`,className:c("amount-hint-label"),"data-qa":"suggested-amount-hint-label",children:[(0,Nr.jsxs)("span",{className:"label-2 d-flex p-rel z-index-2",children:[(0,Nr.jsx)("span",{className:"text-truncate me-2",children:o.formatCurrency(t.amount,{currency:i,display:"short"})}),(0,Nr.jsx)("span",{className:"icon-slot icon-slot-18 shrink-0 ms-auto","aria-hidden":!0,children:h&&(0,Nr.jsx)(al.U,{className:"p-abs centered","data-testid":"min-amount-tooltip-trigger",dataQa:"suggested-amount-hint",children:(0,Nr.jsx)(yl,{as:"p",token:"donateForm.donationAmountField.error.min",params:{amount:o.formatCurrency(n.minAmount,{currency:n.currency,display:"round"})}})})})]}),(0,Nr.jsx)("span",{className:"p-rel text-truncate z-index-2",children:t.description})]}),h&&(0,Nr.jsx)(yl,{as:"p",id:`${t.id}-hint-error`,className:"sr-only",token:"donateForm.donationAmountField.error.min",params:{amount:o.formatCurrency(n.minAmount,{currency:n.currency,display:"round"})}})]})},Bm=(0,d.memo)(jm),Hm=e=>{const{disabled:t,onShowCustomAmount:n}=e,i=(0,qr.t)(),s=(0,Ur.k)();return(0,Nr.jsx)("button",{type:"button",className:s("custom-amount-btn"),disabled:t,onClick:()=>n(),"data-qa":"suggested-amount-custom-button",children:i.translate("donateForm.amountHint.customAmount")})},qm=(0,d.memo)(Hm),Gm=e=>{let{currency:t,disabled:n,onChange:i,list:s}=e;const a=(0,qr.t)(),r=lo(),o=no();return(0,Nr.jsxs)(Nr.Fragment,{children:[(0,Nr.jsxs)("label",{className:"sr-only",htmlFor:`currency-${o}`,"data-qa":"currency-selector-label",children:[a.translate("donateForm.donationCurrency")," ",t]}),(0,Nr.jsx)("select",{id:`currency-${o}`,className:"currency-select p-abs top-left bottom-right max-w-100 text-noselect p-0 border-0 m-0 overflow-hidden cursor-pointer z-index-1",value:t,onChange:e=>{i(e.target.value)},"data-qa":"currency-selector","data-tracking-element-name":"changeCurrency",disabled:n,children:s.map(((e,t)=>(0,Nr.jsx)("optgroup",{children:e.map(((e,t)=>(0,Nr.jsxs)("option",{value:e,children:[e,"  ",r.getName(e)]},t)))},t)))})]})},Vm=(0,d.memo)(Gm),{useAddFieldToScroll:Ym,useScrollToFieldsTrigger:Km,ScrollToFieldsProvider:zm}=(0,Zl.J)(),$m=e=>{const{controller:t}=eo(tn.DONATE),n=(0,Br.$)(),i=(0,$r.Q)(),s=(0,wr.P)(),a=(0,qr.t)(),r=lo(),o=(0,d.useRef)(null),c=(0,d.useRef)(null);(0,cc.f)({ref:c,autoFocus:e.donation.canModifyAmount,mode:e.autofocusMode}),Ym(c,(e=>e.amount.required||e.amount.min||e.amount.max));const l=(e=>{const t=(0,Pr.n)();return(0,d.useMemo)((()=>t.company.allowCentsForCharges?e>0:null!==t.queryParams.amount&&!Number.isInteger(t.queryParams.amount)),[t,e])})(r.getDigits(e.donation.currency)),[u,h]=(0,d.useState)(!1),[m,p]=(0,d.useState)(!1),[g,y]=(0,d.useState)(!1),[f,S]=(0,d.useState)(!1),A=(0,d.useCallback)((()=>f?a.translate("donateForm.donationAmountField.error.required"):m?a.translate("donateForm.donationAmountField.error.min",{amount:a.formatCurrency(e.donation.minAmount,{currency:e.donation.currency,display:"round"})}):g?a.translate("donateForm.donationAmountField.error.max",{amount:a.formatCurrency(e.donation.maxAmount,{currency:e.donation.currency,display:"floatcents"})}):""),[a,g,m,f,e.donation.currency,e.donation.maxAmount,e.donation.minAmount]),E=(0,d.useCallback)((e=>{t.changeAmount(e)}),[t]),C=(0,d.useCallback)((e=>{t.changeCurrency(e),t.validateAmount()}),[t]),v=(0,d.useMemo)((()=>[e.guessedCurrenciesList,e.allCurrenciesList]),[e.allCurrenciesList,e.guessedCurrenciesList]),N=(0,d.useMemo)((()=>(0,Nr.jsx)(Vm,{currency:e.donation.currency,disabled:e.disabled,onChange:C,list:v})),[v,C,e.donation.currency,e.disabled]),b=(0,d.useCallback)((()=>{t.validateAmount(e.errors.amount.required),p(!n&&e.errors.amount.min),y(!n&&e.errors.amount.max),S(!n&&e.errors.amount.required)}),[t,n,e.errors.amount.min,e.errors.amount.max,e.errors.amount.required]);return(0,d.useEffect)((()=>{o.current&&(p(!n&&e.errors.amount.min),y(!n&&e.errors.amount.max),S(!n&&e.errors.amount.required),h(!s&&t.shouldShowAverageDonationHintTooltip))}),[e.errors.amount.max,e.errors.amount.min,e.errors.amount.required,n,o,t.shouldShowAverageDonationHintTooltip,s]),(0,Nr.jsxs)("div",{className:e.className,style:e.style,ref:o,children:[(0,Nr.jsx)(Jd,{ref:c,className:(0,xr.A)("group-price-control",{"group-price-control-custom-amount":e.isCustomAmount}),showCurrencySymbol:!0,useSpaceAfterCurrencySymbol:e.useSpaceAfterCurrencySymbol,currency:e.donation.currency,amount:e.donation.amount,canModifyAmount:e.donation.canModifyAmount,withoutFraction:!l,canSelectCurrency:e.donation.canModifyAmount&&e.donation.canSelectCurrency,currencyCodeNode:e.donation.canModifyAmount&&e.donation.canSelectCurrency&&N,currencyService:r,hasError:e.showError,errorLabel:A(),"aria-required":!0,qaActiveAttribute:"amount",qaDisabledAttribute:"disabled-amount",trackingElement:"amountInput",onAmountChange:E,onAmountInputBlur:b,donationType:e.flowType,isCustomAmount:e.isCustomAmount,placeholder:e.placeholder,disabled:e.disabled}),!e.disabled&&(0,Nr.jsx)(Rc.q,{triggerRef:o,show:!!c.current&&u,maxWidth:"229px",placement:i?"left":"right",fallbackPlacements:s?[]:["left"],role:u?"alert":"none",children:(0,Nr.jsx)(yl,{token:"donateForm.donationAmountField.hint.average",params:{amount:a.formatCurrency(t.amountAverageDonationHint,{currency:e.donation.currency,display:"round"})}})})]})},Wm=(0,d.memo)($m),Xm={marginLeft:"-1px",marginRight:"-1px",marginBottom:"-1px"},Qm=e=>{const{controller:t}=eo(tn.DONATE),n=(0,d.useCallback)((e=>{t.changeCurrentHint(e)}),[t]),i=(0,d.useMemo)((()=>e.donation.hintOptions),[e.donation.hintOptions]),s=(0,d.useCallback)((()=>{t.changeAmount(null)}),[t]);return(0,Nr.jsxs)("div",{className:(0,xr.A)("border border-gray-20 border-radius-base",e.className,{shake:e.shake}),children:[i&&i.map(((t,i)=>(0,Nr.jsx)(Bm,{hint:t,donation:e.donation,currency:e.donation.currency,disabled:e.disabled,errors:e.errors,onSelect:n},i))),e.showFrequencyCustomAmountInput?(0,Nr.jsx)(Wm,{donation:e.donation,errors:e.errors,tribute:e.tribute,guessedCurrenciesList:e.guessedCurrenciesList,allCurrenciesList:e.allCurrenciesList,showError:e.showError,flowType:e.flowType,useSpaceAfterCurrencySymbol:!0,isCustomAmount:!0,style:Xm,disabled:e.disabled,animationEnded:e.animationEnded,autofocusMode:e.autofocusMode}):(0,Nr.jsx)(qm,{disabled:e.disabled,onShowCustomAmount:s})]})},Zm=(0,d.memo)(Qm),Jm={background:"#FFFAE8",border:"1px solid #E2D29A"},ep=e=>{const{controller:t}=eo(tn.DONATE),n=(0,qr.t)(),i=(0,wr.P)(),s=(0,Ur.k)();return(0,Nr.jsxs)(Nr.Fragment,{children:[i&&t.shouldShowAverageDonationHint&&(0,Nr.jsx)("div",{className:(0,xr.A)("mb-3 body-3 py-2 px-4 border-radius-8 text-ellipsis",{shake:e.shake}),style:Jm,children:(0,Nr.jsx)(yl,{token:"donateForm.donationAmountField.hint.average",params:{amount:n.formatCurrency(t.amountAverageDonationHint,{currency:e.donation.currency,display:"round"})}})}),e.donation.canModifyAmount&&(0,Nr.jsx)("div",{className:(0,xr.A)("amount-options",{shake:e.shake}),"aria-label":n.translate("donateForm.suggestionAriaLabel"),children:e.donation.amountOptions.map(((i,a)=>(0,Nr.jsxs)("div",{className:"amount-option","data-qa":"suggested-amount-button",children:[(0,Nr.jsx)("input",{type:"radio",id:`${i}-option`,className:"amount-option-radio",title:n.formatCurrency(i,{currency:e.donation.currency,display:"shortlabel"}),name:"amountOptions",value:i,checked:i===e.donation.amount,disabled:e.disabled,"aria-label":n.translate("donateForm.suggestionAmountAriaLabel",{amount:n.formatCurrency(i,{currency:e.donation.currency,display:"shortlabel"})}),onChange:e=>(e=>{t.changeAmount(e),t.validateAmount()})(Number.parseInt(e.target.value)),"data-tracking-element-name":"suggestionButton","data-qa":"suggested-amount-radio"}),(0,Nr.jsx)("label",{htmlFor:`${i}-option`,className:s("amount-option-label"),"aria-hidden":"true","data-qa":"suggested-amount-label",children:(0,Nr.jsx)("span",{className:"text-truncate",children:n.formatCurrency(i,{currency:e.donation.currency,display:"shortlabel"})})})]},a)))}),(0,Nr.jsx)(Wm,{donation:e.donation,errors:e.errors,tribute:e.tribute,guessedCurrenciesList:e.guessedCurrenciesList,allCurrenciesList:e.allCurrenciesList,showError:e.showError,flowType:e.flowType,disabled:e.disabled,className:(0,xr.A)({"mt-2-5":e.donation.canModifyAmount,shake:e.shake}),animationEnded:e.animationEnded,autofocusMode:e.autofocusMode})]})},tp=(0,d.memo)(ep),np=e=>{let{isActive:t,endDate:n,disabled:i,className:s,toggleDailyDonation:a}=e;const r=(0,qr.t)(),o=r.formatDate(n,{type:Zs.SHORT_WITH_YEAR});return(0,Nr.jsx)(Qc,{className:(0,xr.A)("body-3",s),customLabelClasses:"line-height-20",checked:t,disabled:i,onChange:a,dataQa:"daily-donation-checkbox",dataTestId:"daily-donation-checkbox",trackingElement:"dailyDonationCheckbox",children:(0,Nr.jsx)("span",{className:"body-3 text-truncate","data-qa":"daily-donation-label",children:r.translate("donateForm.dailyDonation.label",{endDate:o})})})},ip=(0,d.memo)(np),sp=e=>{const{index:t,onAnimationEnd:n}=e,i=(0,d.useRef)(null),[s,a]=(0,d.useState)(!1);(0,d.useEffect)((()=>{a(!0)}),[]);const r=(0,d.useCallback)((()=>{n(t)}),[t,n]);return(0,Nr.jsx)(kr.A,{nodeRef:i,classNames:"rtg-flying-heart",in:s,timeout:2500,onEntered:r,children:(0,Nr.jsx)("span",{ref:i,className:"flying-heart",children:(0,Nr.jsx)(hc,{className:"d-block",width:14,height:14})})})},ap=(0,d.memo)(sp),rp=e=>{let{heartTrigger:t}=e;const[n,i]=(0,d.useState)([]);(0,d.useEffect)((()=>{null!==t&&i((e=>{const t=(e[e.length-1]||0)+1,n=[...e,t];return n.length===e.length?e:n}))}),[t]);const s=(0,d.useCallback)((e=>{i((t=>t.filter((t=>t!==e))))}),[]);return(0,Nr.jsx)(Nr.Fragment,{children:n.map((e=>(0,Nr.jsx)(ap,{index:e,onAnimationEnd:s},e)))})},op=(0,d.memo)(rp),cp=e=>{const{state:t,controller:n}=eo(tn.DONATE),i=(0,qr.t)(),s=(0,Ur.k)(),[a,r]=(0,d.useState)(null),o=e=>{n.validateAmount(),n.changeFrequency(e),e===t.rightButtonFrequency&&r((a||0)+1)},c=(0,d.useMemo)((()=>t.donation.frequency===t.rightButtonFrequency),[t.donation.frequency,t.rightButtonFrequency]);return(0,Nr.jsxs)("div",{className:(0,xr.A)("frequency d-flex items-center",e.className),"aria-label":i.translate("donateForm.frequencyAriaLabel"),children:[(0,Nr.jsx)("button",{type:"button",className:(0,xr.A)(s("frequency-btn"),{"frequency-btn-selected":t.donation.frequency===t.leftButtonFrequency}),"aria-current":t.donation.frequency===t.leftButtonFrequency,disabled:e.disabled,onClick:()=>o(t.leftButtonFrequency),"data-qa":"less-frequent-button","data-tracking-element-name":"onceRepeat",children:(0,Nr.jsx)("span",{className:"text-truncate","data-testid":"left-button-label",children:t.leftButtonLabel})}),(0,Nr.jsxs)("button",{type:"button",className:(0,xr.A)(s("frequency-btn"),{"frequency-btn-selected":c}),"aria-current":t.donation.frequency===t.rightButtonFrequency,disabled:e.disabled,onClick:()=>o(t.rightButtonFrequency),"data-qa":"more-frequent-button","data-tracking-element-name":"monthlyPlan",children:[(0,Nr.jsxs)("span",{className:"p-rel shrink-0 text-fuchsia-80 me-1","aria-hidden":!0,children:[(0,Nr.jsx)(hc,{className:"d-block",width:14,height:14}),(0,Nr.jsx)(op,{heartTrigger:a})]}),(0,Nr.jsx)("span",{className:"text-truncate mx-0-5","data-testid":"right-button-label",children:t.rightButtonLabel})]}),(0,Nr.jsx)("div",{className:"frequency-frame p-abs top-left bottom-right"})]})},lp=(0,d.memo)(cp);var up=n(2459);const dp=e=>{const{amount:t,currency:n,trackingElement:i,className:s,onClick:a}=e,r=(0,qr.t)();return(0,Nr.jsx)("button",{type:"button",className:(0,xr.A)("btn btn-default",s),"data-tracking-element-name":i,"data-qa":"keep-one-time-button","data-testid":"keep-one-time-button",onClick:a,children:r.translate("upsellScreen.button.keepOneTime",{amount:r.formatCurrency(t,{currency:n,display:"floatcents"})})})},hp=(0,d.memo)(dp),mp=e=>{const{questionText:t,descriptionText:n}=e,i=(0,wr.P)();return(0,Nr.jsxs)(Nr.Fragment,{children:[(0,Nr.jsx)("p",{className:(0,xr.A)("text-center",i?"text-ellipsis":"text-line-clamp-6"),dangerouslySetInnerHTML:{__html:t},"data-testid":"upsell-question"}),n&&(0,Nr.jsx)("p",{className:(0,xr.A)("text-center mt-3",i?"text-ellipsis":"text-line-clamp-4"),dangerouslySetInnerHTML:{__html:n},"data-testid":"upsell-description"})]})},pp=(0,d.memo)(mp),gp=e=>{const t=no();return(0,Nr.jsxs)("svg",{className:(0,xr.A)(e.className),"aria-hidden":!!e.ariaHidden||void 0,fill:"none",height:"73",viewBox:"0 0 72 73",width:"72",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink","data-qa":"gift-box-icon",children:[(0,Nr.jsxs)("filter",{id:`a-${t}`,colorInterpolationFilters:"sRGB",filterUnits:"userSpaceOnUse",height:"72.3115",width:"71.1349",x:"0",y:"0",children:[(0,Nr.jsx)("feFlood",{floodOpacity:"0",result:"BackgroundImageFix"}),(0,Nr.jsx)("feColorMatrix",{in:"SourceAlpha",result:"hardAlpha",type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0"}),(0,Nr.jsx)("feOffset",{dx:"6",dy:"2"}),(0,Nr.jsx)("feGaussianBlur",{stdDeviation:"4"}),(0,Nr.jsx)("feColorMatrix",{type:"matrix",values:"0 0 0 0 0.591667 0 0 0 0 0.175035 0 0 0 0 0.199399 0 0 0 0.25 0"}),(0,Nr.jsx)("feBlend",{in2:"BackgroundImageFix",mode:"normal",result:"effect1_dropShadow_8986_17614"}),(0,Nr.jsx)("feBlend",{in:"SourceGraphic",in2:"effect1_dropShadow_8986_17614",mode:"normal",result:"shape"})]}),(0,Nr.jsxs)("filter",{id:`b-${t}`,colorInterpolationFilters:"sRGB",filterUnits:"userSpaceOnUse",height:"61.6255",width:"61.1349",x:"2",y:"6.54346",children:[(0,Nr.jsx)("feFlood",{floodOpacity:"0",result:"BackgroundImageFix"}),(0,Nr.jsx)("feColorMatrix",{in:"SourceAlpha",result:"hardAlpha",type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0"}),(0,Nr.jsx)("feOffset",{dx:"3",dy:"3"}),(0,Nr.jsx)("feGaussianBlur",{stdDeviation:"1.5"}),(0,Nr.jsx)("feColorMatrix",{type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.15 0"}),(0,Nr.jsx)("feBlend",{in2:"BackgroundImageFix",mode:"normal",result:"effect1_dropShadow_8986_17614"}),(0,Nr.jsx)("feBlend",{in:"SourceGraphic",in2:"effect1_dropShadow_8986_17614",mode:"normal",result:"shape"})]}),(0,Nr.jsxs)("linearGradient",{id:`c-${t}`,gradientUnits:"userSpaceOnUse",x1:"33.358",x2:"55.1048",y1:"36.8415",y2:"38.8628",children:[(0,Nr.jsx)("stop",{offset:"0",stopColor:"#ff6375"}),(0,Nr.jsx)("stop",{offset:"1",stopColor:"#f2394e"})]}),(0,Nr.jsxs)("linearGradient",{id:`d-${t}`,gradientUnits:"userSpaceOnUse",x1:"57.652",x2:"32.9253",y1:"47.3215",y2:"61.3441",children:[(0,Nr.jsx)("stop",{offset:"0",stopColor:"#db3448"}),(0,Nr.jsx)("stop",{offset:"1",stopColor:"#f2394e"})]}),(0,Nr.jsxs)("linearGradient",{id:`e-${t}`,children:[(0,Nr.jsx)("stop",{offset:"0",stopColor:"#ccc"}),(0,Nr.jsx)("stop",{offset:"1",stopColor:"#fff",stopOpacity:"0"})]}),(0,Nr.jsx)("linearGradient",{id:`f-${t}`,gradientUnits:"userSpaceOnUse",x1:"2.7417",x2:"29.5784",xlinkHref:`#e-${t}`,y1:"5.62305",y2:"16.674"}),(0,Nr.jsx)("linearGradient",{id:`g-${t}`,gradientUnits:"userSpaceOnUse",x1:"57.6504",x2:"30.8137",xlinkHref:`#e-${t}`,y1:"5.31152",y2:"16.3625"}),(0,Nr.jsxs)("g",{filter:`url(#a-${t})`,children:[(0,Nr.jsx)("g",{filter:`url(#b-${t})`,children:(0,Nr.jsx)("path",{d:"m2 20.4733 27.5499-13.92.0169-.00984 27.5667 13.92894.0014.0009v6.8919l-2.4122 1.2362v20.6755l-25.1553 12.8922-25.15525-12.8922v-20.6755l-2.41215-1.2362z",fill:`url(#c-${t})`})}),(0,Nr.jsx)("path",{d:"m4.41235 49.2779 25.15525 12.8921v-27.5674l-25.15525-12.8922z",fill:"#ff6375"}),(0,Nr.jsx)("path",{d:"m54.723 49.2779-25.1553 12.8921v-27.5674l25.1553-12.8922z",fill:"#fb4d62"}),(0,Nr.jsx)("path",{d:"m4.41235 30.3253 25.15525 12.8921v-8.6148l-25.15525-12.8922z",fill:"#db3448",fillOpacity:".75"}),(0,Nr.jsx)("path",{d:"m54.723 30.3253-25.1553 12.8921v-8.6148l25.1553-12.8922z",fill:"#db3448",fillOpacity:".5"}),(0,Nr.jsx)("path",{d:"m29.5499 6.5533-27.5499 13.92 27.5668 14.1274 27.5667-14.1283-27.5667-13.92894z",fill:"#ff7787"}),(0,Nr.jsx)("path",{d:"m2 20.4731 27.5674 14.1284v6.8918l-27.5674-14.1283z",fill:"#fb4d62"}),(0,Nr.jsx)("path",{d:"m57.1345 20.4731-27.5674 14.1284v6.8918l27.5674-14.1283z",fill:"#ff6375"}),(0,Nr.jsx)("path",{d:"m12.3378 53.3394v-27.5674l7.2364 3.7086v27.5675z",fill:"#dcdcdc"}),(0,Nr.jsx)("path",{d:"m47.1403 25.5949-7.2149 3.6978-10.1245-5.0269-10.2267 5.2146-7.223-3.7014 17.3508-8.8229z",fill:"#f4f4f4"}),(0,Nr.jsx)("path",{d:"m47.142 25.5952-7.2365 3.7087v27.5674l7.2365-3.7087z",fill:"#dcdcdc"}),(0,Nr.jsx)("path",{d:"m29.5676 62.3113-25.15525-12.8921v-.6892l25.15525 12.8921 25.1553-12.8921v.6892z",fill:`url(#d-${t})`,fillOpacity:".2"}),(0,Nr.jsx)("path",{d:"m45.8044 17.4261c-3.6871-.6226-7.6011 1.431-10.2537 2.8227-.9582.5027-1.7518.9191-2.3105 1.0917-.3618-.1451-.8792-.236-1.4538-.236h-3.9611c-.5567 0-1.0598.0853-1.4196.2226-.5213-.2107-1.1855-.5592-1.9564-.9637-2.6526-1.3917-6.5666-3.4453-10.2537-2.8227-3.9608.6687-4.65037 4.4568-3.9609 4.9658.4446.4109 4.6365.4646 15.7653-.1146.3474.2122.5804.9196 2 .9196h3.7864c.8521 0 1.9341-.7195 2.2136-1 11.2947.5993 15.3177.4941 15.7653.0804.6894-.509-.0001-4.2971-3.9609-4.9658z",fill:"#db3448",fillOpacity:".5"}),(0,Nr.jsx)("path",{d:"m10.469 20.0297-.004-.0098-.0047-.0094c-.0642-.1276-.1269-.3985-.1665-.8141-.0386-.4048-.0529-.9172-.0381-1.5046.0295-1.1746.1748-2.6343.4655-4.1076.291-1.4746.7256-2.9523 1.3292-4.16833.6061-1.22108 1.3661-2.14551 2.2897-2.56537 1.2648-.5749 2.5766-.25259 3.9015.62535 1.3277.87973 2.6251 2.29152 3.8183 3.80205.8432 1.0675 1.6238 2.1702 2.3226 3.1573.2902.4098.5662.7997.8267 1.1588.4409.6078.84 1.1311 1.1842 1.5038.1718.1861.3371.3425.4931.454.0795.0568.1653.1084.2555.1443v3.2766c-5.8992.8884-9.9813.9034-12.6427.5588-1.3471-.1744-2.3223-.4399-2.9824-.7258-.33-.1429-.5757-.2885-.7487-.426-.1748-.1391-.2631-.2601-.2992-.35z",fill:"#f4f4f4",stroke:`url(#f-${t})`,strokeWidth:".5"}),(0,Nr.jsx)("path",{d:"m49.9231 19.7182.004-.0098.0047-.0094c.0642-.1276.1269-.3985.1665-.8141.0386-.4048.0528-.9172.0381-1.5046-.0295-1.1746-.1748-2.6343-.4655-4.1076-.291-1.4746-.7257-2.9523-1.3292-4.16835-.6061-1.22108-1.3661-2.14551-2.2897-2.56537-1.2648-.5749-2.5766-.25259-3.9015.62535-1.3277.87973-2.6251 2.29151-3.8183 3.80207-.8432 1.0674-1.6238 2.1702-2.3226 3.1573-.2902.4098-.5662.7996-.8267 1.1588-.4409.6078-.84 1.1311-1.1842 1.5038-.1719.1861-.3371.3424-.4931.454-.0795.0568-.1654.1083-.2555.1443v3.2766c5.8992.8884 9.9813.9033 12.6427.5588 1.3471-.1744 2.3223-.44 2.9824-.7258.33-.1429.5757-.2885.7486-.426.1749-.1391.2632-.2601.2993-.35z",fill:"#f4f4f4",stroke:`url(#g-${t})`,strokeWidth:".5"}),(0,Nr.jsx)("path",{d:"m27.3922 17.498c-1.6553.0001-7.6553-13.37515-13.1553-10.87509-3.5 2.00014 9.4703 11.74249 13.1553 10.87509z",fill:"#dcdcdc"}),(0,Nr.jsx)("path",{d:"m32.9999 17.1864c1.6553.0002 7.6553-13.37507 13.1553-10.87501 3.5 2.00013-9.4703 11.74251-13.1553 10.87501z",fill:"#dcdcdc"}),(0,Nr.jsx)("path",{d:"m26.5256 18.0437c.2721-.9838 1.2851-1.3759 2.3057-1.3805.3098-.0014.6782-.0249 1.1217-.0812.5022-.0638.9385-.1108 1.309-.1455.9169-.0858 1.7218.5308 1.8747 1.4389.2481 1.4727.4432 3.5148-.3104 3.8119-1.1972.4719-3.5916-.2431-5.7466 0-1.3613.1535-1.0028-2.0209-.5541-3.6436z",fill:"#f4f4f4"})]})]})},yp=(0,d.memo)(gp),fp=e=>{const{text:t,trackingElement:n,withGiftBoxIcon:i,withHeartIcon:s,autoFocus:a,onClick:r}=e,o=(0,$r.Q)(),c=(0,d.useRef)(null);return(0,cc.f)({ref:c,autoFocus:a,mode:oc.Q.DESKTOP}),(0,Nr.jsxs)("div",{className:"p-rel",children:[(0,Nr.jsxs)("button",{ref:c,type:"button",className:(0,xr.A)("btn btn-danger",{"px-10":i,"d-flex items-center justify-center":s}),"data-tracking-element-name":n,"data-qa":"upsell-high","data-testid":"upsell-high",onClick:r,children:[s&&(0,Nr.jsx)(hc,{className:"icon-fill shrink-0 font-size-18 text-white me-2","aria-hidden":!0}),(0,Nr.jsx)("span",{className:"text-truncate",children:t})]}),i&&(0,Nr.jsx)(yp,{className:(0,xr.A)("p-abs top-left z-index-2 ms-minus-5 mt-minus-3",{"icon-flip-horizontal":o}),"aria-hidden":!0})]})},Sp=(0,d.memo)(fp),Ap=e=>{const{text:t,trackingElement:n,autoFocus:i,className:s,onClick:a}=e,r=(0,d.useRef)(null);return(0,cc.f)({ref:r,autoFocus:i,mode:oc.Q.DESKTOP}),(0,Nr.jsx)("button",{type:"button",ref:r,className:(0,xr.A)("btn btn-primary",s),"data-tracking-element-name":n,"data-qa":"upsell-low","data-testid":"upsell-low",onClick:a,children:t})},Ep=(0,d.memo)(Ap),Cp=e=>{const t=(0,qr.t)();return(0,Nr.jsx)("div",{className:"px-body py-7",children:(0,Nr.jsxs)("div",{className:"fixed-container",children:[(0,Nr.jsx)(pp,{questionText:e.questionText,descriptionText:e.descriptionText}),(0,Nr.jsxs)("div",{role:"group",className:"mt-7","aria-label":t.translate("upsellScreen.buttonGroupAriaLabel"),children:[e.amountUpsellHigh&&(0,Nr.jsx)(Sp,{text:e.upsellHighText,trackingElement:"oldUpsellHighMonthlyUpsellCurtainExperiment",withGiftBoxIcon:!0,autoFocus:e.transitionEntered,onClick:e.onUpsellHighClick}),e.amountUpsellLow&&(0,Nr.jsx)(Ep,{className:"mt-3",text:e.upsellLowText,autoFocus:e.transitionEntered&&!e.amountUpsellHigh,trackingElement:"oldUpsellLowMonthlyUpsellCurtainExperiment",onClick:e.onUpsellLowClick}),(0,Nr.jsx)(hp,{className:"mt-3",amount:e.currentAmount,currency:e.currentCurrency,trackingElement:"oldUpsellKeepUpsellCurtainExperiment",onClick:e.onKeepOneTimeClick})]})]})})},vp=(0,d.memo)(Cp),Np=e=>{const{amount:t,currency:n,trackingElement:i,onClick:s}=e,a=(0,qr.t)();return(0,Nr.jsx)("button",{type:"button",className:"btn-link text-truncate","data-tracking-element-name":i,"data-qa":"keep-one-time-link","data-testid":"keep-one-time-link",onClick:s,children:a.translate("upsellScreen.button.keepOneTimeLink",{amount:a.formatCurrency(t,{currency:n,display:"floatcents"})})})},bp=(0,d.memo)(Np),Pp=e=>{const t=(0,qr.t)();return(0,Nr.jsx)("div",{className:"px-body py-7",children:(0,Nr.jsxs)("div",{className:"fixed-container",children:[(0,Nr.jsx)(pp,{questionText:e.questionShortText}),(0,Nr.jsxs)("div",{role:"group",className:"mt-7","aria-label":t.translate("upsellScreen.buttonGroupAriaLabel"),children:[e.amountUpsellHigh&&(0,Nr.jsx)(Sp,{text:e.upsellHighText,trackingElement:"oldUpsellHighMonthlyUpsellCurtainExperiment",withHeartIcon:!0,autoFocus:e.transitionEntered,onClick:e.onUpsellHighClick}),e.amountUpsellLow&&(0,Nr.jsx)(Ep,{className:"mt-2",text:e.upsellLowText,autoFocus:e.transitionEntered&&!e.amountUpsellHigh,trackingElement:"oldUpsellLowMonthlyUpsellCurtainExperiment",onClick:e.onUpsellLowClick}),(0,Nr.jsx)("div",{className:"d-flex justify-center mt-4",children:(0,Nr.jsx)(bp,{amount:e.currentAmount,currency:e.currentCurrency,trackingElement:"oldUpsellKeepUpsellCurtainExperiment",onClick:e.onKeepOneTimeClick})})]})]})})},Dp=(0,d.memo)(Pp),_p=e=>{const{show:t,variant:n,testMode:i,onClose:s}=e,a=(0,l.Tt)(e,["show","variant","testMode","onClose"]),r=(0,wr.P)(),o=yo("lg"),c=(0,d.useRef)(null),u=(0,d.useRef)(null),h=(0,d.useRef)(null),m=(0,d.useRef)(null),p=jr({rootElRef:u,trapStartRef:h,trapStopRef:m}),g=(0,up.uh)({onSwipedDown:()=>{s()},touchEventOptions:{passive:!1},preventScrollOnSwipe:!0,trackMouse:!0}),y=(0,Pr.n)().getAskPageConfig().show,f=n===yn.TEST_1?vp:Dp;return(0,Nr.jsxs)(Nr.Fragment,{children:[(0,Nr.jsx)(kr.A,{nodeRef:c,in:t&&!!n,classNames:"rtg-upsell-backdrop",timeout:200,mountOnEnter:!0,unmountOnExit:!0,children:(0,Nr.jsx)("div",{ref:c,className:(0,xr.A)("upsell-curtain-backdrop top-left bottom-right",r?"p-fixed":"p-abs",{"border-radius-16":!r&&o||!y&&!r,"border-bottom-radius-16":!r&&!o&&y}),onClick:s})}),(0,Nr.jsx)(kr.A,{nodeRef:u,in:t&&!!n,classNames:"rtg-upsell-curtain",timeout:300,mountOnEnter:!0,unmountOnExit:!0,children:e=>(0,Nr.jsx)("div",Object.assign({},g,{children:(0,Nr.jsxs)("div",{ref:u,className:(0,xr.A)("upsell-curtain bottom-left w-100 bg-white",r?"p-fixed max-h-95 overflow-y-auto border-top-radius-16":"p-abs border-radius-16",{"pb-10":i&&r}),onFocus:p.handleFocus,onBlur:p.handleBlur,"data-qa":"upsell-curtain-block",children:[(0,Nr.jsx)("span",{ref:p.trapStartRef,tabIndex:0,"aria-hidden":"true"}),(0,Nr.jsx)(f,Object.assign({},a,{transitionEntered:"entered"===e})),(0,Nr.jsx)("span",{ref:p.trapStopRef,tabIndex:0,"aria-hidden":"true"})]})}))})]})},Tp=(0,d.memo)(_p),Op=()=>{const{state:e,controller:t}=eo(tn.DONATE),n=(0,qr.t)(),i=(0,wr.P)(),s=(0,Dr.M)(),a=(0,Pr.n)(),r=(0,d.useRef)(null),o=(0,d.useRef)(null),c=Fm(),l=Km(),[u,h]=(0,d.useState)(!0),m=Ml(e.amountShakeKey,0!==e.amountShakeKey),p=Ml(e.designationShakeKey,0!==e.designationShakeKey),g=!a.preselectDesignation,y=e.designation.shouldShowDesignation&&g,f=e.designation.shouldShowDesignation&&!g,S=!!e.donation.canModifyAmount&&e.donation.hintOptions,A=!S,E=e.donation.showDonationEndDate&&e.donation.donationEndDate,C=(0,Br.$)(),v=a.infrastructureParams.livemode;Ym(o,(e=>e.designation.required));const N=(0,d.useCallback)((()=>{t.toggleTribute()}),[t]),b=(0,d.useCallback)((e=>{t.changeTributeName(e)}),[t]),P=(0,d.useCallback)((()=>{t.addComment()}),[t]),D=(0,d.useCallback)((e=>{t.setIsTributeInputFocused(e)}),[t]),_=(0,d.useCallback)((e=>t.changeGoal(e)),[t]),T=(0,d.useCallback)((()=>t.savePrevComment()),[t]),O=(0,d.useCallback)((()=>{h(!0)}),[]),x=(0,d.useCallback)((()=>{h(!1)}),[]),k=(0,d.useCallback)((()=>{t.closeUpsellCurtain()}),[t]),I=(0,d.useCallback)((e=>{t.toggleDonationEndDateActive(e)}),[t]);return(0,d.useEffect)((()=>{var t;return i&&e.upsellCurtainShown&&(null===(t=null==s?void 0:s.document)||void 0===t||t.body.classList.add("overflow-hidden")),()=>{var e;null===(e=null==s?void 0:s.document)||void 0===e||e.body.classList.remove("overflow-hidden")}}),[e,s,i]),(0,d.useEffect)((()=>{if(e.upsellCurtainShown)return c.get(cn.UPSELL_CURTAIN_EXPERIMENT).onBackDropClose(k)}),[c,e.upsellCurtainShown,k]),(0,Nr.jsxs)("form",{onSubmit:e=>{l(),e.preventDefault(),t.leave()},className:"flow-screen","data-qa":"fiat-donate-form",children:[(0,Nr.jsx)(ac,{autoFocus:i,children:n.translate("common.screenAriaLabel",{screenTitle:`${n.translate("donateForm.title")}`})}),(0,Nr.jsx)(Sc,{className:"border-bottom-0",titleFullWidth:!0,children:(0,Nr.jsxs)("div",{className:(0,xr.A)("d-flex items-center justify-center",i?"pt-3 pb-2":"py-3"),children:[(0,Nr.jsx)(Lm,{className:"icon-fill shrink-0 font-size-28 text-green-80 me-2","aria-hidden":!0}),(0,Nr.jsx)("h2",{className:"title-1 text-truncate",children:n.translate("donateForm.title")})]})}),(0,Nr.jsx)(Bo,{className:"px-body",children:(0,Nr.jsxs)("div",{className:"fixed-container grow-1 min-h-0 d-flex flex-column",children:[e.donation.canModifyFrequency&&(0,Nr.jsx)(lp,{className:i?"mb-4":"mb-3",disabled:t.isLocked}),(0,Nr.jsx)(Im.A,{children:(0,Nr.jsx)(kr.A,{nodeRef:r,timeout:150,onEntered:O,onExited:x,classNames:S?"rtg-amount-hints":"rtg-amount-suggestions",children:(0,Nr.jsxs)("div",{ref:r,children:[S&&(0,Nr.jsx)(Zm,{donation:e.donation,tribute:e.tribute,errors:e.errors,guessedCurrenciesList:e.guessedCurrenciesList,allCurrenciesList:e.allCurrenciesList,showError:e.showError,flowType:e.flowType,showFrequencyCustomAmountInput:e.showFrequencyCustomAmountInput,shake:m,disabled:t.isLocked,animationEnded:u,autofocusMode:oc.Q.ALL}),A&&(0,Nr.jsx)(tp,{donation:e.donation,tribute:e.tribute,errors:e.errors,guessedCurrenciesList:e.guessedCurrenciesList,allCurrenciesList:e.allCurrenciesList,showError:e.showError,flowType:e.flowType,shake:m,disabled:t.isLocked,animationEnded:u,autofocusMode:oc.Q.DESKTOP})]})},S?"amount-hints":"amount-suggestions")}),!y&&!E&&(0,Nr.jsx)(Vc,{size:i?12:8,sizeMin:4}),y&&(0,Nr.jsxs)(Nr.Fragment,{children:[(0,Nr.jsx)(Vc,{size:12,sizeMin:4}),(0,Nr.jsx)(ih,{goal:e.designation.goal,goals:e.designation.goals,shake:p,hasError:e.errors.designation.required,changeGoal:_,goalKey:e.designation.goalKey,isEditable:e.designation.isEditable,isDesignationRequired:g,disabled:t.isLocked,ref:o})]}),E&&e.donation.donationEndDate&&(0,Nr.jsxs)(Nr.Fragment,{children:[(0,Nr.jsx)(Vc,{size:12,sizeMin:4}),(0,Nr.jsx)(ip,{endDate:e.donation.donationEndDate,isActive:e.donation.isDonationEndDateActive,toggleDailyDonation:I,disabled:t.isLocked})]}),e.tribute.show&&(0,Nr.jsxs)(Nr.Fragment,{children:[(0,Nr.jsx)(Vc,{size:12,sizeMin:4}),(0,Nr.jsx)(hh,{inHonorOfMaxLength:e.tribute.inHonorOfMaxLength,isActive:e.tribute.isActive,sharingEnabled:e.tribute.sharingEnabled,labelType:e.tribute.labelType,name:e.tribute.name,disabled:t.isLocked,onToggleTribute:N,onChangeTributeName:b,onInputFocusChange:D})]}),(0,Nr.jsx)(Vc,{size:12,sizeMin:4,className:e.tribute.show||E||y?i?"mt-3":"mt-auto":void 0}),f&&(0,Nr.jsx)(ih,{goal:e.designation.goal,goals:e.designation.goals,shake:p,hasError:e.errors.designation.required,changeGoal:_,goalKey:e.designation.goalKey,isEditable:e.designation.isEditable,disabled:t.isLocked}),e.comment.isEnabled&&(0,Nr.jsxs)(Nr.Fragment,{children:[f&&(0,Nr.jsx)(Vc,{size:12,sizeMin:4}),(0,Nr.jsx)(Kd,{prevContent:e.comment.prevContent,content:e.comment.content,onAddComment:P,onHighlight:T,disabled:t.isLocked})]}),!i&&(0,Nr.jsx)(Vc,{size:20,sizeMin:16})]})}),(0,Nr.jsx)(ec,{children:(0,Nr.jsx)(Hc,{type:"submit",className:"btn btn-primary",disabled:t.isLocked,processingState:e.processingState,trackingElement:"nextButton",dataQa:"donate-button",children:e.donateButtonLabel})}),(0,Nr.jsx)(Tp,{show:e.upsellCurtainShown,variant:t.upsellCurtainExperiment.variantName,currentAmount:e.preDonationUpsell.upsell.fromAmount,currentCurrency:e.preDonationUpsell.currency,amountUpsellHigh:e.preDonationUpsell.highAmount,amountUpsellLow:e.preDonationUpsell.lowAmount,upsellHighText:e.preDonationUpsell.highButtonText,upsellLowText:e.preDonationUpsell.lowButtonText,questionText:e.preDonationUpsell.questionText,questionShortText:e.preDonationUpsell.questionShortText,descriptionText:e.preDonationUpsell.descriptionText,testMode:!v&&!C,onUpsellHighClick:()=>t.confirmUpsell(xm.HIGH),onUpsellLowClick:()=>t.confirmUpsell(xm.LOW),onKeepOneTimeClick:()=>t.confirmUpsell(null),onClose:k})]})};var xp;!function(e){e.CONTINUE="continue",e.UPSELL_PAY_LATER="upsell_pay_later"}(xp||(xp={}));const kp=e=>{const{controller:t}=eo(tn.DOUBLE),n=(0,qr.t)();return(0,Nr.jsx)("div",{className:(0,xr.A)("d-flex justify-center",e.className),children:(0,Nr.jsx)("button",{type:"button",className:"btn-link text-truncate",disabled:e.locked,onClick:()=>t.skip(),"data-qa":"skip-to-the-next-step","data-tracking-element-name":"skipButton",children:n.translate("doubleDonationScreen.button.skip")})})},Ip=(0,d.memo)(kp),wp=e=>{const t=(0,qr.t)(),n=(0,d.useCallback)((()=>{e.onLeave()}),[e]),i=(0,d.useCallback)((()=>{e.onAcceptUpsell()}),[e]);return(0,Nr.jsx)("div",{className:(0,xr.A)(e.className),children:e.isAlreadyPaidAmountNotMatched?(0,Nr.jsx)(Hc,{className:"btn-primary",processingState:e.processingState,onClick:n,dataQa:"double-continue",trackingElement:"nextButton",errorTitle:e.payErrorMessage,errorMessage:e.additionalPayErrorMessage,children:t.translate("doubleDonationScreen.button.continue")}):(0,Nr.jsxs)(Nr.Fragment,{children:[e.buttonType===xp.CONTINUE&&(0,Nr.jsx)(Hc,{className:"btn-primary",processingState:e.processingState,onClick:n,dataQa:"double-continue",trackingElement:"nextButton",errorTitle:e.payErrorMessage,errorMessage:e.additionalPayErrorMessage,children:t.translate("doubleDonationScreen.button.continue")}),e.buttonType===xp.UPSELL_PAY_LATER&&(0,Nr.jsxs)("div",{className:"d-block",children:[(0,Nr.jsx)(Hc,{className:"btn-primary",processingState:e.processingState,onClick:i,dataQa:"double-continue",trackingElement:"nextButton",errorTitle:e.payErrorMessage,errorMessage:e.additionalPayErrorMessage,children:e.changeAmountButtonLabel}),(0,Nr.jsx)("div",{className:"d-flex justify-center mt-5",children:(0,Nr.jsx)("button",{type:"button",className:"btn-link text-truncate",disabled:e.locked,onClick:n,"data-qa":"skip-to-the-next-step","data-tracking-element-name":"skipButton",children:e.noChangeAmountButtonLabel})})]}),e.showSkipButton&&(0,Nr.jsx)(Ip,{locked:e.locked,className:"mt-5"})]})})},Rp=(0,d.memo)(wp),Mp=e=>{const{controller:t}=eo(tn.DOUBLE),n=(0,qr.t)(),i=(0,Br.$)(),s=(0,d.useMemo)((()=>e.isIntegrationEnabled?e.companies.map((e=>({id:e.id.toString(),value:e.company_name}))):[]),[e.companies,e.isIntegrationEnabled]),a=(0,d.useCallback)((n=>{i||e.isIntegrationEnabled&&t.getDTDCompanies(n)}),[t,i,e.isIntegrationEnabled]),r=(0,d.useCallback)((e=>{t.changeEmployerName(e)}),[t]),o=(0,d.useCallback)((()=>{t.changeEmployerName(""),t.resetEmployerDTD()}),[t]),c=(0,d.useCallback)((e=>t.setEmployerDTD(Number(e))),[t]);return(0,Nr.jsx)(Gh,{className:(0,xr.A)("search-select-double",{"search-select-double-active":e.showEmployerMatchedBlock||e.showDTDUpsell}),labelFloating:!0,labelOptional:!0,label:n.translate("doubleDonationScreen.matchInput.label"),options:s,value:e.employer.name,autoComplete:"organization",onSearch:a,onSelect:c,onChange:r,placeholder:n.translate("doubleDonationScreen.matchInput.placeholder"),onClear:o,disabled:e.locked,hint:(0,Nr.jsx)(yl,{token:"doubleDonationScreen.tooltipLabel",params:{link:"https://doublethedonation.com/privacy-policy/"}}),hintAriaLabel:n.translate("doubleDonationScreen.helpAriaLabel"),allowClear:!0,dataQa:"company-field",trackingElement:"selectEmployer",autoFocus:e.autoFocus,autoFocusMode:oc.Q.DESKTOP})},Lp=(0,d.memo)(Mp),Up=e=>{const t=(0,qr.t)(),n=(0,d.useRef)(null),i=(0,wr.P)(),s=(0,Hr.G)(n);return(0,Nr.jsx)(kr.A,{classNames:i?"rtg-dtd-description-mobile":"rtg-dtd-description",nodeRef:n,in:e.showDTDDescription,addEndListener:s,mountOnEnter:!0,unmountOnExit:!0,children:(0,Nr.jsxs)("div",{ref:n,children:[(0,Nr.jsx)(yl,{className:(0,xr.A)("text-center",i?"text-ellipsis":"text-line-clamp-4"),as:"p",token:"doubleDonationScreen.description.desktop"}),(0,Nr.jsx)("p",{className:(0,xr.A)("font-weight-500 text-center mt-1-5",i?"text-ellipsis":"text-line-clamp-4"),children:t.translate("doubleDonationScreen.callToAction")}),(0,Nr.jsx)(Vc,{size:16})]})})},Fp=(0,d.memo)(Up);var jp,Bp,Hp;function qp(){return qp=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},qp.apply(this,arguments)}var Gp,Vp=function(e,t){return d.createElement("svg",qp({fill:"none",height:100,viewBox:"0 0 100 100",width:100,xmlns:"http://www.w3.org/2000/svg",ref:t},e),jp||(jp=d.createElement("circle",{cx:50,cy:50,fill:"#c4c4c4",r:50})),Bp||(Bp=d.createElement("circle",{cx:50,cy:50,fill:"#fff",r:49.5,stroke:"#c7cdd6"})),Hp||(Hp=d.createElement("path",{clipRule:"evenodd",d:"m23 92.0905v-19.1493c0-2.1476 1.7185-3.9412 3.8729-3.9412h2.1271v-13.127c0-2.1175 1.7054-3.873 3.8279-3.873h1.1721v-10.984c0-2.2061 1.7927-4.016 4-4.016h1.2055l1.4179-6.1095.002-.0079c.4286-1.7193 1.9819-2.8826 3.7361-2.8826h4.1385v-11c0-.8284.6716-1.5 1.5-1.5s1.5.6716 1.5 1.5v11h4.2669c1.7542 0 3.3075 1.1633 3.7362 2.8826l.0041.0165 1.3019 6.1009h1.1909c2.2073 0 4 1.8099 4 4.016v10.984h2.1721c2.1225 0 3.8279 1.7555 3.8279 3.873v13.127h2.1271c2.1544 0 3.8729 1.7936 3.8729 3.9412v18.4895c-.6557.444-1.3226.8729-2 1.2861v-19.7756c0-1.0877-.8671-1.9412-1.8729-1.9412h-16.2542c-1.0058 0-1.8729.8535-1.8729 1.9412v26.7025c-.6628.0793-1.3295.1456-2 .1986v-43.9693c0-2.1175 1.7054-3.873 3.8279-3.873h6.1721v-10.984c0-1.1115-.9073-2.016-2-2.016h-24c-1.0927 0-2 .9045-2 2.016v10.984h7.1721c2.1225 0 3.8279 1.7555 3.8279 3.873v44.0385c-.6703-.0397-1.3371-.0926-2-.1584v-26.8119c0-1.0877-.8671-1.9412-1.8729-1.9412h-16.2542c-1.0058 0-1.8729.8535-1.8729 1.9412v20.3697c-.6769-.3916-1.3437-.7985-2-1.2204zm19.5677-60.7311-1.309 5.6406h17.5054l-1.2053-5.6483c-.2039-.7888-.9281-1.3517-1.7919-1.3517h-11.4054c-.8666 0-1.5927.5665-1.7938 1.3594zm.5594 37.6406h-12.1271v-13.127c0-1.0428.8397-1.873 1.8279-1.873h10.3442c.9882 0 1.8279.8302 1.8279 1.873v13.6198c-.5536-.3134-1.1914-.4928-1.8729-.4928zm26.8729 0v-13.127c0-1.0428-.8397-1.873-1.8279-1.873h-10.3442c-.9882 0-1.8279.8302-1.8279 1.873v13.6198c.5536-.3134 1.1914-.4928 1.8729-.4928zm-26-36v2h2v-2zm5 0v2h2v-2zm5 2v-2h2v2zm-20 26v-3h2v3zm0 5v-3h2v3zm6-5v-3h2v3zm0 2v3h2v-3zm19-5v3h2v-3zm0 5v3h2v-3zm6-5v3h2v-3zm0 8v-3h2v3zm-34 10v14.5268h-2v-14.5268zm5 19.3691v-19.3691h-2v19.3691zm31 0v-19.3691h-2v19.3691zm5-4.8423v-14.5268h-2v14.5268zm-32-47.5268v6.0193h2v-6.0193zm6 6.0193v-6.0193h2v6.0193zm6-6.0193v6.0193h2v-6.0193zm6 6.0193v-6.0193h2v6.0193z",fill:"#619fff",fillRule:"evenodd"})))},Yp=(0,d.forwardRef)(Vp),Kp=(0,d.memo)(Yp);function zp(){return zp=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},zp.apply(this,arguments)}var $p,Wp,Xp=function(e,t){return d.createElement("svg",zp({fill:"none",height:26,viewBox:"0 0 26 26",width:26,xmlns:"http://www.w3.org/2000/svg",ref:t},e),Gp||(Gp=d.createElement("g",{stroke:"#428dff",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:4},d.createElement("path",{d:"m13 2v22"}),d.createElement("path",{d:"m2 13h22"}))))},Qp=(0,d.forwardRef)(Xp),Zp=(0,d.memo)(Qp);function Jp(){return Jp=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},Jp.apply(this,arguments)}var eg=function(e,t){return d.createElement("svg",Jp({fill:"none",height:100,viewBox:"0 0 100 100",width:100,xmlns:"http://www.w3.org/2000/svg",ref:t},e),$p||($p=d.createElement("circle",{cx:50,cy:50,fill:"#fff",r:49.5,stroke:"#c7cdd6"})),Wp||(Wp=d.createElement("g",{fill:"#619fff"},d.createElement("path",{d:"m57.2608 62.7612c-2.0159 1.5341-4.5318 2.4449-7.2605 2.4449s-5.2446-.9108-7.2604-2.4449c-.4176-.3178-.8138-.6623-1.1859-1.0311-.146-.1447-.2884-.2931-.4268-.4451-.7192-.7894.3304-1.6178 1.2605-1.1484.0241.0122.0481.0252.072.0391.4596.2678.9347.5119 1.4236.7305 1.8681.8354 3.9383 1.2999 6.117 1.2999s4.2489-.4645 6.117-1.2999c.489-.2186.9641-.4627 1.4236-.7305.0239-.0139.048-.0269.0721-.0391.93-.4694 1.9796.359 1.2605 1.1484-.1385.152-.2808.3004-.4269.4451-.3721.3688-.7682.7133-1.1858 1.0311z"}),d.createElement("path",{d:"m39 50c0-1.6569 1.1123-3 2.4845-3h.031c1.3722 0 2.4845 1.3431 2.4845 3s-1.1123 3-2.4845 3h-.031c-1.3722 0-2.4845-1.3431-2.4845-3z"}),d.createElement("path",{d:"m58.4845 47c-1.3722 0-2.4845 1.3431-2.4845 3s1.1123 3 2.4845 3h.031c1.3722 0 2.4845-1.3431 2.4845-3s-1.1123-3-2.4845-3z"}),d.createElement("path",{clipRule:"evenodd",d:"m50 75c13.8071 0 25-11.1929 25-25s-11.1929-25-25-25-25 11.1929-25 25 11.1929 25 25 25zm23-25c0 12.7026-10.2974 23-23 23-12.7025 0-23-10.2974-23-23 0-12.7025 10.2975-23 23-23 12.7026 0 23 10.2975 23 23z",fillRule:"evenodd"}))))},tg=(0,d.forwardRef)(eg),ng=(0,d.memo)(tg);const ig=()=>{const{state:e}=eo(tn.DOUBLE);return(0,Nr.jsxs)("div",{className:(0,xr.A)("double-img shrink-0 mx-auto",{enabled:!e.showDTDDescription}),"aria-hidden":!0,children:[(0,Nr.jsx)("div",{className:"double-img-user",children:(0,Nr.jsx)(ng,{className:"d-block",width:80,height:80})}),(0,Nr.jsx)("div",{className:"double-img-plus",children:(0,Nr.jsx)(Zp,{className:"d-block",width:21,height:21})}),(0,Nr.jsx)("div",{className:"double-img-company",children:(0,Nr.jsx)(Kp,{className:"d-block",width:80,height:80})})]})},sg=(0,d.memo)(ig),ag={characterData:!0,childList:!0,subtree:!0},rg=e=>{const t=(0,qr.t)(),n=(0,wr.P)(),[i,s]=(0,d.useState)(!1),a=(0,d.useCallback)((e=>{const t=e.parentElement,n=e.firstChild;t&&n&&t.offsetHeight<=n.offsetHeight+44&&s(!0)}),[]),{mutableElementRef:r}=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:ag;const n=(0,d.useRef)(null);return(0,d.useEffect)((()=>{if(!(null==n?void 0:n.current)||!e)return;const i=new MutationObserver((()=>{e(n.current)}));return i.observe(n.current,t),()=>i.disconnect()}),[e,t,n]),{mutableElementRef:n}}(a),o=sc(e.showDTDUpsell||e.showEmployerMatchedBlock||e.isAlreadyPaidAmountNotMatched);return(0,Nr.jsxs)("div",{ref:r,className:(0,xr.A)("p-rel",{"grow-1":!n&&i}),children:[e.showDTDUpsell&&!e.isAlreadyPaidAmountNotMatched&&(0,Nr.jsxs)("div",{ref:o,className:(0,xr.A)("px-3 py-2-5 border border-gray-20 border-top-0 border-bottom-radius-8 focus-not-visible",{"p-abs top-left top-right":!n&&!i,"p-abs top-left bottom-right text-scrollable border-top-radius-0 custom-scrollbar":!n&&i}),"aria-live":"polite","data-qa":"dtd-upsell-message","data-testid":"dtd-upsell-message",children:[(0,Nr.jsx)("p",{className:"subtitle-4 text-ellipsis",children:t.translate("doubleDonationScreen.nameMatch",{name:e.employer.name,amount:t.formatCurrency(e.minimumMatchedAmount,{currency:e.currency,display:"floatcents"})})}),(0,Nr.jsx)("p",{className:"body-3 text-ellipsis mt-1",children:t.translate("doubleDonationScreen.message",{withCosts:e.isFeeCovered?t.translate("doubleDonationScreen.withCosts"):"",amount:t.formatCurrency(e.upsellTotal,{currency:e.currency,display:"floatcents"}),doubleAmount:t.formatCurrency(e.DTDUpsellDoubledAmount,{currency:e.currency,display:"floatcents"})})})]}),e.showEmployerMatchedBlock&&!e.isAlreadyPaidAmountNotMatched&&(0,Nr.jsxs)("div",{ref:o,className:(0,xr.A)("px-3 py-2-5 border border-gray-20 border-top-0 border-bottom-radius-8 focus-not-visible",{"p-abs top-left top-right":!n&&!i,"p-abs top-left bottom-right text-scrollable border-top-radius-0 custom-scrollbar":!n&&i}),"aria-live":"polite","data-qa":"dtd-employer-matched-message","data-testid":"dtd-employer-matched-message",children:[(0,Nr.jsx)("p",{className:"subtitle-4 text-ellipsis",children:t.translate("doubleDonationScreen.matchedCompanyBlock.name",{name:e.employer.name})}),(0,Nr.jsx)("p",{className:"body-3 text-ellipsis mt-1",children:t.translate("doubleDonationScreen.matchedCompanyBlock.message",{doubleAmount:t.formatCurrency(e.DTDDoubledAmount,{currency:e.currency,display:"floatcents"})})})]}),e.isAlreadyPaidAmountNotMatched&&(0,Nr.jsxs)("div",{ref:o,className:(0,xr.A)("px-3 py-2-5 border border-gray-20 border-top-0 border-bottom-radius-8 focus-not-visible",{"p-abs top-left top-right":!n&&!i,"p-abs top-left bottom-right text-scrollable border-top-radius-0 custom-scrollbar":!n&&i}),"aria-live":"polite","data-qa":"dtd-is-already-paid-amount-not-matched-message",children:[(0,Nr.jsx)("p",{className:"subtitle-4 text-ellipsis",children:t.translate("doubleDonationScreen.smallDonationAmountExperiment.name",{name:e.employer.name})}),(0,Nr.jsx)("p",{className:"body-3 text-ellipsis mt-1",children:t.translate("doubleDonationScreen.smallDonationAmountExperiment.message")})]})]})},og=e=>{const{showBadge:t}=e,{state:n,controller:i}=eo(tn.DOUBLE),s=(0,qr.t)(),a=(0,wr.P)(),r=(0,d.useCallback)((()=>i.leave()),[i]),o=(0,d.useCallback)((()=>i.acceptUpsell()),[i]);return(0,Nr.jsxs)("div",{className:"flow-screen","data-qa":"active-screen-dtd",children:[(0,Nr.jsx)("div",{className:"sr-only",role:"status","aria-live":"polite",children:s.translate("common.screenAriaLabel",{screenTitle:`${s.translate("doubleDonationScreen.title")}`})}),(0,Nr.jsx)(Sc,{title:s.translate("doubleDonationScreen.title"),showBadge:t}),(0,Nr.jsx)(Bo,{className:(0,xr.A)("px-body d-flex flex-column",{"pt-6 pb-4":!a,"z-index-4":n.showDTDDescription,"overflow-hidden":!n.showDTDDescription}),children:(0,Nr.jsxs)("div",{className:"fixed-container grow-1 min-h-0 d-flex flex-column",children:[(0,Nr.jsx)(sg,{}),(0,Nr.jsxs)("div",{className:(0,xr.A)("grow-1 d-flex flex-column",a?"mt-6":"mt-4"),children:[(0,Nr.jsx)(Fp,{showDTDDescription:n.showDTDDescription}),(0,Nr.jsx)(Lp,{isIntegrationEnabled:n.isIntegrationEnabled,companies:n.companies,showEmployerMatchedBlock:n.showEmployerMatchedBlock,showDTDUpsell:n.showDTDUpsell,employer:n.employer,locked:n.locked,autoFocus:!0}),(0,Nr.jsx)(rg,{showDTDUpsell:n.showDTDUpsell,employer:n.employer,minimumMatchedAmount:n.minimumMatchedAmount,currency:n.currency,isFeeCovered:n.isFeeCovered,upsellTotal:n.upsellTotal,DTDUpsellDoubledAmount:n.DTDUpsellDoubledAmount,DTDDoubledAmount:n.DTDDoubledAmount,showEmployerMatchedBlock:n.showEmployerMatchedBlock,isAlreadyPaidAmountNotMatched:n.isAlreadyPaidAmountNotMatched})]})]})}),(0,Nr.jsx)(ec,{children:(0,Nr.jsx)(Rp,{buttonType:n.buttonType,processingState:n.processingState,formattedTotal:n.formattedTotal,frequency:n.frequency,locked:n.locked,formattedUpsellTotal:n.formattedUpsellTotal,declineButtonLabel:n.declineButtonLabel,changeAmountButtonLabel:n.changeAmountButtonLabel,noChangeAmountButtonLabel:n.noChangeAmountButtonLabel,showSkipButton:n.showSkipButton,isAlreadyPaidAmountNotMatched:n.isAlreadyPaidAmountNotMatched,onLeave:r,onAcceptUpsell:o,additionalPayErrorMessage:n.additionalPayErrorMessage,payErrorMessage:n.payErrorMessage})})]})},cg=(0,d.memo)(og);var lg;function ug(){return ug=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},ug.apply(this,arguments)}var dg=function(e,t){return d.createElement("svg",ug({fill:"none",height:36,viewBox:"0 0 102 36",width:102,xmlns:"http://www.w3.org/2000/svg",ref:t},e),lg||(lg=d.createElement("path",{d:"m51.768 17.256c2.83-4.4504 1.4109-5.1346 1.2663-5.0523-2.7532 1.5572-4.8499 6.2447-4.6739 7.806.243 2.1494 1.9046-.3916 3.4076-2.7537zm10.7215-4.0841c-.5126.9186-.8436 1.928-.9748 2.9726-.0724.522-.1568 2.7897-.1381 3.0979.0289.5006.0924.9985.1902 1.4902.0673.2455.4869 1.128-.8596 1.3145-.7923.1094-.7768-1.881-.7923-2.2068-.0304-.6942.0842-3.1333.1576-3.4953.0774-.3703-.077.0221-.2228.2645-.3357.564-.7264 1.3271-1.1943 2.0785-.6145.988-1.9851 3.3414-3.8543 3.2013-.6993-.0531-1.4106-.1435-1.8169-2.0999-.1558-.7499-.0954-1.7357-.0794-2.3275-.0195-.1219-.0029-.2617-.1045-.2047-.662 1.5506-2.8121 6.1205-5.2416 5.0932-1.1252-.4744-1.6796-1.9326-.4375-4.7802 1.2101-2.7754 4.2625-6.2172 5.4784-6.4483 1.0837-.2066 1.1964.3414 1.1964.3414.0988-.2022.7744-.1785.9222.1116.1974.388.3292.4552.1974 1.4787-.0746.5903-.6208 4.2824-.5265 5.551.0434.5945.145 2.0594.7469 2.1299 1.0514.1264 2.3256-2.1189 2.4703-2.3535.2832-.4587 2.5518-4.2769 2.8311-4.8344.3005-.6011.4905-1.04.6844-1.4226s.7783-.4251 1.2878-.0762c.5094.3489.2543.8285.0799 1.1244zm-48.0051 1.8703c-1.3339.1442-3.7659 3.3812-4.267 4.5307-.51231 1.1738-.69726 2.3054-.0893 2.7775 1.2581.9807 2.5596-.6817 2.9421-1.0681.2367-.2379 1.8919-2.0504 2.3081-3.8913.2752-1.2155.4026-2.4881-.8939-2.3488zm.6951 14.367c-.092.1652-.1866.3288-.2838.491-.9827 1.6379-2.2719 3.0993-3.8704 4.1527-2.1651 1.4262-4.1985 1.9741-6.47046 1.9467-1.32108-.0153-2.59509-.23-3.681415-.9237-.89044-.5686-1.017386-1.4576-.747703-2.0445.374914-.8176 1.545208-.738 2.043118-.2688 1.24319 1.1703 1.98527 1.6241 3.58363 1.5464 1.31769-.0756 2.60043-.4542 3.74914-1.1067 6.61179-3.8762 6.55139-10.8443 6.81979-15.043.0284-.2553-.1098-.0696-.1565.0694-.3191.8933-.7141 1.7575-1.1806 2.5828-.6777 1.2294-1.6366 2.2796-2.7977 3.0641-.8373.5552-2.1971.8239-3.15466.1973-.34712-.2287-2.37703-1.4216-.65659-4.9754 1.08192-2.2361 3.35855-3.7871 3.87215-4.116 1.2558-.8052 2.1532-1.1881 3.0942-1.1155.4792.035.5483.2244.9046.2149.2028-.239.3147-.4146.6484-.5072.4479-.0718.9798.3049 1.1844 1.0188.2045.7139-.3282 1.8607-.4627 2.4122.0011-.0003.4742 7.1534-2.4369 12.4045zm7.5328-16.1178c-.8104.0153-.7441.6025-.914 1.1162-.1644.5122-1.561 5.1182-1.7384 5.944-.1773.8258-.2989 1.5674-.0425 2.7007.2609 1.1585 1.5837.8199 1.724.6166.6462-.9086.0738-1.1763.053-1.8109-.0166-.6632.1643-1.359.3008-2.257.0486-.3201.146-1.7758.1939-1.9734.0539-.2134.5102-1.8343 1.1675-2.8201.2814-.4226.5291-1.5382-.7443-1.5161zm2.2057-5.38681c-.1108-.22866-.7137-.94895-1.5005-.38979-1.1705.83202.1791 1.98174.3958 2.5458.2167.564 1.3867 1.0366 1.2159-.07625-.0249-.16006.2108-1.41755-.1112-2.07976zm12.9236 5.42541c-.381.0852-1.1413.2392-1.6197.3201-.7243.122-1.1189.5793-1.0916 1.0415.0273.4656.186.6849.8323.5617.5843-.1109 1.083-.6097 1.5944-.6119 0 0-1.056 4.4695-1.1251 5.0684-.069.599-.3814 2.2376.2602 3.1673 1.4273 2.0695 4.2821-.3026 4.5489-.561.196-.191 1.9995-1.7787 2.6109-3.052.3097-.6462-.2176-.7889-.5746-.9208-.357-.1318-1.1112.0961-1.2166.5686-.2296 1.0266-2.7272 3.7958-3.9633 3.2406-1.4568-.6555 1.1712-7.9999 1.1712-7.9999.3134-.1412 1.9007-.5519 3.4034-.9398 1.7337-.4459 7.0324-1.4963 5.8365-3.0855-.5853-.77741-2.098.4065-2.6106.6543-1.8366.8842-6.3321 2.1822-6.3321 2.1822s.5837-2.6403.7726-3.1604c.217-.59528 1.0174-.98477 1.1339-2.04454.1374-1.23265-1.3416-1.79394-2.0476-.44437-.146.27699-.3472 1.04148-.367 1.06054-.1896.18293-1.8222.83736-3.4274 1.60566-.5059.24211-3.3795 1.29101-3.3848 1.28421.0039-.022.8725-2.78682 1.879-5.09342.6696-1.53371 1.613-3.66866 3.2844-4.10205 1.5653-.40504.8273 1.23173 1.5316 1.65719.8933.53934 1.4413-.14085 1.5781-.79132.1073-.50946.0789-3.18283-2.6284-2.9156001-2.5762.2550351-4.629 4.2029701-7.1673 11.5801001-.0273.0295-2.0434 1.3369-3.7148 1.6729-.8265.1658-1.1922.2376-1.3015.5335-.0902.2374-.1095.496-.0556.7442.0539.2483.1788.4753.3593.6534.4763.5707 4.198-1.9023 4.194-1.8852-.0759.1007-3.1294 11.7808-3.1539 11.9171-.1759.9727-1.1604 3.5375-1.1071 4.7017.0295.599.2633 1.8456 1.1223 1.79 1.7988.1185 1.4519-2.4185 1.331-2.8837-.2519-.9624 1.0403-7.3241 2.2-12.0124.2364-.9563.7222-2.5254.8067-2.8986.0487-.2687.1595-.5223.3235-.7403.1641-.218.3768-.3943.621-.5147 0 0 6.4662-3.05997 6.5263-3.04229.0005.00671-1.0325 3.69459-1.0325 3.69459zm44.3013 5.8385c1.252 1.1886 2.4972.4351 3.1381-.0832 1.9657-1.5869 6.0185-8.8192 6.0185-8.8192.0231.242-1.6887 8.5367.5998 9.4564 1.4675.5884 4.8829-2.337 5.274-2.6078 2.2551-1.5627.8733-2.1342.4383-2.1342-1.1629-.0037-.9535.8416-1.2716 1.2212-.5246.6271-2.6332 2.8049-3.6656 2.2267-.556-.3128-.4188-2.1555-.3634-2.5802.3249-4.3903.4117-5.183.6665-6.19282.1427-.56129.8239-.5465 1.241-.62333 5.6306-1.04438 6.6405-.62318 7.3425-.96679.557-.27515.657-1.45962-.133-1.71435-.362-.11418-.82.16219-1.6491.47256-.8247.30595-4.9793 1.22823-5.5903 1.31923-.5628.08171-.6833.00214-.82-.17485-.1345-.17515.1245-2.23525.9316-3.9429.3512-.73904.3605-1.87-.7863-1.9575-.4716-.034-.8722.10076-1.0514.50427-.1784.40093-.522 4.05953-.6023 4.30313-.0813.24055-.5163.42836-.6124.84589-.0962.41754-.0292.67807-.3091.77197-.2829.0965-1.0576.17119-1.3763.24817-.3354.08202-.5344.72609-.5467 1.0985-.0123.37242.5862.15107.8748.10884.3295-.04817 1.1352-.45229.5619.24058-.2173.2648-4.1258 6.3984-5.6521 7.6614-1.7563 1.4514-1.6307-1.4025-1.5869-1.8886.2655-2.9104 1.5337-4.8629 1.7159-5.3263.1792-.4657.2547-1.84563-1.2425-1.54075-.1745.04422-.3349.13231-.4661.25598s-.2288.27885-.2838.45089c-.0025.00999-.0039.0202-.0044.03049-.1505 1.36019-2.7506 7.47449-.7896 9.33709zm2.2821-14.24048c.4614.90306 1.2496.58369 1.3838.35061.1347-.23125.2422-.27927.6244-.43385.7017-.28141-.5099-1.54576-1.6624-1.18904-.0741.03234-.1379.08452-.1844.15082s-.074.14418-.0794.2251c.0313.26464-.239.59437-.082.89681zm-14.1346 7.09688s.7563-.6542 1.0766-.6373c.1486.0073-.1106.4206.4091.6759.276.1372-.3019 1.9828-1.4444 3.7543-2.6238 4.0675-3.8678 3.8839-3.9757 2.6486-.2219-2.5774 3.1735-5.9166 3.9344-6.4415zm1.332 3.3348s-.0097.8764.0583 1.6257c.0607.6726.2897 2.0799.5257 2.5351.3657.7012 1.141.7012 1.7381.3576.7815-.4508.4119-1.2939.1143-1.5745-.2598-.2472-.8912-.5641-1.0824-1.6228-.1125-.6267-.0205-3.4508.1645-4.4388.1915-.9067.4776-1.7907.8535-2.63723.3113-.61662 2.1866-4.14733 2.2141-5.33256.0114-.51723-.5193-.94605-1.3865-.85642-.8672.08964-1.083.78676-1.0845 1.24378-.0021.45442-.9204 3.65448-.9679 3.80006-.0759.2186-.2264 1.52884-.6744 1.53173-.9977-.01753-1.9712.30954-2.7574.92654-.4321.3287-1.8994 1.4746-2.7465 2.6702-.3843.5411-2.1316 2.7961-1.9341 5.4879.18 2.4476 1.8859 2.0145 2.3753 1.936 2.2262-.359 3.7915-4.035 4.0182-4.4858.401-.8001.2654-.5849.5715-1.1665zm-8.7702-8.94233c-.1631.20122-.1224.8398.2328 1.16999.2674.24894.3048.29482.3134.49604.0152.37105.2512.39163.6146.38644.4444-.0064.8078-.31601.8527-.94605.045-.63004-.563-1.16892-1.0524-1.29027-.4894-.12134-.7495-.07942-.9611.18385z",fill:"#000"})))},hg=(0,d.forwardRef)(dg),mg=(0,d.memo)(hg);const pg=()=>{const{state:e}=eo(tn.GIFT_AID),t=(0,wr.P)(),n=(0,d.useRef)(null),i=_m(n);return(0,Nr.jsx)("div",{className:"p-rel grow-1","data-qa":"legal-text",children:(0,Nr.jsx)("div",{ref:n,className:(0,xr.A)({"border-top border-gray-20":!i||t,"p-abs top-left bottom-right":!t,"text-scrollable custom-scrollbar":i,"pointer-events-none":e.locked}),children:(0,Nr.jsx)("p",{className:(0,xr.A)("body-4 text-gray-80 text-ellipsis",i?"px-3 py-2-5":"pt-4-5"),dangerouslySetInnerHTML:{__html:e.legalText}})})})},gg=(0,d.memo)(pg),yg={boxShadow:"inset 0 0 0 1px #c7cdd6"},fg={boxShadow:"inset 0 -1px 0 0 #c7cdd6"},Sg=e=>{let{className:t,email:n,name:i}=e;const s=(0,qr.t)();return(0,Nr.jsxs)("div",{className:t,children:[(0,Nr.jsx)("p",{className:"text-center text-truncate",children:s.translate("idealConfirmationScreen.description")}),(0,Nr.jsxs)("div",{className:"bg-white border-radius-8 mt-5",style:yg,children:[(0,Nr.jsxs)("div",{className:"px-3 py-2",style:fg,children:[(0,Nr.jsx)("p",{className:"caption-1 text-truncate text-gray-60",children:s.translate("idealConfirmationScreen.email")}),(0,Nr.jsx)("p",{className:"label-3 text-truncate",children:n})]}),(0,Nr.jsxs)("div",{className:"px-3 py-2",children:[(0,Nr.jsx)("p",{className:"caption-1 text-truncate text-gray-60",children:s.translate("idealConfirmationScreen.name")}),(0,Nr.jsx)("p",{className:"label-3 text-truncate",children:i})]})]})]})},Ag=(0,d.memo)(Sg);var Eg;function Cg(){return Cg=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},Cg.apply(this,arguments)}var vg,Ng,bg,Pg,Dg,_g,Tg=function(e,t){return d.createElement("svg",Cg({fill:"none",height:24,viewBox:"0 0 24 24",width:24,xmlns:"http://www.w3.org/2000/svg",ref:t},e),Eg||(Eg=d.createElement("g",{stroke:"currentColor",strokeWidth:1.4},d.createElement("g",{strokeLinecap:"round"},d.createElement("path",{d:"m12 12v5"}),d.createElement("path",{d:"m7 12v5"}),d.createElement("path",{d:"m17 12v5"})),d.createElement("path",{d:"m12 4-8 5h16z",strokeLinejoin:"round"}),d.createElement("path",{d:"m5 20h14",strokeLinecap:"round"}))))},Og=(0,d.forwardRef)(Tg),xg=(0,d.memo)(Og);function kg(){return kg=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},kg.apply(this,arguments)}var Ig=function(e,t){return d.createElement("svg",kg({fill:"none",height:28,viewBox:"0 0 28 28",width:28,xmlns:"http://www.w3.org/2000/svg",ref:t},e),vg||(vg=d.createElement("path",{d:"m0 2.99597v21.02063c0 1.0062.82326 1.8294 1.82947 1.8294h12.55933c9.4949 0 13.6112-5.3146 13.6112-12.3672 0-7.01599-4.1163-12.3123-13.6112-12.3123h-12.55933c-1.00621 0-1.82947.82326-1.82947 1.82947z",fill:"#fff"})),Ng||(Ng=d.createElement("path",{d:"m8.40625 6.32564v15.53216h6.75985c6.1379 0 8.7998-3.4668 8.7998-8.3698 0-4.69257-2.6619-8.33321-8.7998-8.33321h-5.58899c-.64946 0-1.17086.53054-1.17086 1.17085z",fill:"#c06"})),bg||(bg=d.createElement("path",{d:"m14.3891 24.1721h-10.92187c-.96962 0-1.75629-.7867-1.75629-1.7563v-17.8099c0-.96962.78667-1.75629 1.75629-1.75629h10.92187c10.364 0 11.9099 6.66841 11.9099 10.63839 0 6.8879-4.2352 10.6841-11.9099 10.6841zm-10.92187-20.73706c-.64946 0-1.17086.5214-1.17086 1.17086v17.8099c0 .6494.5214 1.1708 1.17086 1.1708h10.92187c7.2996 0 11.3244-3.5857 11.3244-10.0986 0-8.74489-7.0983-10.05296-11.3244-10.05296z",fill:"#000"})),Pg||(Pg=d.createElement("g",{fill:"#fff"},d.createElement("path",{d:"m10.7856 11.3934c.2378 0 .4574.0366.6678.1098s.3842.1921.5397.3384c.1463.1555.2652.3476.3567.5672.0823.2287.1281.4939.1281.8049 0 .2745-.0366.5214-.1006.7501-.0732.2287-.1738.43-.3111.5946-.1372.1647-.311.2927-.5214.3933-.2103.0915-.4573.1464-.7409.1464h-1.60078v-3.7138h1.58248zm-.0549 3.0278c.1189 0 .2287-.0183.3476-.0549.1098-.0366.2104-.1006.2927-.1921.0824-.0915.1555-.2012.2104-.3476.0549-.1463.0824-.311.0824-.5214 0-.1829-.0183-.3567-.0549-.5031-.0366-.1463-.1006-.2836-.183-.3842-.0823-.1006-.1921-.1921-.3293-.247-.1372-.0548-.3018-.0823-.5031-.0823h-.5854v2.3417h.7226z"}),d.createElement("path",{d:"m15.7795 11.3934v.6861h-1.9576v.7958h1.8021v.6312h-1.8021v.9055h2.0033v.6861h-2.8174v-3.7138h2.7717z"}),d.createElement("path",{d:"m18.5784 11.3936 1.3904 3.7138h-.8507l-.2836-.8233h-1.3904l-.2927.8233h-.8233l1.3996-3.7138zm.0457 2.2776-.4665-1.3629h-.0092l-.4848 1.3629z"}),d.createElement("path",{d:"m21.2965 11.3936v3.0277h1.8112v.6861h-2.6253v-3.7138z"}))),Dg||(Dg=d.createElement("path",{d:"m5.35118 14.9607c.94471 0 1.71055-.7659 1.71055-1.7106s-.76584-1.7105-1.71055-1.7105-1.71056.7658-1.71056 1.7105.76585 1.7106 1.71056 1.7106z",fill:"#000"})),_g||(_g=d.createElement("path",{d:"m6.64143 21.8579c-1.43613 0-2.5887-1.1617-2.5887-2.5887v-2.0215c0-.7135.57629-1.299 1.29893-1.299.71349 0 1.29892.5763 1.29892 1.299v4.6102z",fill:"#000"})))},wg=(0,d.forwardRef)(Ig),Rg=(0,d.memo)(wg);const Mg=e=>{let{className:t}=e;const n=(0,qr.t)();return(0,Nr.jsxs)("div",{className:t,children:[(0,Nr.jsxs)("div",{className:"d-flex items-center justify-center","aria-hidden":!0,children:[(0,Nr.jsx)("div",{className:"ideal-img-logo",children:(0,Nr.jsx)(Rg,{className:"icon d-block"})}),(0,Nr.jsx)("div",{className:"ideal-img-bank",children:(0,Nr.jsx)(xg,{className:"icon-stroke d-block"})})]}),(0,Nr.jsx)("p",{className:"text-center mt-8",children:n.translate("idealConfirmationScreen.returnInfoLabel")})]})},Lg=(0,d.memo)(Mg),Ug=e=>{let{className:t,locked:n}=e;const i=(0,wr.P)();return(0,Nr.jsx)("div",{className:(0,xr.A)("p-rel",t),children:(0,Nr.jsx)("div",{className:(0,xr.A)({"p-abs top-left bottom-right text-scrollable custom-scrollbar":!i}),children:(0,Nr.jsx)(yl,{className:(0,xr.A)("body-4 text-gray-80 text-ellipsis",{"px-3 py-2-5":!i,"pointer-events-none":n}),as:"p",token:"idealConfirmationScreen.legalInformation"})})})},Fg=(0,d.memo)(Ug);var jg;!function(e){e.CARD="creditCard",e.APPLE_PAY="applePay",e.GOOGLE_PAY="googlePay",e.SEPA="sepa",e.PAYPAL="paypal",e.AU_BECS="auBecsDebit",e.UK_BACS="ukBacs",e.VENMO="venmo",e.ACSS="acss",e.IDEAL="ideal",e.US_BANK_ACCOUNT="usBankAccount",e.US_BANK_ACCOUNT_INSTANT="usBankAccountInstant",e.US_BANK_ACCOUNT_VERIFICATION="usBankAccountVerification",e.AMAZON_PAY="amazonPay"}(jg||(jg={}));const Bg=()=>{const e=(0,qr.t)(),t=(0,Ur.k)();return(0,Nr.jsxs)("div",{className:(0,xr.A)(t("payment-loader"),"p-abs top-left bottom-right d-flex flex-column items-center justify-center p-8 bg-white"),children:[(0,Nr.jsx)("div",{className:"spinner spinner-primary spinner-xl"}),(0,Nr.jsx)("p",{className:"mt-6 body-1 text-center text-ellipsis max-w-100",children:e.translate("paymentLoader.text")})]})};var Hg;!function(e){e.VISA="visa",e.MASTERCARD="mastercard",e.AMEX="amex",e.DISCOVER="discover",e.DINERS="diners",e.JCB="jcb",e.UNIONPAY="unionpay",e.UNKNOWN="unknown",e.UNKNOWN_ERROR="unknown-error"}(Hg||(Hg={}));const qg={visa:Hg.VISA,mastercard:Hg.MASTERCARD,amex:Hg.AMEX,discover:Hg.DISCOVER,diners:Hg.DINERS,jcb:Hg.JCB,unionpay:Hg.UNIONPAY,unknown:Hg.UNKNOWN};var Gg,Vg;function Yg(){return Yg=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},Yg.apply(this,arguments)}var Kg=function(e,t){return d.createElement("svg",Yg({xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:1.4,strokeLinecap:"round",strokeLinejoin:"round",ref:t},e),Gg||(Gg=d.createElement("rect",{x:9,y:9,width:13,height:13,rx:2,ry:2})),Vg||(Vg=d.createElement("path",{d:"M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"})))},zg=(0,d.forwardRef)(Kg),$g=(0,d.memo)(zg);const Wg=e=>{const t=(0,qr.t)(),n=(0,wr.P)(),i=(0,d.useRef)(null),s=(0,Dr.M)();return(0,Nr.jsxs)(Nr.Fragment,{children:[e.isBottomPlacement?(0,Nr.jsx)("div",{className:"ui-tooltip-stripes ui-tooltip-stripes-left"}):(0,Nr.jsx)("div",{className:"ui-tooltip-stripes ui-tooltip-stripes-top"}),(0,Nr.jsx)("p",{className:"text-gray-80 mt-1",children:t.translate("creditCardScreen.cardForm.testModeTooltip.instructions")}),(0,Nr.jsxs)("div",{className:"d-flex items-center mt-1",children:[(0,Nr.jsxs)("p",{ref:i,className:"label-4 text-sans-serif text-select-all","data-qa":"testmode-tooltip-card-number",children:["4242",(0,Nr.jsx)("span",{className:"text-transparent",children:"."}),"4242",(0,Nr.jsx)("span",{className:"text-transparent",children:"."}),"4242",(0,Nr.jsx)("span",{className:"text-transparent",children:"."}),"4242"]}),!n&&(0,Nr.jsx)("button",{type:"button",className:"btn-icon text-gray-40 ms-1-5",disabled:e.locked,"aria-label":t.translate("creditCardScreen.cardForm.testModeTooltip.copyAriaLabel"),"data-qa":"testmode-tooltip-copy-button",onClick:()=>{var e;if(!i.current)throw new Error("Number ref is not defined");null===(e=s.getSelection())||void 0===e||e.selectAllChildren(i.current);try{s.document.execCommand("copy"),setTimeout((()=>{var e;null===(e=s.getSelection())||void 0===e||e.removeAllRanges()}),2e3)}catch(e){}},children:(0,Nr.jsx)($g,{className:"icon-stroke icon-stroke-2 d-block","aria-hidden":!0})})]}),(0,Nr.jsxs)("div",{className:"d-flex flex-wrap items-center mt-0-5 mx-minus-2",children:[(0,Nr.jsxs)("p",{className:"my-0-5 mx-2",children:[(0,Nr.jsx)("span",{className:"text-gray-80 me-1",children:t.translate("creditCardScreen.cardForm.testModeTooltip.expireDate")}),(0,Nr.jsxs)("b",{className:"label-4 text-sans-serif text-select-all","data-qa":"testmode-tooltip-expire",children:["04/",((new Date).getFullYear()+2).toString().slice(-2)]})]}),(0,Nr.jsxs)("p",{className:"my-0-5 mx-2",children:[(0,Nr.jsx)("span",{className:"text-gray-80 me-1",children:t.translate("creditCardScreen.cardForm.testModeTooltip.cvc")}),(0,Nr.jsx)("b",{className:"label-4 text-sans-serif text-select-all","data-qa":"testmode-tooltip-cvc",children:"000"})]})]})]})},Xg=(0,d.memo)(Wg),{ScrollToFieldsProvider:Qg,useAddFieldToScroll:Zg,useScrollToFieldsTrigger:Jg,useFakeStripeElement:ey}=(0,Zl.J)(),ty=[Po.b.CLICK],ny=["top","top-end","bottom","bottom-end"],iy=e=>{const{isReady:t,locked:i,stripeElementsCardState:s,setStripeElementsCardState:a}=e,{state:r,controller:o}=eo(tn.PAYMENT_OPTIONS),c=(0,qr.t)(),u=(0,$r.Q)(),h=yo("lg"),m=no(),p=(0,wr.P)(),g=(0,fm.j)(),y=(0,Br.$)(),[f,S]=(0,d.useState)(),A=Ml(r.shakeKey,0!==r.shakeKey),E=(0,d.useRef)(null),C=(0,d.useRef)(null),v=(0,d.useRef)(null),N=(0,d.useRef)(null),b=(0,d.useRef)(null),[P,D]=(0,d.useState)(!1),[_,T]=(0,d.useState)(Hg.UNKNOWN),O=(0,d.useRef)(!1),x=(0,Dr.M)(),k=ey({scrollIntoView:e=>{var t;return null===(t=C.current)||void 0===t?void 0:t.scrollIntoView(e)},focus:()=>{var e;return null===(e=null==f?void 0:f.getElement(Fa.CARD_NUMBER))||void 0===e?void 0:e.focus()}}),I=ey({scrollIntoView:e=>{var t;return null===(t=v.current)||void 0===t?void 0:t.scrollIntoView(e)},focus:()=>{var e;return null===(e=null==f?void 0:f.getElement(Fa.CARD_EXPIRY))||void 0===e?void 0:e.focus()}}),w=ey({scrollIntoView:e=>{var t;return null===(t=N.current)||void 0===t?void 0:t.scrollIntoView(e)},focus:()=>{var e;return null===(e=null==f?void 0:f.getElement(Fa.CARD_CVC))||void 0===e?void 0:e.focus()}});return Zg(k,(e=>Boolean(e.cardNumber.error)||e.cardNumber.isEmpty)),Zg(I,(e=>Boolean(e.cardExpiry.error)||e.cardExpiry.isEmpty)),Zg(w,(e=>Boolean(e.cardCvc.error)||e.cardCvc.isEmpty)),(0,d.useEffect)((()=>{(0,l.sH)(void 0,void 0,void 0,(function*(){if(y)return;if(!C.current||!v.current||!N.current)throw new Error("Card containers are not provided");const{stripeElements:e}=yield o.initiateCreditCard({source:ja.PAYMENT_OPTIONS,onCardElementReady:e=>{a(e,(e=>Object.assign(Object.assign({},e),{isReady:!0})))},cardCvcContainer:N.current,cardExpiryContainer:v.current,cardNumberContainer:C.current,cardNumberOptions:{placeholder:"1234 1234 1234 1234",showIcon:!1},cardCvcOptions:{placeholder:"123"},stripeElementStyleOverride:Object.assign(Object.assign({},pa),{base:Object.assign(Object.assign({},pa.base),{"::placeholder":{color:"transparent"}}),invalid:Object.assign(Object.assign({},pa.invalid),{color:"#222832",":focus":{color:"#222832"},"::placeholder":{color:"transparent"}})})});S(e)}))}),[o,y,a]),(0,d.useEffect)((()=>{const e=null==f?void 0:f.getElement(Fa.CARD_NUMBER),t=null==f?void 0:f.getElement(Fa.CARD_EXPIRY),n=null==f?void 0:f.getElement(Fa.CARD_CVC);e&&t&&n&&(e.update({disabled:i}),t.update({disabled:i}),n.update({disabled:i}))}),[i,f]),(0,d.useEffect)((()=>{if(!s.cardNumber.isReady||!f||!t)return;const e=f.getElement(Fa.CARD_NUMBER),n=f.getElement(Fa.CARD_EXPIRY),i=f.getElement(Fa.CARD_CVC);if(!e||!n||!i){if(y)return;throw new Error("Card elements are not initialized")}const r={[Fa.CARD_NUMBER]:!1,[Fa.CARD_EXPIRY]:!1,[Fa.CARD_CVC]:!1},c={[Fa.CARD_NUMBER]:e,[Fa.CARD_EXPIRY]:n,[Fa.CARD_CVC]:i};function l(e){if(o.changeCardFilledFields(e.elementType,e.complete),e.elementType===Fa.CARD_NUMBER&&(e.error?T(Hg.UNKNOWN_ERROR):T(qg[e.brand]||Hg.UNKNOWN)),a(e.elementType,(t=>{var n;return Object.assign(Object.assign({},t),{isEmpty:e.empty,error:(null===(n=e.error)||void 0===n?void 0:n.message)||null})})),!e.complete)return void(r[e.elementType]=!1);r[e.elementType]=!0;const[t]=Object.entries(r).find((e=>{let[,t]=e;return!t}))||[];t&&c[t].focus()}const u=e=>{D(!0),O.current?x.document.dispatchEvent(new Event("stripeElementEvent")):O.current=!0};return e.on("focus",u),n.on("focus",u),i.on("focus",u),g||O.current||e.focus(),e.on("change",l),n.on("change",l),i.on("change",l),()=>{e.off("change",l),n.off("change",l),i.off("change",l),e.off("focus",u),n.off("focus",u),i.off("focus",u)}}),[o,x.document,y,a,f,s.cardNumber.isReady,t,g]),(0,Nr.jsxs)(Nr.Fragment,{children:[(0,Nr.jsxs)("div",{ref:E,className:(0,xr.A)("group-stacked-vertical group-shadow",{shake:A}),"data-qa":"payment-information-block",role:"group","aria-label":c.translate("creditCardScreen.cardForm.ariaLabel"),children:[(0,Nr.jsxs)(nl.s,{htmlFor:`card-number-${m}`,label:c.translate("creditCardScreen.cardForm.numberInput.label"),labelFloating:!0,formGroupClass:(0,xr.A)("group-stacked-item",{"pointer-events-none":r.locked||i}),formLabelClass:(0,xr.A)({"has-value":!s[Fa.CARD_NUMBER].isEmpty,"has-error":null!==s[Fa.CARD_NUMBER].error}),dataQa:"card-number-label",children:[(0,Nr.jsx)("div",{ref:C,id:`card-number-${m}`,className:"StripeElement has-label-floating"}),(0,Nr.jsxs)("div",{className:"p-abs centered-right d-flex items-center z-index-5 me-2-5",children:[s[Fa.CARD_NUMBER].error&&(0,Nr.jsxs)(Nr.Fragment,{children:[t&&(0,Nr.jsx)(al.U,{className:"shrink-0 me-2",children:s[Fa.CARD_NUMBER].error}),(0,Nr.jsx)("p",{role:"alert",className:"sr-only",children:s[Fa.CARD_NUMBER].error})]}),(0,Nr.jsx)("img",{className:"shrink-0 pointer-events-none",src:n(534)(`./card-${_}.png`),width:30,height:20,alt:_,"aria-hidden":!0})]})]}),(0,Nr.jsxs)("div",{className:"group-stacked-item group-stacked-horizontal",children:[(0,Nr.jsxs)(nl.s,{htmlFor:`expiration-${m}`,label:c.translate("creditCardScreen.cardForm.expirationDate.label"),labelFloating:!0,formGroupClass:(0,xr.A)("group-stacked-item",{"pointer-events-none":r.locked||i}),formLabelClass:(0,xr.A)({"has-value":!s[Fa.CARD_EXPIRY].isEmpty,"has-error pe-6":null!==s[Fa.CARD_EXPIRY].error}),dataQa:"expiration-label",children:[(0,Nr.jsx)("div",{ref:v,id:`expiration-${m}`,className:"StripeElement has-label-floating"}),s[Fa.CARD_EXPIRY].error&&(0,Nr.jsxs)(Nr.Fragment,{children:[t&&(0,Nr.jsx)(al.U,{className:"p-abs centered-right z-index-5 me-4",children:s[Fa.CARD_EXPIRY].error}),(0,Nr.jsx)("p",{role:"alert",className:"sr-only",children:s[Fa.CARD_EXPIRY].error})]})]}),(0,Nr.jsxs)(nl.s,{htmlFor:`cvc-${m}`,label:c.translate("creditCardScreen.cardForm.cvcCode.label"),labelFloating:!0,formGroupClass:(0,xr.A)("group-stacked-item",{"pointer-events-none":r.locked||i}),formLabelClass:(0,xr.A)({"has-value":!s[Fa.CARD_CVC].isEmpty,"has-error pe-12":null!==s[Fa.CARD_CVC].error}),dataQa:"cvc-label",children:[(0,Nr.jsx)("div",{ref:N,id:`cvc-${m}`,className:"StripeElement has-label-floating"}),(0,Nr.jsxs)("div",{className:"p-abs centered-right d-flex items-center z-index-5 me-4","data-qa":"cvc-wrapper",children:[s[Fa.CARD_CVC].error&&(0,Nr.jsxs)(Nr.Fragment,{children:[t&&(0,Nr.jsx)(al.U,{className:"shrink-0 me-2",children:s[Fa.CARD_CVC].error}),(0,Nr.jsx)("p",{role:"alert",className:"sr-only",children:s[Fa.CARD_CVC].error})]}),(0,Nr.jsx)("button",{type:"button",className:"btn-icon font-size-18 text-gray-60",ref:b,disabled:r.locked||i,"aria-label":c.translate("creditCardScreen.cardForm.cvcCode.helpAriaLabel"),"data-qa":"cvc-help-button",onClick:()=>D(!1),children:(0,Nr.jsx)(Kc.A,{className:(0,xr.A)("icon-stroke d-block",{"icon-flip-horizontal":u}),"aria-hidden":!0})}),!r.locked&&!i&&t&&!P&&(0,Nr.jsx)(Do.S,{triggerRef:b,trigger:ty,placement:u?"left-start":"right-start",fallbackPlacements:ny,maxWidth:p?"var(--fixed-container-width-desktop)":void 0,children:c.translate("creditCardScreen.cardForm.cvcCode.tooltipLabel")})]})]})]})]}),t&&!i&&(0,Nr.jsx)(Rc.q,{triggerRef:E,placement:h?u?"left":"right":"top-start",show:r.showTestModeTooltipInfo,children:(0,Nr.jsx)(Xg,{isBottomPlacement:!h,locked:r.locked})})]})},sy=(0,d.memo)(iy);function ay(e){switch(e){case jg.CARD:case jg.APPLE_PAY:case jg.GOOGLE_PAY:case jg.SEPA:case jg.PAYPAL:case jg.AU_BECS:case jg.UK_BACS:case jg.VENMO:case jg.ACSS:case jg.IDEAL:return e;case jg.US_BANK_ACCOUNT:case jg.US_BANK_ACCOUNT_INSTANT:case jg.US_BANK_ACCOUNT_VERIFICATION:return jg.US_BANK_ACCOUNT;case jg.AMAZON_PAY:return jg.AMAZON_PAY;default:throw new F(e)}}var ry,oy,cy,ly,uy;function dy(){return dy=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},dy.apply(this,arguments)}var hy,my,py,gy,yy,fy=function(e,t){return d.createElement("svg",dy({width:24,height:24,viewBox:"0 0 24 24",fill:"none",strokeWidth:1.4,xmlns:"http://www.w3.org/2000/svg",ref:t},e),ry||(ry=d.createElement("path",{d:"M12 11.5V17.5",stroke:"#2F2F39",strokeLinecap:"round"})),oy||(oy=d.createElement("path",{d:"M7 11.5V17.5",stroke:"#2F2F39",strokeLinecap:"round"})),cy||(cy=d.createElement("path",{d:"M17 11.5V17.5",stroke:"#2F2F39",strokeLinecap:"round"})),ly||(ly=d.createElement("path",{d:"M12 2L4 7.5H20L12 2Z",stroke:"#2F2F39",strokeLinejoin:"round"})),uy||(uy=d.createElement("path",{d:"M4 21H20",stroke:"#2F2F39",strokeLinecap:"round"})))},Sy=(0,d.forwardRef)(fy),Ay=(0,d.memo)(Sy);function Ey(){return Ey=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},Ey.apply(this,arguments)}var Cy,vy,Ny=function(e,t){return d.createElement("svg",Ey({width:24,height:24,viewBox:"0 0 24 24",fill:"none",strokeWidth:1.4,xmlns:"http://www.w3.org/2000/svg",ref:t},e),hy||(hy=d.createElement("path",{d:"M12 11.5V17.5",stroke:"#2F2F39",strokeLinecap:"round"})),my||(my=d.createElement("path",{d:"M7 11.5V17.5",stroke:"#2F2F39",strokeLinecap:"round"})),py||(py=d.createElement("path",{d:"M17 11.5V17.5",stroke:"#2F2F39",strokeLinecap:"round"})),gy||(gy=d.createElement("path",{d:"M12 2L4 7.5H20L12 2Z",stroke:"#2F2F39",strokeLinejoin:"round"})),yy||(yy=d.createElement("path",{d:"M4 21H20",stroke:"#2F2F39",strokeLinecap:"round"})))},by=(0,d.forwardRef)(Ny),Py=(0,d.memo)(by);function Dy(){return Dy=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},Dy.apply(this,arguments)}var _y,Ty,Oy,xy,ky,Iy=function(e,t){return d.createElement("svg",Dy({width:24,height:24,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",ref:t},e),Cy||(Cy=d.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M19.1001 18.16C19.6901 17.26 19.9101 16.8 20.3601 15.79C17.0401 14.53 16.5101 9.8 19.7901 7.99C18.7901 6.73 17.3801 6 16.0501 6C15.0901 6 14.4301 6.25 13.8401 6.48C13.3401 6.67 12.8901 6.84 12.3301 6.84C11.7301 6.84 11.2001 6.65 10.6401 6.45C10.0301 6.23 9.39007 6 8.59007 6C7.10007 6 5.51007 6.91 4.50007 8.47C3.08007 10.67 3.33007 14.79 5.62007 18.31C6.44007 19.57 7.54007 20.98 8.97007 21C9.57007 21.01 9.96007 20.83 10.3901 20.64C10.8801 20.42 11.4101 20.18 12.3401 20.18C13.2701 20.17 13.7901 20.42 14.2801 20.64C14.7001 20.83 15.0801 21.01 15.6701 21C17.1201 20.98 18.2801 19.42 19.1001 18.16Z",fill:"black"})),vy||(vy=d.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M15.8399 1C15.9999 2.1 15.5499 3.19 14.9599 3.95C14.3299 4.77 13.2299 5.41 12.1699 5.37C11.9799 4.31 12.4699 3.22 13.0699 2.49C13.7399 1.69 14.8699 1.07 15.8399 1Z",fill:"black"})))},wy=(0,d.forwardRef)(Iy),Ry=(0,d.memo)(wy);function My(){return My=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},My.apply(this,arguments)}var Ly,Uy,Fy,jy,By=function(e,t){return d.createElement("svg",My({width:24,height:24,viewBox:"0 0 24 24",fill:"none",strokeWidth:1.4,xmlns:"http://www.w3.org/2000/svg",ref:t},e),_y||(_y=d.createElement("path",{d:"M12 11.5V17.5",stroke:"#2F2F39",strokeLinecap:"round"})),Ty||(Ty=d.createElement("path",{d:"M7 11.5V17.5",stroke:"#2F2F39",strokeLinecap:"round"})),Oy||(Oy=d.createElement("path",{d:"M17 11.5V17.5",stroke:"#2F2F39",strokeLinecap:"round"})),xy||(xy=d.createElement("path",{d:"M12 2L4 7.5H20L12 2Z",stroke:"#2F2F39",strokeLinejoin:"round"})),ky||(ky=d.createElement("path",{d:"M4 21H20",stroke:"#2F2F39",strokeLinecap:"round"})))},Hy=(0,d.forwardRef)(By),qy=(0,d.memo)(Hy);function Gy(){return Gy=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},Gy.apply(this,arguments)}var Vy,Yy,Ky,zy,$y,Wy,Xy,Qy,Zy,Jy=function(e,t){return d.createElement("svg",Gy({width:24,height:24,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",ref:t},e),Ly||(Ly=d.createElement("path",{d:"M21 12.2069C21 11.6015 20.9464 11.0268 20.8544 10.4674H12.1953V13.9234H17.1532C16.931 15.0575 16.2797 16.0154 15.3141 16.6667V18.9656H18.272C20.0038 17.364 21 15.0039 21 12.2069Z",fill:"#4285F4"})),Uy||(Uy=d.createElement("path",{d:"M12.1958 21.1954C14.6786 21.1954 16.7552 20.3678 18.2725 18.9655L15.3146 16.6666C14.487 17.2184 13.4372 17.5555 12.1958 17.5555C9.79728 17.5555 7.7666 15.9387 7.03862 13.7547H3.98877V16.1226C5.49837 19.1264 8.60186 21.1954 12.1958 21.1954Z",fill:"#34A853"})),Fy||(Fy=d.createElement("path",{d:"M7.03837 13.7547C6.84679 13.203 6.74717 12.6129 6.74717 11.9999C6.74717 11.3869 6.85446 10.7968 7.03837 10.2451V7.87726H3.98852C3.36016 9.11865 3 10.5133 3 11.9999C3 13.4865 3.36016 14.8812 3.98852 16.1226L7.03837 13.7547Z",fill:"#FBBC05"})),jy||(jy=d.createElement("path",{d:"M12.1958 6.44432C13.5521 6.44432 14.7629 6.91176 15.7207 7.82365L18.3414 5.20293C16.7552 3.71632 14.6786 2.80443 12.1958 2.80443C8.60186 2.80443 5.49837 4.87342 3.98877 7.87729L7.03862 10.2451C7.7666 8.0612 9.79728 6.44432 12.1958 6.44432Z",fill:"#EA4335"})))},ef=(0,d.forwardRef)(Jy),tf=(0,d.memo)(ef);function nf(){return nf=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},nf.apply(this,arguments)}var sf,af,rf,of,cf=function(e,t){return d.createElement("svg",nf({width:24,height:24,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",ref:t},e),Vy||(Vy=d.createElement("path",{d:"M0 2.98816V21.0058C0 21.8683 0.705652 22.5739 1.56811 22.5739H12.3332C20.4717 22.5739 24 18.0185 24 11.9735C24 5.95974 20.4717 1.42004 12.3332 1.42004H1.56811C0.705652 1.42004 0 2.1257 0 2.98816Z",fill:"white"})),Yy||(Yy=d.createElement("path",{d:"M7.20551 5.84209V19.1554H12.9997C18.2607 19.1554 20.5423 16.1838 20.5423 11.9813C20.5423 7.95905 18.2607 4.8385 12.9997 4.8385H8.2091C7.65242 4.8385 7.20551 5.29325 7.20551 5.84209Z",fill:"#CC0066"})),Ky||(Ky=d.createElement("path",{d:"M12.3332 21.1391H2.97158C2.14048 21.1391 1.46619 20.4648 1.46619 19.6337V4.36806C1.46619 3.53696 2.14048 2.86267 2.97158 2.86267H12.3332C21.2166 2.86267 22.5416 8.57845 22.5416 11.9813C22.5416 17.8852 18.9115 21.1391 12.3332 21.1391ZM2.97158 3.36447C2.4149 3.36447 1.96798 3.81138 1.96798 4.36806V19.6337C1.96798 20.1903 2.4149 20.6373 2.97158 20.6373H12.3332C18.59 20.6373 22.0399 17.5637 22.0399 11.9813C22.0399 4.48567 15.9556 3.36447 12.3332 3.36447H2.97158V3.36447Z",fill:"black"})),zy||(zy=d.createElement("path",{d:"M9.24405 10.1858C9.44791 10.1858 9.63608 10.2172 9.81642 10.2799C9.99675 10.3426 10.1457 10.4446 10.279 10.57C10.4045 10.7033 10.5064 10.8679 10.5848 11.0561C10.6554 11.2521 10.6946 11.4795 10.6946 11.7461C10.6946 11.9813 10.6632 12.193 10.6083 12.389C10.5456 12.585 10.4593 12.7575 10.3417 12.8987C10.2241 13.0398 10.0752 13.1496 9.89482 13.2358C9.71449 13.3142 9.50279 13.3613 9.25973 13.3613H7.88763V10.178H9.24405V10.1858ZM9.19701 12.781C9.29894 12.781 9.39302 12.7654 9.49495 12.734C9.58904 12.7026 9.67529 12.6478 9.74585 12.5694C9.81642 12.4909 9.87914 12.3969 9.92618 12.2714C9.97323 12.146 9.99675 12.0048 9.99675 11.8245C9.99675 11.6677 9.98107 11.5187 9.94971 11.3933C9.91834 11.2678 9.86346 11.1502 9.79289 11.064C9.72233 10.9777 9.62824 10.8993 9.51063 10.8523C9.39303 10.8052 9.25189 10.7817 9.0794 10.7817H8.57761V12.7889H9.19701V12.781Z",fill:"white"})),$y||($y=d.createElement("path",{d:"M13.525 10.1858V10.7739H11.8471V11.456H13.3917V11.997H11.8471V12.7732H13.5642V13.3613H11.1493V10.178H13.525V10.1858Z",fill:"white"})),Wy||(Wy=d.createElement("path",{d:"M15.9242 10.1858L17.116 13.3691H16.3868L16.1437 12.6634H14.952L14.7011 13.3691H13.9954L15.195 10.1858H15.9242V10.1858ZM15.9634 12.1381L15.5635 10.9698H15.5557L15.1401 12.1381H15.9634Z",fill:"white"})),Xy||(Xy=d.createElement("path",{d:"M18.2529 10.1858V12.781H19.8053V13.3691H17.5551V10.1858H18.2529V10.1858Z",fill:"white"})),Qy||(Qy=d.createElement("path",{d:"M4.58673 13.2437C5.39648 13.2437 6.05292 12.5872 6.05292 11.7775C6.05292 10.9677 5.39648 10.3113 4.58673 10.3113C3.77698 10.3113 3.12054 10.9677 3.12054 11.7775C3.12054 12.5872 3.77698 13.2437 4.58673 13.2437Z",fill:"black"})),Zy||(Zy=d.createElement("path",{d:"M5.69227 19.1555C4.4613 19.1555 3.47339 18.1597 3.47339 16.9366V15.2038C3.47339 14.5923 3.96734 14.0905 4.58675 14.0905C5.19832 14.0905 5.70011 14.5844 5.70011 15.2038V19.1555H5.69227Z",fill:"black"})))},lf=(0,d.forwardRef)(cf),uf=(0,d.memo)(lf);function df(){return df=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},df.apply(this,arguments)}var hf,mf,pf,gf,yf,ff=function(e,t){return d.createElement("svg",df({width:24,height:24,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",ref:t},e),sf||(sf=d.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M3.69207 19.9323C5.03411 19.9366 6.38045 19.9323 7.72248 19.928C7.82563 19.7521 7.84772 19.5591 7.86975 19.3671C7.87904 19.2859 7.88833 19.2048 7.90375 19.1253C8.01949 18.4432 8.12442 17.7589 8.2293 17.0755C8.27301 16.7905 8.31671 16.5056 8.36115 16.2212C8.48628 15.4229 8.61147 14.6245 8.7323 13.8262C8.75816 13.6622 8.80565 13.5069 8.85743 13.3516C8.85638 13.3478 8.85538 13.344 8.85439 13.3403C9.08728 12.9799 9.41037 12.8254 9.8493 12.8254C10.0894 12.8254 10.3296 12.8278 10.5697 12.8303C11.4297 12.8392 12.2893 12.8479 13.1461 12.7434C14.1214 12.6226 15.0621 12.3723 15.9338 11.9062C17.2758 11.1856 18.1906 10.0852 18.7646 8.69141C19.0365 8.02682 19.2522 7.34072 19.3428 6.6244C19.3479 6.61684 19.3515 6.60782 19.3553 6.59811C19.358 6.59129 19.3608 6.5841 19.3644 6.57692L19.3903 6.44748C19.3864 6.43578 19.379 6.42408 19.3712 6.40278C19.372 6.4032 19.3728 6.40357 19.3737 6.40399C19.4902 5.79989 19.529 5.19574 19.4211 4.5916C19.1881 3.29703 18.4761 2.34336 17.3067 1.75647C16.1803 1.18256 14.9505 1.02722 13.7121 1.01428C12.0904 0.995773 10.4666 0.999293 8.84374 1.00282C8.19504 1.00422 7.54651 1.00564 6.89829 1.00564C6.37184 1.00564 5.96623 1.35517 5.88852 1.86868C5.84823 2.13056 5.80841 2.39245 5.76864 2.65433C5.68905 3.1778 5.60946 3.70132 5.52604 4.22479C5.45285 4.67984 5.37918 5.13483 5.30547 5.58987C5.15762 6.50278 5.00982 7.41569 4.86581 8.32861C4.79251 8.79214 4.72353 9.25568 4.65455 9.71922C4.58545 10.1834 4.51634 10.6477 4.44291 11.1119C4.33948 11.7679 4.23153 12.4228 4.12368 13.077C4.02008 13.7054 3.91659 14.3333 3.81722 14.9611C3.7021 15.6916 3.5904 16.4231 3.47861 17.1553C3.37249 17.8505 3.26627 18.5462 3.15697 19.2419C3.09658 19.613 3.32958 19.9323 3.69207 19.9323Z",fill:"#012D8A"})),af||(af=d.createElement("path",{d:"M7.72489 19.9284C7.87159 19.6824 7.85433 19.3934 7.8975 19.1258C8.06146 18.1592 8.20386 17.1926 8.35491 16.2216C8.48004 15.4233 8.60517 14.625 8.726 13.8267C8.75192 13.6627 8.79935 13.5073 8.85113 13.352C9.08419 12.9895 9.4078 12.8298 9.84799 12.8342C10.9484 12.8342 12.0487 12.8903 13.1448 12.7522C14.1244 12.6314 15.0608 12.3811 15.9325 11.915C17.2745 11.1944 18.1893 10.094 18.7633 8.70017C19.0351 8.03563 19.2509 7.34947 19.3415 6.63315C19.3501 6.61589 19.3544 6.59863 19.3631 6.58567C19.3717 6.54254 19.3804 6.49937 19.389 6.45624C20.416 6.99995 20.9641 7.87162 21.1107 9.01087C21.2316 9.94729 21.0892 10.8578 20.8562 11.764C20.6706 12.4847 20.3858 13.1621 19.9802 13.7835C19.3199 14.8019 18.4008 15.5096 17.2573 15.9153C16.6617 16.1267 16.049 16.2475 15.4233 16.3209C14.9011 16.3813 14.379 16.3813 13.8568 16.3856C13.3304 16.3856 12.9938 16.6747 12.9204 17.1926C12.7608 18.2843 12.6011 19.3761 12.4112 20.4678C12.3465 20.839 12.2947 21.2144 12.23 21.5811C12.148 22.0299 11.8287 22.2975 11.3756 22.2975C10.2752 22.2975 9.17479 22.2975 8.07442 22.2975C7.65585 22.2975 7.45301 22.0559 7.52206 21.6502C7.60406 21.1497 7.68601 20.6534 7.76802 20.1528C7.78098 20.0709 7.80254 19.9888 7.72489 19.9284Z",fill:"#019AE0"})),rf||(rf=d.createElement("path",{d:"M19.3899 6.44723C19.3812 6.49036 19.3726 6.53354 19.364 6.57666C19.3554 6.59393 19.3511 6.61119 19.3424 6.62415C19.2518 7.34047 19.036 8.02657 18.7642 8.69116C18.1902 10.085 17.2754 11.1853 15.9334 11.906C15.0617 12.372 14.121 12.6223 13.1457 12.7432C12.0497 12.8769 10.9492 12.8251 9.84886 12.8251C9.40872 12.8251 9.08505 12.9805 8.85205 13.343C8.78301 13.1013 8.87792 12.864 8.9211 12.6353C9.05053 11.9448 9.14549 11.2458 9.24906 10.551C9.33102 10.003 9.42598 9.45496 9.51229 8.9069C9.62446 8.19488 9.73668 7.48716 9.85316 6.7752C9.88338 6.59393 9.90064 6.40405 9.96538 6.23144C10.1078 5.86465 10.4271 5.7136 10.7853 5.7136C12.4725 5.70069 14.1641 5.69633 15.8514 5.7136C16.5202 5.72225 17.1891 5.75678 17.8493 5.88621C18.3758 5.98978 18.8893 6.14949 19.3683 6.39545C19.3769 6.42131 19.3856 6.43427 19.3899 6.44723Z",fill:"#001F6B"})),of||(of=d.createElement("path",{d:"M19.3457 6.62828C19.3543 6.61102 19.3587 6.59376 19.3673 6.58085C19.3587 6.59376 19.3543 6.61102 19.3457 6.62828Z",fill:"#012D8A"})))},Sf=(0,d.forwardRef)(ff),Af=(0,d.memo)(Sf);function Ef(){return Ef=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},Ef.apply(this,arguments)}var Cf,vf,Nf=function(e,t){return d.createElement("svg",Ef({width:24,height:24,viewBox:"0 0 24 24",fill:"none",strokeWidth:1.4,xmlns:"http://www.w3.org/2000/svg",ref:t},e),hf||(hf=d.createElement("path",{d:"M12 11.5V17.5",stroke:"#2F2F39",strokeLinecap:"round"})),mf||(mf=d.createElement("path",{d:"M7 11.5V17.5",stroke:"#2F2F39",strokeLinecap:"round"})),pf||(pf=d.createElement("path",{d:"M17 11.5V17.5",stroke:"#2F2F39",strokeLinecap:"round"})),gf||(gf=d.createElement("path",{d:"M12 2L4 7.5H20L12 2Z",stroke:"#2F2F39",strokeLinejoin:"round"})),yf||(yf=d.createElement("path",{d:"M4 21H20",stroke:"#2F2F39",strokeLinecap:"round"})))},bf=(0,d.forwardRef)(Nf),Pf=(0,d.memo)(bf);function Df(){return Df=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},Df.apply(this,arguments)}var _f,Tf,Of,xf=function(e,t){return d.createElement("svg",Df({width:24,height:24,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",ref:t},e),Cf||(Cf=d.createElement("path",{d:"M18.6667 2H5.33333C3.49238 2 2 3.49238 2 5.33333V18.6667C2 20.5076 3.49238 22 5.33333 22H18.6667C20.5076 22 22 20.5076 22 18.6667V5.33333C22 3.49238 20.5076 2 18.6667 2Z",fill:"#008CFF"})),vf||(vf=d.createElement("path",{d:"M16.4377 7C16.8258 7.6 17 8.21869 17 9C17 11.4918 14.7315 14.7278 12.8903 17H8.6859L7 7.5459L10.6827 7.21803L11.5783 13.9449C12.4105 12.6721 13.4397 10.6721 13.4397 9.30951C13.4397 8.56295 13.3033 8.05541 13.09 7.63737L16.4377 7Z",fill:"white"})))},kf=(0,d.forwardRef)(xf),If=(0,d.memo)(kf);function wf(){return wf=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},wf.apply(this,arguments)}var Rf,Mf=function(e,t){return d.createElement("svg",wf({fill:"none",height:20,viewBox:"0 0 20 20",width:20,xmlns:"http://www.w3.org/2000/svg",ref:t},e),_f||(_f=d.createElement("g",{fill:"#333e47"},d.createElement("path",{d:"m5.34236 5.00285c-.52798 0-1.08207.245-1.51235.62698l-.0483-.32776c-.01229-.08254-.07837-.15235-.17497-.15235h-.45948c-.08408 0-.15257.06871-.15257.15235v6.25553c0 .0839.06871.1524.15257.1524h.60042c.08386 0 .15236-.0687.15236-.1524v-2.16017c.38088.33961.87615.535 1.40566.535 1.25791 0 2.00168-1.0891 2.00168-2.44448 0-1.2667-.48626-2.4851-1.96502-2.4851zm.60085 3.8778c-.23402.23073-.49526.29352-.88866.29352-.35015 0-.81073-.18265-1.15473-.43687v-2.56039c.35827-.27508.81512-.42392 1.196-.42392.99448 0 1.26538.78197 1.26538 1.67744.00571.60371-.10537 1.142-.41799 1.45022z"}),d.createElement("path",{d:"m11.7046 9.66592c0 .08386-.0687.15235-.153.15235h-.4483c-.0968 0-.1629-.07003-.1754-.15235l-.045-.30515c-.2059.17431-.4588.32754-.733.43423-.52713.20482-1.13501.2386-1.65003-.07771-.37254-.22853-.57012-.6755-.57012-1.13674 0-.35673.10998-.7104.35366-.96703.32513-.35081.79668-.52314 1.36571-.52314.34378 0 .83578.04039 1.19378.1574v-.61403c0-.62435-.2628-.89437-.95581-.89437-.52973 0-.93498.07991-1.49874.25532-.09023.00307-.14314-.06564-.14314-.1495v-.35016c0-.08408.07179-.1653.14951-.18989.40262-.17563.97318-.28495 1.57952-.30515.79056 0 1.73016.17826 1.73016 1.39424v3.27168zm-.8615-.89657v-.92642c-.3007-.08232-.7986-.11635-.99114-.11635-.30427 0-.63751.072-.8116.25926-.12996.13743-.1888.33457-.1888.52512 0 .24654.08518.49373.28451.61601.23139.15718.59032.13808.92753.04215.324-.09177.6285-.25466.7795-.39977z"}),d.createElement("path",{d:"m12.5526 11.5495c0-.1137 0-.2158 0-.3295 0-.0938.0461-.1585.1438-.1526.1826.0259.4408.0518.6243.0141.2395-.0499.4112-.2196.5129-.4523.1431-.3275.2379-.5916.2979-.76483l-1.8182-4.50434c-.0307-.0764-.0397-.21821.1128-.21821h.6356c.1212 0 .1706.07705.1978.15235l1.3183 3.65871 1.2583-3.65871c.0257-.07486.0773-.15235.1974-.15235h.5993c.1517 0 .1431.14159.1128.21821l-1.8036 4.64487c-.2334.6182-.5443 1.603-1.2446 1.774-.351.0918-.794.0586-1.0541-.0503-.0657-.0329-.0907-.1209-.0907-.1791z"}))),Tf||(Tf=d.createElement("path",{d:"m18.4677 11.3618c-.6147.0086-1.3405.1462-1.8911.5326-.1699.1179-.14.2816.049.2599.6191-.0744 1.9971-.2415 2.2434.0733.247.3148-.2731 1.6136-.503 2.1945-.0711.1732.0793.245.238.1132 1.0301-.8627 1.2977-2.6714 1.0869-2.9316-.1056-.1302-.6085-.2505-1.2232-.2419z",fill:"#f79c34"})),Of||(Of=d.createElement("path",{d:"m.142075 12.0204c-.14357305.0197-.2054809.2017-.0553215.346 2.5797165 2.4196 5.9888165 3.6045 9.7737465 3.6045 2.6996 0 5.8338-.8808 7.9973-2.5407.3576-.2759.0529-.6895-.3139-.5262-2.4256 1.0702-5.0604 1.5861-7.4584 1.5861-3.55397 0-6.99424-.742-9.777679-2.4273-.06059-.0369-.117888-.049-.165746-.0424z",fill:"#f79c34"})))},Lf=(0,d.forwardRef)(Mf),Uf=(0,d.memo)(Lf);function Ff(){return Ff=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},Ff.apply(this,arguments)}var jf,Bf=function(e,t){return d.createElement("svg",Ff({fill:"none",height:20,viewBox:"0 0 20 20",width:20,xmlns:"http://www.w3.org/2000/svg",ref:t},e),Rf||(Rf=d.createElement("g",{stroke:"currentColor",strokeWidth:1.4},d.createElement("rect",{height:10.9,rx:2.15,width:16.3,x:1.85,y:4.55313}),d.createElement("path",{d:"m1.89999 8.25156h16.30001"}),d.createElement("path",{d:"m4.60001 12.7031h5.39999",strokeLinecap:"round"}))))},Hf=(0,d.forwardRef)(Bf),qf=(0,d.memo)(Hf);function Gf(){return Gf=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},Gf.apply(this,arguments)}var Vf=function(e,t){return d.createElement("svg",Gf({fill:"none",height:24,viewBox:"0 0 24 24",width:24,xmlns:"http://www.w3.org/2000/svg",ref:t},e),jf||(jf=d.createElement("g",{fill:"currentColor"},d.createElement("path",{clipRule:"evenodd",d:"m12.5525 9.7447c-2.99092-.21639-9.77273 1.1855-9.77273 4.2535 0 2.0004 3.59111 4.9249 9.43923 5.0017.2308 0 6.8741-.2566 6.7717-7.3873-.0861-5.98915-5.0046-6.71876-6.438-6.90138l.0001-.70661c5.7145.36271 10.6447 3.82157 10.6447 7.99259 0 4.412-5.0276 8.0028-11.2092 8.0028s-11.183612-3.5911-11.183612-8.0028c0-4.41161 5.001722-8.00272 11.183612-8.00272.1894 0 .3776.00337.5645.01013z",fillRule:"evenodd"}),d.createElement("path",{d:"m6.83008 14.3939c0 3.9259 5.72712 4.9593 5.72712 4.9593v-4.9385-4.93856c-1.4874.40641-5.7268 1.78666-5.72712 4.91776z"}))))},Yf=(0,d.forwardRef)(Vf),Kf=(0,d.memo)(Yf);function zf(e,t){return t?e.translate("paymentMethodScreen.creditDebitCard"):e.translate("paymentMethodScreen.creditCard")}var $f=e=>{let{setRef:t,option:n,isActive:i,disabled:s,onChoosePaymentOption:a}=e;const r=(0,qr.t)(),o=(0,Pr.n)(),c=((e,t,n)=>{switch(e){case jg.CARD:return{icon:(0,Nr.jsx)(qf,{className:"icon-stroke-2 text-black",width:20,height:20}),label:zf(t,n)};case jg.APPLE_PAY:return{icon:(0,Nr.jsx)(Ry,{width:20,height:20}),label:t.translate("paymentMethodScreen.applePay")};case jg.GOOGLE_PAY:return{icon:(0,Nr.jsx)(tf,{width:20,height:20}),label:t.translate("paymentMethodScreen.googlePayButton")};case jg.AMAZON_PAY:return{icon:(0,Nr.jsx)(Uf,{width:20,height:20}),label:t.translate("paymentMethodScreen.amazonPayButton")};case jg.PAYPAL:return{icon:(0,Nr.jsx)(Af,{width:20,height:20}),label:t.translate("paymentMethodScreen.paypalButton")};case jg.VENMO:return{icon:(0,Nr.jsx)(If,{width:20,height:20}),label:t.translate("paymentMethodScreen.venmoButton")};case jg.ACSS:return{icon:(0,Nr.jsx)(Py,{width:20,height:20}),label:t.translate("paymentMethodScreen.bankTransfer")};case jg.IDEAL:return{icon:(0,Nr.jsx)(uf,{width:20,height:20}),label:t.translate("paymentMethodScreen.idealButton")};case jg.UK_BACS:return{icon:(0,Nr.jsx)(Kf,{width:20,height:20}),label:t.translate("paymentMethodScreen.ukBacsButton")};case jg.AU_BECS:return{icon:(0,Nr.jsx)(qy,{width:20,height:20}),label:t.translate("paymentMethodScreen.auBECSButton")};case jg.SEPA:return{icon:(0,Nr.jsx)(Pf,{width:20,height:20}),label:t.translate("paymentMethodScreen.sepaButton")};case jg.US_BANK_ACCOUNT_VERIFICATION:case jg.US_BANK_ACCOUNT_INSTANT:case jg.US_BANK_ACCOUNT:return{icon:(0,Nr.jsx)(Ay,{width:20,height:20}),label:t.translate("paymentMethodScreen.bankTransfer")};default:throw new F(e)}})(n,r,o.featureConfig.creditDebitCardLabel),l=ay(n);return(0,Nr.jsxs)("button",{ref:t,type:"button",className:(0,xr.A)("payment-option-list-item btn-reset-default",{"payment-option-list-item-active":i}),"aria-current":i,"data-tracking-element-name":`payment-option-${n}`,"data-qa":`payment-option-list-${l}`,disabled:s,"data-testid":`payment-option-list-${n}`,onClick:()=>{a(n)},children:[(0,Nr.jsx)("span",{className:"payment-option-list-item-icon p-rel me-2 z-index-1","aria-hidden":!0,children:c.icon}),(0,Nr.jsx)("span",{className:(0,xr.A)("p-rel text-truncate z-index-1",i?"label-2":"label-3"),children:c.label})]})};const Wf=(e,t)=>{let{className:n,disabled:i,onClick:s}=e;const a=(0,qr.t)();return(0,Nr.jsx)("button",{ref:t,type:"button",className:(0,xr.A)("btn-link link-2 text-nowrap text-ellipsis max-w-100",n),disabled:i,onClick:s,"data-tracking-element-name":"show-more-options","data-qa":"payment-option-more-button",children:a.translate("paymentMethodScreen.moreOptions")})};var Xf=(0,d.forwardRef)(Wf),Qf=n(8677),Zf=n.n(Qf);const Jf=e=>{let t=e;return{getSortedPaymentOptions:(e,n)=>{const i=[...t],s=t.indexOf(e);if(s<n)return t;const a=i.splice(s,1)[0];return i.splice(n-1,0,a),t=i,t}}};function eS(e,t){const{document:n}=(0,Dr.M)();(0,d.useEffect)((()=>{const i=n=>{if(!e.current)return;const i=n.target;i&&!(0,Be.Ru)(i,(t=>t===e.current))&&t(n)};return n.addEventListener("click",i),()=>n.removeEventListener("click",i)}),[n,e,t])}const tS=e=>{let{availableOptions:t,buttonOptions:n,selectedOption:i,showAllOptions:s,locked:a,setShowAllOptions:r,onChoosePaymentOption:o,onChangeSelectedPaymentOption:c}=e;const l=(0,wr.P)(),u=(0,d.useRef)(null),h=(e=>{let{availableOptions:t,buttonOptions:n,selectedOption:i,maxVisibleOptions:s}=e;const a=t.filter((e=>n[e].visible)),[r,o]=(0,d.useState)(Jf(a));return!Zf()([...r.getSortedPaymentOptions(i,s)].sort(),[...a].sort())&&o(Jf(a)),r})({availableOptions:t,buttonOptions:n,selectedOption:i,maxVisibleOptions:3}),m=(0,d.useCallback)((()=>{s&&!l&&r(!1)}),[s,r,l]),p=sc(s);eS(u,m);const g=t.filter((e=>n[e].visible)),y=l?g:h.getSortedPaymentOptions(i,3),f=s&&l||g.length<=3,S=y.slice(0,3),A=s?y:S,E=e=>{l||r(!1),o(e)};return(0,d.useEffect)((()=>{const e=s?[]:y.slice(3);c(A,e)})),(0,Nr.jsxs)(Nr.Fragment,{children:[(0,Nr.jsxs)("div",{className:"p-rel",children:[!l&&(0,Nr.jsx)("div",{className:"invisible border",children:S.map((e=>(0,Nr.jsx)("div",{className:"payment-option-list-item"},e)))}),(0,Nr.jsx)("div",{className:(0,xr.A)("bg-white border-radius-8 border border-gray-20",{"p-abs top-left w-100":!l,"payment-option-list":s&&!l}),children:A.map(((e,t)=>(0,Nr.jsx)($f,{disabled:a,setRef:3===t?p:null,option:e,isActive:i===e,onChoosePaymentOption:E},e)))})]}),(0,Nr.jsx)(Xf,{ref:u,className:(0,xr.A)("self-start mt-2",{"d-none":f,invisible:s&&!l}),disabled:a,onClick:()=>{r(!0)}})]})},nS=e=>{const t=(0,qr.t)();return(0,Nr.jsx)(Hc,{processingState:e.processingState,className:"btn-primary",disabled:e.disabled,dataQa:"acss-button",trackingElement:"paymentMethod-acss",onClick:e.onClick,children:t.translate("paymentMethodScreen.continue")})},iS=(0,d.memo)(nS),sS=()=>{const e=(0,qr.t)();return(0,Nr.jsx)("button",{type:"button",className:"btn btn-testmode","data-qa":"amazon-pay-button",children:e.translate("paymentMethodScreen.amazonPay.notAvailable")})},aS=(0,d.memo)(sS);var rS;function oS(){return oS=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},oS.apply(this,arguments)}var cS=function(e,t){return d.createElement("svg",oS({fill:"none",height:26,viewBox:"0 0 51 26",width:51,xmlns:"http://www.w3.org/2000/svg",ref:t},e),rS||(rS=d.createElement("g",{fill:"currentColor"},d.createElement("path",{d:"m10.7677 6.37383c.5615-.70228.9425-1.64523.842-2.60882-.8219.04087-1.82492.54225-2.4056 1.24508-.52139.60186-.98286 1.5843-.86255 2.50749.92264.08003 1.84445-.46118 2.42615-1.14375z"}),d.createElement("path",{d:"m11.5996 7.69773c-1.3399-.07981-2.47913.76045-3.119.76045-.64022 0-1.62007-.72023-2.67985-.70082-1.37938.02026-2.65929.80017-3.35926 2.0406-1.43973 2.48144-.37995 6.16234 1.02012 8.18334.6799.9999 1.4993 2.1008 2.57898 2.0612 1.02012-.04 1.41996-.6605 2.65996-.6605 1.23909 0 1.59925.6605 2.67915.6405 1.1198-.02 1.8199-1.0003 2.4998-2.0012.78-1.1398 1.0993-2.2403 1.1193-2.3007-.02-.02-2.1593-.8407-2.1792-3.3016-.0201-2.0604 1.6796-3.04053 1.7596-3.10131-.9599-1.41967-2.4596-1.57974-2.9796-1.61996z"}),d.createElement("path",{d:"m23.2667 4.90918c2.9123 0 4.9402 2.00744 4.9402 4.93011 0 2.93311-2.0697 4.95101-5.0132 4.95101h-3.2244v5.1277h-2.3297v-15.00882zm-3.2974 7.92562h2.6731c2.0283 0 3.1827-1.092 3.1827-2.98508 0-1.89288-1.1544-2.97463-3.1723-2.97463h-2.6835z"}),d.createElement("path",{d:"m28.8154 16.8081c0-1.914 1.4666-3.0892 4.0671-3.2349l2.9953-.1767v-.8425c0-1.2169-.8218-1.945-2.1945-1.945-1.3004 0-2.1117.6239-2.3091 1.6018h-2.1218c.1248-1.9764 1.8096-3.43248 4.514-3.43248 2.6522 0 4.3475 1.40418 4.3475 3.59878v7.5408h-2.1531v-1.7994h-.0517c-.6344 1.217-2.0179 1.9866-3.4532 1.9866-2.1426 0-3.6405-1.3313-3.6405-3.297zm7.0624-.9881v-.8633l-2.694.1663c-1.3418.0937-2.1009.6866-2.1009 1.6227 0 .9567.7904 1.5809 1.997 1.5809 1.5704 0 2.7979-1.0818 2.7979-2.5066z"}),d.createElement("path",{d:"m40.1472 23.9432v-1.8202c.1661.0415.5405.0415.7279.0415 1.04 0 1.6017-.4368 1.9448-1.56 0-.0209.1978-.6657.1978-.6761l-3.9523-10.95245h2.4336l2.767 8.90345h.0413l2.767-8.90345h2.3714l-4.0984 11.51395c-.9357 2.6524-2.0174 3.5053-4.2849 3.5053-.1873 0-.7491-.0209-.9152-.052z"}))))},lS=(0,d.forwardRef)(cS),uS=(0,d.memo)(lS);const dS=e=>{const t=(0,qr.t)();return(0,Nr.jsxs)("button",{type:"button",className:"btn btn-apple-pay d-flex justify-center items-center",dir:"ltr","aria-label":t.translate("paymentMethodScreen.applePayButtonAriaLabel"),onClick:e.onClick,disabled:e.disabled,"data-tracking-element-name":"paymentMethod-applePay","data-qa":"apple-pay-button",children:[(0,Nr.jsx)("span",{className:"text-truncate me-1-5",children:t.translate("paymentMethodScreen.applePayButton")}),(0,Nr.jsx)(uS,{className:"shrink-0",width:50,height:26,"aria-hidden":!0})]})},hS=(0,d.memo)(dS),mS=e=>{const t=(0,qr.t)();return(0,Nr.jsx)(Hc,{processingState:e.processingState,className:"btn-primary",onClick:e.onClick,disabled:e.disabled,dataQa:"au-becs-button",trackingElement:"paymentMethod-auBECS",children:t.translate("paymentMethodScreen.continue")})},pS=(0,d.memo)(mS),gS=e=>{let{processingState:t,disabled:n,onClick:i}=e;const s=(0,qr.t)(),a=Jg(),r=(0,d.useCallback)((()=>{a(),i()}),[i,a]);return(0,Nr.jsx)(Hc,{className:"btn-primary",processingState:t,disabled:n,dataQa:"cc-button",trackingElement:"paymentMethod-creditCard",onClick:r,children:s.translate("paymentMethodScreen.donate")})},yS=(0,d.memo)(gS);var fS,SS,AS,ES,CS;function vS(){return vS=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},vS.apply(this,arguments)}var NS=function(e,t){return d.createElement("svg",vS({fill:"none",height:26,viewBox:"0 0 53 26",width:53,xmlns:"http://www.w3.org/2000/svg",ref:t},e),fS||(fS=d.createElement("g",{fill:"#fff"},d.createElement("path",{d:"m25.011 13.6095v5.8583h-1.8898v-14.48819h4.9134c1.1969 0 2.3307.44095 3.2126 1.25985.8819.7559 1.3228 1.88976 1.3228 3.08661 0 1.19683-.4409 2.26773-1.3228 3.08663s-1.9528 1.2598-3.2126 1.2598zm0-6.86611v5.03941h3.1496c.6929 0 1.3858-.252 1.8268-.7559 1.0078-.9449 1.0078-2.51973.0629-3.46461l-.0629-.06299c-.504-.50394-1.1339-.8189-1.8268-.75591z"}),d.createElement("path",{d:"m36.9168 9.26294c1.3858 0 2.4567.37795 3.2756 1.13386.8189.7559 1.1968 1.7638 1.1968 3.0236v6.0473h-1.7638v-1.3859h-.063c-.7559 1.1339-1.8267 1.7008-3.0866 1.7008-1.0708 0-2.0157-.3149-2.7716-.9449-.6929-.6299-1.1339-1.5118-1.1339-2.4567 0-1.0078.378-1.8267 1.1339-2.4566.7559-.63 1.8267-.8819 3.0866-.8819 1.1338 0 2.0157.1889 2.7086.6299v-.441c0-.6299-.2519-1.2598-.7559-1.6378-.5039-.4409-1.1338-.6929-1.8267-.6929-1.0709 0-1.8898.441-2.4567 1.3229l-1.6378-1.0079c1.0079-1.32284 2.3307-1.95276 4.0945-1.95276zm-2.3937 7.18106c0 .504.2519.9449.6299 1.1969.4409.315.9449.5039 1.4488.5039.7559 0 1.5118-.3149 2.0787-.8819.63-.5669.9449-1.2598.9449-2.0157-.5669-.441-1.3858-.6929-2.4567-.6929-.7559 0-1.3858.189-1.8897.5669-.504.315-.7559.7559-.7559 1.3228z"}),d.createElement("path",{d:"m51.5937 9.57788-6.2362 14.29922h-1.8897l2.3307-4.9764-4.0945-9.25983h2.0157l2.9607 7.11813h.0629l2.8977-7.11813h1.9527z"}))),SS||(SS=d.createElement("path",{d:"m17.5146 12.3496c0-.5669-.0629-1.1339-.1259-1.7008h-7.87405v3.2126h4.47245c-.189 1.0079-.7559 1.9528-1.6378 2.5197v2.0787h2.7087c1.5748-1.4488 2.4566-3.5905 2.4566-6.1102z",fill:"#4285f4"})),AS||(AS=d.createElement("path",{d:"m9.51486 20.4756c2.26774 0 4.15744-.7559 5.54334-2.0158l-2.7087-2.0787c-.7559.5039-1.7008.8189-2.83464.8189-2.14173 0-4.0315-1.4488-4.66142-3.4646h-2.77165v2.1417c1.44882 2.8347 4.28346 4.5985 7.43307 4.5985z",fill:"#34a853"})),ES||(ES=d.createElement("path",{d:"m4.85386 13.7354c-.37795-1.0078-.37795-2.1417 0-3.2126v-2.1417h-2.77165c-1.196852 2.3307-1.196852 5.1024 0 7.4961z",fill:"#fbbc04"})),CS||(CS=d.createElement("path",{d:"m9.51461 7.12126c1.19689 0 2.33069.44095 3.21259 1.25985l2.3937-2.3937c-1.5118-1.38583-3.5276-2.20473-5.5433-2.14174-3.1496 0-6.04724 1.76378-7.43307 4.59843l2.77165 2.1417c.56693-2.01572 2.4567-3.46454 4.59843-3.46454z",fill:"#ea4335"})))},bS=(0,d.forwardRef)(NS),PS=(0,d.memo)(bS);const DS=e=>{const{state:t}=eo(tn.PAYMENT_OPTIONS),{onClick:n,disabled:i}=e,s=(0,qr.t)(),[a,r]=(0,d.useState)(!1),o=(0,Mc.D)((e=>r(e))),c=(0,d.useCallback)((()=>t.livemode?i?void 0:n():(o.set([!0]),void o.set([!1],3e3))),[i,n,t.livemode,o]);return(0,Nr.jsx)("button",{type:"button",className:(0,xr.A)("btn p-rel d-flex justify-center items-center",a?"btn-testmode":"btn-google-pay"),disabled:i,"aria-label":s.translate("paymentMethodScreen.googlePayButtonContinueAriaLabel"),onClick:c,"data-tracking-element-name":"paymentMethod-googlePay","data-qa":"google-pay-button",children:a?(0,Nr.jsx)("span",{role:"alert",children:s.translate("paymentMethodScreen.googlePay.notAvailableInTestMode.oneLine")}):(0,Nr.jsxs)(Nr.Fragment,{children:[(0,Nr.jsx)("span",{className:"text-truncate me-1-5",children:s.translate("paymentMethodScreen.googlePayButtonContinue")}),(0,Nr.jsx)(PS,{className:"shrink-0",width:62,height:31,"aria-hidden":!0})]})})},_S=(0,d.memo)(DS),TS=e=>{const t=(0,qr.t)();return(0,Nr.jsx)(Hc,{processingState:e.processingState,className:"btn-primary",onClick:e.onClick,disabled:e.disabled,dataQa:"ideal-button",trackingElement:"paymentMethod-ideal",children:t.translate("paymentMethodScreen.continue")})},OS=(0,d.memo)(TS);var xS,kS,IS;function wS(){return wS=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},wS.apply(this,arguments)}!function(e){e.SILVER="silver",e.WHITE="white",e.GOLD="gold"}(xS||(xS={}));var RS=function(e,t){return d.createElement("svg",wS({height:32,preserveAspectRatio:"xMinYMin meet",viewBox:"0 0 101 32",width:101,xmlns:"http://www.w3.org/2000/svg",ref:t},e),kS||(kS=d.createElement("g",{fill:"#003087"},d.createElement("path",{d:"m12.237 2.8h-7.8c-.5 0-1 .4-1.1.9l-3.1 20c-.1.4.2.7.6.7h3.7c.5 0 1-.4 1.1-.9l.8-5.4c.1-.5.5-.9 1.1-.9h2.5c5.1 0 8.1-2.5 8.9-7.4.3-2.1 0-3.8-1-5-1.1-1.3-3.1-2-5.7-2zm.9 7.3c-.4 2.8-2.6 2.8-4.6 2.8h-1.2l.8-5.2c0-.3.3-.5.6-.5h.5c1.4 0 2.7 0 3.4.8.5.4.7 1.1.5 2.1z"}),d.createElement("path",{d:"m35.437 10h-3.7c-.3 0-.6.2-.6.5l-.2 1-.3-.4c-.8-1.2-2.6-1.6-4.4-1.6-4.1 0-7.6 3.1-8.3 7.5-.4 2.2.1 4.3 1.4 5.7 1.1 1.3 2.8 1.9 4.7 1.9 3.3 0 5.2-2.1 5.2-2.1l-.2 1c-.1.4.2.8.6.8h3.4c.5 0 1-.4 1.1-.9l2-12.8c.1-.2-.3-.6-.7-.6zm-5.1 7.2c-.4 2.1-2 3.6-4.2 3.6-1.1 0-1.9-.3-2.5-1s-.8-1.6-.6-2.6c.3-2.1 2.1-3.6 4.2-3.6 1.1 0 1.9.4 2.5 1 .5.7.7 1.6.6 2.6z"}),d.createElement("path",{d:"m55.337 10h-3.7c-.4 0-.7.2-.9.5l-5.2 7.6-2.2-7.3c-.1-.5-.6-.8-1-.8h-3.7c-.4 0-.8.4-.6.9l4.1 12.1-3.9 5.4c-.3.4 0 1 .5 1h3.7c.4 0 .7-.2.9-.5l12.5-18c.3-.3 0-.9-.5-.9z"}))),IS||(IS=d.createElement("g",{fill:"#009cde"},d.createElement("path",{d:"m67.737 2.8h-7.8c-.5 0-1 .4-1.1.9l-3.1 19.9c-.1.4.2.7.6.7h4c.4 0 .7-.3.7-.6l.9-5.7c.1-.5.5-.9 1.1-.9h2.5c5.1 0 8.1-2.5 8.9-7.4.3-2.1 0-3.8-1-5-1.2-1.2-3.1-1.9-5.7-1.9zm.9 7.3c-.4 2.8-2.6 2.8-4.6 2.8h-1.2l.8-5.2c0-.3.3-.5.6-.5h.5c1.4 0 2.7 0 3.4.8.5.4.6 1.1.5 2.1z"}),d.createElement("path",{d:"m90.937 10h-3.7c-.3 0-.6.2-.6.5l-.2 1-.3-.4c-.8-1.2-2.6-1.6-4.4-1.6-4.1 0-7.6 3.1-8.3 7.5-.4 2.2.1 4.3 1.4 5.7 1.1 1.3 2.8 1.9 4.7 1.9 3.3 0 5.2-2.1 5.2-2.1l-.2 1c-.1.4.2.8.6.8h3.4c.5 0 1-.4 1.1-.9l2-12.8c0-.2-.3-.6-.7-.6zm-5.2 7.2c-.4 2.1-2 3.6-4.2 3.6-1.1 0-1.9-.3-2.5-1s-.8-1.6-.6-2.6c.3-2.1 2.1-3.6 4.2-3.6 1.1 0 1.9.4 2.5 1 .6.7.8 1.6.6 2.6z"}),d.createElement("path",{d:"m95.337 3.3-3.2 20.3c-.1.4.2.7.6.7h3.2c.5 0 1-.4 1.1-.9l3.2-19.9c.1-.4-.2-.7-.6-.7h-3.6c-.4 0-.6.2-.7.5z"}))))},MS=(0,d.forwardRef)(RS),LS=(0,d.memo)(MS);const US="paymentMethod-paypal",FS=e=>{let{disabled:t}=e;const{state:n,controller:i}=eo(tn.PAYMENT_OPTIONS),s=(0,qr.t)(),a=(0,d.useRef)(null),[r,o]=(0,d.useState)(!1),c=(0,Mc.D)((e=>o(e))),l=Ed();(0,d.useEffect)((()=>{if(a.current&&n.livemode)return i.initiatePaypal({element:a.current,buttonColor:xS.GOLD,onClick:()=>{a.current&&l.trackClick(US,a.current)}}),()=>i.closePaypalButton()}),[i,n.livemode,l]);const u=(0,d.useCallback)((()=>{n.livemode||(c.set([!0]),c.set([!1],3e3))}),[n.livemode,c]);return(0,Nr.jsxs)("div",{className:(0,xr.A)("btn p-rel px-1 d-flex items-center justify-center",{"btn-paypal-gold":!r,"btn-testmode":r,"focus-outline":!n.livemode,disabled:t}),role:n.livemode?void 0:"button",tabIndex:n.livemode?void 0:0,"aria-labelledby":"paypal-button",onClick:u,onKeyPress:u,"data-qa":"paypal-button",children:[(0,Nr.jsx)("div",{ref:a,id:"paypal-button",className:"p-abs centered min-w-100 line-height-0","data-tracking-element-name":US}),r?(0,Nr.jsx)("p",{className:"text-truncate",role:"alert",children:s.translate("paymentMethodScreen.paypal.notAvailableInTestMode.oneLine")}):(0,Nr.jsx)(LS,{width:69,height:22,"aria-hidden":!0})]})},jS=(0,d.memo)(FS),BS=e=>{const t=(0,qr.t)();return(0,Nr.jsx)(Hc,{processingState:e.processingState,className:"btn-primary",onClick:e.onClick,disabled:e.disabled,dataQa:"sepa-button",dataTestId:"sepa-button",trackingElement:"paymentMethod-sepa",children:t.translate("paymentMethodScreen.continue")})},HS=(0,d.memo)(BS),qS=e=>{const t=(0,qr.t)();return(0,Nr.jsx)(Hc,{processingState:e.processingState,className:"btn-primary",onClick:e.onClick,disabled:e.disabled,dataQa:"uk-bacs-button",trackingElement:"paymentMethod-ukBacs",children:t.translate("paymentMethodScreen.continue")})},GS=(0,d.memo)(qS),VS=e=>{const t=(0,qr.t)();return(0,Nr.jsx)(Hc,{processingState:e.processingState,className:"btn-primary",disabled:e.disabled,dataQa:"us-bank-account-button",trackingElement:"paymentMethod-usBankAccount",onClick:e.onClick,children:t.translate("paymentMethodScreen.continue")})},YS=(0,d.memo)(VS);var KS;function zS(){return zS=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},zS.apply(this,arguments)}var $S=function(e,t){return d.createElement("svg",zS({fill:"none",height:16,viewBox:"0 0 69 16",width:69,xmlns:"http://www.w3.org/2000/svg",ref:t},e),KS||(KS=d.createElement("g",{fill:"#fff"},d.createElement("path",{d:"m13.2779 1.96094c.4249.70637.6165 1.43393.6165 2.35299 0 2.93132-2.4861 6.73937-4.50383 9.41327h-4.60865l-1.84833-11.12446 4.03538-.38563.97724 7.91579c.91309-1.49731 2.03989-3.8503 2.03989-5.45453 0-.87811-.14946-1.47621-.38302-1.96868z"}),d.createElement("path",{d:"m18.5093 6.8563c.7426 0 2.6121-.34193 2.6121-1.41142 0-.51356-.3607-.76973-.7859-.76973-.7438 0-1.7198.89776-1.8262 2.18115zm-.085 2.11812c0 1.30588.7214 1.81828 1.6778 1.81828 1.0415 0 2.0387-.2562 3.3348-.91921l-.4882 3.33671c-.9132.4491-2.3364.7488-3.7178.7488-3.5041 0-4.7582-2.139-4.7582-4.81307 0-3.46585 2.04-7.14593 6.2457-7.14593 2.3156 0 3.6104 1.30579 3.6104 3.12403.0002 2.93122-3.7375 3.8292-5.9045 3.85039z"}),d.createElement("path",{d:"m35.9733 4.56799c0 .42779-.0645 1.04829-.1287 1.4538l-1.2109 7.70191h-3.9293l1.1045-7.06022c.021-.1915.0854-.57702.0854-.79092 0-.51355-.3188-.64169-.702-.64169-.5091 0-1.0193.23509-1.3591.40672l-1.2528 8.08621h-3.9515l1.8052-11.53109h3.42l.0433.92037c.8069-.53474 1.8693-1.11308 3.3767-1.11308 1.9972-.00022 2.6992 1.027 2.6992 2.56799z"}),d.createElement("path",{d:"m47.64 3.26231c1.1253-.81211 2.188-1.26231 3.6532-1.26231 2.0176 0 2.7194 1.02722 2.7194 2.5682 0 .4278-.0642 1.0483-.1284 1.45381l-1.2095 7.70189h-3.9304l1.1256-7.20942c.0207-.19271.0642-.4278.0642-.57691 0-.57823-.3188-.70648-.702-.70648-.488 0-.9759.2139-1.3381.40671l-1.2526 8.0862h-3.9294l1.1256-7.20941c.0207-.19271.0629-.4278.0629-.57691 0-.57823-.3189-.70648-.7008-.70648-.5101 0-1.0192.23509-1.359.40671l-1.2538 8.08619h-3.9502l1.805-11.53107h3.3783l.1061.96266c.7859-.57691 1.8475-1.15525 3.2705-1.15525 1.2322-.00044 2.039.53442 2.4434 1.26187z"}),d.createElement("path",{d:"m61.8319 6.62143c0-.94135-.2339-1.58316-.9343-1.58316-1.5507 0-1.8692 2.75949-1.8692 4.17113 0 1.0709.2977 1.7337.9979 1.7337 1.4657 0 1.8056-2.91014 1.8056-4.32167zm-6.7967 2.41755c0-3.63637 1.9112-7.03898 6.3087-7.03898 3.3135 0 4.5248 1.96867 4.5248 4.68599 0 3.59421-1.8907 7.31631-6.3942 7.31631-3.3349 0-4.4393-2.2037-4.4393-4.96332z"}))))},WS=(0,d.forwardRef)($S),XS=(0,d.memo)(WS);const QS="paymentMethod-venmo",ZS=e=>{let{disabled:t,onClick:n}=e;const{state:i,controller:s}=eo(tn.PAYMENT_OPTIONS),a=(0,qr.t)(),r=(0,d.useRef)(null),[o,c]=(0,d.useState)(!1),l=(0,Mc.D)((e=>c(e))),u=Ed();(0,d.useEffect)((()=>{if(r.current)return s.initiateVenmo({element:r.current,onClick:()=>{r.current&&u.trackClick(QS,r.current)}}),()=>s.closeVenmoButton()}),[s,u]);const h=(0,d.useCallback)((()=>{if(!i.livemode)return l.set([!0]),void l.set([!1],3e3);t||n()}),[t,n,l,i.livemode]);return(0,Nr.jsxs)("div",{className:(0,xr.A)("btn p-rel px-1 d-flex items-center justify-center",o?"btn-testmode":"btn-venmo",{"focus-outline":!i.livemode,disabled:t}),role:i.livemode?void 0:"button",tabIndex:i.livemode?void 0:0,"aria-labelledby":"venmo-button",onClick:h,onKeyPress:h,children:[(0,Nr.jsx)("div",{ref:r,id:"venmo-button",className:"p-abs centered min-w-100 line-height-0","data-tracking-element-name":QS}),o?(0,Nr.jsx)("p",{className:"text-truncate",role:"alert",children:a.translate("paymentMethodScreen.venmo.notAvailableInTestMode.oneLine")}):(0,Nr.jsx)(XS,{width:76,height:24,"aria-hidden":!0})]})},JS=(0,d.memo)(ZS),eA={[jg.CARD]:yS,[jg.APPLE_PAY]:hS,[jg.GOOGLE_PAY]:_S,[jg.PAYPAL]:jS,[jg.VENMO]:JS,[jg.UK_BACS]:GS,[jg.AU_BECS]:pS,[jg.ACSS]:iS,[jg.SEPA]:HS,[jg.IDEAL]:OS,[jg.US_BANK_ACCOUNT]:YS,[jg.US_BANK_ACCOUNT_INSTANT]:YS,[jg.US_BANK_ACCOUNT_VERIFICATION]:YS,[jg.AMAZON_PAY]:aS},tA=e=>{const t=(0,d.useRef)(null),n=ay(e.option),i=(0,d.useCallback)((()=>{e.onClick(e.option)}),[e]),s=eA[e.option];return(0,Nr.jsxs)(Nr.Fragment,{children:[e.transitionEntered&&e.show&&(0,Nr.jsxs)(Rc.q,{triggerRef:t,show:Boolean(e.errorMessage),maxWidth:"var(--fixed-container-width-desktop)",children:[e.errorTitle&&(0,Nr.jsx)("p",{className:"subtitle-5 text-red-80 text-ellipsis","data-qa":n+"-error-title",children:e.errorTitle}),(0,Nr.jsx)("p",{className:(0,xr.A)("text-ellipsis",e.errorTitle?"body-3 text-color mt-1":"subtitle-5 text-red-80"),"data-qa":n+"-error-message",children:e.errorMessage})]}),(0,Nr.jsx)("div",{ref:t,className:(0,xr.A)("p-1 w-100",{"d-none":!e.show}),children:(0,Nr.jsx)(s,{onClick:i,disabled:e.disabled,processingState:e.processingState})},e.option)]})},nA=e=>{const t=(0,qr.t)();return(0,Nr.jsx)(Nr.Fragment,{children:(0,Nr.jsx)("div",{className:"p-rel d-flex flex-wrap m-minus-1","aria-label":t.translate("paymentMethodScreen.paymentButtonsAriaLabel"),children:e.availableOptions.map((t=>{const{errorTitle:n,error:i,visible:s}=e.buttonOptions[t],a=e.preSelectedPaymentOption===t;return(0,Nr.jsx)(tA,{option:t,errorTitle:n,errorMessage:i,show:s&&a,onClick:e.onChoosePaymentOption,processingState:e.getProcessingState(t),disabled:e.locked,transitionEntered:e.transitionEntered},t)}))})})},iA=(0,d.memo)(nA);var sA=n(7766);const aA=e=>{let{currency:t,prefixCurrencySymbol:n,postfixCurrencySymbol:i,total:s,isRecurring:a,recurringLabel:r}=e;const o=(0,qr.t)(),c=(0,d.useMemo)((()=>(0,sA.p)(t,o.locale)),[o.locale,t]);return(0,Nr.jsxs)("div",{className:"d-flex",children:[(0,Nr.jsx)("p",{className:"body-3 text-truncate me-4",children:o.translate("paymentMethodScreen.amountLabel")}),(0,Nr.jsxs)("p",{className:"label-4 shrink-0 max-w-70 text-truncate ms-auto","data-qa":"donation-amount-label",children:[n&&(0,Nr.jsx)("span",{className:"d-inline-block text-sans-serif","aria-hidden":"true",children:n}),(0,Nr.jsx)("span",{className:"d-inline-block text-sans-serif",children:o.formatCurrency(s,{currency:t,display:"trimzeroes",withoutPrefix:!0,withoutSuffix:!0})}),i&&(0,Nr.jsx)("span",{className:"d-inline-block text-sans-serif","aria-hidden":"true",children:i}),(0,Nr.jsx)("span",{className:"d-inline-block text-sans-serif ms-0-5",children:c}),a&&(0,Nr.jsx)("span",{className:"d-inline-block",children:r})]})]})};const rA=["top","top-end","bottom","bottom-end"],oA=e=>{let{includeFees:t,isFeeCovered:n,currency:i,processingFee:s,showIncludeFee:a,locked:r,paymentOption:o,toggleCheckbox:c,transitionEntered:l,isPaymentLoader:h,dataQa:m,dataTestId:p}=e;const g=(0,qr.t)(),y=(0,$r.Q)(),f=(0,wr.P)(),S=yo("lg"),A=t!==u.XN.ONLY_NO,E=t===u.XN.ONLY_YES,C=(0,d.useRef)(null),v=(0,d.useRef)(null),N=(0,d.useRef)(null),b=(0,d.useRef)(null),P=[y?"right":"left","top"],D=(0,Hr.G)(b),[_,T]=(0,d.useState)(!1),{showHelpTooltip:O,helpTooltipRef:x,handleHelpTooltipKeyDown:k,handleHelpTooltipChecked:I}=function(e){const t=(0,d.useRef)(null),[n,i]=(0,d.useState)(!1),s=()=>{i((e=>!e))},a=()=>{i(!1)};return eS(t,a),((e,t)=>{(0,d.useEffect)((()=>{const n=null==e?void 0:e.current;if(n)return n.addEventListener("blur",t),()=>{n.removeEventListener("blur",t)}}),[e,t])})(e,a),{helpTooltipRef:t,showHelpTooltip:n,handleHelpTooltipChecked:e=>{e.stopPropagation(),s()},handleHelpTooltipKeyDown:e=>{e.code!==Ir.J.ENTER&&e.code!==Ir.J.SPACE||(e.stopPropagation(),e.preventDefault(),s())}}}(v);return(0,d.useEffect)((()=>{const e=o===jg.CARD&&!S;T(!(!C.current||n||O||e))}),[n,O,o,S]),(0,Nr.jsx)(Nr.Fragment,{children:A&&(0,Nr.jsxs)(Nr.Fragment,{children:[(0,Nr.jsxs)("div",{"data-qa":m,"data-testid":p,ref:N,className:(0,xr.A)("d-flex items-center",{"px-8 mx-minus-8":!f}),children:[E&&(0,Nr.jsx)("p",{className:"body-3 text-truncate","data-qa":"fee-amount-text",children:g.translate("paymentMethodScreen.transactionCostsIncluded",{amount:g.formatCurrency(s,{currency:i,display:"floatcents"})})}),a&&(0,Nr.jsx)(Qc,{innerRef:C,className:"body-3",customLabelClasses:"line-height-20",checked:n,disabled:r,onChange:c,dataQa:"cover-fee-checkbox",trackingElement:"coverFee",children:(0,Nr.jsx)("span",{className:"body-3 text-truncate",children:g.translate("paymentMethodScreen.coverLabel")})}),(0,Nr.jsx)("button",{ref:v,type:"button",className:"btn-icon shrink-0 font-size-18 text-gray-60 ms-2","aria-label":g.translate("paymentMethodScreen.transactionCostsHelpAriaLabel"),disabled:r,onClick:I,onKeyDown:k,"data-qa":"transaction-cost-tip","data-testid":"transaction-cost-tip",children:(0,Nr.jsx)(Kc.A,{className:(0,xr.A)("icon-stroke d-block",{"icon-flip-horizontal":y}),"aria-hidden":!0})})]}),(0,Nr.jsx)(kr.A,{nodeRef:b,in:f&&a&&!n,mountOnEnter:!0,unmountOnExit:!0,addEndListener:D,classNames:"rtg-fee-accordion-mobile",children:(0,Nr.jsx)("p",{ref:b,className:"body-3 text-ellipsis mt-2",role:"alert","data-qa":"cover-fee-tooltip",children:g.translate("paymentMethodScreen.coverCostsQuestion")})}),l&&!r&&(0,Nr.jsxs)(Rc.q,{triggerRef:v,ref:x,show:O,maxWidth:"228px",placement:y?"left":"right",fallbackPlacements:rA,dataQa:"why-cover-fee-tooltip",children:[E&&g.translate("paymentMethodScreen.transactionCostsInfo"),a&&(0,Nr.jsx)(yl,{className:"fee-tooltip",token:"paymentMethodScreen.transactionCostsTooltipMessage",params:{processingFee:g.formatCurrency(s,{currency:i,display:"floatcents"})}})]}),l&&!h&&!r&&!f&&(0,Nr.jsx)(Rc.q,{triggerRef:N,show:_,maxWidth:S?"228px":"296px",placement:S?y?"left":"right":"top",fallbackPlacements:P,role:"alert",dataQa:"cover-fee-tooltip",children:g.translate("paymentMethodScreen.coverCostsQuestion")}),(0,Nr.jsx)("hr",{className:"border-gray-15 mt-3 mb-2-5","aria-hidden":!0})]})})},cA=()=>{const e=(0,qr.t)(),t=window.document.location.href.replace("http://","https://");return(0,Nr.jsxs)(Nr.Fragment,{children:[(0,Nr.jsx)(jo,{className:"d-block mx-auto",ariaHidden:!0}),(0,Nr.jsx)("p",{className:"text-center text-ellipsis mt-6",children:e.translate("paymentMethodScreen.creditCardIsUnavailableInfo.part-1")}),(0,Nr.jsx)(yl,{className:"text-center text-ellipsis mt-2-5",as:"p",token:"paymentMethodScreen.creditCardIsUnavailableInfo.part-2",params:{link:t}})]})},lA=(0,d.memo)(cA),uA=e=>{const{transitionEntered:t,showBadge:n,stripeElementsCardState:i,setStripeElementsCardState:s}=e,{state:a,controller:r}=eo(tn.PAYMENT_OPTIONS),o=(0,wr.P)(),c=(0,qr.t)(),l=function(){const e=uo(),[t,n]=(0,d.useState)(!1);return(0,d.useEffect)((()=>e.onStateUpdate((()=>{n(e.checkoutUIState.showPaymentLoader)}))),[e]),t}(),[u,h]=(0,d.useState)(!1),m=r.getFrequency(),p=r.getCurrency();(0,d.useEffect)((()=>{r.syncPaymentButtons()}),[r,m,p]);const g=(0,d.useCallback)((()=>{r.toggleFeeCovered()}),[r]),y=(0,d.useCallback)((e=>r.setPreSelectedPaymentOption(e)),[r]),f=(0,d.useCallback)((e=>r.choosePaymentOption(e)),[r]),S=(0,d.useCallback)(((e,t)=>r.changePaymentOption(e,t)),[r]),A=(0,d.useCallback)((e=>{switch(e){case jg.ACSS:return a.processingACSSState;case jg.US_BANK_ACCOUNT:case jg.US_BANK_ACCOUNT_INSTANT:case jg.US_BANK_ACCOUNT_VERIFICATION:return a.processingUSBankAccountState;case jg.CARD:return a.processingCardState;case jg.IDEAL:return a.processingIdealState;default:return La.IDLE}}),[a.processingACSSState,a.processingCardState,a.processingIdealState,a.processingUSBankAccountState]);return(0,Nr.jsxs)("div",{className:"p-rel flow-screen","data-qa":"active-screen-payment-method",children:[(0,Nr.jsx)(ac,{autoFocus:o,children:c.translate("common.screenAriaLabel",{screenTitle:`${c.translate("paymentMethodScreen.title")}`})}),(0,Nr.jsx)(Sc,{title:c.translate("paymentMethodScreen.title"),showBadge:n}),a.stripeElementsAvailable?(0,Nr.jsxs)(Nr.Fragment,{children:[(0,Nr.jsx)(Bo,{className:(0,xr.A)("px-body",{"pt-8 pb-5":!o}),children:(0,Nr.jsxs)("div",{className:"fixed-container grow-1 min-h-0 d-flex flex-column",children:[(0,Nr.jsxs)("div",{className:"shrink-0",children:[(0,Nr.jsx)("p",{className:"label-2 text-truncate mb-2",children:c.translate("paymentMethodScreen.description")}),!!a.preSelectedPaymentOption&&(0,Nr.jsx)(tS,{availableOptions:a.availableOptions,buttonOptions:a.buttonOptions,locked:a.locked,selectedOption:a.preSelectedPaymentOption,onChoosePaymentOption:y,onChangeSelectedPaymentOption:S,showAllOptions:u,setShowAllOptions:h})]}),a.preSelectedPaymentOption===jg.CARD&&(0,Nr.jsx)(Vc,{size:32,sizeMin:16}),(0,Nr.jsx)("div",{className:(0,xr.A)(a.preSelectedPaymentOption===jg.CARD?"shrink-0":"d-none",{"opacity-20":u&&!o}),children:(0,Nr.jsx)(sy,{isReady:!!t&&a.preSelectedPaymentOption===jg.CARD,locked:u&&!o,stripeElementsCardState:i,setStripeElementsCardState:s})}),(0,Nr.jsx)(Vc,{size:32,sizeMin:16,className:"mt-auto"}),(0,Nr.jsxs)("div",{className:(0,xr.A)("shrink-0",{"opacity-20":u&&!o}),children:[(0,Nr.jsx)(oA,{paymentOption:a.preSelectedPaymentOption,showIncludeFee:a.showIncludeFee,isFeeCovered:a.isFeeCovered,locked:a.locked||u&&!o,processingFee:a.processingFee,currency:a.currency,toggleCheckbox:g,includeFees:a.includeFees,transitionEntered:t,isPaymentLoader:l,dataQa:"transaction-costs-lpo"}),(0,Nr.jsx)(aA,{prefixCurrencySymbol:a.prefixCurrencySymbol,postfixCurrencySymbol:a.postfixCurrencySymbol,currency:a.currency,total:a.total,isRecurring:a.isRecurring,recurringLabel:a.recurringLabel})]})]})}),(0,Nr.jsx)(ec,{className:(0,xr.A)({"opacity-20":u&&!o}),children:a.isStripeAccountConnected?(0,Nr.jsx)(iA,{preSelectedPaymentOption:a.preSelectedPaymentOption,availableOptions:a.availableOptions,buttonOptions:a.buttonOptions,locked:a.locked||u&&!o,onChoosePaymentOption:f,getProcessingState:A,transitionEntered:t}):(0,Nr.jsx)("p",{className:"font-weight-600 text-center text-danger text-ellipsis",dangerouslySetInnerHTML:{__html:c.translate("paymentMethodScreen.stripe.connectionInfo")},"data-qa":"stripe-danger-text"})})]}):(0,Nr.jsxs)(Nr.Fragment,{children:[(0,Nr.jsx)(Bo,{className:(0,xr.A)("px-body justify-center",{"pt-4 pb-6":o}),children:(0,Nr.jsx)("div",{className:"fixed-container",children:(0,Nr.jsx)(lA,{})})}),(0,Nr.jsx)(ec,{className:(0,xr.A)({"pt-10 pb-5":!o})})]}),l&&(0,Nr.jsx)(Bg,{})]})},{useAddFieldToScroll:dA,useScrollToFieldsTrigger:hA,ScrollToFieldsProvider:mA}=(0,Zl.J)(),pA=()=>{const{state:e,controller:t}=eo(tn.POST_DONATION_UPSELL),n=(0,qr.t)(),i=(0,wr.P)(),s=(0,d.useRef)(null),a=(0,d.useRef)(null),r=hA();return(0,Nr.jsxs)(Nr.Fragment,{children:[i?(0,Nr.jsx)(kr.A,{nodeRef:s,in:e.confirmError,timeout:200,classNames:"rtg-fade",mountOnEnter:!0,unmountOnExit:!0,children:(0,Nr.jsx)(Uc,{setRef:s,className:"mb-3",role:e.confirmError?"alert":"none",children:(0,Nr.jsx)("p",{className:"subtitle-5 text-center text-red-80 text-ellipsis",children:n.translate("postDonationUpsellScreen.error.serviceUnavailable")})})}):(0,Nr.jsx)(Rc.q,{triggerRef:a,show:e.confirmError,maxWidth:"var(--fixed-container-width-desktop)",children:(0,Nr.jsx)("p",{className:"subtitle-5 text-red-80 text-center text-ellipsis",children:n.translate("postDonationUpsellScreen.error.serviceUnavailable")})}),(0,Nr.jsx)("button",{type:"button",ref:a,className:"btn pdu-confirm-btn",disabled:e.locked||e.confirmError,onClick:()=>{r(),t.accept()},"data-qa":"post-donation-upsell-confirm","data-tracking-element-name":"confirmButton",children:n.translate("postDonationUpsellScreen.button.confirm",{recurringType:t.periodLabel})})]})},gA=(0,d.memo)(pA),yA=e=>{const{state:t,controller:n}=eo(tn.POST_DONATION_UPSELL),i=(0,qr.t)();return(0,Nr.jsxs)("div",{className:e.className,children:[(0,Nr.jsx)(gA,{}),(0,Nr.jsx)("button",{type:"button",className:"btn pdu-skip-btn mt-2",disabled:t.locked,onClick:()=>n.leave(),"data-qa":"post-donation-not-this-time","data-tracking-element-name":"skipButton",children:i.translate("postDonationUpsellScreen.button.notThisTime")})]})},fA=(0,d.memo)(yA),SA=e=>{const{state:t,controller:n}=eo(tn.POST_DONATION_UPSELL),i=(0,qr.t)(),s=(0,$r.Q)(),a=(0,d.useRef)(null),r=(0,d.useRef)(null),[o,c]=(0,d.useState)(!t.isShowcase&&t.errors.min),[l,u]=(0,d.useState)(!t.isShowcase&&t.errors.max),h=(0,d.useCallback)((()=>o?i.translate("postDonationUpsellScreen.error.minAmount",{amount:i.formatCurrency(t.recurringMinAmount,{currency:t.currency,display:"round"})}):l?i.translate("postDonationUpsellScreen.error.maxAmount",{amount:i.formatCurrency(t.upsellMaxAmount,{currency:t.currency,display:"round"})}):""),[i,l,o,t.currency,t.recurringMinAmount,t.upsellMaxAmount]);(0,cc.f)({ref:r,autoFocus:t.showAmountInput,mode:oc.Q.ALL});const m=(0,wr.P)(),p=["bottom"],g="var(--fixed-container-width-desktop)",y=(0,d.useCallback)((e=>{n.changeAmount(e)}),[n]),f=lo(),S=(0,d.useMemo)((()=>f.getSymbol(t.currency)),[f,t.currency]),A=(0,d.useMemo)((()=>(0,sA.p)(t.currency,i.locale)),[i.locale,t.currency]),E=Ml(t.shakeKey,0!==t.shakeKey),C=(0,d.useCallback)((()=>{c(!t.isShowcase&&t.errors.min),u(!t.isShowcase&&t.errors.max)}),[t.isShowcase,t.errors.min,t.errors.max]);(0,d.useEffect)((()=>{c(!t.isShowcase&&t.errors.min),u(!t.isShowcase&&t.errors.max)}),[t.isShowcase,t.errors.min,t.errors.max]);const v=(0,d.useCallback)((()=>{n.makeAmountInputVisible()}),[n]),N=(0,d.useMemo)((()=>(0,Nr.jsx)(yl,{token:"postDonationUpsellScreen.description",params:{date:i.formatDate(t.startDate)}})),[i,t.startDate]);return dA(r,(e=>!e.isAmountValid)),(0,Nr.jsxs)("div",{className:(0,xr.A)("d-flex flex-column items-center text-center",e.className),children:[(0,Nr.jsx)("h4",{className:(0,xr.A)("subtitle-4 max-w-100",m?"text-ellipsis":"text-truncate"),children:i.translate("postDonationUpsellScreen.subtitle")}),(0,Nr.jsx)("p",{className:(0,xr.A)("pdu-question max-w-100 mt-1",m?"text-ellipsis":"text-line-clamp-5"),children:N}),(0,Nr.jsxs)("div",{ref:a,className:"max-w-100 mt-3",children:[(0,Nr.jsx)(Jd,{ref:r,className:(0,xr.A)("group-frequency-control",{"bg-white border-radius-base":t.showAmountInput,shake:E,disabled:t.locked&&t.showAmountInput}),currency:t.currency,amount:t.amount,onAmountChange:y,canModifyAmount:!0,currencyService:f,showCurrencySymbol:!0,currencyCodeNode:(0,Nr.jsxs)("span",{className:(0,xr.A)("subtitle-3 shrink-0 text-nowrap ms-1",{"text-gray-60":t.showAmountInput}),children:[!S&&A,"/",i.translate("widgetSubscriptionPeriodLabel.monthly.short")]}),isPDUPriceInput:!0,hasError:!t.isAmountValid,errorLabel:h(),onAmountInputBlur:C,showDisabledInput:!t.showAmountInput,qaActiveAttribute:"post-donation-amount-input",trackingElement:"postDonationInput",placeholder:"",disabled:t.locked&&t.showAmountInput,donationType:t.flowType}),(0,Nr.jsx)(Rc.q,{triggerRef:a,show:o,maxWidth:g,customClass:"w-auto",placement:m?"top":s?"left-start":"right-start",fallbackPlacements:m?[]:p,role:o?"alert":"none",dataQa:"min-amount-popover",children:(0,Nr.jsx)("span",{dangerouslySetInnerHTML:{__html:i.translate("postDonationUpsellScreen.error.minAmount",{amount:i.formatCurrency(t.recurringMinAmount,{currency:t.currency,display:"round"})})}})}),(0,Nr.jsx)(Rc.q,{triggerRef:a,show:l,maxWidth:g,customClass:"w-auto",placement:m?"top":s?"left-start":"right-start",fallbackPlacements:m?[]:p,role:l?"alert":"none",dataQa:"max-amount-popover",children:(0,Nr.jsx)("span",{dangerouslySetInnerHTML:{__html:i.translate("postDonationUpsellScreen.error.maxAmount",{amount:i.formatCurrency(t.upsellMaxAmount,{currency:t.currency,display:"round"})})}})})]}),!t.showAmountInput&&(0,Nr.jsx)("button",{type:"button",className:"btn-link link-3 text-white-hover-white text-truncate max-w-100 opacity-75",disabled:t.locked,onClick:v,"data-qa":"post-donation-another-amount",children:i.translate("postDonationUpsellScreen.amount.another")})]})},AA=(0,d.memo)(SA),EA=e=>{const{controller:t}=eo(tn.POST_DONATION_UPSELL),n=(0,qr.t)(),i=(0,wr.P)(),s=(0,Ur.k)(),a=(0,Pr.n)().getAskPageConfig().show;return(0,d.useEffect)((()=>{t.setShowedInSession()}),[t]),(0,Nr.jsxs)("div",{className:"flow-screen","data-qa":"active-screen-post-donation-upsell",children:[(0,Nr.jsx)("div",{className:"sr-only",role:"status","aria-live":"polite",children:n.translate("common.screenAriaLabel",{screenTitle:`${n.translate("postDonationUpsellScreen.screenTitle")}`})}),i&&!a&&(0,Nr.jsx)(Sc,{}),(0,Nr.jsx)(ju,{className:"shrink-0"}),(0,Nr.jsxs)(Bo,{className:(0,xr.A)("px-body",i?"pt-16 pb-8":"pt-7 pb-1"),children:[(0,Nr.jsx)("div",{className:"fixed-container d-flex flex-column grow-1",children:(0,Nr.jsxs)("div",{className:(0,xr.A)("grow-1 d-flex flex-column",{"justify-center":!i}),children:[(0,Nr.jsx)(_u,{className:"d-block mx-auto",width:64,height:67,ariaHidden:!0}),(0,Nr.jsx)("h2",{className:(0,xr.A)("title-1 text-center mt-4",i?"text-ellipsis":"text-line-clamp-2"),children:t.thankYouTitle}),(0,Nr.jsx)("p",{className:(0,xr.A)("text-center mt-2",i?"text-ellipsis":"text-line-clamp-2"),"data-qa":"post-donation-upsell-title-label",children:t.description})]})}),(0,Nr.jsx)("div",{className:(0,xr.A)(s("pdu-panel"),"shrink-0",i?"mt-12":"mt-4"),children:(0,Nr.jsxs)("div",{className:"fixed-container grow-1 d-flex flex-column",children:[(0,Nr.jsx)(AA,{className:"mb-6"}),(0,Nr.jsx)(fA,{className:"mt-auto"})]})})]})]})},{ScrollToFieldsProvider:CA,useAddFieldToScroll:vA,useScrollToFieldsTrigger:NA,useFakeStripeElement:bA}=(0,Zl.J)(),PA=e=>{const{transitionEntered:t,showBadge:n,stripeElementState:i,setStripeElementState:s}=e,{state:a,controller:r}=eo(tn.SEPA),o=(0,qr.t)(),c=no(),u=(0,wr.P)(),h=(0,Br.$)(),m=(0,fm.j)(),p=(0,d.useRef)(null),[g,y]=(0,d.useState)(),f=Ml(a.shakeKey,0!==a.shakeKey),S={maxHeight:u?void 0:"150px"},A=(0,d.useRef)(!1),E=(0,Dr.M)(),C=NA();(0,d.useEffect)((()=>{(0,l.sH)(void 0,void 0,void 0,(function*(){if(h)return;if(!p.current)throw new Error("ibanContainerRef is not provided");const e={onIbanElementReady:()=>{s((e=>Object.assign(Object.assign({},e),{isReady:!0})))}},{stripeElements:t}=yield r.initiateSepa(p.current,Object.assign(Object.assign({},e),{stripeElementStyleOverride:Object.assign(Object.assign({},pa),{base:Object.assign(Object.assign({},pa.base),{"::placeholder":{color:"transparent"}}),invalid:Object.assign(Object.assign({},pa.invalid),{color:"#222832",":focus":{color:"#222832"},"::placeholder":{color:"transparent"}})}),showIcon:!1}));y(t)}))}),[r,h,s]),(0,d.useEffect)((()=>{if(!i.isReady||!g||!t)return;const e=g.getElement(Fa.IBAN);if(!e)throw new Error("iban element is not initialized");const n=()=>{A.current?E.document.dispatchEvent(new Event("stripeElementEvent")):A.current=!0},a=e=>{r.recalculatePaymentScreen(),s((t=>{var n,i;return Object.assign(Object.assign({},t),{isEmpty:e.empty,error:null!==(i=null===(n=e.error)||void 0===n?void 0:n.message)&&void 0!==i?i:null})}))};return e.on("focus",n),e.on("change",a),m||A.current||e.focus(),()=>{e.off("focus",n),e.off("change",a)}}),[r,E.document,s,i.isReady,g,t,m]);const v=bA({focus:()=>{var e;return null===(e=null==g?void 0:g.getElement(Fa.IBAN))||void 0===e?void 0:e.focus()},scrollIntoView:e=>{var t;return null===(t=p.current)||void 0===t?void 0:t.scrollIntoView(e)}});return vA(v,(e=>Boolean(e.error)||e.isEmpty)),(0,Nr.jsxs)("form",{className:"flow-screen",onSubmit:e=>{e.preventDefault(),C(),r.leave()},children:[(0,Nr.jsx)("div",{className:"sr-only",role:"status","aria-live":"polite",children:o.translate("common.screenAriaLabel",{screenTitle:`${o.translate("sepaScreen.title")}`})}),(0,Nr.jsx)(Sc,{title:o.translate("sepaScreen.title"),showBadge:n,titleQa:"sepa-title"}),(0,Nr.jsx)(Bo,{className:(0,xr.A)("px-body",{"py-5":!u}),children:(0,Nr.jsxs)("div",{className:(0,xr.A)("fixed-container",{"grow-1 d-flex flex-column":!u}),children:[(0,Nr.jsx)("p",{className:(0,xr.A)("text-center",u?"text-ellipsis":"text-line-clamp-4"),children:o.translate("sepaScreen.description")}),(0,Nr.jsxs)(nl.s,{htmlFor:`iban-number-${c}`,label:o.translate("sepaScreen.ibanNumberLabel"),labelFloating:!0,formGroupClass:(0,xr.A)("mt-5",{"pointer-events-none":a.locked,shake:f}),formLabelClass:(0,xr.A)({"has-value":!i.isEmpty,"has-error pe-6":null!==i.error}),dataQa:"iban-number-label",children:[(0,Nr.jsx)("div",{ref:p,id:`iban-number-${c}`,className:"StripeElement has-label-floating"}),i.error&&(0,Nr.jsxs)(Nr.Fragment,{children:[(0,Nr.jsx)(al.U,{className:"p-abs centered-right z-index-5 me-4",children:i.error}),(0,Nr.jsx)("p",{role:"alert",className:"sr-only",children:i.error})]})]}),(0,Nr.jsx)("div",{className:u?"mt-5":"grow-1 min-h-0 p-rel mt-4",style:S,children:(0,Nr.jsx)("div",{className:(0,xr.A)({"p-abs top-left bottom-right text-scrollable custom-scrollbar":!u}),children:(0,Nr.jsx)("p",{className:(0,xr.A)("body-4 text-gray-80 text-ellipsis",{"px-3 py-2-5":!u,"pointer-events-none":a.locked}),children:o.translate("sepaScreen.legalInformation")})})})]})}),(0,Nr.jsx)(ec,{children:(0,Nr.jsx)(Hc,{type:"submit",className:"btn-primary",errorTitle:a.payErrorMessage,processingState:a.processingState,dataQa:"sepa-continue-button",trackingElement:"nextButton",children:a.isPaymentScreen?vc(o,a.formattedAmount,a.frequency):o.translate("sepaScreen.button")})})]})};function DA(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:" ";return e.filter((e=>"string"==typeof e||"number"==typeof e)).map((e=>"string"==typeof e?e.trim():e)).filter((e=>""!==e)).join(t)}var _A;function TA(){return TA=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},TA.apply(this,arguments)}var OA=function(e,t){return d.createElement("svg",TA({fill:"none",height:28,viewBox:"0 0 87 28",width:87,xmlns:"http://www.w3.org/2000/svg",ref:t},e),_A||(_A=d.createElement("path",{clipRule:"evenodd",d:"m40.6994 5.87862h4.4869s4.4427-.08959 4.3979 3.94846c-.0443 3.00672-4.3073 3.45522-4.3073 3.45522h-4.577v-7.40368zm13.4235 14.49468c.126.5873.5508 1.2346 1.9681 1.3011 1.8843.0443 2.9614-.6739 2.9614-.6739v1.3911s-2.064.4943-3.0515.4943c-1.0318 0-4.0833-.225-4.0833-3.0516 0-2.288 2.513-3.0062 3.9484-3.0062 2.513.0896 3.7245.9874 3.6797 3.5448 0 .0369-4.1346.0093-5.4228.0004zm.0059-1.1228h3.4429s0-1.3011-1.6604-1.3011c-1.2489 0-1.6575.6735-1.7825 1.3011zm10.8913-1.4049c.4982-.5405 1.3346-.9732 2.7375-.9732 2.7823 0 3.2312 2.3333 3.1864 2.9614-.0448.6282-.2692 3.0063-3.4995 3.0063-1.2203 0-1.9671-.4165-2.4239-.9333v.7536h-2.1989v-8.0771h2.1989v3.2623zm1.8854 3.7382c1.3011-.0453 1.8844-1.1661 1.8844-1.7047 0-.5385-.3146-1.6604-1.975-1.6604-1.2882 0-1.6806.9732-1.7948 1.4487v.5853c.1133.4849.5076 1.3311 1.8854 1.3311zm18.9812-.224.0443 1.2568s-1.0318.224-1.7047.224-2.4239-.4037-2.4239-2.1094v-2.6026h-1.8391v-1.1662h1.8391v-1.3911h2.2442v1.3911h1.8401v1.1662h-1.8401v2.2443s0 1.1218.8979 1.1218c.8969 0 .9422-.1349.9422-.1349zm-6.8208-14.26972h2.6026v6.23702h2.1979v-6.23702h2.6479v-1.30154h-7.4484zm-.8979.31407.2693-1.30155s-1.1219-.49325-3.0959-.49325c-1.9297 0-5.0255 1.07708-5.0255 3.99375 0 2.8719 3.2755 3.8589 5.2948 3.8589s2.6922-.3141 2.6922-.3141l-.224-1.4359s-.8979.2692-2.4239.2692c-1.4807-.0448-3.0053-1.2114-3.0053-2.51249.0443-1.16667 1.3902-2.46822 3.1412-2.46822 1.3453 0 2.3771.40366 2.3771.40366zm-19.8338-1.57032s3.6797-.17919 3.6797 1.97447c0 1.84009-2.1084 1.97447-2.1084 1.97447s.5828.08959.8526.49323c.224.3589 1.7047 3.0516 1.7047 3.0516h-2.2442s-.3589-.449-.5385-.7626c-.1344-.314-.5386-.9874-.5386-.9874s-.3136-1.1219-1.3911-1.1219c-.0271 0-.4652-.0167-.8078-.0295v2.9014h-2.1537v-7.49377zm-1.3911 3.36561h1.1671s1.6151-.09009 1.7047-1.07708c.0453-.94219-1.5698-1.07707-1.5698-1.07707h-1.302zm9.0192 1.16666h3.5901v-1.39113h-3.5901v-1.70521h3.9047v-1.43593h-6.1021v7.49377h6.1473v-1.3464h-3.9494v-1.6151zm8.75 5.7433h2.199v-1.5261h-2.199zm0 6.5515h2.199v-5.6985h-2.199zm-23.9609-9.3333h2.1536v-7.49377h-2.1536zm-10.052 1.8848h4.4869s4.4427-.0905 4.3979 3.9485c-.0443 3.0063-4.3073 3.4557-4.3073 3.4557h-4.577v-7.4042zm2.1989 6.0131h1.4359s2.9615-.1797 2.9615-2.4683c0-2.2885-3.1411-2.513-3.1411-2.513h-1.2563zm0-9.3339h1.4359s2.9615-.2244 2.9615-2.46818c0-2.33333-3.1411-2.51252-3.1411-2.51252h-1.2563zm-22.3468-1.5521v15.0141s-8.7057-1.5708-8.7057-7.5386c.0005-4.7597 6.4447-6.8577 8.7057-7.4755zm0-.2801c-5.2323-.37853-17.0963 2.0739-17.0963 7.4411 0 3.4995 6.28226 8.6156 16.513 8.75.4036 0 12.0255-.449 11.8463-12.9234-.1506-10.47738-7.9924-12.31254-10.5-12.632021v-.6384659c9.9969.6345289 17.8593 6.6465569 17.8593 13.9433869 0 7.7182-8.7952 14-19.6093 14-10.81402 0-19.5645-6.2823-19.5645-14 0-7.71772 8.74999-14 19.5645-14 .3313 0 .6606.0059087.9875.017723v10.041677z",fill:"currentColor",fillRule:"evenodd"})))},xA=(0,d.forwardRef)(OA),kA=(0,d.memo)(xA);const IA={boxShadow:"inset 0 0 0 1px #c7cdd6"},wA={boxShadow:"inset 0 -1px 0 0 #c7cdd6"};function RA(e){/[0-9]/.test(e.key)||!e.key||1!==e.key.length||e.ctrlKey||e.metaKey||e.preventDefault()}const{useAddFieldToScroll:MA,useScrollToFieldsTrigger:LA,ScrollToFieldsProvider:UA}=(0,Zl.J)(),FA=e=>{var t,n,i;const{showBadge:s}=e,{state:a,controller:r}=eo(tn.UK_BACS),o=(0,wr.P)(),c=(0,qr.t)(),l=no(),u=LA(),h=(0,d.useRef)(null),m=(0,d.useRef)(null),p=(0,d.useRef)(null),g=(0,d.useRef)(null),y=a.errors.sortCode,f=a.errors.accountNumber,S=a.errors.accountHolderName,A=Ml(a.shakeKey,0!==a.shakeKey),E=(0,ic.k)();MA(h,(e=>Boolean(e.sortCode))),MA(m,(e=>Boolean(e.accountNumber))),MA(p,(e=>Boolean(e.accountHolderName))),MA(g,(e=>Boolean(e.termsChecked))),(0,d.useEffect)((()=>{if(a.sortCode||a.accountNumber||a.accountHolderName)return;if(a.livemode||!E)return;if(!h.current||!m.current||!p.current)throw new Error("Input fields refs are not defined");const e=r.fillDemoData({sortCode:h,accountNumber:m,accountHolderName:p});return()=>{e()}}),[E,r,a.livemode]);const C=(0,d.useCallback)((e=>{const t=e.target.value;r.changeSortCode(t),m.current&&6===t.length&&m.current.focus()}),[r]),v=(0,d.useCallback)((e=>{const t=e.target.value;r.changeAccountNumber(t),p.current&&17===t.length&&p.current.focus()}),[r]);return(0,Nr.jsxs)("form",{onSubmit:e=>{u(),e.preventDefault(),r.leave()},className:"flow-screen","data-qa":"uk-bacs-title",children:[(0,Nr.jsx)("div",{className:"sr-only",role:"status","aria-live":"polite",children:c.translate("common.screenAriaLabel",{screenTitle:`${c.translate("ukBacsScreen.title")}`})}),(0,Nr.jsx)(Sc,{showBadge:s,children:(0,Nr.jsx)("h2",{className:(0,xr.A)("title-2",{"py-2":o}),"aria-label":c.translate("ukBacsScreen.title"),children:(0,Nr.jsx)("span",{className:"icon-slot d-block","aria-hidden":"true",children:(0,Nr.jsx)("span",{className:"p-abs centered",children:(0,Nr.jsx)(kA,{className:"d-block text-black",width:87,height:28})})})})}),(0,Nr.jsx)(Bo,{className:(0,xr.A)("px-body d-flex flex-column",{"pt-8":!o,shake:A}),children:(0,Nr.jsxs)("div",{className:"fixed-container grow-1 min-h-0 d-flex flex-column",children:[(0,Nr.jsxs)("div",{className:"group-stacked-vertical",children:[(0,Nr.jsx)(dl.t,{id:`sort-code-${l}`,className:(0,xr.A)("text-sans-serif",{"pe-10":y}),formLabelClass:(0,xr.A)({"pe-6":y}),formGroupClass:"group-stacked-item",label:c.translate("ukBacsScreen.sortCode.label"),labelFloating:!0,setRef:h,autoFocus:!0,autoFocusMode:oc.Q.ALL,name:"sortCode",error:y,placeholder:c.translate("ukBacsScreen.sortCode.label"),value:null!==(t=a.sortCode)&&void 0!==t?t:"",disabled:a.locked,"aria-required":!0,"aria-describedby":`sort-code-${l}-error`,onKeyPress:RA,onChange:C,dataQa:"sort-code",inputMode:"numeric",children:y&&(0,Nr.jsxs)(Nr.Fragment,{children:[(0,Nr.jsx)(al.U,{className:"p-abs centered-right z-index-5 me-4",children:c.translate("ukBacsScreen.sortCode.error")}),(0,Nr.jsx)("p",{id:`sort-code-${l}-error`,className:"sr-only",children:c.translate("ukBacsScreen.sortCode.error")})]})}),(0,Nr.jsx)(dl.t,{id:`account-number-${l}`,className:(0,xr.A)("text-sans-serif",{"pe-10":f}),formLabelClass:(0,xr.A)({"pe-6":f}),formGroupClass:"group-stacked-item",setRef:m,label:c.translate("ukBacsScreen.accountNumber.label"),labelFloating:!0,name:"ukBacsAccountNumber",error:f,placeholder:c.translate("ukBacsScreen.accountNumber.label"),value:null!==(n=a.accountNumber)&&void 0!==n?n:"",disabled:a.locked,"aria-required":!0,"aria-describedby":`account-number-${l}-error`,onKeyPress:RA,onChange:v,dataQa:"account-number",inputMode:"numeric",children:f&&(0,Nr.jsxs)(Nr.Fragment,{children:[(0,Nr.jsx)(al.U,{className:"p-abs centered-right z-index-5 me-4",children:c.translate("ukBacsScreen.accountNumber.error")}),(0,Nr.jsx)("p",{id:`account-number-${l}-error`,className:"sr-only",children:c.translate("ukBacsScreen.accountNumber.error")})]})})]}),(0,Nr.jsx)(Vc,{size:16}),(0,Nr.jsx)(dl.t,{id:`account-holder-name-${l}`,className:(0,xr.A)("text-sans-serif",{"pe-10":S}),formLabelClass:(0,xr.A)({"pe-6":S}),formGroupClass:"p-rel",label:c.translate("ukBacsScreen.accountHolderName.label"),labelFloating:!0,setRef:p,name:"ukBacsAccountHolderName",error:S,placeholder:c.translate("ukBacsScreen.accountHolderName.label"),minLength:1,value:null!==(i=a.accountHolderName)&&void 0!==i?i:"",disabled:a.locked,"aria-required":!0,"aria-describedby":`account-holder-name-${l}-error`,onChange:e=>r.changeAccountHolderName(e.target.value),dataQa:"account-holder-name",children:S&&(0,Nr.jsxs)(Nr.Fragment,{children:[(0,Nr.jsx)(al.U,{className:"p-abs centered-right z-index-5 me-4",children:c.translate("ukBacsScreen.accountHolderName.error")}),(0,Nr.jsx)("p",{id:`account-holder-name-${l}-error`,className:"sr-only",children:c.translate("ukBacsScreen.accountHolderName.error")})]})}),(0,Nr.jsx)(Vc,{size:16}),(0,Nr.jsx)(Qc,{setRef:g,customLabelClasses:"line-height-18 text-gray-80",checked:a.termsChecked,error:a.errors.termsChecked,disabled:a.locked,"aria-required":!0,"aria-describedby":`terms-checkbox-${l}-error`,onChange:()=>r.toggleTermsChecked(),dataQa:"uk-bacs-legal-checkbox",children:(0,Nr.jsx)("span",{className:(0,xr.A)("body-4",{"text-line-clamp-8":!o}),"data-qa":"uk-bacs-legal-text-label",children:c.translate("ukBacsScreen.legalInformation.label",{companyName:a.companyName})})}),a.errors.termsChecked&&(0,Nr.jsx)("p",{id:`terms-checkbox-${l}-error`,className:"sr-only",children:c.translate("ukBacsScreen.legalInformation.error")}),!o&&(0,Nr.jsx)(Vc,{size:20})]})}),(0,Nr.jsx)(ec,{children:(0,Nr.jsx)(Hc,{type:"submit",className:"btn-primary",processingState:a.processingState,errorTitle:a.payErrorMessage||c.translate("common.errorOccurredText"),dataQa:"uk-bacs-continue-button",trackingElement:"nextButton",children:c.translate("ukBacsScreen.button")})})]})},jA=e=>{const t=(0,Uo.Y)();return(0,Nr.jsxs)("svg",{className:e.className,"aria-hidden":e.ariaHidden&&!0,fill:"none",height:"96",viewBox:"0 0 96 96",width:"96",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",children:[(0,Nr.jsxs)("linearGradient",{id:`a-${t}`,gradientUnits:"userSpaceOnUse",x1:"34",x2:"34",y1:"12",y2:"88",children:[(0,Nr.jsx)("stop",{offset:".360343",stopColor:"#e6f0ff"}),(0,Nr.jsx)("stop",{offset:"1",stopColor:"#c9deff"})]}),(0,Nr.jsxs)("linearGradient",{id:`b-${t}`,children:[(0,Nr.jsx)("stop",{offset:"0",stopColor:"#8dbaf8"}),(0,Nr.jsx)("stop",{offset:"1",stopColor:"#bfdaff",stopOpacity:"0"})]}),(0,Nr.jsx)("linearGradient",{id:`c-${t}`,gradientUnits:"userSpaceOnUse",x1:"25",x2:"34",xlinkHref:`#b-${t}`,y1:"24",y2:"24"}),(0,Nr.jsxs)("linearGradient",{id:`d-${t}`,children:[(0,Nr.jsx)("stop",{offset:"0",stopColor:"#739ad5"}),(0,Nr.jsx)("stop",{offset:"1",stopColor:"#c1dafc"})]}),(0,Nr.jsx)("linearGradient",{id:`e-${t}`,gradientUnits:"userSpaceOnUse",x1:"24.5",x2:"24.5",xlinkHref:`#d-${t}`,y1:"24",y2:"4"}),(0,Nr.jsxs)("linearGradient",{id:`f-${t}`,children:[(0,Nr.jsx)("stop",{offset:"0",stopColor:"#e8f4ff"}),(0,Nr.jsx)("stop",{offset:".756988",stopColor:"#4880d3",stopOpacity:".24"})]}),(0,Nr.jsx)("linearGradient",{id:`g-${t}`,gradientUnits:"userSpaceOnUse",x1:"25",x2:"25",xlinkHref:`#f-${t}`,y1:"4",y2:"24"}),(0,Nr.jsx)("linearGradient",{id:`h-${t}`,gradientUnits:"userSpaceOnUse",x1:"67",x2:"76",xlinkHref:`#b-${t}`,y1:"24",y2:"24"}),(0,Nr.jsx)("linearGradient",{id:`i-${t}`,gradientUnits:"userSpaceOnUse",x1:"66.5",x2:"66.5",xlinkHref:`#d-${t}`,y1:"24",y2:"4"}),(0,Nr.jsx)("linearGradient",{id:`j-${t}`,gradientUnits:"userSpaceOnUse",x1:"67",x2:"67",xlinkHref:`#f-${t}`,y1:"4",y2:"24"}),(0,Nr.jsx)("rect",{fill:"#a9cbff",height:"76",rx:"10",width:"92",x:"3",y:"16"}),(0,Nr.jsx)("rect",{fill:`url(#a-${t})`,height:"76",rx:"8",width:"90",x:"1",y:"12"}),(0,Nr.jsx)("path",{d:"m4.25439 86.4409c1.32765.9798 2.96908 1.559 4.74579 1.559h74.00002c4.4183 0 8-3.5817 8-8v-60c0-1.7767-.5792-3.4181-1.5591-4.7457.3599.843.5591 1.7711.5591 2.7457v62c0 3.866-3.134 7-7 7h-76.00002c-.97461 0-1.9027-.1991-2.74579-.559z",fill:"#dfecff"}),(0,Nr.jsx)("path",{clipRule:"evenodd",d:"m26.7465 16.6999c.7142-1.0714 1.2535-2.7243 1.2535-4.6999h6c0 2.9949-.8039 5.8421-2.2612 8.0281-1.4434 2.165-3.7668 3.9719-6.7388 3.9719v-6c.3417 0 1.0183-.2078 1.7465-1.3001z",fill:`url(#c-${t})`,fillRule:"evenodd"}),(0,Nr.jsx)("path",{d:"m25 4c-2.2091 0-4 1.79086-4 4v4h10v-4c0-2.20914-1.7909-4-4-4z",fill:"#739ad5"}),(0,Nr.jsx)("path",{d:"m25 4c-2.2091 0-4 1.79086-4 4v12c0 2.2091 1.7909 4 4 4s4-1.7909 4-4v-12c0-.55229.4477-1 1-1s1 .44771 1 1c0-2.20914-1.7909-4-4-4z",fill:`url(#e-${t})`}),(0,Nr.jsx)("path",{clipRule:"evenodd",d:"m25 5c-1.6569 0-3 1.34315-3 3v12c0 1.6569 1.3431 3 3 3s3-1.3431 3-3v-12c0-.87072.5564-1.61147 1.3331-1.8861-.55-.67948-1.3908-1.1139-2.3331-1.1139zm5.5007 1.06318c-.6822-1.23036-1.9942-2.06318-3.5007-2.06318h-2c-2.2091 0-4 1.79086-4 4v12c0 2.2091 1.7909 4 4 4s4-1.7909 4-4v-12c0-.49577.3608-.90727.8341-.9863.054-.00901.1094-.0137.1659-.0137.5523 0 1 .44771 1 1 0-.70264-.1812-1.36297-.4993-1.93682z",fill:`url(#g-${t})`,fillRule:"evenodd"}),(0,Nr.jsx)("path",{clipRule:"evenodd",d:"m68.7465 16.6999c.7142-1.0714 1.2535-2.7243 1.2535-4.6999h6c0 2.9949-.8039 5.8421-2.2612 8.0281-1.4434 2.165-3.7668 3.9719-6.7388 3.9719v-6c.3417 0 1.0183-.2078 1.7465-1.3001z",fill:`url(#h-${t})`,fillRule:"evenodd"}),(0,Nr.jsx)("path",{d:"m67 4c-2.2091 0-4 1.79086-4 4v4h10v-4c0-2.20914-1.7909-4-4-4z",fill:"#739ad5"}),(0,Nr.jsx)("path",{d:"m67 4c-2.2091 0-4 1.79086-4 4v12c0 2.2091 1.7909 4 4 4s4-1.7909 4-4v-12c0-.55229.4477-1 1-1s1 .44771 1 1c0-2.20914-1.7909-4-4-4z",fill:`url(#i-${t})`}),(0,Nr.jsx)("path",{clipRule:"evenodd",d:"m67 5c-1.6569 0-3 1.34315-3 3v12c0 1.6569 1.3431 3 3 3s3-1.3431 3-3v-12c0-.87072.5564-1.61147 1.3331-1.8861-.55-.67948-1.3908-1.1139-2.3331-1.1139zm5.5007 1.06318c-.6822-1.23036-1.9942-2.06318-3.5007-2.06318h-2c-2.2091 0-4 1.79086-4 4v12c0 2.2091 1.7909 4 4 4s4-1.7909 4-4v-12c0-.49577.3608-.90727.8341-.9863.054-.00901.1094-.0137.1659-.0137.5523 0 1 .44771 1 1 0-.70264-.1812-1.36297-.4993-1.93682z",fill:`url(#j-${t})`,fillRule:"evenodd"}),(0,Nr.jsxs)("g",{fill:"#b5cbee",children:[(0,Nr.jsx)("path",{d:"m14 51c0-1.1046.8954-2 2-2h8c1.1046 0 2 .8954 2 2v8c0 1.1046-.8954 2-2 2h-8c-1.1046 0-2-.8954-2-2z"}),(0,Nr.jsx)("path",{d:"m32 51c0-1.1046.8954-2 2-2h8c1.1046 0 2 .8954 2 2v8c0 1.1046-.8954 2-2 2h-8c-1.1046 0-2-.8954-2-2z"}),(0,Nr.jsx)("path",{d:"m50 51c0-1.1046.8954-2 2-2h8c1.1046 0 2 .8954 2 2v8c0 1.1046-.8954 2-2 2h-8c-1.1046 0-2-.8954-2-2z"}),(0,Nr.jsx)("path",{d:"m68 51c0-1.1046.8954-2 2-2h8c1.1046 0 2 .8954 2 2v8c0 1.1046-.8954 2-2 2h-8c-1.1046 0-2-.8954-2-2z"}),(0,Nr.jsx)("path",{d:"m14 69c0-1.1046.8954-2 2-2h8c1.1046 0 2 .8954 2 2v8c0 1.1046-.8954 2-2 2h-8c-1.1046 0-2-.8954-2-2z"}),(0,Nr.jsx)("path",{d:"m32 69c0-1.1046.8954-2 2-2h8c1.1046 0 2 .8954 2 2v8c0 1.1046-.8954 2-2 2h-8c-1.1046 0-2-.8954-2-2z"}),(0,Nr.jsx)("path",{d:"m50 69c0-1.1046.8954-2 2-2h8c1.1046 0 2 .8954 2 2v8c0 1.1046-.8954 2-2 2h-8c-1.1046 0-2-.8954-2-2z"}),(0,Nr.jsx)("path",{d:"m68 69c0-1.1046.8954-2 2-2h8c1.1046 0 2 .8954 2 2v8c0 1.1046-.8954 2-2 2h-8c-1.1046 0-2-.8954-2-2z"}),(0,Nr.jsx)("path",{d:"m14 33c0-1.1046.8954-2 2-2h8c1.1046 0 2 .8954 2 2v8c0 1.1046-.8954 2-2 2h-8c-1.1046 0-2-.8954-2-2z"}),(0,Nr.jsx)("path",{d:"m32 33c0-1.1046.8954-2 2-2h8c1.1046 0 2 .8954 2 2v8c0 1.1046-.8954 2-2 2h-8c-1.1046 0-2-.8954-2-2z"}),(0,Nr.jsx)("path",{d:"m50 33c0-1.1046.8954-2 2-2h8c1.1046 0 2 .8954 2 2v8c0 1.1046-.8954 2-2 2h-8c-1.1046 0-2-.8954-2-2z"}),(0,Nr.jsx)("path",{d:"m68 33c0-1.1046.8954-2 2-2h8c1.1046 0 2 .8954 2 2v8c0 1.1046-.8954 2-2 2h-8c-1.1046 0-2-.8954-2-2z"})]}),(0,Nr.jsx)("path",{d:"m13 50c0-1.1046.8954-2 2-2h8c1.1046 0 2 .8954 2 2v8c0 1.1046-.8954 2-2 2h-8c-1.1046 0-2-.8954-2-2z",fill:"#f7faff"}),(0,Nr.jsx)("path",{d:"m31 50c0-1.1046.8954-2 2-2h8c1.1046 0 2 .8954 2 2v8c0 1.1046-.8954 2-2 2h-8c-1.1046 0-2-.8954-2-2z",fill:"#f7faff"}),(0,Nr.jsx)("path",{d:"m49 50c0-1.1046.8954-2 2-2h8c1.1046 0 2 .8954 2 2v8c0 1.1046-.8954 2-2 2h-8c-1.1046 0-2-.8954-2-2z",fill:"#f7faff"}),(0,Nr.jsx)("path",{d:"m67 50c0-1.1046.8954-2 2-2h8c1.1046 0 2 .8954 2 2v8c0 1.1046-.8954 2-2 2h-8c-1.1046 0-2-.8954-2-2z",fill:"#f7faff"}),(0,Nr.jsx)("path",{d:"m13 68c0-1.1046.8954-2 2-2h8c1.1046 0 2 .8954 2 2v8c0 1.1046-.8954 2-2 2h-8c-1.1046 0-2-.8954-2-2z",fill:"#f7faff"}),(0,Nr.jsx)("path",{d:"m31 68c0-1.1046.8954-2 2-2h8c1.1046 0 2 .8954 2 2v8c0 1.1046-.8954 2-2 2h-8c-1.1046 0-2-.8954-2-2z",fill:"#f7faff"}),(0,Nr.jsx)("path",{d:"m49 68c0-1.1046.8954-2 2-2h8c1.1046 0 2 .8954 2 2v8c0 1.1046-.8954 2-2 2h-8c-1.1046 0-2-.8954-2-2z",fill:"#f7faff"}),(0,Nr.jsx)("path",{d:"m67 68c0-1.1046.8954-2 2-2h8c1.1046 0 2 .8954 2 2v8c0 1.1046-.8954 2-2 2h-8c-1.1046 0-2-.8954-2-2z",fill:"#f7faff"}),(0,Nr.jsx)("path",{d:"m13 32c0-1.1046.8954-2 2-2h8c1.1046 0 2 .8954 2 2v8c0 1.1046-.8954 2-2 2h-8c-1.1046 0-2-.8954-2-2z",fill:"#f7faff"}),(0,Nr.jsx)("path",{d:"m31 32c0-1.1046.8954-2 2-2h8c1.1046 0 2 .8954 2 2v8c0 1.1046-.8954 2-2 2h-8c-1.1046 0-2-.8954-2-2z",fill:"#f7faff"}),(0,Nr.jsx)("path",{d:"m49 32c0-1.1046.8954-2 2-2h8c1.1046 0 2 .8954 2 2v8c0 1.1046-.8954 2-2 2h-8c-1.1046 0-2-.8954-2-2z",fill:"#f7faff"}),(0,Nr.jsx)("path",{d:"m67 32c0-1.1046.8954-2 2-2h8c1.1046 0 2 .8954 2 2v8c0 1.1046-.8954 2-2 2h-8c-1.1046 0-2-.8954-2-2z",fill:"#f7faff"}),(0,Nr.jsx)("path",{clipRule:"evenodd",d:"m60.9768 43.2791c3.0364.9078 5.2846 3.9193 4.9987 8.0868-.2477 3.6099-2.1691 7.1112-4.3664 9.9483-2.2111 2.855-4.8174 5.1863-6.6657 6.4679-.5554.3851-1.3173.2462-1.7017-.3103-.3845-.5565-.2458-1.3198.3096-1.705 1.6427-1.139 4.0669-3.2973 6.1252-5.9551 2.0723-2.6756 3.6593-5.7102 3.8586-8.6139.215-3.1337-1.4195-5.0206-3.2578-5.5701-1.83-.5472-4.1921.1325-5.6767 2.9002l-.6216 1.1588-1.1097-.7034c-1.879-1.1909-3.5844-1.2975-4.8373-.8748-1.2631.4261-2.1695 1.4163-2.4702 2.6611-.5706 2.3615 1.0339 6.6752 9.5698 9.5163.6411.2134.9881.907.7751 1.5493-.2129.6423-.9052.99-1.5463.7766-8.919-2.9687-12.2139-8.1234-11.1761-12.4189.5034-2.0837 2.0281-3.7192 4.067-4.4071 1.7439-.5884 3.7908-.4654 5.8467.5253 2.0401-2.8813 5.1448-3.8493 7.8788-3.032z",fill:"#fa4e77",fillRule:"evenodd"})]})},BA=(0,d.memo)(jA),HA=e=>{var t;const{state:n}=eo(tn.UPSELL),i=(0,$r.Q)(),s=(0,d.useRef)(null);return(0,cc.f)({ref:s,autoFocus:e.autoFocus,mode:oc.Q.DESKTOP}),e.upsellScreenV3ExperimentEnabled?(0,Nr.jsxs)(Hc,{setRef:s,className:"btn-danger d-flex items-center justify-center",processingState:n.processingState.highMonthly,disabled:e.disabled,onClick:()=>e.onClick(xm.HIGH),dataQa:"upsell-high",dataTestId:"upsell-high",trackingElement:"oldUpsellHighMonthlyUpsellV3Experiment",children:[(0,Nr.jsx)(hc,{className:"icon-fill shrink-0 font-size-18 me-2","aria-hidden":!0}),(0,Nr.jsx)("span",{className:"text-truncate",children:n.highButtonText})]}):(0,Nr.jsxs)("div",{className:"p-rel",children:[(0,Nr.jsx)(Hc,{setRef:s,className:(0,xr.A)("btn-danger",{"px-10":!n.isAnnualTribute}),processingState:n.processingState.highMonthly,disabled:e.disabled,onClick:()=>e.onClick(xm.HIGH),dataQa:"upsell-high",dataTestId:"upsell-high",trackingElement:null!==(t=e.trackingElement)&&void 0!==t?t:"",children:n.highButtonText}),!n.isAnnualTribute&&(0,Nr.jsx)(yp,{className:(0,xr.A)("p-abs top-left z-index-2 ms-minus-5 mt-minus-3",{"icon-flip-horizontal":i}),ariaHidden:!0})]})},qA=(0,d.memo)(HA),GA=e=>{var t;const{state:n}=eo(tn.UPSELL),i=(0,d.useRef)(null);return(0,cc.f)({ref:i,autoFocus:e.autoFocus,mode:oc.Q.DESKTOP}),(0,Nr.jsx)(Hc,{className:(0,xr.A)("btn-primary",e.className),onClick:()=>e.onClick(xm.LOW),dataQa:"upsell-low-monthly",trackingElement:null!==(t=e.trackingElement)&&void 0!==t?t:"",dataTestId:"upsell-low",processingState:n.processingState.lowMonthly,disabled:e.disabled,children:n.lowButtonText})},VA=(0,d.memo)(GA),YA=e=>{const{amount:t,currency:n,trackingElement:i,onClick:s}=e,a=(0,qr.t)();return(0,Nr.jsx)("button",{type:"button",className:"btn-link text-truncate","data-tracking-element-name":i,"data-qa":"keep-one-time-link","data-testid":"keep-one-time-link",onClick:s,children:a.translate("upsellScreen.button.keepOneTimeLink",{amount:a.formatCurrency(t,{currency:n,display:"floatcents"})})})},KA=(0,d.memo)(YA),zA=e=>{const{state:t}=eo(tn.UPSELL),n=(0,qr.t)();return e.upsellScreenV3ExperimentEnabled?(0,Nr.jsx)("div",{className:"d-flex justify-center mt-4",children:(0,Nr.jsx)(KA,{amount:e.amount,currency:t.currency,onClick:()=>e.onClick(null),trackingElement:"oldUpsellKeepUpsellV3Experiment"})}):(0,Nr.jsx)("button",{type:"button",className:(0,xr.A)("btn btn-default",e.className),onClick:()=>e.onClick(null),"data-qa":"upsell-one-time","data-tracking-element-name":e.trackingElement,disabled:e.disabled,children:n.translate("upsellScreen.button.keepOneTime",{amount:n.formatCurrency(e.amount,{currency:t.currency,display:"floatcents"})})})},$A=(0,d.memo)(zA),WA=e=>{const{state:t}=eo(tn.UPSELL),n=(0,wr.P)();return e.upsellScreenV3ExperimentEnabled?(0,Nr.jsx)("p",{className:(0,xr.A)("text-center",n?"text-ellipsis":"text-line-clamp-6"),dangerouslySetInnerHTML:{__html:t.questionShortText},"data-testid":"upsell-screen-question-text"}):(0,Nr.jsxs)(Nr.Fragment,{children:[(0,Nr.jsx)("p",{className:(0,xr.A)("text-center",n?"text-ellipsis":"text-line-clamp-6"),dangerouslySetInnerHTML:{__html:t.questionText},"data-testid":"upsell-screen-question-text"}),(0,Nr.jsx)("p",{className:(0,xr.A)("text-center mt-2",n?"text-ellipsis":"text-line-clamp-4"),dangerouslySetInnerHTML:{__html:t.descriptionText},"data-testid":"upsell-screen-description-text"})]})},XA=(0,d.memo)(WA),QA=e=>{const{showBadge:t}=e,{state:n,controller:i}=eo(tn.UPSELL),s=(0,qr.t)(),a=(0,wr.P)(),{tryToExpose:r}=function(){const e=(0,d.useRef)(!1),t=Fm().get(cn.UPSELL_AMOUNTS_DATASET_MODAL_EXPERIMENT);return{tryToExpose:(0,d.useCallback)((n=>{e.current||n!==se.ANNUAL&&(t.tryToExpose(n),e.current=!0)}),[t])}}(),o=(0,d.useCallback)((e=>{i.confirm(e)}),[i]);return(0,d.useEffect)((()=>{i.setShowed()}),[i]),function(e){const t=(0,d.useRef)(!1),n=Fm().get(cn.UPSELL_AMOUNTS_SUGGESTION_MODAL_EXPERIMENT);(0,d.useEffect)((()=>{t.current||(t.current=!0,n.tryExposure({preDonationUpsellTargetFrequency:e}))}),[n,e])}(n.targetFrequency),(0,d.useEffect)((()=>{r(n.targetFrequency)}),[n.targetFrequency,r]),(0,Nr.jsxs)("div",{className:"flow-screen","data-qa":"active-screen-upsell",children:[(0,Nr.jsx)("div",{className:"sr-only",role:"status","aria-live":"polite",children:s.translate("common.screenAriaLabel",{screenTitle:`${n.screenTitle}`})}),(0,Nr.jsx)(Sc,{title:n.screenTitle,titleTestId:"upsell-screen-title",showBadge:t}),(0,Nr.jsx)(Bo,{className:(0,xr.A)("px-body",{"py-6":n.isAnnualTribute&&!a,"py-8":!n.isAnnualTribute&&!a}),children:(0,Nr.jsxs)("div",{className:"fixed-container",children:[n.isAnnualTribute&&(0,Nr.jsx)(BA,{className:"d-block mx-auto mt-2 mb-6",ariaHidden:!0}),(0,Nr.jsx)(XA,{upsellScreenV3ExperimentEnabled:n.experiments.upsellScreenV3})]})}),(0,Nr.jsx)(ec,{children:(0,Nr.jsxs)("div",{role:"group","aria-label":s.translate("upsellScreen.buttonGroupAriaLabel"),children:[n.highAmount&&(0,Nr.jsx)(qA,{amount:n.highAmount,autoFocus:!!n.highAmount,trackingElement:"oldUpsellHighMonthly",onClick:o,upsellScreenV3ExperimentEnabled:n.experiments.upsellScreenV3,disabled:i.isLocked}),n.lowAmount&&(0,Nr.jsx)(VA,{onClick:o,className:n.experiments.upsellScreenV3?"mt-2":"mt-3",amount:n.lowAmount,autoFocus:!n.highAmount,trackingElement:"oldUpsellLowMonthly",disabled:i.isLocked}),(0,Nr.jsx)($A,{onClick:o,className:"mt-3",amount:n.upsell.fromAmount,trackingElement:"oldUpsellKeep",upsellScreenV3ExperimentEnabled:n.experiments.upsellScreenV3,disabled:i.isLocked})]})})]})},ZA=(0,d.memo)(QA),JA={boxShadow:"inset 0 0 0 1px #c7cdd6"},eE={boxShadow:"inset 0 -1px 0 0 #c7cdd6"},tE={letterSpacing:"-0.2em"},nE=e=>{const t=no();return(0,Nr.jsxs)("svg",{className:(0,xr.A)(e.className),"aria-hidden":!!e.ariaHidden||void 0,fill:"none",height:e.height||128,viewBox:"0 0 158 128",width:e.width||158,xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",children:[(0,Nr.jsxs)("filter",{id:`a-${t}`,colorInterpolationFilters:"sRGB",filterUnits:"userSpaceOnUse",height:"33",width:"11",x:"98.4998",y:"59",children:[(0,Nr.jsx)("feFlood",{floodOpacity:"0",result:"BackgroundImageFix"}),(0,Nr.jsx)("feBlend",{in:"SourceGraphic",in2:"BackgroundImageFix",mode:"normal",result:"shape"}),(0,Nr.jsx)("feColorMatrix",{in:"SourceAlpha",result:"hardAlpha",type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0"}),(0,Nr.jsx)("feOffset",{dy:"-1"}),(0,Nr.jsx)("feComposite",{in2:"hardAlpha",k2:"-1",k3:"1",operator:"arithmetic"}),(0,Nr.jsx)("feColorMatrix",{type:"matrix",values:"0 0 0 0 0.725694 0 0 0 0 0.753183 0 0 0 0 0.791667 0 0 0 1 0"}),(0,Nr.jsx)("feBlend",{in2:"shape",mode:"normal",result:"effect1_innerShadow_16856_24583"})]}),(0,Nr.jsxs)("filter",{id:`b-${t}`,colorInterpolationFilters:"sRGB",filterUnits:"userSpaceOnUse",height:"33",width:"11",x:"73.4998",y:"59",children:[(0,Nr.jsx)("feFlood",{floodOpacity:"0",result:"BackgroundImageFix"}),(0,Nr.jsx)("feBlend",{in:"SourceGraphic",in2:"BackgroundImageFix",mode:"normal",result:"shape"}),(0,Nr.jsx)("feColorMatrix",{in:"SourceAlpha",result:"hardAlpha",type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0"}),(0,Nr.jsx)("feOffset",{dy:"-1"}),(0,Nr.jsx)("feComposite",{in2:"hardAlpha",k2:"-1",k3:"1",operator:"arithmetic"}),(0,Nr.jsx)("feColorMatrix",{type:"matrix",values:"0 0 0 0 0.725694 0 0 0 0 0.753183 0 0 0 0 0.791667 0 0 0 1 0"}),(0,Nr.jsx)("feBlend",{in2:"shape",mode:"normal",result:"effect1_innerShadow_16856_24583"})]}),(0,Nr.jsxs)("filter",{id:`c-${t}`,colorInterpolationFilters:"sRGB",filterUnits:"userSpaceOnUse",height:"6",width:"91",x:"33.4998",y:"103",children:[(0,Nr.jsx)("feFlood",{floodOpacity:"0",result:"BackgroundImageFix"}),(0,Nr.jsx)("feBlend",{in:"SourceGraphic",in2:"BackgroundImageFix",mode:"normal",result:"shape"}),(0,Nr.jsx)("feColorMatrix",{in:"SourceAlpha",result:"hardAlpha",type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0"}),(0,Nr.jsx)("feOffset",{dy:"-1"}),(0,Nr.jsx)("feComposite",{in2:"hardAlpha",k2:"-1",k3:"1",operator:"arithmetic"}),(0,Nr.jsx)("feColorMatrix",{type:"matrix",values:"0 0 0 0 0.725694 0 0 0 0 0.753183 0 0 0 0 0.791667 0 0 0 1 0"}),(0,Nr.jsx)("feBlend",{in2:"shape",mode:"normal",result:"effect1_innerShadow_16856_24583"})]}),(0,Nr.jsxs)("filter",{id:`d-${t}`,colorInterpolationFilters:"sRGB",filterUnits:"userSpaceOnUse",height:"6",width:"79",x:"39.4998",y:"97",children:[(0,Nr.jsx)("feFlood",{floodOpacity:"0",result:"BackgroundImageFix"}),(0,Nr.jsx)("feBlend",{in:"SourceGraphic",in2:"BackgroundImageFix",mode:"normal",result:"shape"}),(0,Nr.jsx)("feColorMatrix",{in:"SourceAlpha",result:"hardAlpha",type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0"}),(0,Nr.jsx)("feOffset",{dy:"-1"}),(0,Nr.jsx)("feComposite",{in2:"hardAlpha",k2:"-1",k3:"1",operator:"arithmetic"}),(0,Nr.jsx)("feColorMatrix",{type:"matrix",values:"0 0 0 0 0.725694 0 0 0 0 0.753183 0 0 0 0 0.791667 0 0 0 1 0"}),(0,Nr.jsx)("feBlend",{in2:"shape",mode:"normal",result:"effect1_innerShadow_16856_24583"})]}),(0,Nr.jsxs)("filter",{id:`e-${t}`,colorInterpolationFilters:"sRGB",filterUnits:"userSpaceOnUse",height:"30",width:"90",x:"34.4998",y:"19",children:[(0,Nr.jsx)("feFlood",{floodOpacity:"0",result:"BackgroundImageFix"}),(0,Nr.jsx)("feBlend",{in:"SourceGraphic",in2:"BackgroundImageFix",mode:"normal",result:"shape"}),(0,Nr.jsx)("feColorMatrix",{in:"SourceAlpha",result:"hardAlpha",type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0"}),(0,Nr.jsx)("feOffset",{dy:"-1"}),(0,Nr.jsx)("feComposite",{in2:"hardAlpha",k2:"-1",k3:"1",operator:"arithmetic"}),(0,Nr.jsx)("feColorMatrix",{type:"matrix",values:"0 0 0 0 0.725694 0 0 0 0 0.753183 0 0 0 0 0.791667 0 0 0 1 0"}),(0,Nr.jsx)("feBlend",{in2:"shape",mode:"normal",result:"effect1_innerShadow_16856_24583"})]}),(0,Nr.jsxs)("filter",{id:`f-${t}`,colorInterpolationFilters:"sRGB",filterUnits:"userSpaceOnUse",height:"5",width:"15",x:"96.4998",y:"92",children:[(0,Nr.jsx)("feFlood",{floodOpacity:"0",result:"BackgroundImageFix"}),(0,Nr.jsx)("feBlend",{in:"SourceGraphic",in2:"BackgroundImageFix",mode:"normal",result:"shape"}),(0,Nr.jsx)("feColorMatrix",{in:"SourceAlpha",result:"hardAlpha",type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0"}),(0,Nr.jsx)("feOffset",{dy:"-1"}),(0,Nr.jsx)("feComposite",{in2:"hardAlpha",k2:"-1",k3:"1",operator:"arithmetic"}),(0,Nr.jsx)("feColorMatrix",{type:"matrix",values:"0 0 0 0 0.725694 0 0 0 0 0.753183 0 0 0 0 0.791667 0 0 0 1 0"}),(0,Nr.jsx)("feBlend",{in2:"shape",mode:"normal",result:"effect1_innerShadow_16856_24583"})]}),(0,Nr.jsxs)("filter",{id:`g-${t}`,colorInterpolationFilters:"sRGB",filterUnits:"userSpaceOnUse",height:"5",width:"15",x:"96.4998",y:"54",children:[(0,Nr.jsx)("feFlood",{floodOpacity:"0",result:"BackgroundImageFix"}),(0,Nr.jsx)("feBlend",{in:"SourceGraphic",in2:"BackgroundImageFix",mode:"normal",result:"shape"}),(0,Nr.jsx)("feColorMatrix",{in:"SourceAlpha",result:"hardAlpha",type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0"}),(0,Nr.jsx)("feOffset",{dy:"-1"}),(0,Nr.jsx)("feComposite",{in2:"hardAlpha",k2:"-1",k3:"1",operator:"arithmetic"}),(0,Nr.jsx)("feColorMatrix",{type:"matrix",values:"0 0 0 0 0.725694 0 0 0 0 0.753183 0 0 0 0 0.791667 0 0 0 1 0"}),(0,Nr.jsx)("feBlend",{in2:"shape",mode:"normal",result:"effect1_innerShadow_16856_24583"})]}),(0,Nr.jsxs)("filter",{id:`h-${t}`,colorInterpolationFilters:"sRGB",filterUnits:"userSpaceOnUse",height:"5",width:"15",x:"71.4998",y:"92",children:[(0,Nr.jsx)("feFlood",{floodOpacity:"0",result:"BackgroundImageFix"}),(0,Nr.jsx)("feBlend",{in:"SourceGraphic",in2:"BackgroundImageFix",mode:"normal",result:"shape"}),(0,Nr.jsx)("feColorMatrix",{in:"SourceAlpha",result:"hardAlpha",type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0"}),(0,Nr.jsx)("feOffset",{dy:"-1"}),(0,Nr.jsx)("feComposite",{in2:"hardAlpha",k2:"-1",k3:"1",operator:"arithmetic"}),(0,Nr.jsx)("feColorMatrix",{type:"matrix",values:"0 0 0 0 0.725694 0 0 0 0 0.753183 0 0 0 0 0.791667 0 0 0 1 0"}),(0,Nr.jsx)("feBlend",{in2:"shape",mode:"normal",result:"effect1_innerShadow_16856_24583"})]}),(0,Nr.jsxs)("filter",{id:`i-${t}`,colorInterpolationFilters:"sRGB",filterUnits:"userSpaceOnUse",height:"5",width:"15",x:"71.4998",y:"54",children:[(0,Nr.jsx)("feFlood",{floodOpacity:"0",result:"BackgroundImageFix"}),(0,Nr.jsx)("feBlend",{in:"SourceGraphic",in2:"BackgroundImageFix",mode:"normal",result:"shape"}),(0,Nr.jsx)("feColorMatrix",{in:"SourceAlpha",result:"hardAlpha",type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0"}),(0,Nr.jsx)("feOffset",{dy:"-1"}),(0,Nr.jsx)("feComposite",{in2:"hardAlpha",k2:"-1",k3:"1",operator:"arithmetic"}),(0,Nr.jsx)("feColorMatrix",{type:"matrix",values:"0 0 0 0 0.725694 0 0 0 0 0.753183 0 0 0 0 0.791667 0 0 0 1 0"}),(0,Nr.jsx)("feBlend",{in2:"shape",mode:"normal",result:"effect1_innerShadow_16856_24583"})]}),(0,Nr.jsxs)("filter",{id:`j-${t}`,colorInterpolationFilters:"sRGB",filterUnits:"userSpaceOnUse",height:"33",width:"11",x:"48.4998",y:"59",children:[(0,Nr.jsx)("feFlood",{floodOpacity:"0",result:"BackgroundImageFix"}),(0,Nr.jsx)("feBlend",{in:"SourceGraphic",in2:"BackgroundImageFix",mode:"normal",result:"shape"}),(0,Nr.jsx)("feColorMatrix",{in:"SourceAlpha",result:"hardAlpha",type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0"}),(0,Nr.jsx)("feOffset",{dy:"-1"}),(0,Nr.jsx)("feComposite",{in2:"hardAlpha",k2:"-1",k3:"1",operator:"arithmetic"}),(0,Nr.jsx)("feColorMatrix",{type:"matrix",values:"0 0 0 0 0.725694 0 0 0 0 0.753183 0 0 0 0 0.791667 0 0 0 1 0"}),(0,Nr.jsx)("feBlend",{in2:"shape",mode:"normal",result:"effect1_innerShadow_16856_24583"})]}),(0,Nr.jsxs)("filter",{id:`k-${t}`,colorInterpolationFilters:"sRGB",filterUnits:"userSpaceOnUse",height:"5",width:"15",x:"46.4998",y:"92",children:[(0,Nr.jsx)("feFlood",{floodOpacity:"0",result:"BackgroundImageFix"}),(0,Nr.jsx)("feBlend",{in:"SourceGraphic",in2:"BackgroundImageFix",mode:"normal",result:"shape"}),(0,Nr.jsx)("feColorMatrix",{in:"SourceAlpha",result:"hardAlpha",type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0"}),(0,Nr.jsx)("feOffset",{dy:"-1"}),(0,Nr.jsx)("feComposite",{in2:"hardAlpha",k2:"-1",k3:"1",operator:"arithmetic"}),(0,Nr.jsx)("feColorMatrix",{type:"matrix",values:"0 0 0 0 0.725694 0 0 0 0 0.753183 0 0 0 0 0.791667 0 0 0 1 0"}),(0,Nr.jsx)("feBlend",{in2:"shape",mode:"normal",result:"effect1_innerShadow_16856_24583"})]}),(0,Nr.jsxs)("filter",{id:`l-${t}`,colorInterpolationFilters:"sRGB",filterUnits:"userSpaceOnUse",height:"5",width:"15",x:"46.4998",y:"54",children:[(0,Nr.jsx)("feFlood",{floodOpacity:"0",result:"BackgroundImageFix"}),(0,Nr.jsx)("feBlend",{in:"SourceGraphic",in2:"BackgroundImageFix",mode:"normal",result:"shape"}),(0,Nr.jsx)("feColorMatrix",{in:"SourceAlpha",result:"hardAlpha",type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0"}),(0,Nr.jsx)("feOffset",{dy:"-1"}),(0,Nr.jsx)("feComposite",{in2:"hardAlpha",k2:"-1",k3:"1",operator:"arithmetic"}),(0,Nr.jsx)("feColorMatrix",{type:"matrix",values:"0 0 0 0 0.725694 0 0 0 0 0.753183 0 0 0 0 0.791667 0 0 0 1 0"}),(0,Nr.jsx)("feBlend",{in2:"shape",mode:"normal",result:"effect1_innerShadow_16856_24583"})]}),(0,Nr.jsxs)("filter",{id:`m-${t}`,colorInterpolationFilters:"sRGB",filterUnits:"userSpaceOnUse",height:"5",width:"82",x:"38.4998",y:"49",children:[(0,Nr.jsx)("feFlood",{floodOpacity:"0",result:"BackgroundImageFix"}),(0,Nr.jsx)("feBlend",{in:"SourceGraphic",in2:"BackgroundImageFix",mode:"normal",result:"shape"}),(0,Nr.jsx)("feColorMatrix",{in:"SourceAlpha",result:"hardAlpha",type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0"}),(0,Nr.jsx)("feOffset",{dy:"-1"}),(0,Nr.jsx)("feComposite",{in2:"hardAlpha",k2:"-1",k3:"1",operator:"arithmetic"}),(0,Nr.jsx)("feColorMatrix",{type:"matrix",values:"0 0 0 0 0.725694 0 0 0 0 0.753183 0 0 0 0 0.791667 0 0 0 1 0"}),(0,Nr.jsx)("feBlend",{in2:"shape",mode:"normal",result:"effect1_innerShadow_16856_24583"})]}),(0,Nr.jsxs)("filter",{id:`n-${t}`,colorInterpolationFilters:"sRGB",filterUnits:"userSpaceOnUse",height:"66.4238",width:"51.5996",x:"9.14014",y:"24.7031",children:[(0,Nr.jsx)("feFlood",{floodOpacity:"0",result:"BackgroundImageFix"}),(0,Nr.jsx)("feColorMatrix",{in:"SourceAlpha",result:"hardAlpha",type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0"}),(0,Nr.jsx)("feOffset",{dx:".5",dy:".5"}),(0,Nr.jsx)("feGaussianBlur",{stdDeviation:"1"}),(0,Nr.jsx)("feComposite",{in2:"hardAlpha",operator:"out"}),(0,Nr.jsx)("feColorMatrix",{type:"matrix",values:"0 0 0 0 0.06125 0 0 0 0 0.525 0 0 0 0 0.132596 0 0 0 1 0"}),(0,Nr.jsx)("feBlend",{in2:"BackgroundImageFix",mode:"normal",result:"effect1_dropShadow_16856_24583"}),(0,Nr.jsx)("feBlend",{in:"SourceGraphic",in2:"effect1_dropShadow_16856_24583",mode:"normal",result:"shape"})]}),(0,Nr.jsxs)("filter",{id:`o-${t}`,colorInterpolationFilters:"sRGB",filterUnits:"userSpaceOnUse",height:"34.9189",width:"28.3767",x:"20.7512",y:"39.0498",children:[(0,Nr.jsx)("feFlood",{floodOpacity:"0",result:"BackgroundImageFix"}),(0,Nr.jsx)("feColorMatrix",{in:"SourceAlpha",result:"hardAlpha",type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0"}),(0,Nr.jsx)("feOffset",{dx:".5",dy:".5"}),(0,Nr.jsx)("feGaussianBlur",{stdDeviation:"1"}),(0,Nr.jsx)("feComposite",{in2:"hardAlpha",operator:"out"}),(0,Nr.jsx)("feColorMatrix",{type:"matrix",values:"0 0 0 0 0.160784 0 0 0 0 0.619608 0 0 0 0 0.231373 0 0 0 1 0"}),(0,Nr.jsx)("feBlend",{in2:"BackgroundImageFix",mode:"normal",result:"effect1_dropShadow_16856_24583"}),(0,Nr.jsx)("feBlend",{in:"SourceGraphic",in2:"effect1_dropShadow_16856_24583",mode:"normal",result:"shape"})]}),(0,Nr.jsxs)("linearGradient",{id:`p-${t}`,gradientUnits:"userSpaceOnUse",x1:"7.07017",x2:"54.682",y1:"32.2054",y2:"71.3086",children:[(0,Nr.jsx)("stop",{offset:"0",stopColor:"#beffd2"}),(0,Nr.jsx)("stop",{offset:"1",stopColor:"#beffd2",stopOpacity:".15"})]}),(0,Nr.jsxs)("linearGradient",{id:`q-${t}`,gradientUnits:"userSpaceOnUse",x1:"18.1884",x2:"39.841",y1:"54.9202",y2:"81.3544",children:[(0,Nr.jsx)("stop",{offset:"0",stopColor:"#ebfff1"}),(0,Nr.jsx)("stop",{offset:"1",stopColor:"#ebfff1",stopOpacity:"0"})]}),(0,Nr.jsx)("g",{filter:`url(#a-${t})`,children:(0,Nr.jsx)("path",{d:"m98.4998 59h11v33h-11z",fill:"#dde0eb"})}),(0,Nr.jsx)("g",{filter:`url(#b-${t})`,children:(0,Nr.jsx)("path",{d:"m73.4998 59h11v33h-11z",fill:"#dde0eb"})}),(0,Nr.jsx)("g",{filter:`url(#c-${t})`,children:(0,Nr.jsx)("path",{d:"m33.4998 103h91v6h-91z",fill:"#c9cfd7"})}),(0,Nr.jsx)("g",{filter:`url(#d-${t})`,children:(0,Nr.jsx)("path",{d:"m39.4998 97h79v6h-79z",fill:"#dde0eb"})}),(0,Nr.jsx)("g",{filter:`url(#e-${t})`,children:(0,Nr.jsx)("path",{d:"m34.4998 43.2308 45-24.2308 45.0002 24.2308v5.7692h-90.0002z",fill:"#c9cfd7"})}),(0,Nr.jsx)("path",{d:"m48.4998 43 31-16 31.0002 16z",fill:"#dde0eb"}),(0,Nr.jsx)("g",{filter:`url(#f-${t})`,children:(0,Nr.jsx)("path",{d:"m96.4998 94c0-1.1046.8954-2 2-2h11.0002c1.104 0 2 .8954 2 2v3h-15.0002z",fill:"#c9cfd7"})}),(0,Nr.jsx)("g",{filter:`url(#g-${t})`,children:(0,Nr.jsx)("path",{d:"m96.4998 57c0 1.1046.8954 2 2 2h11.0002c1.104 0 2-.8954 2-2v-3h-15.0002z",fill:"#c9cfd7"})}),(0,Nr.jsx)("g",{filter:`url(#h-${t})`,children:(0,Nr.jsx)("path",{d:"m71.4998 94c0-1.1046.8954-2 2-2h11c1.1045 0 2 .8954 2 2v3h-15z",fill:"#c9cfd7"})}),(0,Nr.jsx)("g",{filter:`url(#i-${t})`,children:(0,Nr.jsx)("path",{d:"m71.4998 57c0 1.1046.8954 2 2 2h11c1.1045 0 2-.8954 2-2v-3h-15z",fill:"#c9cfd7"})}),(0,Nr.jsx)("g",{filter:`url(#j-${t})`,children:(0,Nr.jsx)("path",{d:"m48.4998 59h11v33h-11z",fill:"#dde0eb"})}),(0,Nr.jsx)("g",{filter:`url(#k-${t})`,children:(0,Nr.jsx)("path",{d:"m46.4998 94c0-1.1046.8954-2 2-2h11c1.1045 0 2 .8954 2 2v3h-15z",fill:"#c9cfd7"})}),(0,Nr.jsx)("g",{filter:`url(#l-${t})`,children:(0,Nr.jsx)("path",{d:"m46.4998 57c0 1.1046.8954 2 2 2h11c1.1045 0 2-.8954 2-2v-3h-15z",fill:"#c9cfd7"})}),(0,Nr.jsx)("g",{filter:`url(#m-${t})`,children:(0,Nr.jsx)("path",{d:"m38.4998 49h82.0002l-2.216 5h-77.568z",fill:"#dde0eb"})}),(0,Nr.jsx)("path",{d:"m35.8866 19.5614c-.9308-.3612-1.963-.3612-2.8938 0l-28.21625 10.9479c-.7695.2985-1.27655 1.0392-1.27655 1.8645v25.0408c0 24.0092 24.3098 38.4147 30.9397 38.4147 6.63 0 30.9398-14.4055 30.9398-38.4147v-25.0408c0-.8253-.5071-1.566-1.2766-1.8645z",fill:"#3ac24f"}),(0,Nr.jsxs)("g",{filter:`url(#n-${t})`,children:[(0,Nr.jsx)("path",{clipRule:"evenodd",d:"m10.6401 35.6313v21.5716c0 9.4566 4.6827 17.33 10.5723 23.0788 2.9207 2.851 6.0022 5.0351 8.632 6.4779 1.3139.7208 2.4515 1.2217 3.3408 1.5298.7584.2627 1.1579.3229 1.2493.3367l.0054.0008.0054-.0008c.0915-.0138.4909-.074 1.2493-.3367.8893-.3081 2.0269-.809 3.3408-1.5298 2.6298-1.4428 5.7113-3.6269 8.6321-6.4779 5.8896-5.7488 10.5722-13.6222 10.5722-23.0788v-21.5716l-23.7998-9.4282z",fill:"#3bcb53",fillRule:"evenodd"}),(0,Nr.jsx)("path",{d:"m34.4399 87.9681c-.155-.0285-.4945-.1033-1.0419-.2929-.8485-.294-1.9525-.7786-3.2409-1.4855-2.5788-1.4148-5.6126-3.5638-8.4907-6.3731-5.8068-5.668-10.3763-13.3839-10.3763-22.6137v-21.13l23.1498-9.1706 23.1498 9.1706v21.13c0 9.2298-4.5694 16.9457-10.3762 22.6137-2.8781 2.8093-5.9119 4.9583-8.4907 6.3731-1.2884.7069-2.3924 1.1915-3.2409 1.4855-.5475.1896-.887.2644-1.042.2929z",stroke:`url(#p-${t})`,strokeWidth:"1.3"})]}),(0,Nr.jsxs)("g",{filter:`url(#o-${t})`,children:[(0,Nr.jsx)("path",{d:"m44.8987 53.0362h-.618v-2.8197c0-5.2152-4.2452-9.5718-9.5513-9.6648-.1449-.0025-.4346-.0025-.5796 0-5.3061.093-9.5513 4.4496-9.5513 9.6648v2.8197h-.6181c-.9523 0-1.7292.9581-1.7292 2.1413v14.1425c0 1.1819.7769 2.1489 1.7293 2.1489h20.9182c.9524 0 1.7293-.967 1.7293-2.1489v-14.1425c0-1.1832-.7769-2.1413-1.7293-2.1413zm-8.4993 9.1982v4.2733c0 .4893-.4203.9034-.9226.9034h-2.0743c-.5024 0-.9226-.4141-.9226-.9034v-4.2733c-.4872-.4675-.7708-1.114-.7708-1.8292 0-1.3552 1.0745-2.5197 2.4408-2.5735.1448-.0057.4348-.0057.5796 0 1.3663.0538 2.4408 1.2183 2.4408 2.5735-.0001.7152-.2837 1.3617-.7709 1.8292zm3.8082-9.1982h-5.4782-.5796-5.4781v-2.8197c0-3.1066 2.5897-5.6753 5.7679-5.6753s5.768 2.5687 5.768 5.6753z",fill:"#beffd2"}),(0,Nr.jsx)("path",{d:"m43.7807 53.0362v.5h.5.618c.5823 0 1.2293.6298 1.2293 1.6413v14.1425c0 1.0129-.6492 1.6489-1.2293 1.6489h-20.9182c-.5801 0-1.2293-.636-1.2293-1.6489v-14.1425c0-1.0116.647-1.6413 1.2292-1.6413h.6181.5v-.5-2.8197c0-4.9418 4.026-9.0766 9.0601-9.1649.1391-.0024.4229-.0024.5621 0 5.034.0883 9.06 4.2231 9.06 9.1649zm-6.1104 7.3691v-.0001c0-1.6134-1.2764-3.0083-2.9211-3.0731-.1579-.0063-.4611-.0063-.619 0-1.6447.0648-2.9211 1.4597-2.9211 3.0731 0 .7736.28 1.4858.7708 2.0312v4.0713c0 .7744.6531 1.4034 1.4226 1.4034h2.0743c.7695 0 1.4226-.629 1.4226-1.4034v-4.0713c.4907-.5454.7708-1.2576.7709-2.0311zm-9.4986-7.3691v.5h.5 5.4781.5796 5.4782.5v-.5-2.8197c0-3.3892-2.8202-6.1753-6.268-6.1753-3.4479 0-6.2679 2.7861-6.2679 6.1753z",stroke:`url(#q-${t})`})]})]})},iE=(0,d.memo)(nE);var sE;!function(e){e.INDIVIDUAL="individual",e.COMPANY="company"}(sE||(sE={}));const{useAddFieldToScroll:aE,useScrollToFieldsTrigger:rE,ScrollToFieldsProvider:oE}=(0,Zl.J)(),cE=e=>{var t,n,i;const{showBadge:s}=e,{state:a,controller:r}=eo(tn.US_BANK_ACCOUNT),o=(0,wr.P)(),c=(0,qr.t)(),l=no(),u=a.errors.routingNumber,h=a.errors.accountNumber,m=a.errors.accountHolderName,p=rE(),g=Ml(a.shakeKey,0!==a.shakeKey),y=(0,ic.k)(),f=(0,d.useRef)(null),S=(0,d.useRef)(null),A=(0,d.useRef)(null),[E,C]=(0,d.useState)(!1),[v,N]=(0,d.useState)(!1);aE(f,(e=>Boolean(e.routingNumber))),aE(S,(e=>Boolean(e.accountNumber))),aE(A,(e=>Boolean(e.accountHolderName))),(0,d.useEffect)((()=>{if(a.routingNumber||a.accountNumber||a.accountHolderName)return;if(a.livemode||!y)return;if(!f.current||!S.current||!A.current)throw new Error("Input fields refs are not defined");const e=r.fillDemoData({routingNumber:f.current,accountNumber:S.current,accountHolderName:A.current});return()=>{e()}}),[y,r,a.livemode]);const b=(0,d.useCallback)((e=>{const t=e.target.value;r.changeRoutingNumber(t),S.current&&9===t.length&&S.current.focus()}),[r]),P=(0,d.useCallback)((e=>{const t=e.target.value;r.changeAccountNumber(t),A.current&&17===t.length&&A.current.focus()}),[r]);return(0,Nr.jsxs)("form",{onSubmit:e=>{p(),e.preventDefault(),r.leave()},className:"flow-screen","data-qa":"active-screen-routing-account",children:[(0,Nr.jsx)("div",{className:"sr-only",role:"status","aria-live":"polite",children:c.translate("common.screenAriaLabel",{screenTitle:`${c.translate("usBankAccountScreen.title")}`})}),(0,Nr.jsx)(Sc,{title:c.translate("usBankAccountScreen.title"),showBadge:s}),(0,Nr.jsx)(Bo,{className:(0,xr.A)("px-body d-flex flex-column",{"pt-5 pb-7":!o}),children:(0,Nr.jsxs)("div",{className:"fixed-container grow-1 min-h-0 d-flex flex-column",children:[(0,Nr.jsx)("p",{className:(0,xr.A)("shrink-0 text-center",o?"text-ellipsis":"text-line-clamp-3"),children:c.translate("usBankAccountScreen.description.desktop")}),(0,Nr.jsx)(Vc,{size:o?28:20,sizeMin:6}),(0,Nr.jsx)(Cm,{className:"shrink-0 mx-auto",firstNumber:"119562715",secondNumber:"891562828814208",firstNumberHighlighted:E,secondNumberHighlighted:v}),(0,Nr.jsx)(Vc,{size:o?28:20,sizeMin:6}),(0,Nr.jsxs)("div",{className:(0,xr.A)("group-stacked-vertical shrink-0",{shake:g}),children:[(0,Nr.jsx)(dl.t,{id:`routing-number-${l}`,className:(0,xr.A)("text-sans-serif",{"pe-10":u}),formLabelClass:(0,xr.A)({"pe-6":u}),formGroupClass:"group-stacked-item",label:c.translate("usBankAccountScreen.routingNumber.label"),labelFloating:!0,autoFocus:!0,autoFocusMode:oc.Q.ALL,setRef:f,error:u,placeholder:c.translate("usBankAccountScreen.routingNumber.label"),value:null!==(t=a.routingNumber)&&void 0!==t?t:"",maxLength:9,disabled:a.locked,"aria-required":!0,"aria-describedby":`routing-number-${l}-error`,onChange:b,onKeyPress:RA,onFocus:()=>C(!0),onBlur:()=>C(!1),dataQa:"routing-number",inputMode:"numeric",children:u&&(0,Nr.jsxs)(Nr.Fragment,{children:[(0,Nr.jsx)(al.U,{className:"p-abs centered-right z-index-5 me-4",children:c.translate("usBankAccountScreen.routingNumber.error")}),(0,Nr.jsx)("p",{id:`routing-number-${l}-error`,className:"sr-only",children:c.translate("usBankAccountScreen.routingNumber.error")})]})}),(0,Nr.jsx)(dl.t,{id:`account-number-${l}`,className:(0,xr.A)("text-sans-serif",{"pe-10":h}),formLabelClass:(0,xr.A)({"pe-6":h}),formGroupClass:"group-stacked-item",label:c.translate("usBankAccountScreen.accountNumber.label"),labelFloating:!0,setRef:S,error:h,placeholder:c.translate("usBankAccountScreen.accountNumber.label"),value:null!==(n=a.accountNumber)&&void 0!==n?n:"",maxLength:17,minLength:4,disabled:a.locked,"aria-required":!0,"aria-describedby":`account-number-${l}-error`,onKeyPress:RA,onChange:P,onFocus:()=>N(!0),onBlur:()=>N(!1),dataQa:"ach-account-number",inputMode:"numeric",children:h&&(0,Nr.jsxs)(Nr.Fragment,{children:[(0,Nr.jsx)(al.U,{className:"p-abs centered-right z-index-5 me-4",children:c.translate("usBankAccountScreen.accountNumber.error")}),(0,Nr.jsx)("p",{id:`account-number-${l}-error`,className:"sr-only",children:c.translate("usBankAccountScreen.accountNumber.error")})]})})]}),(0,Nr.jsx)(Vc,{size:16,sizeMin:6}),(0,Nr.jsx)(dl.t,{id:`account-holder-name-${l}`,className:(0,xr.A)({"pe-10":m}),formLabelClass:(0,xr.A)({"pe-6":m}),formGroupClass:(0,xr.A)("shrink-0",{shake:g}),label:c.translate("usBankAccountScreen.accountHolderName.label"),labelFloating:!0,setRef:A,error:m,placeholder:c.translate("usBankAccountScreen.accountHolderName.label"),minLength:1,value:null!==(i=a.accountHolderName)&&void 0!==i?i:"",disabled:a.locked,"aria-describedby":`account-holder-name-${l}-error`,onChange:e=>r.changeAccountHolderName(e.target.value),dataQa:"us-bank-account-holder-name",children:m&&(0,Nr.jsxs)(Nr.Fragment,{children:[(0,Nr.jsx)(al.U,{className:"p-abs centered-right z-index-5 me-4",children:c.translate("usBankAccountScreen.accountHolderName.error")}),(0,Nr.jsx)("p",{id:`account-holder-name-${l}-error`,className:"sr-only",children:c.translate("usBankAccountScreen.accountHolderName.error")})]})}),(0,Nr.jsx)(Vc,{size:20,sizeMin:6}),(0,Nr.jsxs)("div",{role:"radiogroup",className:"d-flex justify-center shrink-0","aria-label":c.translate("usBankAccountScreen.accountType.label"),children:[(0,Nr.jsx)(fu,{radioName:"accountType",className:"max-w-50 me-3",checked:a.accountType===sE.INDIVIDUAL,radioValue:a.accountType,disabled:a.locked,onChange:()=>r.changeAccountType(sE.INDIVIDUAL),dataQa:"personal-bank-account",trackingElement:"personalBankAccount",children:(0,Nr.jsx)("span",{className:"text-truncate",children:c.translate("usBankAccountScreen.accountType.personal")})}),(0,Nr.jsx)(fu,{radioName:"accountType",className:"max-w-50 ms-3",checked:a.accountType===sE.COMPANY,radioValue:a.accountType,disabled:a.locked,onChange:()=>r.changeAccountType(sE.COMPANY),dataQa:"business-bank-account",trackingElement:"businessBankAccount",children:(0,Nr.jsx)("span",{className:"text-truncate",children:c.translate("usBankAccountScreen.accountType.business")})})]})]})}),(0,Nr.jsx)(ec,{children:(0,Nr.jsx)(Hc,{type:"submit",className:"btn-primary",processingState:a.processingState,errorTitle:a.errorMessage||c.translate("common.errorOccurredText"),dataQa:"ach-continue",trackingElement:"nextButton",children:c.translate("usBankAccountScreen.button")})})]})},lE={filter:"drop-shadow(rgba(109, 141, 177, 0.5) 0 1px 5px)"},uE={letterSpacing:"-0.2em"},dE={background:"#E3EDF6",height:"12px"},hE=Object.assign(Object.assign({},dE),{width:"146px"}),mE=Object.assign(Object.assign({},dE),{width:"46px"}),pE=e=>{const t=(0,qr.t)(),n=(0,$r.Q)(),i=(0,wr.P)();return(0,Nr.jsxs)("div",{className:"fixed-container",children:[e.showAmountExample&&(0,Nr.jsx)(yl,{as:"p",className:(0,xr.A)("text-center",i?"text-ellipsis":"text-line-clamp-7"),token:"usBankAccountGuideScreen.description.amounts",params:{amount:t.formatCurrency(100,{currency:"USD"})}}),e.showDescriptorCodeExample&&(0,Nr.jsx)(yl,{as:"p",className:(0,xr.A)("text-center",i?"text-ellipsis":"text-line-clamp-7"),token:"usBankAccountGuideScreen.description.descriptorCode"}),(0,Nr.jsx)("div",{className:"mt-5",style:lE,children:(0,Nr.jsxs)("div",{className:"us-bank-account-receipt px-6 pt-4 bg-blue-5 border-top-radius-4",children:[(0,Nr.jsx)("p",{className:"text-center text-truncate",children:t.translate("usBankAccountGuideScreen.bankStatement")}),(0,Nr.jsx)("div",{className:"border-top border-gray-20 mt-4"}),e.showAmountExample&&(0,Nr.jsxs)(Nr.Fragment,{children:[(0,Nr.jsxs)("div",{className:(0,xr.A)("d-flex mt-3",{"text-start":n}),dir:"ltr",children:[(0,Nr.jsx)("div",{className:"grow-1 overflow-hidden",children:(0,Nr.jsxs)("div",{className:(0,xr.A)("body-3 text-gray-60",{"text-line-clamp-2":!i}),children:[e.statementDescriptor,":"]})}),(0,Nr.jsx)("div",{className:"body-2 shrink-0 text-sans-serif ms-1",dangerouslySetInnerHTML:{__html:e.amountExample}})]}),(0,Nr.jsx)("div",{className:"border-top border-gray-20 my-3"}),(0,Nr.jsxs)("div",{className:(0,xr.A)("d-flex",{"text-start":n}),dir:"ltr",children:[(0,Nr.jsx)("div",{className:"grow-1 overflow-hidden",children:(0,Nr.jsxs)("div",{className:(0,xr.A)("body-3 text-gray-60",{"text-line-clamp-2":!i}),children:[e.statementDescriptor,":"]})}),(0,Nr.jsx)("div",{className:"body-2 shrink-0 text-sans-serif ms-1",dangerouslySetInnerHTML:{__html:e.amountExample}})]}),(0,Nr.jsx)("div",{className:"border-top border-gray-20 my-3"})]}),e.showDescriptorCodeExample&&(0,Nr.jsxs)(Nr.Fragment,{children:[(0,Nr.jsxs)("div",{className:(0,xr.A)("d-flex mt-3",{"text-start":n}),dir:"ltr",children:[(0,Nr.jsxs)("div",{className:"d-flex flex-wrap grow-1",children:[(0,Nr.jsxs)("div",{className:(0,xr.A)("body-3 text-gray-60 me-1",i?"overflow-hidden":"text-line-clamp-2"),children:[e.statementDescriptor,":"]}),(0,Nr.jsxs)("div",{className:"d-flex label-4 shrink-0 text-nowrap",children:[e.descriptorCodeExample.prefix,(0,Nr.jsx)("span",{className:"d-inline-block font-size-18",style:uE,"aria-hidden":!0,children:""})]})]}),(0,Nr.jsx)("div",{className:"body-3 text-gray-60 shrink-0 text-sans-serif ms-1",dangerouslySetInnerHTML:{__html:e.descriptorCodeExample.amount}})]}),(0,Nr.jsx)("div",{className:"border-top border-gray-20 mt-3"}),(0,Nr.jsxs)("div",{className:"d-flex justify-between mt-4 mb-3",dir:"ltr",children:[(0,Nr.jsx)("div",{className:"border-radius-8",style:hE}),(0,Nr.jsx)("div",{className:"border-radius-8",style:mE})]})]})]})})]})},gE=(0,d.memo)(pE),yE={[tn.DONATE]:()=>{const{state:e}=eo(tn.DONATE);return(0,Nr.jsx)(zm,{state:e.errors,children:(0,Nr.jsx)(Op,{})})},[tn.UPSELL]:ZA,[tn.PAYMENT_OPTIONS]:e=>{const{stripeElementsCardState:t,setStripeElementsCardState:n}=(()=>{const{stripeElementState:e,setStripeElementState:t}=Am(),{stripeElementState:n,setStripeElementState:i}=Am(),{stripeElementState:s,setStripeElementState:a}=Am(),r=(0,d.useCallback)(((e,n)=>{switch(e){case Fa.CARD_NUMBER:t(n);break;case Fa.CARD_EXPIRY:i(n);break;case Fa.CARD_CVC:a(n)}}),[t,a,i]);return{stripeElementsCardState:{[Fa.CARD_NUMBER]:e,[Fa.CARD_EXPIRY]:n,[Fa.CARD_CVC]:s},setStripeElementsCardState:r}})();return(0,Nr.jsx)(Qg,{state:t,children:(0,Nr.jsx)(uA,Object.assign({},e,{stripeElementsCardState:t,setStripeElementsCardState:n}))})},[tn.US_BANK_ACCOUNT]:e=>{const{state:t}=eo(tn.US_BANK_ACCOUNT);return(0,Nr.jsx)(oE,{state:t.errors,children:(0,Nr.jsx)(cE,Object.assign({},e))})},[tn.US_BANK_ACCOUNT_DONATE_OPTIONS]:e=>{const{showBadge:t}=e,{state:n,controller:i}=eo(tn.US_BANK_ACCOUNT_DONATE_OPTIONS),s=(0,qr.t)(),a=(0,wr.P)();return(0,Nr.jsxs)("div",{className:"flow-screen","data-qa":"active-screen-link-to-bank",children:[(0,Nr.jsx)("div",{className:"sr-only",role:"status","aria-live":"polite",children:s.translate("common.screenAriaLabel",{screenTitle:`${s.translate("usBankAccountDonateOptionsScreen.title")}`})}),(0,Nr.jsx)(Sc,{title:s.translate("usBankAccountDonateOptionsScreen.title"),showBadge:t}),(0,Nr.jsx)(Bo,{className:(0,xr.A)("px-body items-center",a?"pb-3":"justify-center py-4"),children:(0,Nr.jsxs)("div",{className:"fixed-container",children:[(0,Nr.jsx)(iE,{className:"d-block mx-auto",ariaHidden:!0}),(0,Nr.jsx)("p",{className:"text-center mt-4",children:s.translate("usBankAccountDonateOptionsScreen.description")})]})}),(0,Nr.jsxs)(ec,{children:[(0,Nr.jsx)(Hc,{className:"btn-primary",processingState:n.processingState,errorTitle:n.loginToBankError,disabled:n.locked,dataQa:"authorize-bank-button",trackingElement:"authorizeBankButton",onClick:()=>i.authorizeToBank(),children:s.translate("usBankAccountDonateOptionsScreen.button.authorize")}),(0,Nr.jsx)("button",{type:"button",className:"btn btn-default mt-3",disabled:n.locked,"data-qa":"routing-account-button","data-tracking-element-name":"routingAccountButton",onClick:()=>i.fillDetailsManually(),children:s.translate("usBankAccountDonateOptionsScreen.button.routing")})]})]})},[tn.US_BANK_ACCOUNT_CONFIRMATION]:e=>{const{showBadge:t}=e,{state:n,controller:i}=eo(tn.US_BANK_ACCOUNT_CONFIRMATION),s=(0,wr.P)(),a=(0,qr.t)();return(0,Nr.jsxs)("div",{className:"flow-screen",children:[(0,Nr.jsx)(Sc,{title:a.translate("usBankAccountConfirmationScreen.title"),showBadge:t,titleQa:"us-bank-account-confirmation-title"}),(0,Nr.jsx)(ac,{children:a.translate("common.screenAriaLabel",{screenTitle:`${a.translate("usBankAccountConfirmationScreen.title")}`})}),(0,Nr.jsx)(Bo,{className:(0,xr.A)("px-body d-flex flex-column",{"py-5":!s}),children:(0,Nr.jsxs)("div",{className:"fixed-container grow-1 d-flex flex-column min-h-0",children:[(0,Nr.jsxs)("div",{className:"shrink-0 bg-white border-radius-8",style:JA,children:[(0,Nr.jsxs)("div",{className:"px-3 py-2",style:eE,children:[(0,Nr.jsx)("p",{className:"caption-1 text-truncate text-gray-60",children:a.translate("usBankAccountConfirmationScreen.agreementDate")}),(0,Nr.jsx)("p",{className:"label-3 text-truncate","data-qa":"agreement-date-label",children:n.usBankAccount.agreementDate})]}),(0,Nr.jsxs)("div",{className:"px-3 py-2",style:eE,children:[(0,Nr.jsx)("p",{className:"caption-1 text-truncate text-gray-60",children:a.translate("usBankAccountConfirmationScreen.accountHolderName")}),(0,Nr.jsx)("p",{className:"label-3 text-truncate","data-qa":"account-holder-name-label",children:n.usBankAccount.accountHolderName})]}),(0,Nr.jsxs)("div",{className:"px-3 py-2",style:eE,children:[(0,Nr.jsx)("p",{className:"caption-1 text-truncate text-gray-60",children:a.translate("usBankAccountConfirmationScreen.financialInstitution")}),(0,Nr.jsx)("p",{className:"label-3 text-truncate","data-qa":"financial-institution-label",children:n.usBankAccount.financialInstitution})]}),(0,Nr.jsxs)("div",{className:"px-3 py-2",style:eE,children:[(0,Nr.jsx)("p",{className:"caption-1 text-truncate text-gray-60",children:a.translate("usBankAccountConfirmationScreen.routingNumber")}),(0,Nr.jsx)("p",{className:"label-3 text-truncate","data-qa":"routing-number-label",children:n.usBankAccount.routingNumber})]}),(0,Nr.jsxs)("div",{className:"px-3 py-2",children:[(0,Nr.jsx)("p",{className:"caption-1 text-truncate text-gray-60",children:a.translate("usBankAccountConfirmationScreen.accountNumber")}),(0,Nr.jsxs)("p",{className:"label-3 d-flex items-start text-truncate",children:[(0,Nr.jsx)("span",{className:"font-size-18 shrink-0 me-1 font-weight-400",style:tE,"aria-hidden":!0,children:""}),(0,Nr.jsx)("span",{className:"shrink-0","data-qa":"account-number-last4-label",children:n.usBankAccount.accountNumberLast4})]})]})]}),(0,Nr.jsx)("div",{className:s?"mt-5":"grow-1 min-h-0 p-rel mt-4",children:(0,Nr.jsx)("div",{className:(0,xr.A)({"p-abs top-left bottom-right text-scrollable custom-scrollbar":!s}),children:(0,Nr.jsx)("p",{className:(0,xr.A)("body-4 text-gray-80 text-ellipsis",{"px-3 py-2-5":!s,"pointer-events-none":n.locked}),children:n.isRecurring?a.translate("usBankAccountConfirmationScreen.mandateRecurring",{companyName:n.companyName}):a.translate("usBankAccountConfirmationScreen.mandate",{companyName:n.companyName,payButtonTitle:a.translate("usBankAccountConfirmationScreen.button")})})})})]})}),(0,Nr.jsx)(ec,{children:(0,Nr.jsx)(Hc,{className:"btn-primary",processingState:n.processingState,errorTitle:n.payErrorMessage,onClick:()=>{i.leave()},dataQa:"us-bank-account-pay-button",trackingElement:"nextButton",children:a.translate("usBankAccountConfirmationScreen.button")})})]})},[tn.US_BANK_ACCOUNT_VERIFICATION_GUIDE]:e=>{const{showBadge:t}=e,{state:n,controller:i}=eo(tn.US_BANK_ACCOUNT_VERIFICATION_GUIDE),s=(0,qr.t)(),a=(0,wr.P)();return(0,Nr.jsxs)("div",{className:"flow-screen","data-qa":"active-screen-us-bank-account-guide",children:[(0,Nr.jsx)("div",{className:"sr-only",role:"status","aria-live":"polite",children:s.translate("common.screenAriaLabel",{screenTitle:`${s.translate("usBankAccountGuideScreen.title")}`})}),(0,Nr.jsx)(Sc,{title:s.translate("usBankAccountGuideScreen.title"),showBadge:t}),(0,Nr.jsx)(Bo,{className:(0,xr.A)("px-body",{"pt-6":!a}),children:(0,Nr.jsx)(gE,{statementDescriptor:n.statementDescriptor,amountExample:i.amountExample,descriptorCodeExample:i.descriptorCodeExample,showAmountExample:"amounts"===n.verificationType,showDescriptorCodeExample:"descriptor_code"===n.verificationType})}),(0,Nr.jsx)(ec,{children:(0,Nr.jsx)("button",{type:"button",className:"btn btn-primary",onClick:()=>{i.leave()},"data-qa":"us-bank-account-micro-dep-continue-button",children:s.translate("usBankAccountGuideScreen.button")})})]})},[tn.UK_BACS]:e=>{const{state:t}=eo(tn.UK_BACS);return(0,Nr.jsx)(UA,{state:t.errors,children:(0,Nr.jsx)(FA,Object.assign({},e))})},[tn.UK_BACS_CONFIRMATION]:e=>{const{showBadge:t}=e,{state:n,controller:i}=eo(tn.UK_BACS_CONFIRMATION),s=(0,wr.P)(),a=(0,qr.t)(),r=DA(n.ukBacs.sortCode.match(/(\d{2})/g)||[],"-");return(0,Nr.jsxs)("div",{className:"flow-screen",children:[(0,Nr.jsx)(Sc,{title:a.translate("ukBacsConfirmationScreen.title"),showBadge:t,titleQa:"uk-bacs-confirmation-title"}),(0,Nr.jsx)(ac,{children:a.translate("common.screenAriaLabel",{screenTitle:`${a.translate("ukBacsConfirmationScreen.title")}`})}),(0,Nr.jsx)(Bo,{className:(0,xr.A)("px-body",{"pt-8 pb-3":!s}),children:(0,Nr.jsxs)("div",{className:"fixed-container",children:[(0,Nr.jsxs)("div",{className:"bg-white border-radius-8",style:IA,children:[(0,Nr.jsxs)("div",{className:"px-3 py-2",style:wA,children:[(0,Nr.jsx)("p",{className:"caption-1 text-truncate text-gray-60",children:a.translate("ukBacsConfirmationScreen.email")}),(0,Nr.jsx)("p",{className:"label-3 text-truncate",children:n.email})]}),(0,Nr.jsxs)("div",{className:"px-3 py-2",style:wA,children:[(0,Nr.jsx)("p",{className:"caption-1 text-truncate text-gray-60",children:a.translate("ukBacsConfirmationScreen.name")}),(0,Nr.jsx)("p",{className:"label-3 text-truncate",children:n.ukBacs.accountHolderName})]}),(0,Nr.jsxs)("div",{className:"px-3 py-2",children:[(0,Nr.jsx)("p",{className:"caption-1 text-truncate text-gray-60",children:a.translate("ukBacsConfirmationScreen.accountDetails")}),(0,Nr.jsxs)("div",{className:"d-flex text-sans-serif",children:[(0,Nr.jsx)("p",{className:"label-3 text-truncate me-3",children:r}),(0,Nr.jsx)("p",{className:"label-3 text-truncate",children:n.ukBacs.accountNumber})]})]})]}),(0,Nr.jsx)(yl,{className:(0,xr.A)("body-4 mt-4",s?"text-ellipsis":"text-line-clamp-7"),as:"p",token:"ukBacsConfirmationScreen.legalInformation",params:{statementDescriptor:n.company.stripe.ukBacsDisplayName,email:n.email}}),(0,Nr.jsx)("hr",{className:"my-3","aria-hidden":!0}),(0,Nr.jsxs)("div",{className:"d-flex items-center",children:[(0,Nr.jsx)(yl,{className:(0,xr.A)("body-4",s?"text-ellipsis":"text-line-clamp-2 p-1 m-minus-1",{"pointer-events-none":n.locked}),as:"p",token:"ukBacsConfirmationScreen.guarantee",params:{link:"https://stripe.com/bacs_debit/direct-debit-guarantee"}}),(0,Nr.jsx)(kA,{className:"text-gray-60 shrink-0 ms-3",width:67,height:22,"aria-hidden":!0})]})]})}),(0,Nr.jsx)(ec,{children:(0,Nr.jsx)(Hc,{className:"btn-primary",processingState:n.processingState,errorTitle:n.payErrorMessage,onClick:()=>{i.leave()},dataQa:"uk-bacs-pay-button",trackingElement:"nextButton",children:vc(a,n.formattedAmount,n.frequency)})})]})},[tn.AU_BECS]:e=>{const{stripeElementState:t,setStripeElementState:n}=Am();return(0,Nr.jsx)(vm,{state:t,children:(0,Nr.jsx)(Dm,Object.assign({stripeElementState:t,setStripeElementState:n},e))})},[tn.DOUBLE]:cg,[tn.GIFT_AID]:e=>{const{transitionEntered:t,showBadge:n}=e,{state:i,controller:s}=eo(tn.GIFT_AID),a=(0,qr.t)(),r=(0,wr.P)(),o=(0,Br.$)(),c=(0,d.useCallback)((e=>{s.changeGiftAid(e),s.leave()}),[s]),l=(0,d.useCallback)((()=>{c(!1)}),[c]);return(0,d.useEffect)((()=>{o||t&&s.setShown()}),[t,s,o]),(0,Nr.jsxs)("div",{className:"flow-screen","data-qa":"active-screen-gift-aid",children:[(0,Nr.jsx)("div",{className:"sr-only",role:"status","aria-live":"polite",children:a.translate("common.screenAriaLabel",{screenTitle:`${a.translate("giftAidScreen.title")}`})}),(0,Nr.jsx)(Sc,{showBadge:n,children:(0,Nr.jsx)("h2",{className:(0,xr.A)("title-2",{"py-2":r}),"aria-label":a.translate("giftAidScreen.title"),children:(0,Nr.jsx)("span",{className:"icon-slot d-block","aria-hidden":!0,children:(0,Nr.jsx)("span",{className:"p-abs centered",children:(0,Nr.jsx)(mg,{className:"d-block"})})})})}),(0,Nr.jsx)(Bo,{className:(0,xr.A)("px-body",r?"pb-2":"pt-6 pb-4"),children:(0,Nr.jsxs)("div",{className:(0,xr.A)("fixed-container",{"grow-1 d-flex flex-column":!r}),children:[(0,Nr.jsxs)("p",{className:(0,xr.A)("text-center",r?"text-ellipsis":"text-line-clamp-6"),children:[a.translate("giftAidScreen.governmentText")," ",a.translate("giftAidScreen.ratioInfo")]}),(0,Nr.jsx)(yl,{as:"p",className:(0,xr.A)("subtitle-4 text-center mt-4-5",r?"text-ellipsis":"text-line-clamp-3"),token:"giftAidScreen.actionQuestion"}),i.legalText&&(0,Nr.jsx)("div",{className:"grow-1 mt-4-5 d-flex flex-column",children:(0,Nr.jsx)(gg,{})})]})}),(0,Nr.jsxs)(ec,{children:[(0,Nr.jsx)("button",{type:"button",className:"btn btn-primary",disabled:i.locked,onClick:()=>c(!0),"data-qa":"gift-aid-continue","data-tracking-element-name":"claimButton",children:a.translate("giftAidScreen.button.claim")}),(0,Nr.jsx)("div",{className:"d-flex justify-center mt-5",children:(0,Nr.jsx)(Hc,{buttonType:"link",onClick:l,processingState:i.processingState,errorTitle:i.payErrorMessage||a.translate("common.errorOccurredText"),dataQa:"no-gift-aid-and-pay",trackingElement:"dontClaimButton",children:a.translate("giftAidScreen.button.refuse")})})]})]})},[tn.POST_DONATION_UPSELL]:()=>{const{state:e}=eo(tn.POST_DONATION_UPSELL);return(0,Nr.jsx)(mA,{state:e,children:(0,Nr.jsx)(EA,{})})},[tn.SEPA]:e=>{const{stripeElementState:t,setStripeElementState:n}=Am();return(0,Nr.jsx)(CA,{state:t,children:(0,Nr.jsx)(PA,Object.assign({stripeElementState:t,setStripeElementState:n},e))})},[tn.IDEAL_CONFIRMATION]:e=>{const{showBadge:t}=e,{state:n,controller:i}=eo(tn.IDEAL_CONFIRMATION),s=(0,wr.P)(),a=(0,qr.t)(),r=(0,d.useCallback)((()=>{i.leave()}),[i]),o=(0,d.useCallback)((()=>{i.returnToBankWindow()}),[i]),c=(0,d.useCallback)((()=>{i.back()}),[i]);return(0,Nr.jsxs)("div",{className:"flow-screen",children:[(0,Nr.jsx)("div",{className:"sr-only",role:"status","aria-live":"polite",children:a.translate("common.screenAriaLabel",{screenTitle:`${a.translate("idealConfirmationScreen.title")}`})}),(0,Nr.jsx)(Sc,{backButtonClickHandler:c,title:a.translate("idealConfirmationScreen.title"),showBadge:t,titleQa:"ideal-confirmation-title"}),(0,Nr.jsx)(Bo,{className:(0,xr.A)("px-body",{"pt-5 pb-6":!s}),children:(0,Nr.jsxs)("div",{className:"fixed-container grow-1 min-h-0 d-flex flex-column",children:[n.showReturnBankInfo?(0,Nr.jsx)(Lg,{className:(0,xr.A)("shrink-0",s?"mt-3":"my-auto")}):(0,Nr.jsx)(Ag,{email:n.email,name:n.name,className:"shrink-0"}),!n.showReturnBankInfo&&n.isSubscription&&(0,Nr.jsx)(Fg,{className:(0,xr.A)("grow-1",s?"mt-5":"mt-4"),locked:n.locked})]})}),(0,Nr.jsx)(ec,{backButtonClickHandler:c,children:n.showReturnBankInfo?(0,Nr.jsx)(Hc,{className:"btn-primary",processingState:La.IDLE,trackingElement:"nextButton",dataQa:"ideal-continue-button",onClick:o,children:a.translate("idealConfirmationScreen.button")}):(0,Nr.jsxs)(Nr.Fragment,{children:[i.showNextStepOverview&&(0,Nr.jsx)("p",{className:"body-4 text-center text-ellipsis mb-4",children:a.translate("idealConfirmationScreen.nextStep")}),(0,Nr.jsx)(Hc,{className:"btn-primary",processingState:n.processingState,errorTitle:n.errorMessage||a.translate("common.errorOccurredText"),onClick:r,dataQa:"ideal-pay-button",trackingElement:"nextButton",children:vc(a,n.formattedAmount,n.frequency)})]})})]})},[tn.COMMUNICATION_CONSENT]:e=>{let{showBadge:t}=e;const{controller:n,state:i}=eo(tn.COMMUNICATION_CONSENT),s=(0,qr.t)(),a=(0,wr.P)(),r=function(){const{campaign:e}=(0,Pr.n)();return e.config.consentText.customized.description}(),o=(0,d.useRef)(null),c=_m(o),l=(0,d.useCallback)((e=>t=>{n.changeChannel(e,t)}),[n]);return(0,d.useEffect)((()=>{n.setCustomizedConsentShown()}),[n]),(0,Nr.jsxs)("form",{className:"flow-screen","aria-label":s.translate("common.screenAriaLabel",{screenTitle:`${s.translate("communicationConsentScreen.title")}`}),"data-qa":"communication-consent-screen",onSubmit:e=>{e.preventDefault(),n.leave()},children:[(0,Nr.jsx)(Sc,{title:s.translate("communicationConsentScreen.title"),showBadge:t}),(0,Nr.jsx)(Bo,{className:(0,xr.A)("px-body",{"pt-8 pb-6":!a}),children:(0,Nr.jsxs)("div",{className:"fixed-container grow-1 min-h-0 d-flex flex-column",children:[(0,Nr.jsx)(Om,{className:"shrink-0 mx-auto",ariaHidden:!0}),(0,Nr.jsx)("p",{className:(0,xr.A)("shrink-0 text-center mt-5",a?"text-ellipsis":"text-line-clamp-2"),children:s.translate("communicationConsentScreen.description")}),(0,Nr.jsx)("div",{className:"mt-5",children:i.channels.map(((e,t)=>(0,Nr.jsx)(Qc,{className:(0,xr.A)({"mt-2":0!==t}),dataQa:`communication-consent-${e.type}`,dataTestId:`communication-consent-${e.type}`,checked:e.isAccepted,onChange:l(e.type),children:(0,Nr.jsx)("span",{className:"label-3",children:s.translate(`communicationConsentScreen.channels.${e.type}`)})},e.type)))}),!!r&&(0,Nr.jsx)("div",{className:"p-rel grow-1 shrink-0 mt-5",children:(0,Nr.jsx)("div",{ref:o,className:(0,xr.A)({"p-abs top-left bottom-right d-flex flex-column":!a,"text-scrollable custom-scrollbar":c,"pointer-events-none":i.locked}),children:(0,Nr.jsx)("p",{className:(0,xr.A)("body-4 shrink-0 text-gray-80 text-ellipsis mt-auto",{"px-3 py-2-5":c}),"data-qa":"communication-consent-description",children:r})})})]})}),(0,Nr.jsxs)(ec,{children:[(0,Nr.jsx)("button",{type:"submit",className:"btn btn-primary","data-qa":"communication-consent-continue","data-testid":"communication-consent-continue","data-tracking-element-name":"nextButton",children:s.translate("communicationConsentScreen.button.continue")}),(0,Nr.jsx)("div",{className:"d-flex justify-center mt-5",children:(0,Nr.jsx)("button",{type:"button",className:"btn-link link-1 text-truncate","data-qa":"communication-consent-skip","data-testid":"communication-consent-skip","data-tracking-element-name":"skipButton",onClick:()=>{n.resetChannels(),n.leave()},children:s.translate("communicationConsentScreen.button.skip")})})]})]})},[ka.QUESTIONS]:Pu,[ka.PRIVACY]:jl,[ka.THANK_YOU]:jd,[ka.COMMENT]:Ec,[ka.MAILING_ADDRESS]:e=>{const{state:t}=eo(ka.MAILING_ADDRESS);return(0,Nr.jsx)(Xh,{state:t.validation,children:(0,Nr.jsx)(Zh,Object.assign({},e))})},[ka.REMIND_ME]:()=>{const{state:e}=eo(ka.REMIND_ME);return(0,Nr.jsx)(pm,{state:{validation:{email:e.email,termsAndConditions:e.termsAndConditions},serverErrors:e.serverErrors},children:(0,Nr.jsx)(ym,{})})},[ka.BLOCKED]:tc},fE=Object.assign(Object.assign({},Lh),yE),SE=e=>{let{onScreenEntered:t}=e;const n=(0,wr.P)(),i=(0,Br.$)(),s=Jr(),a=(0,Lr.C)(),[r,o]=(0,d.useState)("next"),[c,l]=(0,d.useState)(s.getCurrentFlow().getCurrentScreen().name),[u,h]=(0,d.useState)(!0),[m,p]=(0,d.useState)([...s.checkoutService.checkoutUIState.alwaysRenderedScreens]),[g,y]=(0,d.useState)(),[f,S]=(0,d.useState)(),[A,E]=(0,d.useState)(),C=c===ka.REMIND_ME,v=(0,d.useCallback)(((e,t,n)=>{a&&!i&&s.checkoutService.trackCheckoutScreenView(s.getCurrentFlow().getCurrentScreen().name,e,t,n)}),[s,i,a]);(0,d.useEffect)((()=>{a&&v()}),[v,a]),(0,d.useEffect)((()=>s.onScreenChanged((e=>{const t=s.getCurrentFlow().getCurrentScreen().name;c!==t&&(y(e.createdAt),S(e.transitionStartedAt),E(e.transitionFinishedAt),h(!1),o((null==e?void 0:e.direction)===Io.BACKWARD?"previous":"next"),l(t),p((e=>{const t=s.checkoutService.checkoutUIState.alwaysRenderedScreens;return e.length!==t.length||t.some((t=>!e.includes(t)))?[...t]:e})))}))),[c,s]);const N=(0,d.useCallback)((()=>{if(!g)return;const e=new Date;h(!0),v(f,A,e)}),[v,g,f,A]);return(0,d.useEffect)((()=>{null==t||t(u)}),[t,u]),(0,Nr.jsx)(Ro,{className:(0,xr.A)({"dark-mode":C}),children:(0,Nr.jsxs)(wo.C.Provider,{value:u,children:[Object.entries(fE).map((e=>{let[t,s]=e;return!m.includes(t)&&(0,Nr.jsx)(Lo,{show:t===c,Screen:s,screenDirection:r,currentScreen:c,alwaysMount:!1,animationDisabled:n||i,onScreenEntered:N},t)})),m.map((e=>(0,Nr.jsx)(Lo,{show:e===c,Screen:fE[e],screenDirection:r,currentScreen:c,alwaysMount:!0,animationDisabled:n||i,onScreenEntered:N},e)))]})})},AE=(0,d.memo)(SE),EE=e=>{const t=(0,qr.t)(),n=(0,Br.$)(),i=Jr(),s=(0,Ur.k)(),a=(0,d.useCallback)((()=>{n||i.startCryptoFlow()}),[i,n]);return(0,Nr.jsxs)("div",{className:(0,xr.A)(s("flow-buttons"),e.className),children:[e.enabledCrypto&&(0,Nr.jsx)("button",{type:"button",className:(0,xr.A)("btn-link",s("flow-button")),disabled:e.disabled,onClick:a,"data-qa":"start-crypto-flow",children:t.translate("changeFlowButtons.crypto")}),e.enabledMoney&&(0,Nr.jsx)("button",{type:"button",className:(0,xr.A)("btn-link",s("flow-button")),disabled:e.disabled,onClick:()=>{n||i.startFiatFlow()},"data-qa":"start-fiat-flow",children:t.translate("changeFlowButtons.fiat")})]})},CE=(0,d.memo)(EE),vE=e=>{const t=(0,wr.P)(),n=(0,Ur.k)(),i=(0,qr.t)();return(0,Nr.jsx)("button",{type:"button",className:(0,xr.A)(n("modal-close"),e.className),"aria-label":i.translate("common.closeDialogButtonAriaLabel"),onClick:e.onClick,"data-qa":"global-close","data-tracking-element-name":"closeButton",children:(0,Nr.jsx)("span",{className:(0,xr.A)("icon-slot d-block",t?"icon-slot-28":"icon-slot-32"),"aria-hidden":!0,children:(0,Nr.jsx)("span",{className:"p-abs centered",children:(0,Nr.jsx)(wc,{className:"icon-stroke icon-stroke-2 d-block"})})})})};var NE=(0,d.memo)(vE);const bE={enter:400,exit:200},PE=()=>{!function(){const e=(0,qr.t)(),t=Jr(),n=mo(),i=(0,Br.$)(),[s,a]=(0,d.useState)((()=>t.getCurrentFlow().getCurrentScreen().name));(0,d.useEffect)((()=>t.onScreenChanged((()=>{a(t.getCurrentFlow().getCurrentScreen().name)}))),[t,s]);const r=(0,d.useCallback)((t=>{const i=e.translate("closeTabDialog.text");if(!n.isUnrestrictedExitScreen(s))return(t||window.event).returnValue=i,i}),[n,e,s]);(0,d.useEffect)((()=>{if(i)return;window.addEventListener("beforeunload",r);const e=()=>window.removeEventListener("beforeunload",r);return t.checkoutService.setRemoveCloseGuard(e),e}),[t.checkoutService,r,i])}();const e=function(){const e=(0,Pr.n)(),t=mo();return!e.infrastructureParams.isMobile||t.showCloseButton}(),t=function(){const e=Jr(),t=(0,Pr.n)(),n=t.infrastructureParams.isMobile,i=t.infrastructureParams.showcase,[s,a]=(0,d.useState)((()=>!i)),r=(e,t,n)=>{const i=e.getCurrentFlow().getCurrentScreen().name,s=!e.checkoutService.checkoutUIState.isMobileScreenWithoutFaqLinks(i),r=e.checkoutService.checkoutUIState.showFAQLinks;a(t?r&&s:r)};return(0,d.useEffect)((()=>{if(i)return;const t=e.onScreenChanged((()=>{r(e,n)}));return r(e,n),t}),[e,n,i]),s}(),n="AFJCHFEK"===(0,Pr.n)().campaign.company,i=(0,Dr.M)(),s=(0,wr.P)(),a=yo("lg"),r=(0,Br.$)(),o=(0,Ur.k)(),{show:c,entered:u,handleOpenTransitionEntered:h,handleCloseClick:m,handleCloseTransitionExited:p}=function(){var e=this;const t=(0,wr.P)(),[n,i]=(0,d.useState)({shouldReopen:!1,tributeSelected:!1}),[s,a]=(0,d.useState)(!1),r=Vs(),[o,c]=(0,d.useState)(!1),u=Jr(),h=mo(),m=(0,d.useCallback)((function(){for(var n=arguments.length,i=new Array(n),s=0;s<n;s++)i[s]=arguments[s];return(0,l.sH)(e,[...i],void 0,(function*(){let{isManualCall:e}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};u.shouldNotifyAbandoned(e)&&(u.checkoutService.updateSession({canUseAmountDefaults:!0}),u.checkoutService.abandonSession());const n=u.getCurrentFlow().getCurrentScreen().name;u.canClose({isMobile:t,isMobileExitScreen:h.isMobileExitScreen(n),isUnrestrictedExitScreen:h.isUnrestrictedExitScreen(n),isFinalAvailableScreen:h.isFinalAvailableScreen(n)})&&(yield u.checkoutService.saveCheckoutClosePublicParams(),a(!1))}))}),[u,h,t]);(0,d.useEffect)((()=>{const e=()=>a(!0),t=e=>(0,l.sH)(this,void 0,void 0,(function*(){var{isManualCall:t}=e,n=(0,l.Tt)(e,["isManualCall"]);i(n),yield m({isManualCall:t})}));return r.on(Rs.SHOULD_SHOW,e),r.on(Rs.SHOULD_HIDE,t),()=>{r.removeListener(Rs.SHOULD_SHOW,e),r.removeListener(Rs.SHOULD_HIDE,t)}}),[m,r]);const p=(0,d.useCallback)((()=>{u.checkoutService.trackCheckoutClose(u.getCurrentFlow().getCurrentScreen().name),r.emit(Rs.WAS_HIDDEN,n)}),[r,u,n]);return{show:s,entered:o,handleOpenTransitionEntered:(0,d.useCallback)((()=>{c(!0),u.checkoutService.trackCheckoutView()}),[u]),handleCloseTransitionExited:p,handleCloseClick:m}}(),g=(0,d.useRef)(null),y=(0,d.useRef)(null),f=(0,d.useRef)(null),S=(0,d.useRef)(null),{handleBlur:A,handleFocus:E}=jr({rootElRef:g,trapStartRef:f,trapStopRef:S}),C=(0,Pr.n)(),v=Jr(),N=mo(),b=Fm(),P=C.getAskPageConfig(),D=P.show||!!C.fundraisingPage,[_,T]=(0,d.useState)(D),O=C.infrastructureParams.livemode,x=P.showLinks,k=s&&_&&x,I=(0,d.useRef)(null),[w,R]=(0,d.useState)(!1),[M,L]=(0,d.useState)(!0),{shouldShowFlowsSection:U,enabledMoney:F,enabledCrypto:j}=((e,t)=>{const n=(0,Pr.n)(),i=uo(),{showcase:s}=n,a=s?s.isFirstScreen:e,{crypto:r,money:o}=n.enabledFlows;if(!(0,d.useMemo)((()=>[r,o].filter(Boolean).length>1&&a&&!t),[r,a,o,t]))return{shouldShowFlowsSection:!1,enabledMoney:!1,enabledCrypto:!1};const c=i.type;return{shouldShowFlowsSection:!0,enabledMoney:!!o&&c!==fe.MONEY,enabledCrypto:!!r&&c!==fe.CRYPTO}})(M,w),B=t&&!n||U||k||r;(0,d.useEffect)((()=>{const e=e=>{e.code===Ir.J.ESC&&m()};return i.document.addEventListener("keyup",e),()=>{i.document&&i.document.removeEventListener("keyup",e)}}),[m,i.document]),(0,d.useEffect)((()=>v.onScreenChanged((()=>{const e=v.getCurrentFlow(),t=e.getCurrentScreen().name,n=!N.isMobileScreenWithoutAskPage(t);T(s?n&&D:D),L(e.isCurrentScreenFirst()),R(!1),i.document.body.classList.remove("overflow-hidden")}))),[N,v,s,D,i]);const[H,q]=(0,d.useState)(!1),G=(0,d.useCallback)((e=>{q(e)}),[]),V=(0,d.useCallback)((()=>{if(!r)return;const e=new Event(Or.CLICK_SHOWCASE);i.parent.dispatchEvent(e)}),[i.parent,r]);return(0,d.useEffect)((()=>b.get(cn.UPSELL_CURTAIN_EXPERIMENT).onCurtainOpen((()=>{R(!0)}))),[b]),(0,d.useEffect)((()=>b.get(cn.UPSELL_CURTAIN_EXPERIMENT).onCurtainClose((()=>{R(!1)}))),[b]),(0,Nr.jsx)(Nr.Fragment,{children:(0,Nr.jsx)(Lr.m.Provider,{value:u,children:(0,Nr.jsx)(Rr.G.Provider,{value:u&&H,children:(0,Nr.jsx)(kr.A,{in:c,timeout:bE,classNames:s||r?{}:"rtg-modal",nodeRef:g,onEntered:h,onExited:p,unmountOnExit:!0,children:(0,Nr.jsx)("div",{className:(0,xr.A)(o("modal"),{"has-campaign":_,showcase:r}),ref:g,onFocus:E,onBlur:A,onClickCapture:V,children:(0,Nr.jsxs)(Mr.Tn.Provider,{value:g,children:[(0,Nr.jsx)("span",{ref:f,tabIndex:0,"aria-hidden":!0}),e&&(0,Nr.jsx)(NE,{onClick:m,className:(0,xr.A)({"pointer-events-none":r})}),(0,Nr.jsxs)("div",{className:(0,xr.A)(o("widget"),{"pb-10":!O&&!r&&s,"pb-14":!O&&!r&&!s,"pointer-events-none":r}),children:[(0,Nr.jsxs)("div",{className:o("widget-main"),children:[_&&(0,Nr.jsxs)("div",{className:o("widget-campaign"),"data-testid":"campaign",children:[!s&&!a&&(0,Nr.jsx)(kr.A,{nodeRef:I,in:w,classNames:"rtg-upsell-backdrop",timeout:200,mountOnEnter:!0,unmountOnExit:!0,children:(0,Nr.jsx)("div",{ref:I,className:(0,xr.A)("upsell-curtain-backdrop top-left bottom-right",s?"p-fixed":"p-abs border-top-radius-16"),style:{marginBottom:"-1px"},onClick:()=>{b.get(cn.UPSELL_CURTAIN_EXPERIMENT).closeCurtainOnBackDrop()}})}),(0,Nr.jsx)(So,{})]}),(0,Nr.jsx)("div",{className:(0,xr.A)(o("widget-form")),ref:y,children:(0,Nr.jsx)(Mr.Qq.Provider,{value:y,children:(0,Nr.jsx)(AE,{onScreenEntered:G})})})]}),B&&(0,Nr.jsx)("div",{className:o("widget-footer"),"data-qa":"widget-footer-block",children:(0,Nr.jsxs)("div",{className:"fixed-container",children:[(!n||U)&&(0,Nr.jsxs)("div",{className:o("widget-footer-panel"),children:[!n&&(0,Nr.jsx)(ko,{showAskPage:_}),U&&(0,Nr.jsxs)(Nr.Fragment,{children:[_&&!s&&a&&(0,Nr.jsx)("div",{className:"body-4 text-white opacity-80 shrink-0 mx-3","aria-hidden":!0,children:""}),(0,Nr.jsx)(CE,{enabledCrypto:j,enabledMoney:F})]})]}),k&&(0,Nr.jsx)(Yr,{links:P.links,className:(0,xr.A)({"mt-3":!n||U})})]})})]}),(0,Nr.jsx)("span",{ref:S,tabIndex:0,"aria-hidden":!0})]})})})})})})};var DE=n(8984);const _E=e=>{var t;const{onMounted:n}=e;return(0,d.useEffect)((()=>{n()}),[n]),(0,Nr.jsx)(d.StrictMode,{children:(0,Nr.jsx)(_r.z.Provider,{value:e.sentry,children:(0,Nr.jsx)(Tr,{fallback:(0,Nr.jsx)("div",{children:"fallback content"}),children:(0,Nr.jsx)(Dr.U.Provider,{value:e.iframeWindow,children:(0,Nr.jsx)(Zr.Provider,{value:e.flowManager,children:(0,Nr.jsx)(Pr.G.Provider,{value:e.checkoutConfiguration,children:(0,Nr.jsx)(Gs.Provider,{value:e.viewEventEmitter,children:(0,Nr.jsx)(DE.R.Provider,{value:e.intl,children:(0,Nr.jsx)(Ad.Provider,{value:e.tracker,children:(0,Nr.jsx)(Um.Provider,{value:e.experiments,children:(0,Nr.jsx)(co.Provider,{value:e.currencyService,children:(0,Nr.jsx)(Vl.Provider,{value:null!==(t=null==e?void 0:e.showcaseContext)&&void 0!==t?t:null,children:(0,Nr.jsx)(PE,{})})})})})})})})})})})})})};class TE{constructor(e,t,n,i,s,a){this.container=e,this.iframe=t,this.eventEmitter=n,this.sentry=i,this.debug=s,this.checkoutCore=a,this.renderKey=(0,ks.i)()}get iframeNode(){return this.iframe.iframeNode}open(e){return(0,l.sH)(this,void 0,void 0,(function*(){var t,n;if(null===(n=null===(t=null==e?void 0:e.abortController)||void 0===t?void 0:t.signal)||void 0===n?void 0:n.aborted)throw new Error("Checkout render aborted");yield this.render(),this.iframe.showDocument(),this.iframe.open(),this.show()}))}close(){this.iframe.close(),this.unmount(),this.iframe.destroy(),this.eventEmitter.removeAllListeners()}onHide(e){return this.eventEmitter.on(Rs.WAS_HIDDEN,e),this}get targetWindow(){const e=this.iframe.iframeWindow;if(!e)throw new Error("No window in iframe");return e}render(e){return(0,l.sH)(this,void 0,void 0,(function*(){return new Promise(((t,n)=>{try{const n=()=>(this.logCheckoutOpeningTime(),t());this.root.render((0,Nr.jsx)(_E,{onMounted:n,viewEventEmitter:this.eventEmitter,flowManager:this.checkoutCore.flowManager,intl:this.checkoutCore.intl,sentry:this.sentry,tracker:this.checkoutCore.trackerCheckout,experiments:this.checkoutCore.experiments,iframeWindow:this.targetWindow,currencyService:this.checkoutCore.currencyService,checkoutConfiguration:this.checkoutCore.checkoutConfiguration,showcaseContext:e},this.renderKey))}catch(e){n(e)}}))}))}show(){this.eventEmitter.emit(Rs.SHOULD_SHOW)}regenerateKey(){return this.renderKey=(0,ks.i)(),this.renderKey}get root(){return this._root||(this._root=(0,br.H)(this.container)),this._root}unmount(){this.root.unmount(),this.debug.log("Checkout UI (React) is unmounted")}logCheckoutOpeningTime(){const e=Date.now()-this.checkoutCore.trackerCheckout.checkoutOpenTimestamp;this.debug.log("checkout opening time:onMounted",`${e} ms`)}}function OE(e,t){void 0!==t&&function(n){var i;function s(){i||(i=!0,n())}["interactive","complete"].indexOf(t.readyState)>=0?n():(i=!1,t.addEventListener("DOMContentLoaded",s,!1),e.addEventListener("load",s,!1))}((function(){var n=!0,i=!1,s=null,a={text:!0,search:!0,url:!0,tel:!0,email:!0,password:!0,number:!0,date:!0,month:!0,week:!0,time:!0,datetime:!0,"datetime-local":!0};function r(e){return!!(e&&e!==t&&"HTML"!==e.nodeName&&"BODY"!==e.nodeName&&"classList"in e&&"contains"in e.classList)}function o(e){e.classList.contains("focus-visible")||(e.classList.add("focus-visible"),e.setAttribute("data-focus-visible-added",""))}function c(e){n=!1}function l(){t.addEventListener("mousemove",u),t.addEventListener("mousedown",u),t.addEventListener("mouseup",u),t.addEventListener("pointermove",u),t.addEventListener("pointerdown",u),t.addEventListener("pointerup",u),t.addEventListener("touchmove",u),t.addEventListener("touchstart",u),t.addEventListener("touchend",u)}function u(e){var i,s;"html"!==(null==e||null===(i=e.target)||void 0===i||null===(s=i.nodeName)||void 0===s?void 0:s.toLowerCase())&&(n=!1,t.removeEventListener("mousemove",u),t.removeEventListener("mousedown",u),t.removeEventListener("mouseup",u),t.removeEventListener("pointermove",u),t.removeEventListener("pointerdown",u),t.removeEventListener("pointerup",u),t.removeEventListener("touchmove",u),t.removeEventListener("touchstart",u),t.removeEventListener("touchend",u))}t.addEventListener("keydown",(function(e){r(t.activeElement)&&o(t.activeElement),n=!0}),!0),t.addEventListener("mousedown",c,!0),t.addEventListener("pointerdown",c,!0),t.addEventListener("touchstart",c,!0),t.addEventListener("focus",(function(e){var t,i,s;r(e.target)&&(n||(i=(t=e.target).type,"INPUT"==(s=t.tagName)&&a[i]&&!t.readOnly||"TEXTAREA"==s&&!t.readOnly||t.isContentEditable))&&o(e.target)}),!0),t.addEventListener("blur",(function(t){var n;r(t.target)&&(t.target.classList.contains("focus-visible")||t.target.hasAttribute("data-focus-visible-added"))&&(i=!0,e.clearTimeout(s),s=e.setTimeout((function(){i=!1,e.clearTimeout(s)}),100),(n=t.target).hasAttribute("data-focus-visible-added")&&(n.classList.remove("focus-visible"),n.removeAttribute("data-focus-visible-added")))}),!0),t.addEventListener("visibilitychange",(function(e){"hidden"==t.visibilityState&&(i&&(n=!0),l())}),!0),l(),t.body.classList.add("js-focus-visible")}))}class xE{constructor(e){this.onLoadHandlers=[],this.ready=!1,this.localeCode=e.locale,this.node=e.node,this.overrideTemplate=e.overrideTemplate,this.fonts=e.fonts||"",this.styles=e.styles||"",this.id=e.id||"",this.title=e.title,this.initialize=e.initialize,this.scripts=e.scripts||[],this.metaTags=e.metaTags||[],this.isMobile=e.isMobile||!1,this.env=e.env,this.disableRtl=e.disableRtl||!1,this.iframe=document.createElement("iframe"),this.addEventListeners(),e.initialStyles&&this.setStyles(e.initialStyles),this.setIframeAttributes()}resize(e){if(e.height){const t=xE.getSizeInCssUnit(e.height),n=e.minHeight?xE.getSizeInCssUnit(e.minHeight):t,i=e.maxHeight?xE.getSizeInCssUnit(e.maxHeight):t;this.iframe.setAttribute("height",t),this.iframe.style.setProperty("height",t,"important"),this.iframe.style.setProperty("min-height",n,"important"),this.iframe.style.setProperty("max-height",i,"important")}if(e.width){const t=xE.getSizeInCssUnit(e.width),n=e.minWidth?xE.getSizeInCssUnit(e.minWidth):t,i=e.maxWidth?xE.getSizeInCssUnit(e.maxWidth):t;this.iframe.setAttribute("width",t),this.iframe.style.setProperty("width",t,"important"),this.iframe.style.setProperty("min-width",n,"important"),this.iframe.style.setProperty("max-width",i,"important")}}showDocument(){xE.isContentDocumentAvailable(this.iframe.contentDocument)&&this.iframe.contentDocument.body.setAttribute("style","")}setStyles(e){e.forEach((e=>{let[t,n]=e;this.iframe.style.setProperty(t,String(n),"important")}))}addClass(e){e.forEach((e=>{this.iframe.className+=` ${e}`}))}removeStyles(e){xE.isContentDocumentAvailable(this.iframe.contentDocument)&&e.forEach((e=>{this.iframe.style.removeProperty(e)}))}appendElement(e){xE.isContentWindowAvailable(this.iframe.contentWindow)&&xE.isContentDocumentAvailable(this.iframe.contentDocument)&&(OE(this.iframe.contentWindow,this.iframe.contentDocument),this.iframe.contentDocument.body.appendChild(e))}addOnLoadHandler(e){if(this.ready)return e();this.onLoadHandlers.push(e)}addDocumentEventListener(e,t){xE.isContentDocumentAvailable(this.iframe.contentDocument)&&this.iframe.contentDocument.addEventListener(e,t)}removeDocumentEventListener(e,t){xE.isContentDocumentAvailable(this.iframe.contentDocument)&&this.iframe.contentDocument.removeEventListener(e,t)}findElement(e){return xE.isContentDocumentAvailable(this.iframe.contentDocument)?this.iframe.contentDocument.querySelector(e):null}matchMedia(e){return xE.isContentWindowAvailable(this.iframe.contentWindow)?this.iframe.contentWindow.matchMedia(e):null}get iframeNode(){return this.iframe}setGlobalData(e){if(xE.isContentWindowAvailable(this.iframe.contentWindow)){for(const[t,n]of Object.entries(e))this.iframe.contentWindow[t]=n;return!0}return!1}get iframeWindow(){return this.iframe.contentWindow}get iframeDocument(){return this.iframe.contentDocument}setIframeAttributes(){this.iframe.setAttribute("title",this.title),this.iframe.setAttribute("src","about:blank"),this.iframe.setAttribute("frameborder","0"),this.iframe.setAttribute("marginheight","0"),this.iframe.setAttribute("marginwidth","0"),this.iframe.setAttribute("width","1"),this.iframe.setAttribute("height","1"),this.id&&this.iframe.setAttribute("id",this.id)}addEventListeners(){this.iframe.addEventListener("load",(()=>{this.initialize&&this.iframe.contentWindow&&this.iframe.contentDocument&&this.initialize(this.iframe.contentWindow,this.iframe.contentDocument),this.ready=!0,this.onLoadHandlers.forEach((e=>e()))}))}getIframeTemplate(){const e=e=>Object.keys(e).map((t=>`${t}="${e[t]}"`)).join(" "),t=this.scripts.map((t=>`<script ${e(t)}><\/script>`)).join(""),n=this.metaTags.map((t=>`<meta ${e(t)}>`)).join("");return this.overrideTemplate?this.overrideTemplate({title:this.title,styles:this.styles,fonts:this.fonts,scripts:t,metaTags:n,isMobile:this.isMobile}):`\n      <!DOCTYPE html>\n      <html style="overflow: hidden;" lang="${this.localeCode}" dir="${(0,hi.N_)(this.localeCode,this.disableRtl)}">\n          <head>\n              <meta charset="utf-8">\n              <meta http-equiv="X-UA-Compatible" content="IE=edge">\n              ${n}\n              <title>${this.title}</title>\n              <style>${this.styles}</style>\n              <style>${this.fonts}</style>\n              ${t}\n          </head>\n          <body style="opacity: 0;"></body>\n      </html>\n    `}static isContentDocumentAvailable(e){return!!e||(console.warn("ContentDocument is not available"),!1)}static isContentWindowAvailable(e){return!!e||(console.warn("ContentWindow is not available"),!1)}static getSizeInCssUnit(e){const t=String(e);return/^\d+$/.test(t)?`${t}px`:t}}function kE(e,t){if(e.body)return t();setTimeout(kE.bind(null,e,t),10)}function IE(){return`display: block !important;margin: 0 !important;padding: 0 !important;border: 0 !important; width: 100% !important; height: 100% !important; position: fixed !important; opacity: 1 !important; top: 0 !important; left: 0 !important; right: 0 !important; bottom: 0 !important; transform: translateZ(100px) !important;z-index: ${arguments.length>0&&void 0!==arguments[0]?arguments[0]:2147483647} !important;`}class wE extends xE{constructor(e,t){super(e),this.htmlElementStyleManager=t,this.render()}render(){let e=document.documentElement;this.env!==u.hY.PRODUCTION&&this.env!==u.hY.STAGING&&(e=document.body),this.isMobile?(this.containerDiv=document.createElement("div"),this.overlay=document.createElement("div"),this.overlay.setAttribute("id","fun-mobile-overlay-container"),this.containerDiv.setAttribute("id","fun-iframe-container"),this.containerDiv.appendChild(this.iframe),e.appendChild(this.overlay),e.appendChild(this.containerDiv)):this.node?(this.htmlElementStyleManager.setStyle("border: 0 !important; height: 100% !important; width: 100% !important; margin: 0 auto !important; padding: 0 !important; border-radius: 0 !important; display: block !important;",this.iframe),this.node.appendChild(this.iframe)):e.appendChild(this.iframe),this.setParentViewPort(),xE.isContentWindowAvailable(this.iframe.contentWindow)&&(this.iframe.contentWindow.document.open("text/html","replace"),this.iframe.contentWindow.document.write(this.getIframeTemplate()),OE(this.iframe.contentWindow,this.iframe.contentWindow.document),this.iframe.contentWindow.document.close())}onShow(){this.htmlElementStyleManager.setStyle(IE(),this.iframe)}open(){this.htmlElementStyleManager.saveDocumentOriginalStyles(),this.node||(this.isMobile&&this.containerDiv&&this.overlay&&(this.htmlElementStyleManager.setStyle("display: block !important;margin: 0 !important;padding: 0 !important;float: none !important;visibility: visible !important;opacity: 1 !important;position: absolute !important;width: 100% !important;height: 100% !important;top: 0 !important; left: 0 !important; right: 0 !important; bottom: 0 !important; background: #f5f5f5 !important;z-index: 2147483647 !important;transform: translateZ(100px) !important;",this.containerDiv),this.htmlElementStyleManager.setStyle("position: fixed !important;top: 0 !important;left: 0 !important;right: 0 !important;bottom: 0 !important;margin: 0 !important;padding: 0 !important;background: #f5f5f5 !important;z-index: 2147483646 !important;transform: translateZ(99px) !important;",this.overlay)),this.htmlElementStyleManager.setStyle(this.isMobile?"display: block !important;border: none !important;margin: 0 !important;padding: 0 !important;width: 100% !important;height: 100% !important;":IE(2147483646),this.iframe),this.resize({width:"100%",height:"100%"}),this.node||(this.htmlElementStyleManager.appendStyle(this.isMobile?"all: initial !important;position: static !important;margin: 0 !important;padding: 0 !important;min-height: 0 !important;min-width: 0 !important;width: auto !important;height: 100% !important;overscroll-behavior-y: none !important;":"overflow: hidden !important; overscroll-behavior-y: none !important;",document.documentElement),kE(document,(()=>{this.htmlElementStyleManager.appendStyle(this.isMobile?"all: initial !important;overflow: auto !important;position: static !important;display: block !important;min-height: 0 !important;min-width: 0 !important;height: 100% !important;width: auto !important;margin: 0 !important;padding: 0 !important;overscroll-behavior-y: none !important;":"padding-right: 0 !important; overscroll-behavior-y: none !important;",document.body)}))),this.setGlobalStyles())}close(){this.htmlElementStyleManager.setStyle("border: 0 !important; width: 1px !important; height: 1px !important; position: fixed !important; opacity: 0 !important;",this.iframe),this.removeGlobalStyles(),this.htmlElementStyleManager.restoreOriginalStyles(document.documentElement),this.htmlElementStyleManager.restoreOriginalStyles(document.body),this.restoreParentViewPort()}destroy(){this.iframe.remove(),this.containerDiv&&(this.containerDiv.remove(),this.containerDiv=void 0),this.overlay&&(this.overlay.remove(),this.overlay=void 0)}setParentViewPort(){if(this.node)return;this.viewport=wE.getViewport("width=device-width, initial-scale=1, shrink-to-fit=no");const e=this.viewport,t=document.querySelector("meta[name=viewport]");t?(this.parentViewport=t,this.parentViewport.remove()):this.parentViewport=wE.getViewport(""),document.head.appendChild(e)}restoreParentViewPort(){this.node||(this.viewport&&(this.viewport.remove(),this.viewport=void 0),this.parentViewport&&(document.head.appendChild(this.parentViewport),this.parentViewport=void 0))}setGlobalStyles(){if(this.isMobile){this.headStyle=document.createElement("style");const e=this.headStyle;e.appendChild(document.createTextNode("body > *:not(#fun-iframe-container){ position: fixed !important; width: 100% !important; display: block !important }")),document.head.appendChild(e)}}removeGlobalStyles(){this.headStyle&&this.headStyle.remove()}setIframeAttributes(){super.setIframeAttributes(),this.iframe.setAttribute("allowpaymentrequest","true"),this.iframe.setAttribute("allow","payment web-share"),Sa(window)&&this.iframe.setAttribute("src",location.origin)}static getViewport(e){const t=document.createElement("meta");return t.setAttribute("name","viewport"),t.setAttribute("content",e),t}configure(e){if(this.localeCode=e.locale,!xE.isContentWindowAvailable(this.iframe.contentWindow))return;if(this.iframe.contentWindow.document.documentElement.setAttribute("lang",this.localeCode),this.iframe.contentWindow.document.documentElement.setAttribute("dir",(0,hi.N_)(this.localeCode)),void 0===e.styles)return;if(e.showcase){const e=this.iframe.contentWindow.document.getElementById("main-showcase-style");null==e||e.remove()}const t=this.iframe.contentWindow.document.createElement("style");e.showcase&&t.setAttribute("id","main-showcase-style"),this.styles=e.styles||"",t.appendChild(this.iframe.contentWindow.document.createTextNode(this.styles)),this.iframe.contentWindow.document.head.appendChild(t)}waitUntilFontsLoaded(){return(0,l.sH)(this,arguments,void 0,(function*(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1e3;if(!this.iframe.contentWindow)return;const t=function(e,t){return(0,l.sH)(this,void 0,void 0,(function*(){return!!e.fonts&&new Promise((t=>e.fonts.load('1em "IBM Plex Sans"').finally((()=>{t(!0)}))))}))}(this.iframe.contentWindow.document),n=(i=e,new Promise((e=>{setTimeout(e,i)})));var i;yield Promise.race([t,n])}))}}const RE=`\n@font-face {\n  font-family: 'IBM Plex Sans';\n  font-style: normal;\n  font-weight: 300;\n  font-display: swap;\n  src: url(${n(8552)}) format('woff2');\n  }\n@font-face {\n  font-family: 'IBM Plex Sans';\n  font-style: normal;\n  font-weight: 400;\n  font-display: swap;\n  src: url(${n(1755)}) format('woff2');\n}\n@font-face {\n  font-family: 'IBM Plex Sans';\n  font-style: normal;\n  font-weight: 500;\n  font-display: swap;\n  src: url(${n(9706)}) format('woff2');\n}\n@font-face {\n  font-family: 'IBM Plex Sans';\n  font-style: normal;\n  font-weight: 600;\n  font-display: swap;\n  src: url(${n(3717)}) format('woff2');\n}\n@font-face {\n  font-family: 'IBM Plex Sans';\n  font-style: normal;\n  font-weight: 700;\n  font-display: swap;\n  src: url(${n(8676)}) format('woff2');\n}\n@font-face {\n  font-family: 'IBM Plex Sans Arabic';\n  font-style: normal;\n  font-weight: 300;\n  font-display: swap;\n  src: url(${n(6843)}) format('woff2');\n}\n@font-face {\n  font-family: 'IBM Plex Sans Arabic';\n  font-style: normal;\n  font-weight: 400;\n  font-display: swap;\n  src: url(${n(4312)}) format('woff2');\n}\n@font-face {\n  font-family: 'IBM Plex Sans Arabic';\n  font-style: normal;\n  font-weight: 500;\n  font-display: swap;\n  src: url(${n(7977)}) format('woff2');\n}\n@font-face {\n  font-family: 'IBM Plex Sans Arabic';\n  font-style: normal;\n  font-weight: 600;\n  font-display: swap;\n  src: url(${n(5870)}) format('woff2');\n}\n@font-face {\n  font-family: 'IBM Plex Sans Arabic';\n  font-style: normal;\n  font-weight: 700;\n  font-display: swap;\n  src: url(${n(9807)}) format('woff2');\n}\n@font-face {\n  font-family: 'Sacramento';\n  font-style: normal;\n  font-weight: 400;\n  font-display: swap;\n  src: url(${n(3179)}) format('woff2');\n}\n`,ME=(e,t)=>(0,xr.A)({"is-mobile-safari-16":null==e?void 0:e.isMobileSafari16,"desktop-view":!(null==t?void 0:t.isMobile)});function LE(e){return(0,l.sH)(this,void 0,void 0,(function*(){return new Promise((t=>{const n=new wE({node:e.node,fonts:RE,isMobile:e.isMobile,title:"Donation Widget",id:"__checkout2",env:e.env,locale:e.localeCode,overrideTemplate(t){return`\n          <!DOCTYPE html>\n          <html class="${ME(e,t)}" lang="${e.localeCode}">\n            <head>\n                <meta charset="utf-8">\n                <meta http-equiv="X-UA-Compatible" content="IE=edge">\n                ${null==t?void 0:t.metaTags}\n                <title>${null==t?void 0:t.title}</title>\n                <style>${null==t?void 0:t.styles}</style>\n                <style>${null==t?void 0:t.fonts}</style>\n                ${null==t?void 0:t.scripts}\n            </head>\n\n            <body style="opacity: 0;">\n              <div id="root" class="donation-form" role="dialog" aria-modal="true"></div>\n            </body>\n          </html>\n      `}},e.htmlElementStyleManager);n.addOnLoadHandler((()=>{t(n)}))}))}))}function UE(e){return(0,l.sH)(this,void 0,void 0,(function*(){return(0,hi.iJ)(e)===di.p.RTL?(yield n.e(645).then(n.t.bind(n,6171,23))).default:(yield n.e(706).then(n.t.bind(n,5627,23))).default}))}class FE{constructor(){this.emitter=new h.A}on(e,t){return this.emitter.on(e,t),()=>this.emitter.off(e,t)}once(e,t){return this.emitter.once(e,t),this}emit(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];return this.emitter.emit(e,...n),this}removeAllListeners(){return this.emitter.eventNames().forEach((e=>{this.emitter.removeListener(e)})),this}}class jE{constructor(){this.stack=[]}getCurrent(){return this.stack[this.stack.length-1]||null}getPrevious(){return this.stack[this.stack.length-2]||null}getHistoricalScreens(){return[...this.stack]}goTo(e){const t=this.stack.indexOf(e);return-1===t?(this.stack.push(e),this):(this.stack.splice(t+1),this)}has(e){return-1!==this.stack.indexOf(e)}}class BE extends FE{constructor(e,t,n){super(),this.transitionsCompiler=e,this.settings=t,this.state=n,this.history=new jE,this.locked=!1,this.done=!1,this.screens=e.compile(t.screens,this)}get previousScreenName(){return this.history.getPrevious()}get isLocked(){return this.locked}get isExiting(){return this.currentScreen.final||!1}tryExit(){if(this.isExiting)return!1;const e=this.getFinalScreen();if(!e)return!1;const t=this.getScreenByName(e);return!!this.canEnterToScreen(t)&&(this.goTo(t.name),!0)}start(){return(0,l.sH)(this,void 0,void 0,(function*(){var e;const t=new Date,n=this.getScreenByName(this.settings.initial()),i=null!==(e=this.firstScreen)&&void 0!==e?e:n;return this.firstScreen=this.getFirstScreen(i),n!==i&&(yield n.instance.beforeEnter({isSynthetic:!0}),this.history.goTo(n.name),yield n.instance.beforeLeave({isSynthetic:!0})),this.history.goTo(this.firstScreen.name),this.currentScreen.instance.beforeEnter().then((()=>{this.emitScreenChanged({transitionStartedAt:t}),this.checkFlowCompleted()}))}))}next(e){return(0,l.sH)(this,void 0,void 0,(function*(){const t=new Date;if(!(null==e?void 0:e.omitBeforeLeave)&&!(yield this.currentScreen.instance.beforeLeave({direction:null==e?void 0:e.direction})))return;let n=this.getNextScreen(this.currentScreen),i=null==e?void 0:e.direction;if((null==e?void 0:e.getMandatoryAllowance)&&e.getMandatoryAllowance()){const e=this.getFirstMandatoryScreen();e&&(n=e,i=Io.BACKWARD)}return this.goTo(n.name,{direction:i||Io.FORWARD,transitionStartedAt:t})}))}prev(){if(this.settings.initial()===this.currentScreen.name)return Promise.resolve();const e=new Date,t=this.history.getHistoricalScreens(),n=t.findIndex((e=>{var t;return null===(t=this.screens.get(e))||void 0===t?void 0:t.final}));let i;return i=-1!==n?t[n-1]:this.history.getPrevious(),i?this.goTo(i,{direction:Io.BACKWARD,transitionStartedAt:e}):Promise.reject(new Error(`Cannot go to the previous screen. Current screen: ${this.currentScreen.name}`))}getHistoricalScreens(){return this.history.getHistoricalScreens()}predictNextScreen(){return this.getNextScreen(this.currentScreen).name}goTo(e,t){return this.throwErrorIfCannotChangeScreen(e,null==t?void 0:t.direction).then((()=>this.currentScreen.instance.dispose())).then((()=>(this.history.goTo(e),this.currentScreen.instance=this.transitionsCompiler.createScreenInstance(e,this),this.currentScreen.instance.beforeEnter()))).then((()=>{this.emitScreenChanged({direction:null==t?void 0:t.direction,transitionStartedAt:null==t?void 0:t.transitionStartedAt}),this.checkFlowCompleted()}))}lock(){return this.locked=!0,this.emit(wi.LOCKED),this}unlock(){return this.locked=!1,this.emit(wi.UNLOCKED),this}setFirstScreen(e){this.firstScreen=this.getScreenByName(e)}getCurrentScreen(){return this.currentScreen.instance}getScreen(e){const t=this.screens.get(e);if(!t)throw new Error(`FormFlow Screen with name ${e} not found.`);return t.instance}checkHasScreen(e){return this.screens.has(e)}isCurrentScreenFirst(){var e;return this.currentScreen.name===(null===(e=this.firstScreen)||void 0===e?void 0:e.name)}isCurrentScreenLast(){return void 0===this.currentScreen.next}dispose(){this.removeAllListeners()}get canGoBack(){return!this.locked&&!this.done&&!!this.history.getPrevious()}get currentScreen(){const e=this.history.getCurrent();if(!e)throw new Error("Cannot identify current screen");const t=this.screens.get(e);if(!t)throw new Error("Cannot get current screen");return t}throwErrorIfCannotChangeScreen(e,t){return this.locked?Promise.reject(new Error(`Cannot change screen while flow is locked. Current screen: ${e}. Direction: ${t}. Viewed screens: ${this.history.getHistoricalScreens().join(", ")}`)):this.done?Promise.reject(new Error("Cannot change screen because flow is completed")):Promise.resolve()}checkFlowCompleted(){this.isCurrentScreenLast()&&!this.isExiting&&(this.done=!0,this.emit(wi.DONE))}emitScreenChanged(e){this.emit(wi.SCREEN_CHANGED,{screen:this.currentScreen.name,instance:this.currentScreen.instance,direction:null==e?void 0:e.direction,transitionStartedAt:(null==e?void 0:e.transitionStartedAt)||new Date,transitionFinishedAt:new Date,createdAt:new Date})}getScreenByName(e){const t=this.screens.get(e);if(!t)throw new Error(`Cant get "${e}" screen`);return t}canEnterToScreen(e){return!e.guard||!e.guard(this.state)}getFirstScreen(e){var t;if(!this.canEnterToScreen(e)){const n=null===(t=e.next)||void 0===t?void 0:t.call(e,this.state,this.history);if(!n)throw new Error('Unable to determine first screen, reached a screen without "next" function');const i=this.getScreenByName(n);return this.getFirstScreen(i)}return e}getNextScreen(e){var t;const n=null===(t=e.next)||void 0===t?void 0:t.call(e,this.state,this.history);if(!n)throw new Error("Cant go to the next screen");const i=this.getScreenByName(n);return this.canEnterToScreen(i)?i:this.getNextScreen(i)}getFirstMandatoryScreen(){return this.history.getHistoricalScreens().map((e=>this.getScreenByName(e))).find((e=>{var t;return null===(t=null==e?void 0:e.mandatory)||void 0===t?void 0:t.call(e,this.state)}))||null}getFinalScreen(){const e=[...this.screens.entries()].find((e=>e[1].final));return e?e[0]:null}}class HE{constructor(e){this.screenFactory=e}createScreenInstance(e,t){return this.screenFactory.create(e,t)}compile(e,t){const n=new Map;return Object.keys(e).forEach((i=>{const s=e[i];n.set(i,{name:i,next:s.next,guard:s.guard,mandatory:s.mandatory,final:s.final,instance:this.screenFactory.create(i,t)})})),n}}function qE(e,t,n){const i=new HE(e);return new BE(i,t,n)}class GE{constructor(){this._promise=new Promise(((e,t)=>{this._resolver=e,this._rejector=t}))}get promise(){return this._promise}resolve(e){this.resolver(e)}reject(e){this.rejector(e)}get resolver(){if(!this._resolver)throw new Error("_resolver is undefined");return this._resolver}get rejector(){if(!this._rejector)throw new Error("_rejector is undefined");return this._rejector}}class VE{constructor(){this.storage=[]}enqueue(e){this.storage.push(e)}dequeue(){return this.storage.shift()}size(){return this.storage.length}toArray(){return[...this.storage]}front(){return this.storage[0]}clear(){this.storage=[]}isEmpty(){return!this.storage.length}}class YE{constructor(e){this.debounce=e,this.queue=new VE,this.currentRequestPromise=null}request(e){let{promise:t,allowDelay:n,allowMerge:i}=e;const s=new GE;return this.queue.enqueue({promise:t,deferredPromise:s,allowMerge:i,allowDelay:n}),this.performRequest(),s.promise}getRequestBatch(){var e;const t=this.queue.dequeue();if(!t)return[];if(!(null==t?void 0:t.allowMerge))return[t];const n=[t];for(;null===(e=this.queue.front())||void 0===e?void 0:e.allowMerge;){const e=this.queue.dequeue();e&&n.push(e)}return n}getRequestBatches(){const e=[];for(;!this.queue.isEmpty();)e.push(this.getRequestBatch());return e}executeBatch(e){return(0,l.sH)(this,void 0,void 0,(function*(){const t=e[e.length-1];if(t)try{const n=yield t.promise();e.forEach((e=>e.deferredPromise.resolve(n)))}catch(t){e.forEach((e=>e.deferredPromise.reject(t)))}}))}performDelayedRequest(){return(0,l.sH)(this,void 0,void 0,(function*(){const e=this.queue.front();if(!e)return;e.allowDelay&&(yield Da(this.debounce));const t=this.getRequestBatches();for(const e of t)yield this.executeBatch(e)}))}performRequest(){return(0,l.sH)(this,void 0,void 0,(function*(){for(;null===this.currentRequestPromise&&!this.queue.isEmpty();)try{this.currentRequestPromise=this.performDelayedRequest(),yield this.currentRequestPromise}finally{this.currentRequestPromise=null}}))}}var KE,zE,$E,WE,XE;!function(e){e.DONATION="FiatDonation",e.GIFT_AID="GiftAid",e.PAYMENT_OPTIONS="PaymentOptions",e.PRE_DONATION_UPSELL="PreDonationUpsell",e.UK_BACS="UKBacs",e.US_BANK_ACCOUNT="USBankAccount",e.POST_DONATION_UPSELL="PostDonationUpsell",e.DTD="DTD"}(KE||(KE={})),function(e){e[e.MIN=80]="MIN",e[e.MAX=250]="MAX"}(zE||(zE={})),function(e){e.EMAIL="email",e.ADDRESS="address",e.NOT_SHARE="not_share"}($E||($E={})),function(e){e.NONE="none",e.HONOR="honor",e.MEMORY="memory"}(WE||(WE={})),function(e){e.POSTAL_CARD="card",e.LETTER="letter"}(XE||(XE={}));const QE={[WE.MEMORY]:"In Memory",[WE.HONOR]:"In Honor",[WE.NONE]:""};WE.MEMORY,WE.HONOR,WE.NONE;class ZE{static get emptyAmountOptions(){return{once:[],every4weeks:[],monthly:[],daily:[],weekly:[],biweekly:[],bimonthly:[],quarterly:[],semiannual:[],annual:[]}}static get emptyDefaultAmounts(){return{once:0,monthly:0,daily:0,weekly:0,biweekly:0,bimonthly:0,quarterly:0,semiannual:0,annual:0}}constructor(e,t,n,i,s,a,r,o,c,l,u,d,h,m,p,g,y,f,S,A){var E;this.dataPointRegistry=e,this._checkoutConfiguration=t,this.checkoutState=n,this._checkoutUIState=i,this.sessionService=s,this.sessionAPI=a,this.tracker=r,this.currencyService=o,this.intl=c,this.iframeWindow=l,this.sentry=u,this.paymentScreen=d,this.eventEmitter=h,this.checkoutAPIBridge=m,this.debug=p,this.experiments=g,this.paymentAPI=y,this.logger=f,this._redirectApi=S,this.params=A,this.shouldFindMandatoryScreen=!1,this._closeSessionPromise=null,(null===(E=this.checkoutConfiguration.fundraisingPage)||void 0===E?void 0:E.key)&&(this.checkoutUIState.askPageActiveTab=Ua.FUNDRAISER)}get redirectApi(){return this._redirectApi}get checkoutUIState(){return this._checkoutUIState}get checkoutConfiguration(){return this._checkoutConfiguration}get campaignConfig(){return this.checkoutConfiguration.campaign.config}get defaultAmountOptions(){return this.checkoutConfiguration.defaultAmountOptions}get company(){return this.checkoutConfiguration.company}get queryParams(){return this.checkoutConfiguration.queryParams}get hasPaymentAttempt(){return this.getState().hasPaymentAttempt}get canGoBack(){return this.checkoutState.canGoBack}get livemode(){return this.checkoutConfiguration.infrastructureParams.livemode}get isPaid(){var e;return!!(null===(e=this.getState().donationResultState)||void 0===e?void 0:e.donationId)}get isPaymentStarted(){return!1}get canCloseSession(){return!this.sessionService.closed&&this.isPaid}reloadCheckout(e,t){return(0,l.sH)(this,void 0,void 0,(function*(){if(this.trackCheckoutClose(e),yield Da(20),t){const e=new URL(window.location.href);Object.entries(t).forEach((t=>{let[n,i]=t;e.searchParams.set(n,i)})),window.location.replace(e)}else window.location.reload()}))}initialize(e){this.sessionService.updateSession(),this.checkoutUIState.preloadComponents()}dispose(){return(0,l.sH)(this,void 0,void 0,(function*(){}))}updateSession(e){return this.sessionService.updateSession(e)}abandonSession(){return this.sessionService.abandonSession()}getDataPoint(e){return this.dataPointRegistry.getDataPoint(e)}enableDataPoint(e){return this.checkoutState.setEnabledFor(e),this}disableDataPoint(e){return this.checkoutState.unsetEnabledFor(e),this}makeDataPointRequired(e){return this.checkoutState.setRequiredFor(e),this}makeDataPointOptional(e){return this.checkoutState.unsetRequiredFor(e),this}getState(){return this.checkoutState.get()}tryCloseSession(){return(0,l.sH)(this,void 0,void 0,(function*(){if(this._closeSessionPromise)return this._closeSessionPromise;if(this.canCloseSession){this._closeSessionPromise=this.closeSession();try{yield this._closeSessionPromise}finally{this._closeSessionPromise=null}}}))}setCanGoBack(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return this.checkoutState.setCanGoBack(e),this}onStateUpdate(e){return this.checkoutState.onStateUpdate(e)}syncUpdateCheckoutState(){this.checkoutState.syncUpdate()}setRemoveCloseGuard(e){this._removeCloseGuard=e}disarmCloseGuard(){this._removeCloseGuard&&this._removeCloseGuard()}updateSessionWidgetDefaults(){this.sessionService.updateSessionWidgetDefaults()}handlePaymentRedirect(e){return(0,l.sH)(this,void 0,void 0,(function*(){e===this.params.screenSet.thankYou&&this.canRedirect&&(this.debug.log("simulating additional pay delay before redirect"),yield Da(ZE.ADDITIONAL_PAY_DELAY),this.debug.log("redirecting"),yield this.tryCloseSession(),yield this.redirectApi.tryRedirect(this))}))}getCommonPublicCheckoutDonationParams(e){return(0,l.sH)(this,void 0,void 0,(function*(){const t=this.getDataPoint(Ra.DONOR_NAME),n=this.getDataPoint(Ra.DONOR_EMAIL),i=this.getDataPoint(Ra.TRIBUTE),s=this.getDataPoint(KE.DTD),a=this.getDataPoint(Ra.ON_BEHALF_OF),r=this.getDataPoint(Ra.DONATE_ANONYMOUS),o=this.getDataPoint(Ra.DESIGNATION),c=this.getDataPoint(Ra.COMMENT),l=this.getDataPoint(Ra.COMMUNICATION_CONSENT),u=this.checkoutConfiguration.campaign.config,d=i.toObject(),h=t.toObject(),m=n.toObject(),p=this.getDonationParams();return(e=>{let{params:t,tributeDataPointDTO:n,donorNameDataPointDTO:i,donorEmailDataPointDTO:s,anonymousDataPoint:a,dtdDataPoint:r,onBehalfOfDataPoint:o,designationDataPoint:c,commentDataPoint:l,communicationConsentDataPoint:u,donationParams:d,campaign:h,currencyService:m,isPaid:p}=e;var g;const y=n.isActive&&!!n.inHonorOf;return{supporter:{id:(null===(g=t.payResult)||void 0===g?void 0:g.customerId)||null,email:s.email,firstName:i.firstName,lastName:i.lastName,anonymous:h.showAnonymous&&a.anonymousChecked,mailingListSubscribed:u.isAnyConsentAccepted,employer:r.employerName||null,onBehalfOf:o.isOnBehalfOf?o.companyName:null},comment:l.comment||null,donation:t.payResult&&p?{id:t.payResult.donationId,paymentMethod:(f=t.clientPaymentMethod,{[nt._.CARD]:"CreditCard",[nt._.APPLE_PAY]:"ApplePay",[nt._.GOOGLE_PAY]:"GooglePay",[nt._.PAYPAL]:"PayPal",[nt._.VENMO]:"Venmo",[nt._.US_BANK_ACCOUNT]:"ACH",[nt._.AU_BECS]:"BECS",[nt._.UK_BACS]:"Bacs",[nt._.ACSS]:"PAD",[nt._.SEPA]:"SEPA",[nt._.IDEAL]:"iDEAL",[nt._.CRYPTO]:"Crypto",[nt._.STOCK]:"Stock"}[f]||""),amount:m.toFloat(d.total,d.currency),feesCovered:m.toFloat(d.publicFee,d.currency),currency:d.currency,recurring:d.frequency!==se.ONCE,frequency:d.frequency}:null,designation:c.goalKey&&p?{id:c.goalKey,name:c.goalName,code:c.goalCode}:null,tribute:y?{type:(S=n.type,S&&QE[S]||"")}:null,recurring:t.payResult&&p&&t.payResult.recurringId?{id:t.payResult.recurringId}:null};var f,S})({params:e,tributeDataPointDTO:d,donorEmailDataPointDTO:m,donorNameDataPointDTO:h,campaign:u,anonymousDataPoint:r,isPaid:this.isPaid,dtdDataPoint:s,onBehalfOfDataPoint:a,donationParams:p,currencyService:this.currencyService,designationDataPoint:o,commentDataPoint:c,communicationConsentDataPoint:l})}))}getCommonPublicCheckoutIntentParams(){return(0,l.sH)(this,void 0,void 0,(function*(){const e=this.getDataPoint(Ra.TRIBUTE),t=this.getDataPoint(Ra.DONOR_NAME),n=this.getDataPoint(Ra.DONOR_EMAIL),i=this.getDataPoint(Ra.DESIGNATION),s=this.getDataPoint(Ra.COMMENT),a=this.getDataPoint(Ra.REMIND_ME_LATER),r=e.toObject(),o=t.toObject(),c=n.toObject(),l=this.getDonationParams();return(e=>{let{flowType:t,tributeDataPointDTO:n,donorNameDataPointDTO:i,donorEmailDataPointDTO:s,designationDataPoint:a,commentDataPoint:r,remindMeLaterDataPoint:o,donationParams:c,isPaid:l}=e;const u=n.isActive&&!!n.inHonorOf;return l?null:{flowType:t,checkoutSettings:{modifyAmount:c.canModifyAmount,designation:a.goalKey,modifyDesignation:a.modifyDesignation},comment:r.comment,donation:{amount:c.amount,currency:c.currency,recurring:c.frequency!==se.ONCE,frequency:c.frequency,selectedHintId:c.selectedHintId},supporter:{email:s.email,firstName:i.firstName,lastName:i.lastName},tribute:u?{type:n.type,labelType:n.labelType,inHonorOf:n.inHonorOf}:null,isSavedEmailOnExit:o.used,feeCovered:c.feeCovered}})({flowType:this.checkoutState.flowType,designationDataPoint:i,commentDataPoint:s,remindMeLaterDataPoint:a,tributeDataPointDTO:r,donorNameDataPointDTO:o,donorEmailDataPointDTO:c,donationParams:l,isPaid:this.isPaid})}))}capturePayErrorToSentry(e){e&&(e instanceof Vt.GI&&0===e.statusCode||this.sentry.captureException(e))}emitDonationComplete(){return(0,l.sH)(this,void 0,void 0,(function*(){const e=yield this.getPublicCheckoutDonationParams();this.checkoutAPIBridge.emitDonationComplete(e),this.logger.donationComplete({key:this.checkoutConfiguration.campaign.key,name:this.checkoutConfiguration.campaign.name},Object.assign(Object.assign({},e),this.checkoutAPIBridge.getOpenParams()))}))}handleDonationCompleted(e){return(0,l.sH)(this,void 0,void 0,(function*(){const t=[this.emitDonationComplete(),this.trackCheckoutCharge(e)];yield Promise.all(t)}))}getOpeningTime(){switch(this.checkoutConfiguration.checkoutType){case Se.PAGE:return Math.round(window.performance.now());case Se.MODAL:return Date.now()-this.tracker.checkoutOpenTimestamp;default:throw new F(this.checkoutConfiguration.checkoutType,"Unexpected checkout type")}}get canRedirect(){return this.redirectApi.canRedirect(this.getState())}closeSession(){return(0,l.sH)(this,void 0,void 0,(function*(){yield this.sessionService.updateSession(),yield this.sessionService.closeSession()}))}}ZE.ADDITIONAL_PAY_DELAY=1e3;class JE extends js{constructor(e,t,n,i,s,a){super(e,t),this.merge({checkoutScreen:n,chargeKey:i.chargeKey,chargeInUSDAmount:i.chargeInUSDAmount,chargeInDefaultCurrencyAmount:i.chargeInDefaultCurrencyAmount,chargeAmount:i.chargeAmount,chargeCurrency:i.chargeCurrency,chargeFeeCovered:i.chargeFeeCovered?1:0,chargePaymentMethod:i.chargePaymentMethod,chargeIsRecurring:i.chargeIsRecurring?1:0,chargeHasComment:i.chargeHasComment?1:0,chargeHasTribute:i.chargeHasTribute?1:0,chargeGoal:i.chargeGoal,chargeCampaignKey:i.chargeCampaignKey,duration:s,eventComment:a})}get eventType(){return"checkoutCharge"}}class eC extends js{constructor(e,t,n){super(e,t),this.merge({checkoutScreen:n})}get eventType(){return"checkoutClose"}}class tC extends js{constructor(e,t,n,i){super(e,t),this.merge({checkoutScreen:n,eventComment:i})}get eventType(){return"checkoutScreenView"}}class nC extends js{constructor(e,t,n,i){super(e,t),this.merge({duration:n,eventComment:i})}get eventType(){return"checkoutView"}}class iC extends ZE{constructor(){super(...arguments),this._isPaymentCompleted=!1,this.donationStatusInterval=null}get isPaymentCompleted(){return this._isPaymentCompleted}get queryParams(){return this.checkoutConfiguration.queryParams}get type(){return this.checkoutState.flowType}getPaymentScreen(e,t){return this.paymentScreen.get(e,t)}trackCheckoutCharge(e){const t=this.getDataPoint(wa.DONATION),n=this.getDataPoint(Ra.TRIBUTE),i=this.getDataPoint(Ra.COMMENT),s=this.getDataPoint(Ra.DESIGNATION),a=this.checkoutConfiguration.campaign,r=this.checkoutConfiguration.element,o=this.defaultAmountOptions;this.tracker.track(new JE({frequency:t.frequency,currency:t.currency,amount:t.amount||0,amountOptions:o},{elementType:r.type,elementKey:r.key,elementReminderKey:r.reminderKey},e.screen,{chargeKey:e.donationId,chargeInUSDAmount:t.totalInUSD||0,chargeInDefaultCurrencyAmount:t.totalInDefaultCurrency,chargeAmount:t.total,chargeCurrency:t.currency,chargeFeeCovered:!1,chargePaymentMethod:e.clientPaymentMethod,chargeIsRecurring:t.frequency!==se.ONCE,chargeHasComment:i.isActive&&!!i.comment,chargeHasTribute:n.isFilled,chargeGoal:s.goalKey||void 0,chargeCampaignKey:a.key},e.duration))}trackCheckoutView(){var e,t;const n=this.getDataPoint(wa.DONATION).toObject(),i=this.checkoutConfiguration.element,s=this.checkoutConfiguration.externalConfig,a=Boolean((null===(e=s.launcher)||void 0===e?void 0:e.elementKey)&&(null===(t=s.checkoutData)||void 0===t?void 0:t.amount)),r=this.getOpeningTime();this.debug.log("checkout opening time:eventCheckoutView",`${r} ms`),this.tracker.track(new nC({frequency:n.frequency,currency:n.currency,amount:n.amount,amountOptions:iC.emptyAmountOptions},{elementType:i.type,elementKey:i.key,elementReminderKey:i.reminderKey},r,{isAmountFromElement:a}))}trackCheckoutClose(e){const t=this.getDataPoint(wa.DONATION).toObject(),n=this.checkoutConfiguration.element;this.tracker.track(new eC({frequency:t.frequency,currency:t.currency,amount:t.amount,amountOptions:iC.emptyAmountOptions},{elementType:n.type,elementKey:n.key,elementReminderKey:n.reminderKey},e))}trackCheckoutScreenView(e,t,n,i){const s=this.getDataPoint(wa.DONATION).toObject(),a=this.checkoutConfiguration.element,r={renderDuration:null};t&&n&&(r.transitionDuration=n.getTime()-t.getTime()),i&&n&&(r.renderDuration=i.getTime()-n.getTime()),this.tracker.track(new tC({frequency:s.frequency,currency:s.currency,amount:s.amount,amountOptions:iC.emptyAmountOptions},{elementType:a.type,elementKey:a.key,elementReminderKey:a.reminderKey},e,r))}getCheckoutTrackerData(){const e=this.getDataPoint(wa.DONATION),t=this.getDataPoint(Ra.TRIBUTE);return{donation:{amount:e.amount,currency:e.currency,frequency:e.frequency,defaultAmount:e.defaultAmount},tribute:{isActive:t.isActive}}}getState(){return this.checkoutState.get()}dispose(){const e=Object.create(null,{dispose:{get:()=>super.dispose}});return(0,l.sH)(this,void 0,void 0,(function*(){return this.clearDonationStatusInterval(),e.dispose.call(this)}))}hold(){return(0,l.sH)(this,void 0,void 0,(function*(){if(this.checkoutConfiguration.infrastructureParams.showcase)return Yt.fail({});try{return yield this.sessionService.updateSession(),yield this.paymentAPI.hold({clientPaymentMethod:u._h.CRYPTO}),Yt.success(void 0)}catch(e){return Yt.fail({shouldLeave:!1})}}))}pay(e){return(0,l.sH)(this,arguments,void 0,(function*(e){let{screen:t,predictedNextScreen:n}=e;if(this.checkoutConfiguration.infrastructureParams.showcase)return Yt.fail({});this.checkoutState.setPaymentAttempt();const i=Date.now(),s=yield this.sessionService.updateSession();if(Yt.isFailure(s))return this.payErrorMessage=this.intl.translate("common.errorOccurredText"),Yt.fail({});let a;try{a=yield this.paymentAPI.pay()}catch(e){return this.capturePayErrorToSentry(e),Yt.fail({})}return Yt.isFailure(a)?Yt.fail({}):a.successResult.data.cryptoData?(this.checkoutState.setCryptoAddress(a.successResult.data.cryptoData.address),this.checkoutState.setDonationResultState({donationId:a.successResult.data.donationId,customerId:a.successResult.data.customerId,tributeId:a.successResult.data.tributeId,tributeDonorPortalLink:a.successResult.data.tributeDonorPortalLink}),this.watchForPaymentStatus({donationId:a.successResult.data.donationId,startPayTimestamp:i,screen:t}),yield this.handlePaymentRedirect(n),Yt.success(void 0)):Yt.fail({})}))}initialize(e){super.initialize(e);const t=this.checkoutConfiguration.externalConfig.checkoutIntent;t&&!e.shouldRestoreFromIntent&&this.applyCheckoutIntent(t)}saveCheckoutClosePublicParams(){return(0,l.sH)(this,void 0,void 0,(function*(){const[e,t]=yield Promise.all([this.getPublicCheckoutDonationParams(),this.getCommonPublicCheckoutIntentParams()]);this.checkoutAPIBridge.setDonationParams(e),this.checkoutAPIBridge.setIntentParams(t)}))}getDonationParams(){const e=this.getDataPoint(wa.DONATION),t=e.toObject();return{amount:t.amount,total:t.total,currency:t.currency,frequency:t.frequency,canModifyAmount:e.canModifyAmount,publicFee:0}}applyCheckoutIntent(e){var t,n,i;if(e.donation){const t=this.getDataPoint(wa.DONATION);e.donation.currency&&(t.currency=e.donation.currency),e.donation.amount&&(t.amount=e.donation.amount)}if(e.supporter){const t=this.getDataPoint(Ra.DONOR_NAME),n=this.getDataPoint(Ra.DONOR_EMAIL);e.supporter.firstName&&t.setFirstName(e.supporter.firstName),e.supporter.lastName&&t.setLastName(e.supporter.lastName),e.supporter.email&&n.setEmail(e.supporter.email)}if(e.comment&&this.getDataPoint(Ra.COMMENT).saveComment(e.comment),e.tribute){const n=this.getDataPoint(Ra.TRIBUTE);e.tribute.inHonorOf&&(n.tributeeName=null===(t=e.tribute)||void 0===t?void 0:t.inHonorOf),n.isActive=!0}if(null===(n=e.checkoutSettings)||void 0===n?void 0:n.designation){const t=this.getDataPoint(Ra.DESIGNATION),n=this.getDataPoint(wa.DONATION);t.setGoalKey(null===(i=e.checkoutSettings)||void 0===i?void 0:i.designation,this.getGoalRepeat(n.frequency))}this.checkoutState.filledFromIntent=!0}getPublicCheckoutDonationParams(){return(0,l.sH)(this,void 0,void 0,(function*(){return this.getCommonPublicCheckoutDonationParams({clientPaymentMethod:u._h.CRYPTO,payResult:this.checkoutState.get().donationResultState})}))}watchForPaymentStatus(e){this.donationStatusInterval=setInterval((()=>(0,l.sH)(this,void 0,void 0,(function*(){(yield this.paymentAPI.status())&&(this.clearDonationStatusInterval(),this.handleDonationCompleted({donationId:e.donationId,clientPaymentMethod:u._h.CRYPTO,screen:e.screen,duration:e.startPayTimestamp-Date.now()}),this._isPaymentCompleted=!0)}))),5e3)}clearDonationStatusInterval(){this.donationStatusInterval&&clearInterval(this.donationStatusInterval)}getGoalRepeat(e){return e===se.ONCE?je.ONE_TIME:je.RECURRING}}class sC{constructor(e,t,n,i){this.campaignConfig=e,this.debug=t,this.checkoutConfiguration=n,this.dataPointRegistry=i,this.hasMailingAddressError=!1,this.filledFromIntent=!1,this.hasPaymentAttempt=!1,this._canGoBack=!1,this.donationResultState=null,this.updateListeners=new Set}get canGoBack(){return this._canGoBack}setEnabledFor(e){return this.dataPointRegistry.getDataPoint(e).isEnabled=!0,this}unsetEnabledFor(e){return this.dataPointRegistry.getDataPoint(e).isEnabled=!1,this}setRequiredFor(e){return this.dataPointRegistry.getDataPoint(e).isRequired=!0,this}unsetRequiredFor(e){return this.dataPointRegistry.getDataPoint(e).isRequired=!1,this}setPaymentAttempt(){return this.hasPaymentAttempt=!0,this}setCanGoBack(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this._canGoBack=e}setDonationResultState(e){this.donationResultState=e}onStateUpdate(e){return this.updateListeners.add(e),()=>this.updateListeners.delete(e)}syncUpdate(){this.triggerUpdate()}triggerUpdate(){this.updateListeners.forEach((e=>e()))}}class aC extends sC{constructor(e,t,n,i,s){super(t.campaign.config,e,t,n),this.debug=e,this.checkoutConfiguration=t,this.dataPointRegistry=n,this.mailingAddressModule=i,this.paymentMethodAvailabilityManagerRepository=s,this.flowType=fe.CRYPTO,this.cryptoAddress=null}get(){var e;return{donation:this.donationState,personalInformation:this.personalInformationState,tribute:this.tributeState,comment:this.commentState,cryptoAddress:this.cryptoAddress,hasPaymentAttempt:this.hasPaymentAttempt,hasMailingAddressError:this.hasMailingAddressError,donationResultState:this.donationResultState,isPaid:Boolean(null===(e=this.donationResultState)||void 0===e?void 0:e.donationId),mailingAddress:this.mailingAddressState,questions:this.questionsState,remindMeLater:this.remindMeLaterState,termsAndConditions:this.termsAndConditionsState}}onCryptoCurrencyDataPointCollect(){const e=this.dataPointRegistry.getDataPoint(wa.DONATION),t=this.dataPointRegistry.getDataPoint(Ra.MAILING_ADDRESS),n=this.mailingAddressModule.getCheckoutScreenLogic(),i=this.mailingAddressModule.getCurrencyLogic({widget:this.campaignConfig}),s=e.getTotalInCustomCurrency(i.currency),a=Object.assign(Object.assign({},this.campaignConfig),{paymentMethodAvailabilityManagerRepository:this.paymentMethodAvailabilityManagerRepository,paymentMethod:null,paymentMethodCountry:null,isGiftAidAccepted:!1});return t.setComputedAvailability({isEnabled:n.isEnabled(s,a),isRequired:n.isRequired(s,a)}),this}setCryptoAddress(e){return this.cryptoAddress=e,this}get remindMeLaterState(){const e=this.dataPointRegistry.getDataPoint(Ra.REMIND_ME_LATER),t=this.dataPointRegistry.getDataPoint(Ra.DONOR_EMAIL),n=this.dataPointRegistry.getDataPoint(Ra.TERMS_AND_CONDITIONS),i={show:!1,isEnabled:e.isEnabled,isRequired:e.isRequired};return e.isEnabled&&(t.isEnabled&&!t.validate().isValid||n.isEnabled&&!n.isAccepted)?Object.assign(Object.assign({},i),{show:!0}):i}get termsAndConditionsState(){return{isEnabled:this.dataPointRegistry.getDataPoint(Ra.TERMS_AND_CONDITIONS).isEnabled}}get donationState(){const e=this.dataPointRegistry.getDataPoint(wa.DONATION);return{isEnabled:e.isEnabled,isRequired:e.isRequired,amount:e.amount,currency:e.currency,frequency:e.frequency,defaultAmount:e.defaultAmount||0,amountOptions:[],amountInUsd:e.amountInUSD||0}}get personalInformationState(){const e=this.dataPointRegistry.getDataPoint(wa.DONATION);return{isEnabled:e.isEnabled,isRequired:e.isRequired}}get tributeState(){const e=this.dataPointRegistry.getDataPoint(Ra.TRIBUTE);return{isEnabled:e.isEnabled,isRequired:e.isRequired,name:e.tributeeName,labelType:e.labelType,isActive:e.isActive}}get mailingAddressState(){const e=this.dataPointRegistry.getDataPoint(Ra.MAILING_ADDRESS);return{isEnabled:e.isEnabled,isRequired:e.isRequired}}get commentState(){const e=this.dataPointRegistry.getDataPoint(Ra.COMMENT);return{isEnabled:e.isEnabled,isRequired:e.isRequired}}get questionsState(){return{isEnabled:this.dataPointRegistry.getDataPoint(Ra.QUESTIONS).isEnabled}}}class rC{constructor(e,t){this.checkoutState=e,this.params=t}get(){return this.shouldPayOnMailingAddressScreen()?this.params.screenSet.mailingAddress:this.params.screenSet.privacy}shouldPayOnMailingAddressScreen(){return this.checkoutState.get().mailingAddress.isEnabled}}function oC(e,t){return e.slice().filter((e=>null!==e)).sort(((e,t)=>e-t)).map((e=>(t-Number(e))/Math.abs(t-Number(e))||0)).reduce(((e,t)=>e+t),e.length)}class cC{constructor(e,t,n,i,s){this.tracker=e,this.checkoutConfiguration=t,this.sentry=n,this.debouncedRequestService=i,this.requestService=s,this.created=!1,this.headers={"Content-Type":"text/plain; charset=utf-8"},this.latestUpdatePayload=null,this.latestUpdateResponse=null,this.params={baseURL:a,token:e.checkoutViewId}}get sessionToken(){return this.params.token}get isCreated(){return this.created}get sessionStageInitial(){return this._sessionStageInitial}get(e,t,n){return(0,l.sH)(this,void 0,void 0,(function*(){const i={retries:5,delay:200};(null==n?void 0:n.retries)&&(null==n?void 0:n.delay)&&(i.retries=n.retries,i.delay=n.delay);const s=yield this.waitForCreated((()=>this.requestService.get({url:`${this.params.baseURL}/${ce}/${this.params.token}/${e}`,headers:this.headers,params:t,cancelSimilar:!0,rejectOnInvalid:null==n?void 0:n.rejectsOnInvalid})),i);if(Yt.isSuccess(s))return s.successResult;throw new j}))}post(e,t,n){return(0,l.sH)(this,void 0,void 0,(function*(){const i=this.getPostPromise(e,t,n);return this.debouncedRequestService.request({promise:i,allowMerge:!1,allowDelay:!1})}))}update(e){return(0,l.sH)(this,void 0,void 0,(function*(){this.sessionStageInitial||(this.sessionStageInitial=this.getSessionStageInitial(e));const t=x(Object.assign(Object.assign({},e),{created:this.created,initial:this.sessionStageInitial})),n=this.getUpdaterPromise(t);return this.debouncedRequestService.request({promise:n,allowMerge:!1,allowDelay:!1})}))}close(){return(0,l.sH)(this,void 0,void 0,(function*(){yield this.debouncedRequestService.request({promise:this.getClosePromise(),allowMerge:!1,allowDelay:!1})}))}updateSessionWidgetDefaults(e,t){this.sessionStageInitial&&(this.sessionStageInitial.widgetDefaults=this.getWidgetDefaults(e,t))}abandon(e){return(0,l.sH)(this,void 0,void 0,(function*(){return this.debouncedRequestService.request({promise:this.getAbandonPromise(e),allowMerge:!1,allowDelay:!1})}))}getNextScreen(e){return(0,l.sH)(this,void 0,void 0,(function*(){const t=typeof e.clientHour,n=typeof e.clientWeekday;if("number"!==t||"number"!==n||void 0===e.clientHour||void 0===e.clientWeekday){const i=new Date;this.sentry.captureException(new Error("getNextScreen params clientHour or clientWeekday is not a number"),{extra:{params:e,dateForComparisonHour:i.getHours(),dateForComparisonWeekday:i.getDay(),clientHourType:t,clientWeekdayType:n}})}return this.requestService.post({url:`${this.params.baseURL}/${ce}/${this.params.token}/getNextScreen`,headers:this.headers,params:e,cancelSimilar:!0,rejectOnInvalid:!0})}))}getFeeCovering(e){return this.requestService.post({url:`${this.params.baseURL}/${ce}/getFeeCovering?token=${this.params.token}`,headers:this.headers,params:e,cancelSimilar:!0,rejectOnInvalid:!0})}getPostPromise(e,t,n){return()=>(0,l.sH)(this,void 0,void 0,(function*(){let i;try{i=yield this.requestService.post({url:`${this.params.baseURL}/${ce}/${this.params.token}/${e}`,headers:this.headers,params:t,rejectOnInvalid:null==n?void 0:n.rejectsOnInvalid,setCustomFingerprint:!0})}catch(e){throw this.sentry.captureException(e),e}return i}))}getUpdaterPromise(e){return()=>(0,l.sH)(this,void 0,void 0,(function*(){let t;if(Zf()(e,this.latestUpdatePayload)&&this.latestUpdateResponse)return Yt.success(this.latestUpdateResponse);try{t=yield this.requestService.post({url:`${this.params.baseURL}/${ce}/${this.params.token}`,headers:this.headers,params:e,setCustomFingerprint:!0})}catch(e){throw this.sentry.captureException(e),e}return Yt.isSuccess(t)?(this.created=!0,this.latestUpdateResponse=t.successResult,this.latestUpdatePayload=e,t):this.handleSessionUpdateFailure(t)}))}getClosePromise(){return()=>this.requestService.post({url:`${this.params.baseURL}/${ce}/${this.params.token}/close`,headers:this.headers,params:{},rejectOnInvalid:!0})}getAbandonPromise(e){return()=>(0,l.sH)(this,void 0,void 0,(function*(){let t;try{t=yield this.requestService.post({url:`${this.params.baseURL}/${ce}/${this.params.token}/abandon`,headers:this.headers,params:e,rejectOnInvalid:!0})}catch(e){throw this.sentry.captureException(e),e}return Yt.isSuccess(t)?t:this.handleSessionAbandonFailure(t)}))}set sessionStageInitial(e){this._sessionStageInitial=e}handleSessionUpdateFailure(e){var t;const n=!!(null===(t=e.failureResult.errors)||void 0===t?void 0:t.customerEmail);return n?Yt.fail({customerEmailError:n}):Yt.fail({})}handleSessionAbandonFailure(e){var t;const n=!!(null===(t=e.failureResult.errors)||void 0===t?void 0:t.customerEmail);return n?Yt.fail({customerEmailError:n}):Yt.fail({})}getSessionStageInitial(e){var t,n,i,s,a,r,o;const c=window.location.href,l=(0,Be.UA)(c);return{token:this.tracker.checkoutViewId,key:this.checkoutConfiguration.campaign.key,livemode:this.checkoutConfiguration.infrastructureParams.livemode,urlParams:l,widgetUrl:c,launcherParams:this.checkoutConfiguration.launcherParams,timezone:_i(),trackerParams:{clientId:this.tracker.clientId,pageViewId:null!==(t=this.tracker.pageViewId)&&void 0!==t?t:"",checkoutViewId:this.tracker.checkoutViewId,clientLocale:this.tracker.clientLocale,uaWebdriver:Boolean(navigator.webdriver),tags:this.tracker.getTags()},widgetDefaults:this.getWidgetDefaults(e.donation.amount||0,e.checkoutDefaults),customFields:this.checkoutConfiguration.getInitialCustomFields(),elementKey:this.checkoutConfiguration.element.key,elementType:this.checkoutConfiguration.element.type,elementReminderKey:this.checkoutConfiguration.element.reminderKey||"",fundraisingPageKey:(null===(n=this.checkoutConfiguration.fundraisingPage)||void 0===n?void 0:n.key)||"",fundraisingPageCustomFields:(null===(i=this.checkoutConfiguration.fundraisingPage)||void 0===i?void 0:i.customFields)||[],startUrl:"",launcherUrl:"",checkoutV2:!0,checkoutType:this.checkoutConfiguration.checkoutType,checkoutIntentCustomFields:null!==(o=null===(r=null===(a=null===(s=this.checkoutConfiguration.externalConfig.checkoutIntent)||void 0===s?void 0:s.checkoutSettings)||void 0===a?void 0:a.customFields)||void 0===r?void 0:r.filter((e=>e.name&&e.value)))&&void 0!==o?o:[]}}getWidgetDefaults(e,t){return{amount:t.defaultAmounts,frequency:t.frequency,amountOptions:t.amountOptions,currency:t.currency,relations:{amount:oC([t.defaultAmount],e),amountOptions:oC(t.frequencyAmountOptions,e)}}}waitForCreated(e,t){return(0,l.sH)(this,arguments,void 0,(function*(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;if(this.isCreated)try{return yield e()}catch(i){if(n>=t.retries)throw this.sentry.captureException(i),i;return yield new Promise((e=>setTimeout(e,t.delay))),this.waitForCreated(e,t,++n)}return yield new Promise((e=>setTimeout(e,t.delay))),this.waitForCreated(e,t,++n)}))}}cC.SESSION_UPDATE_DEBOUNCE=100;class lC extends cC{}class uC{constructor(e,t,n){this.dataPointRegistry=e,this.checkoutConfiguration=t,this.sessionAPI=n,this._closed=!1,this.sessionClosePromise=null}get closed(){return this._closed}get closing(){return!!this.sessionClosePromise}updateSessionWidgetDefaults(){}closeSession(){return(0,l.sH)(this,void 0,void 0,(function*(){if(!this.closed&&!this.checkoutConfiguration.infrastructureParams.showcase){if(this.sessionClosePromise)return this.sessionClosePromise;this.sessionClosePromise=this.sessionAPI.close();try{yield this.sessionClosePromise,this._closed=!0}finally{this.sessionClosePromise=null}}}))}abandonSession(){return(0,l.sH)(this,void 0,void 0,(function*(){const e=this.getDataPoint(Ra.REMIND_ME_LATER).toObject(),t=this.getDataPoint(Ra.DONOR_EMAIL).toObject(),n={remindMeLater:{shown:e.shown,used:e.used}};return t.email&&(n.email=t.email),this.sessionAPI.abandon(n)}))}getDataPoint(e){return this.dataPointRegistry.getDataPoint(e)}}var dC;!function(e){e.NONE="none",e.RANDOM="random"}(dC||(dC={}));const hC=e=>{const{type:t,generalConsent:n,isGeneralConsentShown:i}=e;return t===u.kt.GENERAL?{type:u.Au.GENERAL,general:(s=i,a=n.isAccepted,s?a?u.Bg.OPTED_IN:u.Bg.OPTED_OUT:u.Bg.NOT_SUBMITTED),customized:{email:u.Bg.NOT_SUBMITTED,phoneCalls:u.Bg.NOT_SUBMITTED,postalMail:u.Bg.NOT_SUBMITTED,sms:u.Bg.NOT_SUBMITTED,socialMedia:u.Bg.NOT_SUBMITTED}}:{type:u.Au.GENERAL,general:u.Bg.NOT_SUBMITTED,customized:{email:u.Bg.NOT_SUBMITTED,phoneCalls:u.Bg.NOT_SUBMITTED,postalMail:u.Bg.NOT_SUBMITTED,sms:u.Bg.NOT_SUBMITTED,socialMedia:u.Bg.NOT_SUBMITTED}};var s,a};class mC extends uC{updateSession(e){return(0,l.sH)(this,void 0,void 0,(function*(){if(this.checkoutConfiguration.infrastructureParams.showcase)return Yt.success({});const t=this.getDataPoint(Ra.TRIBUTE),n=this.getDataPoint(Ra.COMMENT),i=this.getDataPoint(Ra.DESIGNATION),s=this.getDataPoint(wa.DONATION),a=s.toObject(),r=this.getDonationAmount(s,e),o=this.dataPointRegistry.getDataPoint(Ra.DONOR_NAME).toObject(),c=this.dataPointRegistry.getDataPoint(Ra.DONOR_EMAIL).toObject(),l=this.getDataPoint(Ra.CUSTOMER_TITLE).toObject(),u=this.getDataPoint(Ra.PHONE_NUMBER).toObject(),d=t.toObject(),h=this.getDataPoint(Ra.QUESTIONS).toObject(),m=this.dataPointRegistry.getDataPoint(Ra.TERMS_AND_CONDITIONS).toObject(),p=this.getDataPoint(Ra.ON_BEHALF_OF).toObject(),g=this.dataPointRegistry.getDataPoint(Ra.DONATE_ANONYMOUS).toObject(),y=this.getDataPoint(Ra.COMMUNICATION_CONSENT).toObject();return this.sessionAPI.update({donationType:fe.CRYPTO,comment:n.isActive?n.comment:"",tribute:d.inHonorOf&&t.isActive?{labelType:d.labelType,type:d.type,inHonorOf:d.inHonorOf}:null,questions:h.questions,customer:{firstName:o.firstName,lastName:o.lastName,title:l.title,email:c.email,phone:u.phone,onBehalfOf:p.companyName,anonymousChecked:g.anonymousChecked,termsChecked:m.isAccepted,consent:hC(y)},donation:{frequency:se.ONCE,amount:r.amount,currency:a.currency,total:r.total,publicFee:0,goalKey:i.goalKey,goalName:i.goalName,hintsVariantName:dC.NONE,hintDescription:"",_suggestedAmountHint:null},checkoutDefaults:this.getCheckoutDefaults(s)})}))}getCheckoutDefaults(e){return{amountOptions:this.checkoutConfiguration.defaultAmountOptions,defaultAmounts:this.checkoutConfiguration.defaultAmounts,frequency:e.frequency,currency:e.currency,frequencyAmountOptions:this.checkoutConfiguration.campaign.config.frequencies[e.frequency].amountOptions,defaultAmount:this.checkoutConfiguration.defaultAmounts[e.frequency]||0}}getDonationAmount(e,t){if((null==t?void 0:t.canUseAmountDefaults)&&!e.amount)return{amount:e.getDefaultAmountInCurrency(),total:e.getDefaultTotalInCurrency()};const n=e.toObject();return{amount:n.amount,total:n.total}}}var pC=n(2650);const gC=[{name:dC.RANDOM,weight:1}];class yC{constructor(e){this.checkoutConfiguration=e}validate(){return{isValid:!0}}}class fC extends yC{constructor(e,t){super(e),this.checkoutConfiguration=e,this.currencyService=t,this.isEnabled=!0,this.isRequired=!0}getCurrencyName(e){return this.currencyService.getName(e)}getTotalInCustomCurrency(e){return this.currencyService.convert(this.total,this.currency,e)}}const SC=1e7;class AC extends fC{constructor(e,t,n){super(e,t),this.checkoutConfiguration=e,this.currencyService=t,this.suggestionsService=n,this.isEnabled=!0,this.isRequired=!0,this.currency="BTC",this.defaultCurrency="BTC",this.amount=0,this.defaultAmountInFiat=0,this.canModifyAmount=!0,this.canSelectCurrency=!0,this.currencyList.includes(this.currency)||(this.currency=this.currencyList[0],this.defaultCurrency=this.currencyList[0]),this.setAmountByDefault(this.defaultCurrency)}get frequency(){return se.ONCE}get minAmount(){return 100}get maxAmount(){return 1e8}get defaultAmount(){return 5e5}get total(){return this.amount||0}get amountInUSD(){return this.amount?this.currencyService.convert(this.amount,this.currency,"USD"):null}get totalInUSD(){return this.currencyService.convert(this.total,this.currency,"USD")}get defaultFiatCurrency(){return this.checkoutConfiguration.campaign.config.defaultCurrency}get amountInDefaultFiat(){return this.currencyService.convert(this.amount||0,this.currency,this.defaultFiatCurrency)}get totalInDefaultCurrency(){return this.total}get currencyNetworkData(){return this.currencyService.getCryptoCurrency(this.currency)}get currencyList(){const e=this.checkoutConfiguration.company.cryptoProvider;return e?this.currencyService.getCurrencyCodesBySource(e):["BTC"]}getDefaultAmountsInCurrency(){return this.total}validate(){const e=null!==this.amount,t=!e||this.validateMinAmount(),n=!e||this.validateMaxAmount(),i={isValid:e&&t&&n,errors:{min:!t,max:!n,required:!e}};return{isValid:i.isValid,fields:{amount:i}}}toObject(){return{amount:this.amount||0,total:this.amount||0,currency:this.currency,frequency:this.frequency}}setAmountByDefault(e){this.amount=this.getDefaultAmountInCurrency(e),this.defaultAmountInFiat=this.amountInDefaultFiat}getDefaultAmountInCurrency(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.currency;const t=this.currencyService.convert(this.defaultAmount,"USD",e),n=this.currencyService.toFloat(t,e),i=this.getAmountByDefaultMultiplier(n);return this.beautify(t*i,e)/i}getDefaultTotalInCurrency(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.currency;return this.getDefaultAmountInCurrency(e)}validateMinAmount(){return!!this.amountInUSD&&this.amountInUSD>=this.minAmount}validateMaxAmount(){return!this.amountInUSD||this.amountInUSD<=this.maxAmount}getAmountByDefaultMultiplier(e){let t=1;return e<10?t=this.getBaseMultiplier(e):e>SC&&(t=this.getBaseMultiplier(e/SC,0)),t}getBaseMultiplier(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;const n=-Math.floor(Math.log10(e));return Math.pow(10,n+t)}beautify(e,t){return this.suggestionsService.beautify(e,t)}}class EC{}var CC,vC,NC,bC,PC;!function(e){e.MR="Mr",e.MRS="Mrs",e.MISS="Miss",e.MS="Ms",e.MX="Mx",e.SIR="Sir",e.DR="Dr",e.REV="Rev",e.DCN="Dcn",e.FR="Fr",e.BR="Br",e.SR="Sr",e.PROF="Prof"}(CC||(CC={})),function(e){e.M="M",e.MME="Mme",e.MLLE="Mlle",e.AUTRE="Autre"}(vC||(vC={})),function(e){e.HERR="Herr",e.FRAU="Frau",e.DR="Dr",e.PROF="Prof"}(NC||(NC={})),function(e){e.HERR="Herr",e.FRAU="Frau"}(bC||(bC={}));class DC extends EC{constructor(){super(...arguments),this.isEnabled=!0,this.titles=IC(Object.values(bC))}}class _C extends EC{constructor(){super(...arguments),this.isEnabled=!1,this.titles=[]}}(PC||(PC={})).NONE="";const TC=Array.from(new Set([PC.NONE,...Object.values(CC),...Object.values(vC),...Object.values(NC),...Object.values(bC)]));class OC extends EC{constructor(){super(...arguments),this.isEnabled=!0,this.titles=IC(Object.values(vC))}}class xC extends EC{constructor(){super(...arguments),this.isEnabled=!0,this.titles=IC(Object.values(NC))}}class kC extends EC{constructor(){super(...arguments),this.isEnabled=!0,this.titles=IC(Object.values(CC))}}function IC(e){return[PC.NONE,...e]}var wC={isAvailableCustomerTitle:function(e){return!!e&&TC.includes(e)}},RC=function(e){return function(e,t){switch(e){case Fh.UNITED_KINGDOM:return new kC;case Fh.FRANCE:return new OC;case Fh.GERMANY:return new xC;case Fh.AUSTRIA:return new DC;case Fh.CANADA:return t===w.D.FR_CA?new OC:new _C;default:return new _C}}(e.companyCountry,e.companyDefaultLocale)};class MC extends yC{static get defaultValidationResult(){return{isValid:!0,fields:{title:{isValid:!0,errors:{required:!1}}}}}constructor(e){super(e),this.checkoutConfiguration=e,this._isEnabled=null,this._isRequired=null,this._title=PC.NONE;const t=this.checkoutConfiguration.company;this._customerTitlesLogic=RC({companyCountry:t.country,companyDefaultLocale:t.localization.defaultLocale})}get isEnabled(){return null!==this._isEnabled?this._isEnabled:this.checkoutConfiguration.campaign.config.customerTitle.show&&this._customerTitlesLogic.isEnabled}get isRequired(){return null!==this._isRequired?this._isRequired:this.checkoutConfiguration.campaign.config.customerTitle.required&&this.isEnabled}get title(){return this._title}get titleList(){return this._customerTitlesLogic.titles}set isEnabled(e){this._isEnabled=e}set isRequired(e){this._isRequired=e}setTitle(e){this._title=e}toObject(){return{title:this.title}}validate(){const e=!this.isRequired||wC.isAvailableCustomerTitle(this.title);return{isValid:e,fields:{title:{isValid:e,errors:{required:!e}}}}}}class LC{constructor(e){this.deviceExperimentsSettings=e}getSuggestions(e){if(this.shouldSortSuggestions)return this.sortSuggestionsBasedOnCompanyExclusions(e)}getAmount(){if(this.shouldHideDefaultAmount)return this.showAmountBasedOnCompanyExclusions()}get shouldSortSuggestions(){return"ascSort"in this.deviceExperimentsSettings}get shouldHideDefaultAmount(){return"hasDefault"in this.deviceExperimentsSettings}sortSuggestionsBasedOnCompanyExclusions(e){return t=[...e],(n=this.deviceExperimentsSettings.ascSort?be.ASC:be.DESC)===be.ASC?t.sort(((e,t)=>e-t)):n===be.DESC?t.sort(((e,t)=>t-e)):t;var t,n}showAmountBasedOnCompanyExclusions(){if(!this.deviceExperimentsSettings.hasDefault)return null}}class UC{static convertMinAmount(e,t,n,i){let s=Math.max(t,e.convert(70,"USD",n));s=e.convert(s,n,i);const a=e.getDigits(i);return Math.ceil(s/Math.pow(10,a))*Math.pow(10,a)}constructor(e,t,n){var i,s;this.currencyService=t,this.suggestionsService=n,this.forceNullAmountWidgets=["FUNFXDEZPWX"],this.defaultData=Object.assign(Object.assign({},e),{disableCompanyExclusionLogic:{amounts:Boolean(null===(i=e.disableCompanyExclusionLogic)||void 0===i?void 0:i.amounts),suggestions:Boolean(null===(s=e.disableCompanyExclusionLogic)||void 0===s?void 0:s.suggestions)}}),this.currentData={frequency:this.defaultData.frequency,amount:this.defaultData.defaultAmount,minAmount:this.defaultData.minAmount||0,suggestions:this.defaultData.amountOptions,hintsAmounts:this.defaultData.hintsAmounts,isDonationEndDateActive:!this.defaultData.isExternalDonationEndDateShown||!!this.defaultData.isExternalDonationEndDateActive},this.setupCurrentData()}get amount(){return this.currentData.amount}get minAmount(){return this.currentData.minAmount}get isValidAmount(){return null!==this.currentData.amount&&this.currentData.amount>=this.currentData.minAmount}get suggestions(){return this.currentData.suggestions}get hintsAmounts(){return this.currentData.hintsAmounts||null}get currency(){return this.defaultData.currentCurrency}get currencyDigits(){return this.currencyService.getDigits(this.defaultData.currentCurrency)}get isDonationEndDateActive(){return this.currentData.isDonationEndDateActive}setDonationEndDateActive(e){this.currentData.isDonationEndDateActive=e}setAmount(e){this.currentData.amount=e,this.defaultData.disableAmountAI=!0}setCurrency(e,t){this.defaultData.previousCurrency=this.defaultData.currentCurrency,this.defaultData.currentCurrency=e,this.defaultData.disableAmountAI=!0,this.resetMinAmount(),t||(this.resetAmount(),this.applyNAIAmount(),this.applyRoundAmount()),this.resetSuggestions(),this.applyNAISuggestions(),this.applyRoundSuggestions(),this.resetHints(),this.applyRoundHints(),this.applyCompanyExclusions(),this.applyWidgetExclusions()}setSuggestionsAndDisableAi(e,t){this.defaultData.amountOptions=t,this.currentData.suggestions=e,this.defaultData.disableSuggestionsAI=!0}get needNAIAmount(){return Boolean(this.defaultData.aiEnabled&&!this.defaultData.showcase&&this.defaultData.trend&&!this.defaultData.disableAmountAI)}get needNAISuggestions(){return Boolean(this.defaultData.aiEnabled&&!this.defaultData.disableSuggestionsAI&&!this.defaultData.showcase&&this.defaultData.trend)}get suggestionsMultiplier(){return this.defaultData.isLauncher||!this.defaultData.aiEnabled||this.defaultData.disableAmountAI||this.defaultData.disableSuggestionsAI||!this.deviceExperimentsSettings.multiplySuggestions?1:1.4}get deviceExperimentsSettings(){return this.defaultData.experimentsSettings[this.defaultData.isMobile?u.Jy.MOBILE:u.Jy.DESKTOP]}setupCurrentData(){this.resetMinAmount(),this.resetAmount(),this.applyNAIAmount(),this.applyRoundAmount(),this.resetSuggestions(),this.applyNAISuggestions(),this.applyRoundSuggestions(),this.resetHints(),this.applyRoundHints(),this.applyCompanyExclusions(),this.applyWidgetExclusions()}resetMinAmount(){this.currentData.minAmount=UC.convertMinAmount(this.currencyService,this.defaultData.minAmount||0,this.defaultData.defaultCurrency,this.defaultData.currentCurrency)}resetAmount(){null!==this.currentData.amount&&(this.currentData.amount=this.currencyService.convert(this.currentData.amount,this.defaultData.previousCurrency,this.defaultData.currentCurrency,this.defaultData.aiEnabled&&!this.defaultData.disableAmountAI,this.defaultData.countryCode))}applyNAIAmount(){const e=this.defaultData.trend[this.currentData.frequency];var t,n;if(null!==this.currentData.amount&&this.needNAIAmount){let i=this.currencyService.convert(e,this.defaultData.defaultCurrency,this.defaultData.currentCurrency,!1,this.defaultData.countryCode);((n=this.currentData.amount)-e)/n*100>10&&(i=this.currentData.amount-this.currentData.amount/10),this.currentData.amount=e?i:(t=this.defaultData.xFactor,this.currentData.amount*(1+t/100))}}applyRoundAmount(){null!==this.currentData.amount&&(this.needNAIAmount||this.defaultData.previousCurrency!==this.defaultData.currentCurrency)&&(this.currentData.amount=this.suggestionsService.beautify(this.currentData.amount,this.defaultData.currentCurrency,this.currentData.minAmount))}resetSuggestions(){this.currentData.suggestions=this.defaultData.amountOptions.map((e=>this.currencyService.convert(e,this.defaultData.defaultCurrency,this.defaultData.currentCurrency,this.defaultData.aiEnabled&&!this.defaultData.disableSuggestionsAI,this.defaultData.countryCode)))}applyNAISuggestions(){this.needNAISuggestions&&(this.currentData.suggestions=function(e,t){let n=[e/4,e/3,e/2,e,1.3*e];return 3===t.length&&(n=[e/2,e]),t=t.sort(((e,t)=>e-t)),n.forEach(((e,n)=>{const i=n+1;t[i]<5e4&&(t[i]=t[i]*(1+e/100))})),t=t.sort(((e,t)=>t-e))}(this.defaultData.xFactor,this.currentData.suggestions))}applyRoundSuggestions(){if(this.needNAISuggestions||this.defaultData.currentCurrency!==this.defaultData.defaultCurrency){const e=this.currentData.suggestions.map((e=>{const t=e*this.suggestionsMultiplier;return this.defaultData.aiEnabled?Math.max(t,this.currentData.minAmount):t}));this.currentData.suggestions=this.suggestionsService.beautify(e,this.defaultData.currentCurrency,this.currentData.minAmount)}}resetHints(){this.defaultData.hintsAmounts&&(this.currentData.hintsAmounts=this.defaultData.hintsAmounts.map((e=>this.currencyService.convert(e,this.defaultData.defaultCurrency,this.defaultData.currentCurrency,!1,this.defaultData.countryCode))))}applyRoundHints(){this.currentData.hintsAmounts&&this.defaultData.currentCurrency!==this.defaultData.defaultCurrency&&(this.currentData.hintsAmounts=this.suggestionsService.beautify(this.currentData.hintsAmounts,this.defaultData.currentCurrency,this.currentData.minAmount))}applyCompanyExclusions(){const e=this.defaultData.disableCompanyExclusionLogic.amounts||this.defaultData.disableCompanyExclusionLogic.suggestions;if(!this.defaultData.aiEnabled&&!e)return;const t=new LC(this.deviceExperimentsSettings),n=t.getSuggestions(this.currentData.suggestions);if(!n||this.defaultData.disableCompanyExclusionLogic.suggestions||this.defaultData.disableSuggestionsAI||(this.currentData.suggestions=n),this.defaultData.disableAmountAI)return;const i=t.getAmount();null!==i||this.defaultData.disableCompanyExclusionLogic.amounts||(this.currentData.amount=i)}applyWidgetExclusions(){this.defaultData.widgetKey&&this.forceNullAmountWidgets.includes(this.defaultData.widgetKey)&&(this.currentData.amount=null)}}class FC{static get frequencyOrder(){return le}static convertMinAmount(e,t,n,i){let s=Math.max(t,FC.getMinInWidgetCurrency(e,n));s=e.convert(s,n,i);const a=e.getDigits(i);return Math.ceil(s/Math.pow(10,a))*Math.pow(10,a)}static getMinInWidgetCurrency(e,t){return e.convert(70,"USD",t)}constructor(e,t,n,i){if(this.exchequerCurrencyService=t,this.currencyService=n,this.suggestionsService=i,this.currentFrequency=se.ONCE,this.strategyMap=new Map,this._enabledFrequencies=[],this.frequencies=Object.keys(e.frequencies),this._enabledFrequencies=Object.entries(e.frequencies).filter((e=>{let[,t]=e;return t.enabled})).map((e=>{let[t]=e;return t})),this.initStrategies(e),e.forceDefaultAmount){const t=this.getCurrentCurrency();this.setCurrency(e.defaultCurrency),this.setAmounts(e.forceDefaultAmount),this.setCurrency(t)}}get enabledFrequencies(){return this._enabledFrequencies}get isDonationEndDateActive(){return this.getStrategy(this.currentFrequency).isDonationEndDateActive}getCurrentFrequency(){return this.currentFrequency}getCurrentAmount(){return this.getStrategy(this.currentFrequency).amount}getCurrentCurrency(){return this.getStrategy(this.currentFrequency).currency}getAllAmounts(){const e={};for(const t of this.frequencies)e[t]=this.getStrategy(t).amount;return e}getAllMinAmounts(){const e={};for(const t of this.frequencies)e[t]=this.getStrategy(t).minAmount;return e}getAllSuggestions(){const e={};for(const t of this.frequencies)e[t]=this.getStrategy(t).suggestions;return e}setDonationEndDateActive(e){this.getStrategy(this.currentFrequency).setDonationEndDateActive(e)}setSuggestionsAndDisableAi(e,t,n){this.getStrategy(n).setSuggestionsAndDisableAi(e,t)}getAllHintsAmounts(){const e={};for(const t of this.frequencies)e[t]=this.getStrategy(t).hintsAmounts;return e}getGuessedCurrency(){return this.exchequerCurrencyService.guessedCurrency}getGuessedCurrenciesList(){return this.exchequerCurrencyService.guessedCurrenciesList}setFrequency(e){return this.currentFrequency=e,this}setAmount(e){return this.getStrategy(this.currentFrequency).setAmount(e),this}setAmountForFrequency(e,t){return this.getStrategy(t).setAmount(e),this}setAmounts(e){return this.strategyMap.forEach((t=>{t.setAmount(e)})),this}setCurrency(e,t){return this.strategyMap.forEach((n=>{n.setCurrency(e,t)})),this}getHighestFrequency(){if(1===this.enabledFrequencies.length)return this.enabledFrequencies[0];let e=this.enabledFrequencies[0];for(const t of this.enabledFrequencies)FC.frequencyOrder[t]>FC.frequencyOrder[e]&&(e=t);return e}getLowestFrequency(){if(1===this.enabledFrequencies.length)return this.enabledFrequencies[0];let e=this.enabledFrequencies[0];for(const t of this.enabledFrequencies)FC.frequencyOrder[t]<FC.frequencyOrder[e]&&(e=t);return e}getCurrentState(){const e=this.getStrategy(this.currentFrequency);return{frequency:this.currentFrequency,amount:e.amount,minAmount:e.minAmount,isValidAmount:e.isValidAmount,suggestions:e.suggestions,hintsAmounts:e.hintsAmounts,currency:e.currency,currencyDigits:e.currencyDigits,guessedCurrenciesList:this.exchequerCurrencyService.guessedCurrenciesList,guessedCurrency:this.exchequerCurrencyService.guessedCurrency}}getStrategy(e){const t=this.strategyMap.get(e);if(!t)throw new Error(`Strategy for frequency ${e} is not defined`);return t}initStrategies(e){for(const t of this.frequencies){e.frequencies[t].default&&(this.currentFrequency=t);const n=oe[t].map(((n,i)=>e.frequencies[t].amountOptions[i]||n)),i=e.hintsAmounts&&e.hintsAmounts[t]||null,s=this.shouldDisableAi(t,e);this.strategyMap.set(t,new UC({widgetKey:e.widgetKey,countryCode:e.countryCode,defaultCurrency:e.defaultCurrency,isMobile:e.isMobile,isLauncher:e.isLauncher,showcase:e.showcase,aiEnabled:e.aiEnabled&&!s,disableAmountAI:e.disableAmountAI,disableSuggestionsAI:e.disableSuggestionsAI,trend:e.trend,xFactor:e.xFactor,disableCompanyExclusionLogic:e.disableCompanyExclusionLogic,experimentsSettings:e.experimentsSettings,frequency:t,minAmount:e.frequencies[t].minAmount,defaultAmount:e.frequencies[t].defaultAmount,amountOptions:n,currentCurrency:this.exchequerCurrencyService.defaultCurrentCurrency,previousCurrency:this.exchequerCurrencyService.defaultPreviousCurrency,isExternalDonationEndDateShown:e.isExternalDonationEndDateShown,isExternalDonationEndDateActive:e.isExternalDonationEndDateActive,hintsAmounts:i},this.currencyService,this.suggestionsService))}}shouldDisableAi(e,t){return"FUNGQSSKQKB"===t.widgetKey&&t.isMobile&&e===se.ONCE}}class jC{constructor(e){this.defaultData=e,this._guessedCurrenciesList=[],this._guessedCurrency="",this._defaultPreviousCurrency="",this._defaultCurrentCurrency="",this.initGuessedCurrenciesList(),this.initGuessedCurrency(),this.initCurrency()}get guessedCurrenciesList(){return this._guessedCurrenciesList}get guessedCurrency(){return this._guessedCurrency}get defaultPreviousCurrency(){return this._defaultPreviousCurrency}get defaultCurrentCurrency(){return this._defaultCurrentCurrency}initGuessedCurrenciesList(){const e=this.defaultData.defaultCurrency,t=this.defaultData.currencies.countryCurrencies[0],n=this.defaultData.currencies.stripe.default,i=this.defaultData.currencies.countryCurrencies.slice(1),s=this.defaultData.currencies.langCurrencies,a=this.defaultData.currencies.stripe.list;var r;this._guessedCurrenciesList=(r=[e,t,n,...i,...s].filter((e=>a.includes(e))),[...new Set(r)])}initGuessedCurrency(){const e=this.defaultData.currencies.countryCurrencies;!this.defaultData.showcase&&this.defaultData.guessCurrency&&this.defaultData.isCurrencyEnabled&&e.length&&this._guessedCurrenciesList.includes(e[0])?this._guessedCurrency=e[0]:this._guessedCurrency=this.defaultData.defaultCurrency||"USD"}initCurrency(){this._defaultCurrentCurrency=this.defaultData.defaultCurrency,this._defaultPreviousCurrency=this.defaultData.defaultCurrency,this._guessedCurrency!==this._defaultCurrentCurrency&&(this._defaultCurrentCurrency=this._guessedCurrency)}}function BC(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Date;const t=new Date(Date.parse(new Date(e).toISOString())+1e3*(new Date).getTimezoneOffset()*60);return new Date(t.getFullYear(),t.getMonth(),t.getDate(),23,59,59,999)}class HC extends fC{static get defaultValidationResult(){return{isValid:!0,fields:{amount:{isValid:!0,errors:{required:!1,min:!1,max:!1}}}}}constructor(e,t,n,i,s,a,r){super(e,t),this.checkoutConfiguration=e,this.currencyService=t,this.suggestionsService=n,this.experiments=i,this.userSession=s,this.transactionCosts=a,this.suggestedAmountHintsAI=r,this.isEnabled=!0,this.isRequired=!0,this._defaultAmount=null,this._feeCoveringSuggestion=u.XN.ONLY_NO,this.synchronizeHintsAmounts(),this.synchronizeFee()}get defaultAmount(){return this._defaultAmount}get defaultTotal(){var e;return this.transactionCosts.getTotal(null!==(e=this.defaultAmount)&&void 0!==e?e:0,this.currency)}get amount(){return this.exchequer.getCurrentAmount()}get totalInUSD(){return this.currencyService.convert(this.total,this.currency,"USD")}get totalInDefaultCurrency(){return this.currencyService.convert(this.total,this.currency,this.defaultCurrency)}get fee(){return this.transactionCosts.getFee(this.amount||0,this.currency)}get processingFee(){return this.transactionCosts.getProcessingFee(this.amount||0,this.currency)}get isRecurring(){return this.frequency!==se.ONCE}get frequency(){return this.exchequer.getCurrentFrequency()}get currency(){return this.exchequer.getCurrentCurrency()}get defaultFrequency(){return this.exchequerWithDefaults.getCurrentFrequency()}get defaultAmounts(){return this.exchequerWithDefaults.getAllAmounts()}get allAmountOptions(){return this.exchequer.getAllSuggestions()}get amountOptions(){return this.getAmountOptions(this.frequency)}get hintOptions(){return this.suggestedAmountHintsAI?this.suggestedAmountHintsAI.getHintsByFrequency(this.frequency):null}get currentHint(){var e;return(null===(e=this.hintOptions)||void 0===e?void 0:e.find((e=>e.default)))||null}get hintsVariantName(){var e;return this.currentHint&&(null===(e=this.suggestedAmountHintsAI)||void 0===e?void 0:e.variantName)||dC.NONE}get minAmount(){return this.getMinAmount(this.frequency)}get maxAmount(){const e=(0,$d.Bm)(this.currency),t="9".repeat(e);return parseInt(t,10)}get minTotal(){return this.transactionCosts.getTotal(this.minAmount,this.currency)}get canModifyAmount(){var e;if(!1===this.externalCheckoutData.modifyAmount)return!1;if(!1===this.checkoutConfiguration.queryParams.modifyAmount)return!1;const t=null===(e=this.checkoutConfiguration.externalConfig.checkoutIntent)||void 0===e?void 0:e.checkoutSettings;return!t||"boolean"!=typeof t.modifyAmount||t.modifyAmount}get canSelectCurrency(){return this.canSelectCurrencyForFrequency(this.frequency)}get defaultCurrency(){return this.checkoutConfiguration.campaign.config.defaultCurrency}get currencySymbol(){return this.currencyService.getSymbol(this.currency)}get lowFrequency(){return this.exchequer.getLowestFrequency()}get highFrequency(){return this.exchequer.getHighestFrequency()}get total(){const e=this.checkoutConfiguration.infrastructureParams.showcase?1e4:0;return this.transactionCosts.getTotal(this.amount||e,this.currency)}get currencyList(){return[...this.checkoutConfiguration.company.stripeCurrencies.list]}get guessedCurrency(){return this._guessedCurrency||(this._guessedCurrency=this.exchequer.getGuessedCurrency()),this._guessedCurrency}get guessedCurrencyList(){return this._guessedCurrencyList||(this._guessedCurrencyList=this.exchequer.getGuessedCurrenciesList()),this._guessedCurrencyList}get isFeeCovered(){return this.transactionCosts.isCovered}get isCustomFeeCoveredValue(){return this.transactionCosts.isCustomCoveredValue}get canModifyFrequency(){return Object.values(this.checkoutConfiguration.campaign.config.frequencies).filter((e=>e.enabled)).length>1}get amountInUSD(){return this.amount?this.currencyService.convert(this.amount,this.currency,"USD"):null}get includeFees(){return this.transactionCosts.includeFees}get donationHasEndDate(){return this.checkoutConfiguration.campaign.config.frequencies[this.frequency].hasEndDate}get donationEndDate(){const e=this.checkoutConfiguration.campaign.config.frequencies[this.frequency].endDate;return e?BC(e):null}get isDonationEndDateActive(){return this.exchequer.isDonationEndDateActive}get showDonationEndDate(){if(!this.donationHasEndDate||!this.donationEndDate)return!1;const e=BC();return this.donationEndDate>=e}set amount(e){this.exchequer.setAmounts(e),this.checkForAmountDefault(e)}set frequency(e){this.exchequer.setFrequency(e),this.checkForAmountDefault(this.amount),e===se.ONCE||this.canSelectCurrency||(this.currency=this.defaultCurrency)}set currency(e){const t=this.getDefaultAmountsInCurrency(this.frequency)!==this.amount;this.exchequerWithDefaults.setCurrency(e),this.exchequer.setCurrency(e,t),this._defaultAmount=this.getDefaultAmountsInCurrency(this.frequency)}set isFeeCovered(e){this.transactionCosts.isCovered=e}set isCustomFeeCoveredValue(e){this.transactionCosts.isCustomCoveredValue=e}changeDefaultAmountForFrequency(e,t){this.exchequerWithDefaults.setAmountForFrequency(e,t),this.exchequer.setAmountForFrequency(e,t),this.frequency===t&&(this._defaultAmount=this.getDefaultAmountsInCurrency(this.frequency))}setSuggestionsAndDisableAi(e,t,n){this.exchequerWithDefaults.setSuggestionsAndDisableAi(e,t,n),this.exchequer.setSuggestionsAndDisableAi(e,t,n)}setDonationEndDateActive(e){this.exchequer.setDonationEndDateActive(e)}getDefaultAmountsInCurrency(e){const t=this.defaultAmounts[e];if(void 0===t)throw new Error(`Default amount for frequency ${e} is not defined`);return t}getAmountOptions(e){const t=this.allAmountOptions[e];if(void 0===t)throw new Error(`Amount options for frequency ${e} are not defined`);return t}getMinAmount(e){const t=this.minAmounts[e];if(void 0===t)throw new Error(`Min amount for frequency ${e} is not defined`);return t}validate(){const e=null!==this.amount,t=!e||this.validateMinAmount(),n=!e||this.validateMaxAmount(),i={isValid:t&&n&&e,errors:{min:!t,max:!n,required:!e}};return{isValid:i.isValid,fields:{amount:i}}}snapshotFeeCoveringSuggestion(){this.isCustomFeeCoveredValue||(this.includeFees!==u.XN.ONLY_NO?this.includeFees!==u.XN.ONLY_YES?this._feeCoveringSuggestion=this.isFeeCovered?u.XN.DEFAULT_YES:u.XN.DEFAULT_NO:this._feeCoveringSuggestion=u.XN.ONLY_YES:this._feeCoveringSuggestion=u.XN.ONLY_NO)}isFrequencyEnabled(e){return this.exchequer.enabledFrequencies.includes(e)}toObject(){return{amount:this.amount||0,currency:this.currency,frequency:this.frequency,total:this.total,publicFee:this.processingFee,amountOptions:this.amountOptions,feeCoveringSuggestion:this._feeCoveringSuggestion,hintAmounts:this.hintsAmounts,hintsVariantName:this.hintsVariantName,currentHint:this.currentHint||null,maxDate:this.showDonationEndDate&&this.donationEndDate&&this.isDonationEndDateActive?this.donationEndDate.toISOString():null}}setDefaultAmounts(){this.exchequer.enabledFrequencies.forEach((e=>{var t;e!==this.frequency&&((null===(t=this.suggestedAmountHintsAI)||void 0===t?void 0:t.getHintsByFrequency(e))?this.setDefaultHintForFrequency(e):this.setDefaultAmountForFrequency(e))}))}synchronizeHintsAmounts(){if(!this.suggestedAmountHintsAI)return;const e=this.exchequer.getAllHintsAmounts();this.suggestedAmountHintsAI.updateHintsByAmounts(e),this.currentHint&&this.exchequer.setAmount(this.currentHint.amount)}synchronizeFee(){this.transactionCosts.calculateFeeAvailability({amount:this.amount,currency:this.currency}),this.isCustomFeeCoveredValue||this.includeFees!==u.XN.SMART_COVERING||(this.transactionCosts.calculateSmartFeeCovering({amountInUSD:this.amountInUSD,frequency:this.frequency}),this.snapshotFeeCoveringSuggestion())}updateHintsByDefault(e){this.suggestedAmountHintsAI&&this.suggestedAmountHintsAI.updateHintsByDefault(this.frequency,e)}resetHintsByDefault(){var e;if(this.suggestedAmountHintsAI)for(const t in this.suggestedAmountHintsAI.hints)null===(e=this.suggestedAmountHintsAI)||void 0===e||e.updateHintsByDefault(t,null)}isCurrencyEnabledForFrequency(e,t){return this.isCurrencyEnabled(e,t)}get minAmounts(){return this.exchequer.getAllMinAmounts()}get hintsAmounts(){return this.suggestedAmountHintsAI?this.suggestedAmountHintsAI.hintsAmounts:{[se.ONCE]:[],[se.DAILY]:[],[se.WEEKLY]:[],[se.BIWEEKLY]:[],[se.EVERY_4_WEEKS]:[],[se.MONTHLY]:[],[se.BIMONTHLY]:[],[se.QUARTERLY]:[],[se.SEMIANNUAL]:[],[se.ANNUAL]:[]}}get externalCheckoutData(){return this.checkoutConfiguration.externalConfig.checkoutData||{}}get exchequer(){return this._exchequer||(this._exchequer=this.getExchequer()),this._exchequer}get exchequerWithDefaults(){return this._exchequerWithDefaults||(this._exchequerWithDefaults=this.getExchequer()),this._exchequerWithDefaults}get guessCurrency(){return this.checkoutConfiguration.campaign.config.guessCurrency}get isMobile(){return this.checkoutConfiguration.infrastructureParams.isMobile}getExchequer(){var e,t,n,i,s;const a=this.checkoutConfiguration.campaign.config,r=this.checkoutConfiguration.user,o=this.checkoutConfiguration.currencies,c=this.checkoutConfiguration.company,l=x(a.frequencies),u=(0,Be.XU)(this.userSession,this.isMobile),d=!(!this.checkoutConfiguration.launcherParams.key&&!this.checkoutConfiguration.launcherParams.elementKey),h=this.getInitialFrequency(),m=this.canSelectCurrencyForFrequency(h),p={langCurrencies:[...o.langCurrencies]||[],countryCurrencies:[...o.countryCurrencies]||[],stripe:{default:c.stripeCurrencies.default,list:[...c.stripeCurrencies.list]}},g=new jC({currencies:p,defaultCurrency:this.defaultCurrency,guessCurrency:this.guessCurrency,isCurrencyEnabled:m,showcase:this.checkoutConfiguration.infrastructureParams.showcase}),y=new FC({widgetKey:this.checkoutConfiguration.campaign.key,countryCode:r.address.countryCode||"US",frequencies:l,currencies:p,defaultCurrency:this.defaultCurrency,isMobile:this.isMobile,isLauncher:d,showcase:this.checkoutConfiguration.infrastructureParams.showcase,aiEnabled:a.enableAI,disableAmountAI:this.checkoutConfiguration.hasExternalAmount,guessCurrency:this.guessCurrency,isCurrencyEnabled:a.currencyEnabled,trend:a.trend,xFactor:u,experimentsSettings:a.experimentsSettings,hintsAmounts:this.hintsAmounts,isExternalDonationEndDateShown:!!(null===(e=this.checkoutConfiguration.externalConfig.checkoutData)||void 0===e?void 0:e.showEndDate),isExternalDonationEndDateActive:!!(null===(t=this.checkoutConfiguration.externalConfig.checkoutData)||void 0===t?void 0:t.endDateEnabled)},g,this.currencyService,this.suggestionsService),f=this.getExternalFrequency();f&&y.setFrequency(f);const S=y.getCurrentCurrency(),A=this.getExternalCurrency(y.getCurrentFrequency()),E=this.getExternalAmount(A||S);if(!E&&A&&y.setCurrency(A),E&&(A?(y.setCurrency(A),y.setAmount(E)):(y.setCurrency(a.defaultCurrency),y.setAmount(E),y.setCurrency(S)),this.resetHintsByDefault()),this.externalCheckoutData.selectedHint){const e=y.getCurrentFrequency(),t=null===(i=null===(n=this.suggestedAmountHintsAI)||void 0===n?void 0:n.getHintsByFrequency(e))||void 0===i?void 0:i.find((e=>{var t;return e.id===(null===(t=this.externalCheckoutData.selectedHint)||void 0===t?void 0:t.id)}));t&&(null===(s=this.suggestedAmountHintsAI)||void 0===s||s.updateHintsByDefault(e,t))}return this._defaultAmount=y.getCurrentAmount(),y}validateMinAmount(){return!!this.amount&&this.amount>=this.minAmount}validateMaxAmount(){if(null===this.amount)return!0;const{length:e}=this.amount.toString();return e<=(0,$d.Bm)(this.currency)}checkForAmountDefault(e){this._defaultAmount=this.getDefaultAmountsInCurrency(this.frequency),this._defaultAmount===e&&this.exchequer.enabledFrequencies.forEach((e=>{this.setDefaultAmountForFrequency(e)}))}getExternalFrequency(){return this.externalCheckoutData.recurring&&ge.isFrequencyEnabled(this.checkoutConfiguration.campaign.config.frequencies,this.externalCheckoutData.recurring)?this.externalCheckoutData.recurring:this.checkoutConfiguration.queryParams.recurring&&ge.isFrequencyEnabled(this.checkoutConfiguration.campaign.config.frequencies,this.checkoutConfiguration.queryParams.recurring)?this.checkoutConfiguration.queryParams.recurring:null}getExternalCurrency(e){const t=this.externalCheckoutData.currency;if(t&&this.isCurrencyEnabled(t,e))return t;const n=this.checkoutConfiguration.queryParams.currency;return n&&this.isCurrencyEnabled(n,e)?n:null}getExternalAmount(e){return this.externalCheckoutData.amount||this.currencyService.fromFloat(this.checkoutConfiguration.queryParams.amount||0,e)}isCurrencyEnabled(e,t){return!!this.currencyList.includes(e)&&!!this.canSelectCurrencyForFrequency(t)}canSelectCurrencyForFrequency(e){const t=this.checkoutConfiguration.campaign.config;return e===se.ONCE?t.currencyEnabled:t.currencyEnabled&&t.currencyEnabledRecurrings}setDefaultAmountForFrequency(e){const t=this.getDefaultAmountsInCurrency(e);this.exchequer.setAmountForFrequency(t,e)}setDefaultHintForFrequency(e){var t,n,i,s;const a=null===(t=this.suggestedAmountHintsAI)||void 0===t?void 0:t.hints[e],r=null===(n=this.suggestedAmountHintsAI)||void 0===n?void 0:n.defaultHints[e];if(!a||!r)return;const o=null!==(i=a.find((e=>e.default)))&&void 0!==i?i:r.find((e=>e.default));o&&(null===(s=this.suggestedAmountHintsAI)||void 0===s||s.updateHintsByDefault(e,o),this.exchequer.setAmountForFrequency(o.amount,e))}getInitialFrequency(){const{frequencies:e}=this.checkoutConfiguration.campaign.config,t=Object.keys(e),n=this.getExternalFrequency(),i=t.find((t=>e[t].default));return n||i||se.ONCE}}class qC extends yC{static get defaultValidationResult(){return{isValid:!0,fields:{line1:{isValid:!0,errors:{required:!1}},line2:{isValid:!0,errors:{required:!1}},city:{isValid:!0,errors:{required:!1}},region:{isValid:!0,errors:{required:!1}},postal:{isValid:!0,errors:{required:!1}},countryCode:{isValid:!0,errors:{required:!1}}}}}static validateLine1(e){const t=!e.isRequired||!!e.line1;return{isValid:t,errors:{required:!t}}}static validateLine2(){return{isValid:!0,errors:{required:!1}}}static validateCity(e){const t=!(e.isRequired||e.line1)||!!e.city;return{isValid:t,errors:{required:!t}}}static validateCountryCode(e){const t=!(e.isRequired||e.line1)||!!e.countryCode;return{isValid:t,errors:{required:!t}}}constructor(e,t,n,i,s){super(e),this.checkoutConfiguration=e,this.addressService=t,this.addressValidationAPI=n,this.countriesService=i,this.mailingAddressCustomization=s,this._isEnabled=!1,this._isRequired=!1,this._line1="",this._line2="",this._city="",this._postal="",this._region="",this._countryCode=this.checkoutConfiguration.user.address.countryCode,this._isSkipped=!1,this.shouldAutofillRegion&&(this._region=this.formatGeoIpRegion(this.checkoutConfiguration.user.address.region,this.countryCode)),this._countryCode||(this._countryCode=this.getDefaultCountryCode())}get isEnabled(){return this._isEnabled}get isRequired(){return this._isRequired}get line1(){return this._line1}get line2(){return this._line2}get city(){return this._city}get postal(){return this._postal}get region(){return this._region}get countryCode(){return this._countryCode}get isSkipped(){return this._isSkipped}setLine1(e){this._line1=e}setLine1IfEmpty(e){this.line1.trim()||this.setLine1(e)}setLine2(e){this._line2=e}setLine2IfEmpty(e){this.line2.trim()||this.setLine2(e)}setCity(e){this._city=e}setCityIfEmpty(e){this.city.trim()||this.setCity(e)}setPostal(e){this._postal=e}setPostalIfEmpty(e){this.postal.trim()||this.setPostal(e)}setRegion(e){this._region=e}setRegionIfEmpty(e){this.region.trim()||this.setRegion(e)}setCountryCode(e){const t=this.mailingAddressCustomization.getPredefinedRegions({country:this.countryCode}),n=this.mailingAddressCustomization.getPredefinedRegions({country:e}),i=this.mailingAddressCustomization.isRegionEnabled({country:e});(t||n||!i)&&(this._region=""),this._countryCode=e}setCountryCodeIfEmptyAddress(e){this.line1.trim()||this.setCountryCode(e)}setComputedAvailability(e){this._isEnabled=e.isEnabled,this._isRequired=e.isRequired}getDetails(e,t){return this.addressService.getDetails({place:e,restrictCountries:[this.countryCode],sessionToken:t})}getSubplaces(e){return this.addressService.getSubplaces(Object.assign({},e))}getPlaces(e){return this.addressService.getPlaces(Object.assign({},e))}checkShouldValidateOnServer(){return!this.checkoutConfiguration.infrastructureParams.showcase&&(this.isRequired||!!this.line1)}toObject(){const e={isRequired:this.isRequired,line1:this.line1.trim(),city:this.city.trim(),region:this.region.trim(),postal:this.postal.trim(),countryCode:this.countryCode.trim()},t=this.line2.trim();return t&&(e.line2=t),e}validate(){const e=this.toObject(),t=qC.validateLine1(e),n=qC.validateLine2(),i=qC.validateCity(e),s=this.validateRegion(e),a=this.validatePostal(e),r=qC.validateCountryCode(e);return{isValid:t.isValid&&n.isValid&&i.isValid&&s.isValid&&a.isValid&&r.isValid,fields:{line1:t,line2:n,city:i,region:s,postal:a,countryCode:r}}}validateAddress(){return(0,l.sH)(this,void 0,void 0,(function*(){const{validated:e,valid:t}=yield this.addressValidationAPI.validate({line1:this.line1,line2:this.line2,city:this.city,region:this.region,postal:this.postal,countryCode:this.countryCode});return!e||t}))}shouldFindSubplaces(e){return this.addressService.shouldFindSubplaces({place:e,restrictCountries:[this.countryCode]})}setSkipped(e){this._isSkipped=e}get shouldAutofillRegion(){return!!this.checkoutConfiguration.infrastructureParams.livemode&&!!this.mailingAddressCustomization.isRegionEnabled({country:this.countryCode})}formatGeoIpRegion(e,t){const n=this.mailingAddressCustomization.getPredefinedRegions({country:t});if(!n)return e;let i;if(Array.isArray(n))i=n.find((t=>{let{name:n}=t;return n.toLowerCase()===e.toLowerCase()}));else for(const t of Object.values(n))if(i=t.find((t=>{let{name:n}=t;return n.toLowerCase()===e.toLowerCase()})),i)break;return i?i.code:e}getDefaultCountryCode(){return this.countriesService.getMailingAddressCountriesList()[0].countryCode}validateRegion(e){let t=e.isRequired||!!e.line1;this.mailingAddressCustomization.isRegionRequired({country:e.countryCode})||(t=!1);const n=!t||!!e.region;return{isValid:n,errors:{required:!n}}}validatePostal(e){let t,n=e.isRequired||!!e.line1||!!e.postal;if(this.mailingAddressCustomization.isPostalCodeRequired({country:e.countryCode})||(n=!1),n){const n=this.mailingAddressCustomization.getPostalCodeValidation({country:e.countryCode});t=n?n.test(e.postal):!!e.postal}else t=!0;return{isValid:t,errors:{required:!t}}}}class GC extends yC{static get defaultValidationResult(){return{isValid:!0,fields:{onBehalfOf:{isValid:!0,errors:{required:!1,minLength:!1}}}}}constructor(e){super(e),this.checkoutConfiguration=e,this.isEnabled=this.checkoutConfiguration.campaign.config.showBehalfOf,this.isRequired=!1,this._isActive=!1,this._companyName=""}get isActive(){return this._isActive}get companyName(){return this.isActive?this._companyName:""}get isOnBehalfOf(){return!!this.isEnabled&&Boolean(this.companyName)}setIsActive(e){this._isActive=e}setCompanyName(e){this._companyName=e}toObject(){return{companyName:this.companyName}}validate(){const e=!this.isEnabled||!this.isActive||this.validateCompanyName();return{isValid:e,fields:{onBehalfOf:{isValid:e,errors:{required:!(!this.isEnabled||!this.isActive||this.companyName),minLength:!e}}}}}validateCompanyName(){return!(!this.companyName||this.companyName.length<2||this.companyName.match(/^\d+$/)||"mrs."===this.companyName.toLowerCase())}}const VC=(e,t)=>!!e&&e.length>=t,YC=e=>!!e&&/^(?!anonymous$)([^!_@#$%^*+=~[\]{};:\\|?`]+$)/i.test(e),KC=[" ","","","","","","","","","","","","","\u2028","","","","\t","\n","\f","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","\ufeff","","","C","9","3","4","5","6","7","8","9","A","1","0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","0"];function zC(e){const t=new Set([...KC," "]);let n=0,i=e.length;for(;n<i&&t.has(e.charAt(n));)n++;for(;i>n&&t.has(e.charAt(i-1));)i--;return e.slice(n,i)}class $C extends yC{static get defaultValidationResult(){return{isValid:!0,fields:{firstName:{isValid:!0,errors:{required:!1,minLength:!1,characters:!1}},lastName:{isValid:!0,errors:{required:!1,minLength:!1,characters:!1}}}}}constructor(e,t){super(e),this.checkoutConfiguration=e,this.validationSettings=t,this.isEnabled=!0,this.isRequired=!0,this._firstName=this.checkoutConfiguration.queryParams.firstName||"",this._lastName=this.checkoutConfiguration.queryParams.lastName||""}get firstName(){return this._firstName.substring(0,this.validationSettings.MAX_LENGTH)}get lastName(){return this._lastName.substring(0,this.validationSettings.MAX_LENGTH)}get fullName(){return`${this.firstName} ${this.lastName}`.trim()}setFirstName(e){this._firstName=e}setFirstNameIfEmpty(e){this.firstName.trim()||this.setFirstName(e)}setLastName(e){this._lastName=e}setLastNameIfEmpty(e){this.lastName.trim()||this.setLastName(e)}setFullName(e){const t=e.split(" ").filter(Boolean);this.setFirstName(t[0]),t.length>1&&this.setLastName(t[t.length-1])}setFullNameIfEmpty(e){this.fullName.trim()||this.setFullName(e)}validate(){const e=this.toObject(),t=VC(e.firstName,this.validationSettings.MIN_LENGTH),n=YC(e.firstName),i={isValid:t&&n,errors:{required:!e.firstName,minLength:!t,characters:!n}},s=VC(e.lastName,this.validationSettings.MIN_LENGTH),a=YC(e.lastName),r={isValid:s&&a,errors:{required:!e.lastName,minLength:!s,characters:!a}};return{isValid:i.isValid&&r.isValid,fields:{firstName:i,lastName:r}}}toObject(){return{firstName:zC(this.firstName),lastName:zC(this.lastName)}}}class WC extends yC{static get defaultValidationResult(){return{isValid:!0,fields:{email:{isValid:!0,errors:{email:!1,required:!1}}}}}constructor(e){super(e),this.checkoutConfiguration=e,this.isEnabled=!0,this.isRequired=!0,this._email=this.checkoutConfiguration.queryParams.email||"",this.emailConsent={isEnabled:this.checkoutConfiguration.featureConfig.emailConsent}}get email(){return this._email}setEmail(e){this._email=e}setEmailIfEmpty(e){this.email.trim()||this.setEmail(e)}validate(){const e=this.toObject(),t=tt(e.email),n={isValid:t,errors:{required:!e.email,email:!t}};return{isValid:n.isValid,fields:{email:n}}}toObject(){return{email:this.email.trim()}}}class XC extends yC{constructor(){super(...arguments),this.isEnabled=this.campaign.config.showPhone,this.isRequired=this.campaign.config.phoneRequired,this._phone=null,this._countryCode=this.user.address.countryCode,this._cleanPhone=null}static get defaultValidationResult(){return{isValid:!0,fields:{phone:{isValid:!0,errors:{required:!1,invalid:!1}}}}}get phone(){return this._phone}get countryCode(){return this._countryCode}get isLegalTextEnabled(){return this.checkoutConfiguration.campaign.config.showPhoneLegalText}get phoneLegalText(){return this.checkoutConfiguration.campaign.config.phoneLegalText}setPhone(e){this._phone=e}setPhoneIfEmpty(e){var t;(null===(t=this.phone)||void 0===t?void 0:t.trim())||this.setPhone(e)}setCountryCode(e){this._countryCode=e}setCountryCodeIfEmptyPhone(e){var t;(null===(t=this.phone)||void 0===t?void 0:t.trim())||this.setCountryCode(e)}setCleanPhone(e){this._cleanPhone=e}toObject(){return{phone:this.isEnabled?this._cleanPhone||"":null}}validate(){const e=this.isRequired&&!this.phone,t=(this.isRequired||!!this.phone)&&!function(e){if(!e)return!1;const t=e.replace(/[^\d]/g,"");return t.length>=7&&t.length<=15}(this.phone),n=!e&&!t;return{isValid:n,fields:{phone:{isValid:n,errors:{required:e,invalid:t}}}}}isFullPhoneNumberFilled(){return Boolean(this.phone&&this.countryCode)}get campaign(){return this.checkoutConfiguration.campaign}get user(){return this.checkoutConfiguration.user}}class QC extends yC{static isQuestionValid(e){return!e.required||QC.isRequiredQuestionValid(e)}static isRequiredQuestionValid(e){return e.type===Yl.CHECKBOX?!0===e.answer:e.type===Yl.MULTIOPTION&&Array.isArray(e.answer)?!!e.answer.filter(Boolean).length:Boolean(e.answer)}constructor(e){if(super(e),this.checkoutConfiguration=e,this.isEnabled=!!this.campaign.config.questions.length&&this.campaign.config.showQuestions,this.isRequired=!0,this.questions=new Map,e.campaign.config.showQuestions&&this.campaign.config.questions)for(const e of this.campaign.config.questions){const t=e.options||[];let n=e.key;this.checkoutConfiguration.showcase&&!n&&(n=e.id),this.questions.set(n,{answer:Array.isArray(e.answer)?[...e.answer]:e.answer,code:e.code,createdAt:e.createdAt,key:n,id:e.id,options:[...t],question:e.question,required:e.required,type:e.type})}}setAnswer(e,t){this.getQuestion(e).answer=t}toObject(){return{questions:x([...this.questions.values()])}}validate(){return this.validateQuestionsByKeys([...this.questions.keys()])}validateQuestionsByKeys(e){const t={};return[...this.questions.values()].filter((t=>{let{key:n}=t;return e.includes(n)})).forEach((e=>{t[e.key]={isValid:QC.isQuestionValid(e)}})),{isValid:Object.values(t).every((e=>{let{isValid:t}=e;return t})),fields:t}}getQuestion(e){const t=this.questions.get(e);if(!t)throw new ZC(e);return t}getAnswer(e){return this.getQuestion(e).answer}get campaign(){return this.checkoutConfiguration.campaign}}class ZC extends Error{constructor(e){super(`Question not found: ${e}`)}}class JC extends yC{constructor(){super(...arguments),this.isEnabled=this.checkoutConfiguration.campaign.config.showTerms,this.isRequired=this.isEnabled,this._text=this.checkoutConfiguration.campaign.config.termsText,this._isAccepted=this.checkoutConfiguration.campaign.config.termsChecked}static get defaultValidationResult(){return{isValid:!0,fields:{isAccepted:{isValid:!0,errors:{required:!1}}}}}get text(){return this._text}get isAccepted(){return this._isAccepted}setIsAccepted(e){this._isAccepted=e}validate(){const e=!this.isRequired||this.isAccepted;return{isValid:e,fields:{isAccepted:{isValid:e,errors:{required:!e}}}}}toObject(){return{isAccepted:this.isEnabled?this.isAccepted:void 0}}}var ev,tv,nv,iv,sv,av,rv,ov,cv,lv,uv,dv,hv,mv,pv,gv,yv,fv,Sv,Av,Ev,Cv,vv;!function(e){e[e.IN_HONOR_OF_MAX_LENGTH=50]="IN_HONOR_OF_MAX_LENGTH"}(ev||(ev={}));class Nv{static getInHonorOfMaxLength(){return ev.IN_HONOR_OF_MAX_LENGTH}}class bv extends Error{constructor(e){super("DataPoint Validation Failed"),this.validationResult=e}}function Pv(e){return e.instant&&!e.microdeposits.enabled}function Dv(e){return!e.instant&&e.microdeposits.enabled&&e.microdeposits.type===cv.AUTOMATIC}function _v(e){return!e.instant&&e.microdeposits.enabled&&e.microdeposits.type===cv.MICRODEPOSITS}function Tv(e){return e.instant&&e.microdeposits.enabled&&e.microdeposits.type===cv.MICRODEPOSITS}function Ov(e){return e.instant&&e.microdeposits.enabled&&e.microdeposits.type===cv.AUTOMATIC}function xv(e){return e>=9500}!function(e){e.TRILLIUM="AFHQHUFB",e.ANIMAL_HUMANE_SOCIETY="APZFWQVA",e.SOS_INTERNATIONAL="ASYXEBAM",e.MUSLIMI="APRVBZRU",e.DAILY_GIVING="AYEWEYZD",e.UNFPA="ACSRWCJP",e.UNICEF_NORGE="AMUBFBCE",e.ASCRS_FOUNDATION="ACYFHBCY",e.CLINTON_FOUNDATION="ACUVFNNB",e.BLINKNOW="AEDSCDSM",e.HICT_PARENT="AJDZGJPP",e.HICT="AKVNXBFW",e.GREATER_GOOD_CHARITIES="AHTMBNKF",e.STC="VMZETRCF",e.UNICEF="APQJSHGS",e.PIH="AJDEFYWC",e.AHA_PARENT="ARMPCVPV",e.AHA="ADQRERLU",e.BEST_FRIENDS="AFZUYXBL",e.NEVERTHIRSTWATER="RWHMSQPD",e.CORG="AZCENQQL",e.AUS="AGZKYDGZ",e.NDSTREET="ALTVXKWG",e.ALZ="AJGEZYBE",e.LUST="AEDVPKAW",e.ARTHRITIS="AUSMBFYM",e.FREEDOM_BAKERIES="AFKPNPQY",e.MASJID_AL_FURGAN="ASYLMXZK",e.FCA="AFLRJKTK",e.FOOD_FOR_THE_POOR="AGPURJCY",e.MPAC="ANSRXGKF",e.RFT="ACMRCWPB",e.CHILDMIND="ZSNREIBR",e.FUNDRAISE_UP_NYC="APWCYEMD",e.SALVATION_ARMY_UK="ASNVRJLX",e.MERCY_SHIPS_AU="AWKKWSUU",e.LONELY_ORPHANS="AUKZQSFX",e.ALZHEIMER_ASSOCIATION="AJGEZYBE",e.PANCREATIC_CANCER_UK="ATBTMWDS",e.THE_BAIL_PROJECT="AYHQYPSQ",e.OBAMA_FOUNDATION="AHNVSXNQ",e.SAFE_HORIZON="AWBJEPNJ",e.FEED_THE_CHILDREN="AHQLCMJQ",e.STAGING_HELPING_HAND="HRMEIGNS",e.STAGING_HELPING_HAND_UK="AWKXSTZX",e.HELPING_HAND="MCJZDSLZ",e.INTERNATIONAL_JUSTICE_MISSION_UK="AGMQWWLR",e.GUIDE_DOGS="APLFUNKH",e.ROPSI="AJZSDMZE",e.ROPSI_AU="AESYHEDW",e.ROPSI_UK="ASHPENZB",e.ROPSI_CA="AZRBXHWY",e.FAMILY_ELDERCARE="ARRCDXDL",e.ENTERTAINMENT_INDUSTRY="ASXBZCVR",e.ONE_FOR_ISRAEL="ASBGJCET",e.TREVOR="ABGHKWJN",e.PARKINSON="AWQWPUEN",e.NAVY="ALAWCVJC",e.HONEST_REPORTING="ARBELMET",e.KCET="AEJGNVQN",e.OPSMILE="ATVPVDAJ",e.WIKIMEDIA_FOUNDATION="AVLMPSRU",e.ARBOR="ALPEXDKM",e.CANADIAN_RED_CROSS="ATVNLEWE",e.CANADIAN_CANCER_SOCIETY="APZMZAGU",e.WORLDWISH="AZFMPNQE",e.LUPUS="ARVHGABZ",e.CONCERN_WORLDWIDE="AGSTXLKM",e.DURHAM_RESCUE_MISSION="ALCUDRVC",e.MUSCULAR_DYSTROPHY_ASSOCIATION="AJGERPHC",e.TRILLIUM_HEALTH_FOUNDATION="AFHQHUFB",e.CANADIAN_WILDLIFE_FEDERATION="ASBNVYMX",e.HARVEST_MANITOBA="AVALTECL",e.MUSLIM_LEGAL_FUND="AAMRKAJS"}(tv||(tv={})),function(e){e.NOWHERE="nowhere",e.WIDGET="widget",e.URL="url"}(nv||(nv={})),function(e){e.THE_ADVENTURE_PROJECT="5a8b26d4f9891300017cc0fc"}(iv||(iv={})),function(e){e[e.MONEY_LEGACY_MIN=0]="MONEY_LEGACY_MIN",e[e.MONEY_MIN=200]="MONEY_MIN",e[e.MONEY_MAX=500]="MONEY_MAX",e[e.MONEY_DEFAULT=200]="MONEY_DEFAULT",e[e.STOCK_MIN=200]="STOCK_MIN",e[e.STOCK_MAX=1e3]="STOCK_MAX",e[e.STOCK_DEFAULT=500]="STOCK_DEFAULT",e[e.CRYPTO_MIN=200]="CRYPTO_MIN",e[e.CRYPTO_MAX=1e3]="CRYPTO_MAX",e[e.CRYPTO_DEFAULT=500]="CRYPTO_DEFAULT"}(sv||(sv={})),function(e){e.ALWAYS="always",e.NEVER="never"}(av||(av={})),function(e){e.PER_INSTALLMENT="perInstallment",e.NONE="none"}(rv||(rv={})),function(e){e.UPPER="upper",e.PROPER="proper"}(ov||(ov={})),(vv=cv||(cv={})).AUTOMATIC="automatic",vv.MICRODEPOSITS="microdeposits",function(e){e.OFF="off",e.OPTIONAL="optional",e.REQUIRED="required"}(lv||(lv={})),function(e){e.INVALID_SSO_MODE="Invalid SSO mode.",e.TWO_FACTOR_AUTH_NOT_ALLOWED_WITH_SSS_REQUIRED="Cannot fulfill 2FA with SSO Required.",e.DOESNT_MATCH_RECORDS="The information you entered doesn't match our records.",e.COULDNT_MATCH_USER="We couldn't match this user email with an email from your identity provider.",e.USER_HAS_ANOTHER_ACTIVE_IDP_SESSION="Authentication failed. The email address used in the identity provider is different from the one you used to start the verification on the Dashboard. Make sure you use the same email in both places.",e.ENTITY_ID_ISSUE="The specified Issuer ID does not match the data in the IdP. Please check and ensure you've entered the correct Issuer ID.",e.EXPIRED_REQUEST="The authentication request has expired. The request is no longer valid as the allowed time has passed. Please re-authenticate to proceed.",e.CERTIFICATE_ISSUE="There was an issue validating the certificate. Ensure that your certificate is valid and correctly configured in your IdP.",e.SIGNATURE_ISSUE="The signature method used is not supported by our system. Please check and change the signature method in your IdP."}(uv||(uv={})),function(e){e.DOESNT_MATCH_RECORDS="DOESNT_MATCH_RECORDS",e.COULDNT_MATCH_USER="COULDNT_MATCH_USER"}(dv||(dv={})),function(e){e.ISSUER_ID="The specified Issuer ID does not match the data in the IdP. Please check and ensure you've entered the correct Issuer ID.",e.IDP_URL="The provided Identity provider URL is invalid or unreachable. Please verify the URL and ensure your IdP is accessible.",e.CERTIFICATE="There was an issue validating the certificate. Ensure that your certificate is valid and correctly configured in your IdP.",e.DEFAULT="An error occurred. Please try again later."}(hv||(hv={})),function(e){e.USER_HAS_ANOTHER_SSO="Your account has at least one user who is already using SSO to log into another account. Delete them from your account to enable SSO.",e.NO_VERIFIED_DOMAINS="SSO cant be set to Required because no domains have been verified for this account yet.",e.USER_HAS_UNVERIFIED_EMAIL_DOMAIN="Your account has at least one user with an email address that belongs to an unverified domain. You should either enable SSO as Optional, verify the domains used by these users, or delete the users from your account.",e.BAD_SSO_CONFIGURATION="Bad SSO configuration.",e.CURRENT_USER_CANNOT_ENABLE_SSO="SSO cannot be set as required because {admin_email} is already using SSO authentication in another account."}(mv||(mv={})),function(e){e.ONLY_SSO_RESET_NOT_ALLOWED="This profile only uses SSO for login, so password reset is not possible."}(pv||(pv={})),function(e){e.USER_NOT_FOUND="User was not found"}(gv||(gv={})),function(e){e.RATE_LIMIT_IP_EXCEEDED="Too many attempts to log in from your IP address. Please try again later.",e.RATE_LIMIT_EMAIL_EXCEEDED="Too many attempts to log in from your IP address. Please try again later."}(yv||(yv={})),function(e){e.CHANGE_EMAIL_SSO_RESTRICTION_ERROR="changeEmailSsoRestrictionError",e.UPDATE_SSO_MODE_ERROR="UpdateSsoModeError",e.INVITE_USER_SSO_RESTRICTION_ERROR="inviteUserSsoRestrictionError"}(fv||(fv={})),function(e){e.NOT_SUCCESS="SAML response is not successful",e.WRONG_SAML_VERSION="SAML version is not 2.0",e.NO_ISSUE_INSTANT="IssueInstant is not found",e.INVALID_ISSUE_INSTANT="IssueInstant is invalid",e.NO_ISSUER="Issuer is not found or invalid",e.NO_ASSERTION="Assertion is not found",e.NO_SIGNATURE="Signature is not found or invalid",e.NO_EMAIL="Email is not found",e.NO_RESPONSE="Response is not found"}(Sv||(Sv={})),function(e){e.DEFAULT="Incorrect email or password."}(Av||(Av={})),function(e){e.ICELAND="IS",e.SOUTH_KOREA="KR"}(Ev||(Ev={})),function(e){e.CANADA_QUEBEC="Quebec",e.US_CALIFORNIA="California"}(Cv||(Cv={})),u.tg.AUSTRIA,u.tg.BELGIUM,u.tg.BULGARIA,u.tg.HUNGARY,u.tg.GERMANY,u.tg.GREECE,u.tg.DENMARK,u.tg.IRELAND,u.tg.SPAIN,u.tg.ITALY,u.tg.CYPRUS,u.tg.LATVIA,u.tg.LITHUANIA,u.tg.LUXEMBOURG,u.tg.MALTA,u.tg.NETHERLANDS,u.tg.POLAND,u.tg.PORTUGAL,u.tg.ROMANIA,u.tg.SLOVAKIA,u.tg.SLOVENIA,u.tg.FINLAND,u.tg.FRANCE,u.tg.CROATIA,u.tg.CZECH_REPUBLIC,u.tg.SWEDEN,u.tg.ESTONIA,u.tg.UNITED_KINGDOM,Ev.ICELAND,u.tg.NORWAY,u.tg.LIECHTENSTEIN,u.tg.SWITZERLAND,u.tg.CANADA,Cv.CANADA_QUEBEC,u.tg.UNITED_STATES,Cv.US_CALIFORNIA;const kv=[u.tg.AUSTRIA,u.tg.BELGIUM,u.tg.BULGARIA,u.tg.HUNGARY,u.tg.GERMANY,u.tg.GREECE,u.tg.DENMARK,u.tg.IRELAND,u.tg.SPAIN,u.tg.ITALY,u.tg.CYPRUS,u.tg.LATVIA,u.tg.LITHUANIA,u.tg.LUXEMBOURG,u.tg.MALTA,u.tg.NETHERLANDS,u.tg.POLAND,u.tg.PORTUGAL,u.tg.ROMANIA,u.tg.SLOVAKIA,u.tg.SLOVENIA,u.tg.FINLAND,u.tg.FRANCE,u.tg.CROATIA,u.tg.CZECH_REPUBLIC,u.tg.SWEDEN,u.tg.ESTONIA,u.tg.NORWAY,u.tg.LIECHTENSTEIN,u.tg.SWITZERLAND,u.tg.UNITED_KINGDOM,u.tg.BRAZIL,u.tg.AUSTRALIA,u.tg.INDIA,u.tg.CANADA,Ev.ICELAND,Ev.SOUTH_KOREA],Iv=e=>kv.includes(e);var wv;!function(e){e.SLASH_MM_DD_YYYY="MM/DD/YYYY",e.SLASH_DD_MM_YYYY="DD/MM/YYYY",e.DASH_YYYY_MM_DD="YYYY-MM-DD",e.DASH_DD_MM_YYYY="DD-MM-YYYY",e.DOT_DD_MM_YYYY="DD.MM.YYYY",e.SLASH_YYYY_MM_DD="YYYY/MM/DD",e.DOT_YYYY_MM_DD="YYYY.MM.DD"}(wv||(wv={}));const Rv={[wv.SLASH_MM_DD_YYYY]:/^\d{2}\/\d{2}\/\d{4}$/,[wv.SLASH_DD_MM_YYYY]:/^\d{2}\/\d{2}\/\d{4}$/,[wv.DASH_YYYY_MM_DD]:/^\d{4}-\d{2}-\d{2}$/,[wv.DASH_DD_MM_YYYY]:/^\d{2}-\d{2}-\d{4}$/,[wv.DOT_DD_MM_YYYY]:/^\d{2}\.\d{2}\.\d{4}$/,[wv.SLASH_YYYY_MM_DD]:/^\d{4}\/\d{2}\/\d{2}$/,[wv.DOT_YYYY_MM_DD]:/^\d{4}\.\d{2}\.\d{2}$/},Mv=wv.SLASH_DD_MM_YYYY,Lv={[w.D.EN_US]:wv.SLASH_MM_DD_YYYY,[w.D.EN_GB]:wv.SLASH_DD_MM_YYYY,[w.D.EN_CA]:wv.DASH_YYYY_MM_DD,[w.D.FR_CA]:wv.DASH_YYYY_MM_DD,[w.D.FR_FR]:wv.SLASH_DD_MM_YYYY,[w.D.ES]:wv.SLASH_DD_MM_YYYY,[w.D.NL]:wv.DASH_DD_MM_YYYY,[w.D.NO]:wv.DOT_DD_MM_YYYY,[w.D.DE]:wv.DOT_DD_MM_YYYY,[w.D.FI_FI]:wv.DOT_DD_MM_YYYY,[w.D.AR_001]:wv.SLASH_DD_MM_YYYY,[w.D.SV]:wv.DASH_YYYY_MM_DD,[w.D.IT]:wv.SLASH_DD_MM_YYYY,[w.D.PT_PT]:wv.SLASH_DD_MM_YYYY,[w.D.PT_BR]:wv.SLASH_DD_MM_YYYY,[w.D.ZH_CN]:wv.SLASH_YYYY_MM_DD,[w.D.ZH_TW]:wv.SLASH_YYYY_MM_DD,[w.D.JA]:wv.SLASH_YYYY_MM_DD,[w.D.KO]:wv.DOT_YYYY_MM_DD,[w.D.HU]:wv.DOT_YYYY_MM_DD,[w.D.DA]:wv.DOT_DD_MM_YYYY,[w.D.RU_RU]:wv.DOT_DD_MM_YYYY,[w.D.ES_US]:wv.SLASH_MM_DD_YYYY,[w.D.PL_PL]:wv.DOT_DD_MM_YYYY},Uv=(e,t)=>{var n;if(!Fv(e,t))return{year:"",month:"",day:""};const i=(null===(n=e.match(/\D/))||void 0===n?void 0:n[0])||"",s=e.split(i);if(s.length<3)throw new Error(`Unsupported date format: ${t} for date: ${e}`);switch(t){case wv.SLASH_MM_DD_YYYY:return{month:s[0],day:s[1],year:s[2]};case wv.SLASH_DD_MM_YYYY:return{day:s[0],month:s[1],year:s[2]};case wv.DASH_YYYY_MM_DD:return{year:s[0],month:s[1],day:s[2]};case wv.DASH_DD_MM_YYYY:case wv.DOT_DD_MM_YYYY:return{day:s[0],month:s[1],year:s[2]};case wv.SLASH_YYYY_MM_DD:case wv.DOT_YYYY_MM_DD:return{year:s[0],month:s[1],day:s[2]};default:throw new Error(`was not able to parse date: ${e} with format: ${t}, date parts: ${s}`)}},Fv=(e,t)=>!!Rv[t].test(e);class jv extends yC{constructor(){super(...arguments),this._isEnabled=!1,this._dateValue=""}static get defaultValidationResult(){return{isValid:!0,fields:{value:{isValid:!0,errors:{format:!1}}}}}get dateFormat(){return Lv[this.checkoutConfiguration.environmentConfig.locale]||Mv}get convertedDate(){if(!this._dateValue)return"";const{year:e,month:t,day:n}=Uv(this._dateValue,this.dateFormat);return e&&t&&n?`${e}-${t.toString().padStart(2,"0")}-${n.toString().padStart(2,"0")}`:""}get isEnabled(){return this._isEnabled}get dateValue(){return this._dateValue}get isRequired(){return!1}setIsEnabled(){this._isEnabled=!0}setValue(e){this._dateValue=e}convert(){if(!this._dateValue)return"";const{year:e,month:t,day:n}=Uv(this._dateValue,this.dateFormat);return e&&t&&n?`${e}-${t.toString().padStart(2,"0")}-${n.toString().padStart(2,"0")}`:""}validate(){if(!this._dateValue)return jv.defaultValidationResult;const e=Fv(this._dateValue,this.dateFormat);return{isValid:e,fields:{value:{isValid:e,errors:{format:!e}}}}}toObject(){return{}}}const Bv={[Ra.DONOR_NAME]:$C,[Ra.DONOR_EMAIL]:WC,[Ra.MAILING_ADDRESS]:qC,[Ra.TRIBUTE]:class extends yC{constructor(e){super(e),this.checkoutConfiguration=e,this.isRequired=!1,this._tributeName="",this.tributeeName=this.getDefaultTributeeName(),this.isEnabled=this.campaign.config.tribute.show,this.isActive=this.getDefaultTributeeActive(),this.isOptional=this.campaign.config.tribute.optional}get labelType(){return this.campaign.config.tribute.labelType}get isSharingEnabled(){const{showEmail:e,showAddress:t}=this.checkoutConfiguration.campaign.config.tribute;return e||t}get type(){return WE.NONE}get isFilled(){return this.isActive&&!!this.tributeeName}get tributeeName(){var e;return null===(e=this._tributeName)||void 0===e?void 0:e.substring(0,Nv.getInHonorOfMaxLength())}get campaign(){return this.checkoutConfiguration.campaign}get isTributeOriented(){return!this.isOptional||!!this.checkoutConfiguration.queryParams.tributeSelected}set tributeeName(e){(e.trim()||""===e)&&(this._tributeName=e)}toObject(){return{inHonorOf:this.tributeeName,type:this.type,labelType:this.labelType,isActive:this.isActive}}get externalCheckoutData(){return this.checkoutConfiguration.externalConfig.checkoutData||{}}getDefaultTributeeActive(){var e,t;const n=this.campaign.config.tribute.optional,i=(null===(t=null===(e=this.checkoutConfiguration.externalConfig.checkoutData)||void 0===e?void 0:e.tribute)||void 0===t?void 0:t.type)===WE.NONE,s=!!this._tributeName,a=!!this.checkoutConfiguration.externalConfig.tributeSelected,r=!!this.checkoutConfiguration.queryParams.tributeSelected;return!n&&!i||s||a||r}getDefaultTributeeName(){var e;const t=this.checkoutConfiguration.queryParams.tributeHonoree,n=null===(e=this.externalCheckoutData.tribute)||void 0===e?void 0:e.inHonorOf;return t||n||""}},[Ra.BIRTHDAY_DATE]:jv,[KE.DONATION]:HC,[KE.GIFT_AID]:class extends yC{constructor(){super(...arguments),this._isEnabled=!1,this._isRequired=!1,this._isShowed=!1,this._isAccepted=!1}get isEnabled(){return this._isEnabled}get isRequired(){return this._isRequired}get legalText(){return this.checkoutConfiguration.campaign.config.giftAid.legalText}get isShowed(){return this._isShowed}get isAccepted(){return this._isAccepted}setComputedAvailability(e){this._isEnabled=e,this._isRequired=e}setShowed(){this._isShowed=!0}accept(){this._isAccepted=!0}reject(){this._isAccepted=!1}toObject(){return{}}},[Ra.QUESTIONS]:QC,[Ra.COMMENT]:class extends yC{constructor(){super(...arguments),this._isEnabled=this.checkoutConfiguration.campaign.config.showComment,this._isRequired=!1,this._isActive=this.checkoutConfiguration.commentSettings.isActive,this._prevComment="",this._comment=""}get isRequired(){return this._isRequired}get isEnabled(){return this._isEnabled}get isActive(){return this._isActive}get prevComment(){return this._prevComment}get comment(){return this._comment}set isRequired(e){this._isRequired=e}set isEnabled(e){this._isEnabled=e}savePrevComment(){this._prevComment=this.comment}saveComment(e){this._comment=e}setIsActive(e){this._isActive=e}toObject(){return{isActive:this.isActive,comment:this.comment}}},[Ra.DESIGNATION]:class extends yC{static get defaultValidationResult(){return{isValid:!0,fields:{goal:{isValid:!0,errors:{required:!1}}}}}constructor(e){var t;super(e),this.checkoutConfiguration=e,this.isRequired=!1,this._goalKey=null,this.savedOneTimeGoalKey=null,this.savedRecurringGoalKey=null,this.isEnabled=!!this.goals.length&&this.displayGoal===Pe.SELECT,this._goalKey=(null===(t=this.checkoutConfiguration.fundraisingPage)||void 0===t?void 0:t.designation)||this.externalCheckoutData.designationId||null}get goalKey(){return this._goalKey}get modifyDesignation(){var e;const t=this.checkoutConfiguration.queryParams.modifyDesignation;if("boolean"==typeof t)return t;const n=this.externalCheckoutData.modifyDesignation;if("boolean"==typeof n)return n;const i=null===(e=this.checkoutConfiguration.externalConfig.checkoutIntent)||void 0===e?void 0:e.checkoutSettings;return!i||"boolean"!=typeof i.modifyDesignation||i.modifyDesignation}get goals(){return this.checkoutConfiguration.campaign.config.goals}get goalName(){var e;return(null===(e=this.selectedGoal)||void 0===e?void 0:e.name)||null}get goalCode(){var e;return(null===(e=this.selectedGoal)||void 0===e?void 0:e.code)||null}get selectedGoal(){return this.isEnabled&&this.goals.find((e=>e.key===this.goalKey))||null}get allowRecurring(){var e;if(!this.isEnabled)return!0;const t=null===(e=this.selectedGoal)||void 0===e?void 0:e.repeat;return!t||t!==je.ONE_TIME}toObject(){return{goalKey:this.isEnabled?this.goalKey:null,goalName:this.isEnabled?this.goalName:null,allowRecurring:this.allowRecurring}}setGoalKey(e,t){this._goalKey=e,this.saveGoalKeyByRepeat(t)}hasSelectedGoalWithRepeat(e){var t,n,i;return this.checkoutConfiguration.preselectDesignation?(null===(i=this.selectedGoal)||void 0===i?void 0:i.repeat)===e:(null===(t=this.selectedGoal)||void 0===t?void 0:t.repeat)===e||(null===(n=this.selectedGoal)||void 0===n?void 0:n.repeat)===je.ALL}setComputedGoalKeyByGoalRepeat(e){var t,n;this.isEnabled&&((null===(t=this.externalGoal)||void 0===t?void 0:t.repeat)!==je.ALL&&(null===(n=this.externalGoal)||void 0===n?void 0:n.repeat)!==e?this.checkoutConfiguration.preselectDesignation||1===this.getAllowedGoals(e).length?this.preselectDesignation(e):this._goalKey=null:this._goalKey=this.externalGoal.key)}isGoalAllowedToShow(e,t){return!!this.isEnabled&&(e.repeat===t||e.repeat===je.ALL)}canChangeDesignation(e){return!!this.isEnabled&&!(e<=1||!this.modifyDesignation)}validateDesignation(e){const t=!this.isEnabled||this.isGoalValid(e),n={isValid:t,errors:{required:!t}};return{isValid:n.isValid,fields:{goal:n}}}shouldShowDesignation(e){return this.isEnabled&&!!this.getAllowedGoalsByFrequency(e).length}isEditable(e){return this.canChangeDesignation(this.getAllowedGoalsByFrequency(e).length)}getAllowedGoalsByFrequency(e){return this.getAllowedGoals(e)}get displayGoal(){return this.checkoutConfiguration.campaign.config.displayGoal}get externalGoal(){return this.isEnabled&&this.goals.find((e=>{var t;return e.key===this.checkoutConfiguration.queryParams.designationId||e.key===this.externalCheckoutData.designationId||e.key===(null===(t=this.checkoutConfiguration.fundraisingPage)||void 0===t?void 0:t.designation)}))||null}get externalCheckoutData(){return this.checkoutConfiguration.externalConfig.checkoutData||{}}preselectDesignation(e){var t,n,i,s,a,r;const o=this.getSavedGoalByRepeat(e),c=this.getSavedGoalByRepeat(e===je.ONE_TIME?je.RECURRING:je.ONE_TIME);this._goalKey=null!==(r=null!==(s=null!==(n=null!==(t=null==o?void 0:o.key)&&void 0!==t?t:(null==c?void 0:c.repeat)===je.ALL?c.key:null)&&void 0!==n?n:null===(i=this.goals.find((t=>t.default===e)))||void 0===i?void 0:i.key)&&void 0!==s?s:null===(a=this.goals.find((e=>e.default===je.ALL)))||void 0===a?void 0:a.key)&&void 0!==r?r:null}getSavedGoalByRepeat(e){var t;const n=e===je.ONE_TIME?this.savedOneTimeGoalKey:this.savedRecurringGoalKey;return null!==(t=this.goals.find((e=>e.key===n)))&&void 0!==t?t:null}saveGoalKeyByRepeat(e){e!==je.ONE_TIME?this.savedRecurringGoalKey=this.goalKey:this.savedOneTimeGoalKey=this.goalKey}isGoalValid(e){return!(!this.selectedGoal&&this.getAllowedGoals(e).length>0)}getAllowedGoals(e){return this.goals.filter((t=>this.isGoalAllowedToShow(t,e)))}},[KE.PAYMENT_OPTIONS]:class extends yC{constructor(){super(...arguments),this.isEnabled=!0,this.isRequired=!0,this._clientPaymentMethod=null,this._selectedPaymentOption=null,this._preSelectedPaymentOption=null,this._paymentMethodCountry=null,this._allowedPaymentMethods={[u._h.CARD]:{available:!1,visible:!1},[u._h.APPLE_PAY]:{available:!1,visible:!1},[u._h.GOOGLE_PAY]:{available:!1,visible:!1},[u._h.VENMO]:{available:!1,visible:!1},[u._h.PAYPAL]:{available:!1,visible:!1},[u._h.US_BANK_ACCOUNT]:{available:!1,visible:!1},[u._h.AU_BECS]:{available:!1,visible:!1},[u._h.UK_BACS]:{available:!1,visible:!1},[u._h.SEPA]:{available:!1,visible:!1},[u._h.IDEAL]:{available:!1,visible:!1},[u._h.ACSS]:{available:!1,visible:!1},[u._h.CRYPTO]:{available:!0,visible:!0},[u._h.STOCK]:{available:!1,visible:!1}},this._checkedPaymentMethods={[u._h.APPLE_PAY]:!1,[u._h.GOOGLE_PAY]:!1,[u._h.VENMO]:!1}}get allowedPaymentMethods(){return Object.assign(Object.assign({},this._allowedPaymentMethods),{[u._h.VENMO]:Object.assign(Object.assign({},this._allowedPaymentMethods[u._h.VENMO]),{visible:this._allowedPaymentMethods[u._h.VENMO].visible&&this._checkedPaymentMethods[u._h.VENMO]}),[u._h.APPLE_PAY]:Object.assign(Object.assign({},this._allowedPaymentMethods[u._h.APPLE_PAY]),{visible:this._allowedPaymentMethods[u._h.APPLE_PAY].visible&&this._checkedPaymentMethods[u._h.APPLE_PAY]}),[u._h.GOOGLE_PAY]:Object.assign(Object.assign({},this._allowedPaymentMethods[u._h.GOOGLE_PAY]),{visible:this._allowedPaymentMethods[u._h.GOOGLE_PAY].visible&&this._checkedPaymentMethods[u._h.GOOGLE_PAY]&&!this._checkedPaymentMethods[u._h.APPLE_PAY]})})}get clientPaymentMethod(){return this._clientPaymentMethod}get selectedPaymentOption(){return this._selectedPaymentOption}get preSelectedPaymentOption(){return this._preSelectedPaymentOption}get paymentMethodCountry(){return this._paymentMethodCountry}setComputedAllowedPaymentMethods(e){this._allowedPaymentMethods=e}setPaymentMethodChecked(e){this._checkedPaymentMethods[e]=!0}setPaymentMethod(e){this._clientPaymentMethod=e}setPaymentOption(e){this._selectedPaymentOption=e}setPreSelectedPaymentOption(e){this._preSelectedPaymentOption=e}setPaymentMethodCountry(e){this._paymentMethodCountry=e}toObject(){return{}}},[KE.PRE_DONATION_UPSELL]:class extends yC{constructor(e,t){super(e),this.checkoutConfiguration=e,this.currencyService=t,this._isAvailableBySuggestion=null,this._isAvailableByCalculation=null,this._upsellFrequency=se.MONTHLY,this._upsellCurrency="USD",this._upsellSuggestedHighAmount=null,this._upsellSuggestedLowAmount=null,this._upsellComputedHighAmount=null,this._upsellComputedLowAmount=null,this._upsellInitialAmount=null,this._isShowed=!1,this._upsellShowedFromCurrency="USD",this._upsellShowedFromAmount=null,this._isAccepted=!1}get isEnabled(){return null!==this._isAvailableBySuggestion?this._isAvailableBySuggestion:null!==this._isAvailableByCalculation&&this._isAvailableByCalculation}get isRequired(){return this.isEnabled}get upsellFrequency(){return this._upsellFrequency}get upsellCurrency(){return this._upsellCurrency}get upsellHighAmount(){return null!==this._upsellSuggestedHighAmount?this._upsellSuggestedHighAmount:null!==this._upsellComputedHighAmount?this._upsellComputedHighAmount:null}get upsellHighAmountInUsd(){return this.upsellHighAmount?this.currencyService.convert(this.upsellHighAmount,this._upsellCurrency,"USD"):null}get upsellLowAmount(){return null!==this._upsellSuggestedLowAmount?this._upsellSuggestedLowAmount:null!==this._upsellComputedLowAmount?this._upsellComputedLowAmount:null}get upsellLowAmountInUsd(){return this.upsellLowAmount?this.currencyService.convert(this.upsellLowAmount,this._upsellCurrency,"USD"):null}get upsellInitialAmount(){return this._upsellInitialAmount}get upsellInitialAmountInUsd(){return this.upsellInitialAmount?this.currencyService.convert(this.upsellInitialAmount,this._upsellCurrency,"USD"):null}get isShowed(){return this._isShowed}get upsellShowedFromCurrency(){return this._upsellShowedFromCurrency}get upsellShowedFromAmount(){return this._upsellShowedFromAmount}get isAccepted(){return this._isAccepted}setComputedAvailability(e){this._isAvailableByCalculation=e}setComputedParams(e){this._upsellFrequency=e.upsellFrequency,this._upsellCurrency=e.upsellCurrency,this._upsellComputedHighAmount=e.upsellHighAmount,this._upsellComputedLowAmount=e.upsellLowAmount,this._upsellInitialAmount=e.upsellInitialAmount}setSuggestedAvailability(e){this._isAvailableBySuggestion=e}setSuggestedAmounts(e,t){this._upsellSuggestedHighAmount=e,this._upsellSuggestedLowAmount=t}resetSuggestedAvailability(){this._isAvailableBySuggestion=null}resetSuggestedAmounts(){this._upsellSuggestedHighAmount=null,this._upsellSuggestedLowAmount=null}setShowed(){this._isShowed=!0,this._upsellShowedFromCurrency=this._upsellCurrency,this._upsellShowedFromAmount=this._upsellInitialAmount}accept(){this._isAccepted=!0}reject(){this._isAccepted=!1}toObject(){return{}}},[Ra.PHONE_NUMBER]:XC,[Ra.TERMS_AND_CONDITIONS]:JC,[Ra.REMIND_ME_LATER]:class extends yC{constructor(){var e;super(...arguments),this.isEnabled=(null===(e=this.checkoutConfiguration.company.abandonedDonations)||void 0===e?void 0:e.enabled)&&this.checkoutConfiguration.remindMeLaterSettings.isEnabled,this.isRequired=!1,this._used=ne.NOT_GIVEN,this._shown=!1}get used(){return this._used}get shown(){return this._shown}setState(e){if(e.used!==ne.NOT_GIVEN&&!e.shown)throw new Error("RemindMeLaterDataPoint: used without shown");this._used=e.used,this._shown=e.shown}toObject(){return{used:this.used,shown:this.shown}}},[Ra.ON_BEHALF_OF]:GC,[Ra.DONATE_ANONYMOUS]:class extends yC{constructor(){super(...arguments),this.isEnabled=this.checkoutConfiguration.campaign.config.showAnonymous,this.isRequired=!1,this._anonymousChecked=!1}get anonymousChecked(){return this._anonymousChecked}setAnonymousChecked(e){this._anonymousChecked=e}toObject(){return{anonymousChecked:this.anonymousChecked}}},[KE.UK_BACS]:class extends yC{constructor(){super(...arguments),this.isEnabled=!0,this.isRequired=!1,this._sortCode="",this._accountNumber="",this._accountHolderName="",this._termsAccepted=!0}get sortCode(){return this._sortCode}get accountNumber(){return this._accountNumber}get accountHolderName(){return this._accountHolderName}get termsAccepted(){return this._termsAccepted}setSortCode(e){this._sortCode=e}setAccountNumber(e){this._accountNumber=e}setAccountHolderName(e){this._accountHolderName=e}setTermsAccepted(e){this._termsAccepted=e}toObject(){const e=this.validate();if(!e.isValid)throw new bv(e);return{termsAccepted:this.termsAccepted,sortCode:this.sortCode,accountNumber:this.accountNumber,accountHolderName:this.accountHolderName}}validate(){const e=this.isSortCodeValid(),t=this.isAccountNumberValid(),n=this.isAccountHolderNameValid();return{isValid:e&&t&&n&&this.termsAccepted,fields:{sortCode:{isValid:e},accountNumber:{isValid:t},accountHolderName:{isValid:n},termsAccepted:{isValid:this.termsAccepted}}}}isSortCodeValid(){return!!(this.sortCode&&this.sortCode.length>=6&&this.sortCode.length<=6)}isAccountNumberValid(){return!!(this.accountNumber&&this.accountNumber.length>=4&&this.accountNumber.length<=17)}isAccountHolderNameValid(){return!!this.accountHolderName}},[KE.POST_DONATION_UPSELL]:class extends yC{constructor(e,t,n){super(e),this.checkoutConfiguration=e,this.postDonationUpsellMlSuggestion=t,this.currencyService=n,this._isEnabled=!1,this._isRequired=!1,this._isAccepted=!1,this._isShowed=!1,this._upsellStartDate="",this._upsellFrequency=se.MONTHLY,this._upsellCurrency="",this._upsellMinAmount=0,this._upsellComputedAmount=0,this._upsellCustomAmount=void 0}get isEnabled(){return this._isEnabled}get isRequired(){return this._isRequired}get isAccepted(){return this._isAccepted}get isShowed(){return this._isShowed}get upsellStartDate(){return this._upsellStartDate}get upsellFrequency(){return this._upsellFrequency}get upsellMinAmount(){return this._upsellMinAmount}get upsellMaxAmount(){const e=this.currencyService.getDigits(this._upsellCurrency),t=(0,$d.Bm)(this._upsellCurrency),n=Number("9".repeat(t));return Math.floor(n/Math.pow(10,e))*Math.pow(10,e)}get upsellAmount(){return void 0!==this._upsellCustomAmount?this._upsellCustomAmount:this.mlSuggestedAmount.isFallback?this._upsellComputedAmount:this.mlSuggestedAmount.amount}get upsellAmountInUSD(){return this.upsellAmount?this.currencyService.convert(this.upsellAmount,this._upsellCurrency,"USD"):this.upsellAmount}setComputedAvailability(e){this._isEnabled=e,this._isRequired=e}setComputedParams(e){this._upsellStartDate=e.upsellStartDate,this._upsellFrequency=e.upsellFrequency,this._upsellCurrency=e.upsellCurrency,this._upsellMinAmount=e.upsellMinAmount,this._upsellComputedAmount=e.upsellAmount}setUpsellCustomAmount(e){this._upsellCustomAmount=e}accept(){this._isAccepted=!0}setShowed(){this._isShowed=!0}validateMinAmount(){return!!this.upsellAmount&&this.upsellAmount>=this._upsellMinAmount}validateMaxAmount(){return!this.upsellAmount||this.upsellAmount<=this.upsellMaxAmount}toObject(){var e;const t=null!==(e=this.upsellAmount)&&void 0!==e?e:0;return{isAccepted:this._isAccepted,isShowed:this._isShowed,upsellStartDate:this._upsellStartDate,upsellFrequency:this._upsellFrequency,upsellCurrency:this._upsellCurrency,upsellAmount:t,upsellTip:0,upsellTotal:t}}get mlSuggestedAmount(){return this.postDonationUpsellMlSuggestion.getAdjustedAmountSuggestion()}},[KE.US_BANK_ACCOUNT]:class extends yC{constructor(){super(...arguments),this.isEnabled=!0,this.isRequired=!1,this._routingNumber="",this._accountNumber="",this._accountHolderName="",this._verificationType=null,this._financialInstitution="",this._accountType=sE.INDIVIDUAL}get routingNumber(){return this._routingNumber}get accountNumber(){return this._accountNumber}get accountNumberLast4(){return this.accountNumber.length>4?this.accountNumber.slice(-4):this.accountNumber}get accountHolderName(){return this._accountHolderName}get verificationType(){return this._verificationType}get financialInstitution(){return this._financialInstitution}get accountType(){return this._accountType}get usBankAccountVerificationSetup(){const e=this.checkoutConfiguration.company.stripe.usBankAccount.verification;return{isInstantOnly:Pv(e),isAbavOnly:Dv(e),isMicroDepositOnly:_v(e),isInstantAndMicroDeposit:Tv(e),isInstantAndAbav:Ov(e)}}setRoutingNumber(e){this._routingNumber=e}setAccountNumber(e){this._accountNumber=e}setAccountHolderName(e){this._accountHolderName=e}setVerificationType(e){this._verificationType=e}setFinancialInstitution(e){this._financialInstitution=e}setAccountType(e){this._accountType=e}toObject(){const e=this.validate();if(!e.isValid)throw new bv(e);return{routingNumber:this.routingNumber,accountNumber:this.accountNumber,accountNumberLast4:this.accountNumberLast4,accountHolderName:this.accountHolderName,accountType:this.accountType,verificationType:this.verificationType,financialInstitution:this.financialInstitution}}validate(){const e=this.isRoutingNumberValid(),t=this.isAccountNumberValid(),n=this.isAccountHolderNameValid();return{isValid:e&&t&&n,fields:{routingNumber:{isValid:e},accountNumber:{isValid:t},accountHolderName:{isValid:n},financialInstitution:{isValid:this.isFinancialInstitutionValid()},verificationType:{isValid:this.isVerificationTypeValid()}}}}isRoutingNumberValid(){return!(!this.routingNumber||9!==this.routingNumber.length)}isAccountNumberValid(){return!!(this.accountNumber&&this.accountNumber.length>=5&&this.accountNumber.length<=17)}isFinancialInstitutionValid(){return!!this.financialInstitution}isVerificationTypeValid(){return null===this.verificationType||"descriptor_code"===this.verificationType||"amounts"===this.verificationType}isAccountHolderNameValid(){return!(this.usBankAccountVerificationSetup.isMicroDepositOnly||this.usBankAccountVerificationSetup.isAbavOnly||this.usBankAccountVerificationSetup.isInstantAndAbav)||!!this.accountHolderName}},[KE.DTD]:class extends yC{constructor(e,t,n,i){super(e),this.checkoutConfiguration=e,this.currencyService=t,this.doubleTheDonationApi=n,this.transactionCosts=i,this._isEnabled=!1,this._isRequired=!1,this._dtdFrequency=se.MONTHLY,this._dtdCurrency="USD",this._dtdInitialAmount=null,this._employerId=0,this._employerName="",this._employerRatio=[1,1],this._employerRawMinAmount=0,this._isUpsellShowed=!1,this._isUpsellAccepted=!1,this._isSkipped=!1,this._snapshot=this.createSnapshot()}get isEnabled(){return this._isEnabled}get isRequired(){return this._isRequired}get isIntegrationEnabled(){return this.checkoutConfiguration.integrations.dtdEnabled}get dtdFrequency(){return this._dtdFrequency}get dtdCurrency(){return this._dtdCurrency}get dtdInitialAmount(){return this._dtdInitialAmount}get dtdInitialTotal(){var e;return this.transactionCosts.getTotal(null!==(e=this._dtdInitialAmount)&&void 0!==e?e:0,this._dtdCurrency)}get dtdInitialTotalDoubled(){return this.dtdInitialTotal+this.dtdInitialTotal/this.employerRatio[0]*this.employerRatio[1]}get employerId(){return this._employerId}get employerName(){return this._employerName}get employerRatio(){return this._employerRatio}get employerRawMinAmount(){return this._employerRawMinAmount}get employerMinAmount(){return this.currencyService.convert(this.currencyService.fromFloat(this._employerRawMinAmount,"USD"),"USD",this._dtdCurrency)}get employerUpsellAmount(){return this.employerUpsellTotal-this.transactionCosts.getProcessingFee(this.employerMinAmount,this._dtdCurrency)}get employerUpsellTotal(){return this.currencyService.ceil(this.transactionCosts.getTotal(this.employerMinAmount,this._dtdCurrency),this._dtdCurrency)}get employerUpsellTotalDoubled(){return this.employerUpsellTotal+this.employerUpsellTotal/this.employerRatio[0]*this.employerRatio[1]}get isUpsellShowed(){return this._isUpsellShowed}get isUpsellAccepted(){return this._isUpsellAccepted}get isSkipped(){return this._isSkipped}get snapshot(){return this._snapshot}setComputedAvailability(e){this._isEnabled=e,this._isRequired=e}setComputedParams(e){this._dtdFrequency=e.dtdFrequency,this._dtdCurrency=e.dtdCurrency,this._dtdInitialAmount=e.dtdInitialAmount}searchEmployerByName(e){return this.doubleTheDonationApi.getCompanies(e)}setEmployerName(e){this._employerName=e}setEmployerData(e){this._employerId=e.id,this._employerName=e.company_name,this._employerRawMinAmount=e.minimumMatchedAmount,this._employerRatio=e.ratio,this._snapshot=this.createSnapshot()}resetEmployerData(){this._employerId=0,this._employerName="",this._employerRawMinAmount=0,this._employerRatio=[1,1],this._snapshot=this.createSnapshot()}setUpsellShowed(e){this._isUpsellShowed=e}setUpsellAccepted(){this._isUpsellAccepted=!0}setSkipped(){this._isSkipped=!0}resetState(){this._isUpsellAccepted=!1,this._isSkipped=!1,this._snapshot=this.createSnapshot()}toObject(){return{}}createSnapshot(){return{dtdCurrency:this._dtdCurrency,dtdInitialAmount:this._dtdInitialAmount,dtdInitialTotal:this.dtdInitialTotal,employerRatio:this._employerRatio,employerRawMinAmount:this._employerRawMinAmount,employerMinAmount:this.employerMinAmount,employerUpsellTotal:this.employerUpsellTotal,employerUpsellTotalDoubled:this.employerUpsellTotalDoubled}}},[Ra.COMMUNICATION_CONSENT]:class extends yC{constructor(){super(...arguments),this._generalConsent={isAccepted:this.consentConfig.general.checkedByDefault},this._customizedConsent={[u.ax.EMAIL]:{isEnabled:this.consentConfig.customized.channels.email.ask,isAccepted:this.consentConfig.customized.checkedByDefault},[u.ax.PHONE_CALLS]:{isEnabled:this.consentConfig.customized.channels.phoneCalls.ask,isAccepted:this.consentConfig.customized.checkedByDefault},[u.ax.SMS]:{isEnabled:this.consentConfig.customized.channels.sms.ask,isAccepted:this.consentConfig.customized.checkedByDefault},[u.ax.POSTAL_MAIL]:{isEnabled:this.consentConfig.customized.channels.postalMail.ask,isAccepted:this.consentConfig.customized.checkedByDefault},[u.ax.SOCIAL_MEDIA]:{isEnabled:this.consentConfig.customized.channels.socialMedia.ask,isAccepted:this.consentConfig.customized.checkedByDefault}},this._isGeneralConsentShown=!1,this._isCustomizedConsentShown=!1}get isGeneralConsentEnabled(){const e=this.type===u.kt.GENERAL;return!(!e||!this.checkoutConfiguration.showcase)||(e&&this.consentConfig.general.showIfRequiredByLaw?Iv(this.checkoutConfiguration.user.address.countryCode):e)}get isCustomizedConsentEnabled(){const e=this.type===u.kt.CUSTOMIZED,t=!this._customizedConsent||Object.values(this._customizedConsent).every((e=>!e.isEnabled));return!!e&&!t&&(!this.consentConfig.customized.showIfRequiredByLaw||Iv(this.checkoutConfiguration.user.address.countryCode))}get isEnabled(){return this.isGeneralConsentEnabled||this.isCustomizedConsentEnabled}get isRequired(){return!1}get generalConsent(){return this._generalConsent}get customizedConsent(){return this._customizedConsent}get isGeneralConsentShown(){return this._isGeneralConsentShown}get isCustomizedConsentShown(){return this._isCustomizedConsentShown}get isAnyConsentAccepted(){const e=this.isGeneralConsentEnabled&&this._isGeneralConsentShown&&this._generalConsent.isAccepted,t=this.isCustomizedConsentEnabled&&this._isCustomizedConsentShown&&Object.values(this._customizedConsent).some((e=>e.isAccepted));return e||t}toObject(){return{type:this.type,generalConsent:this._generalConsent,customizedConsent:this._customizedConsent,isGeneralConsentShown:this._isGeneralConsentShown,isCustomizedConsentShown:this._isCustomizedConsentShown}}acceptGeneralConsent(){this._generalConsent=Object.assign(Object.assign({},this._generalConsent),{isAccepted:!0})}rejectGeneralConsent(){this._generalConsent=Object.assign(Object.assign({},this._generalConsent),{isAccepted:!1})}acceptCustomizedConsent(e){this._customizedConsent[e]=Object.assign(Object.assign({},this._customizedConsent[e]),{isAccepted:!0})}rejectCustomizedConsent(e){this._customizedConsent[e]=Object.assign(Object.assign({},this._customizedConsent[e]),{isAccepted:!1})}rejectAll(){this._generalConsent=Object.assign(Object.assign({},this._generalConsent),{isAccepted:!1});const e={};for(const[t,n]of Object.entries(this._customizedConsent))e[t]={isEnabled:n.isEnabled,isAccepted:!1};this._customizedConsent=e}setComputedPhoneCallsConsentEnabled(e){const t=this._customizedConsent[u.ax.PHONE_CALLS];this.consentConfig.customized.channels.phoneCalls.ask&&(t.isEnabled=e)}setComputedSMSConsentEnabled(e){const t=this._customizedConsent[u.ax.SMS];this.consentConfig.customized.channels.sms.ask&&(t.isEnabled=e)}setComputedPostalMailConsentEnabled(e){const t=this._customizedConsent[u.ax.POSTAL_MAIL];this.consentConfig.customized.channels.postalMail.ask&&(t.isEnabled=e)}setGeneralConsentShown(){this._isGeneralConsentShown=!0}setCustomizedConsentShown(){this._isCustomizedConsentShown=!0}get type(){return this.consentConfig.type}get consentConfig(){return this.checkoutConfiguration.campaign.config.consent}},[Ra.CUSTOMER_TITLE]:MC,[wa.DONATION]:AC};class Hv{constructor(e,t){this.checkoutConfiguration=e,this.feeCalculator=t,this._isEnabled=!0,this._isCovered=this.isFeeCoveredByDefault,this._isCustomCoveredValue=!1}get includeFees(){return this._isEnabled?this.checkoutConfiguration.campaign.config.includeFees:u.XN.ONLY_NO}get isCovered(){return!!this._isEnabled&&this._isCovered}get isCustomCoveredValue(){return this._isCustomCoveredValue}set isCovered(e){this._isCovered=e}set isCustomCoveredValue(e){this._isCustomCoveredValue=e}calculateSmartFeeCovering(e){this._isCovered=this.shouldCoverFee(e)}calculateFeeAvailability(e){this._isEnabled=this.shouldEnableFee(e)}getFee(e,t){return this.feeCalculator.getFeeForWidget({amount:e,currency:t})}getTotal(e,t){return this.isCovered?e+this.getFee(e,t):e}getProcessingFee(e,t){return this.isCovered?this.getFee(e,t):0}get isFeeCoveredByDefault(){return[u.XN.DEFAULT_YES,u.XN.ONLY_YES].includes(this.includeFees)}shouldCoverFee(e){var t;const n=e.amountInUSD||0;if(e.frequency===se.ONCE&&n>=1e5)return!1;const i=this.checkoutConfiguration.infrastructureParams,s=this.checkoutConfiguration.user,a=null==i?void 0:i.OS,r="Mac OS"===a,o="iOS"===a,c=(null===(t=null==s?void 0:s.address)||void 0===t?void 0:t.countryCode)===u.tg.UNITED_STATES;return!(c&&n>=25e3&&n<1e5&&!o&&!r||!c&&n>=1e4&&n<1e5&&!o&&!r)}shouldEnableFee(e){var t;const n=null!==(t=e.amount)&&void 0!==t?t:0;return!(n+this.getFee(n,e.currency)>99999999)}}class qv{constructor(e,t){this.whole=e,this.currency=t,this.fractional=this.whole/Math.pow(10,this.currency.digits)}plus(e){if(e.currency.equalTo(this.currency))return new qv(this.whole+e.whole,this.currency);throw new Error(`Currency mismatch: added ${e.currency} is not equal to ${this.currency}`)}isZero(){return 0===this.whole}[Symbol.toPrimitive](e){return"string"===e?this.whole.toString():this.whole}toString(){return this.whole.toString()}valueOf(){return this.whole}}class Gv extends qv{}class Vv{constructor(e,t,n){this.percentFee=e,this.fixedFee=t,this.converter=n}getFeeValue(e){const t=this.converter.convertFeeCurrency(Number(this.fixedFee),this.fixedFee.currency.code,e.currency.code),n=new Gv(t,e.currency);return Math.round(Number(e)*Number(this.percentFee)+Number(n))}}class Yv{constructor(e,t){this.digits=t,this.code=e.toUpperCase()}equalTo(e){return String(this)===String(e).toUpperCase()}[Symbol.toPrimitive](){return this.code}toString(){return this.code}}class Kv extends Gv{constructor(e){super(Math.min(e.whole*Kv.ACSS_FEE_PERCENT,Kv.ACSS_MAX_FEE_VALUE),new Yv("CAD",2))}}Kv.ACSS_MAX_FEE_VALUE=500,Kv.ACSS_FEE_PERCENT=.008;class zv{constructor(e){this.whole=e,this.percent=e/100,this.fractional=e/1e4}plus(e){if(this.percent+e.percent>100)throw new Error("PercentFee value can not be grater than 100");return new zv(this.whole+e.whole)}[Symbol.toPrimitive](e){return"string"===e?this.fractional.toString():this.fractional}toString(){return this.fractional.toString()}valueOf(){return this.fractional}}class $v extends zv{constructor(e){let t=$v.PERCENT;e&&(t=$v.PERCENT*$v.COEFF+e.whole*(1-$v.COEFF)),super(t)}}$v.PERCENT=350,$v.COEFF=.1;class Wv extends Gv{constructor(e){super(Math.min(e.whole*Wv.FEE_PERCENT,Wv.MAX_FEE_VALUE),new Yv("USD",2))}}Wv.MAX_FEE_VALUE=500,Wv.FEE_PERCENT=.008;var Xv,Qv=n(3129);class Zv{constructor(e,t,n,i,s,a){this.stripeFee=e,this.applicationFee=t,this.fixedFee=n,this.paymentMethod=i,this.cardBrand=s,this.converter=a}get isNonProfitFee(){return this.stripeFee.whole===Qv.UH.NON_PROFIT}getPaymentMethodFee(e){switch(this.paymentMethod){case u._h.US_BANK_ACCOUNT:return new Wv(e);case u._h.ACSS:return new Kv(e)}}get isAmex(){return this.cardBrand===Qv.fR.AMERICAN_EXPRESS}getFeeValue(e){const t=this.getPaymentMethodFee(e);if(t)return Number(e)*Number(this.applicationFee)+Number(t);if(this.isNonProfitFee&&this.isAmex){const t=this.applicationFee.plus(new $v);return Number(t)*Number(e)}const n=this.converter.convertFeeCurrency(Number(this.fixedFee),this.fixedFee.currency.code,e.currency.code),i=new Gv(n,e.currency),s=this.applicationFee.plus(this.stripeFee);return Number(e)*Number(s)+Number(i)}}class Jv{constructor(e,t,n,i,s){this.stripeFee=e,this.applicationFee=t,this.fixedFee=n,this.companyParams=i,this.converter=s}get isUsCountry(){return"US"===this.companyParams.country}isCompanyCurrency(e){return e.currency.equalTo(this.companyParams.defaultCurrency)}isFixedFeeInDonationCurrency(e){return e.currency.equalTo(this.fixedFee.currency)}getFeeValue(e){let t=1;this.isCompanyCurrency(e)||(this.stripeFee=this.stripeFee.plus(new zv(100))),this.isFixedFeeInDonationCurrency(e)||(t=Jv.FEE_CURRENCY_RATE_MULTIPLIER);const n=this.isUsCountry?new $v(this.stripeFee):this.stripeFee,i=this.applicationFee.plus(n),s=this.converter.convertFeeCurrency(Number(this.fixedFee),this.fixedFee.currency.code,e.currency.code,t),a=new Gv(s,e.currency),r=Number(e),o=(r+Number(a))/(1-Number(i))/r-1;return Math.round(r*Math.round(1e4*o)/1e4)}}Jv.FEE_CURRENCY_RATE_MULTIPLIER=1.03;class eN{constructor(e,t,n){this.feeCalculator=n,e.validate(t),this.valueObjectsFactory=this.feeCalculator.valueObjectsFactory,this.converter=this.feeCalculator.converter,this.companyParams=t.companyParams,this.customFixedFee=this.valueObjectsFactory.makeFixedFee(t.customFixedFee,t.companyParams.defaultCurrency),this.customFeePercent=this.valueObjectsFactory.makePercentFee(t.customFeePercent),this.applicationFeePercent=this.valueObjectsFactory.makePercentFee(t.applicationFeePercent),this.stripeFeePercent=this.valueObjectsFactory.makePercentFee(t.stripeFee.percent),this.fixedFee=this.valueObjectsFactory.makeFixedFee(t.stripeFee.fixed,t.stripeFee.currency)}getFeeForDashboard(e,t){let n;return n=this.companyParams.useCustomFee?new Vv(this.customFeePercent,this.customFixedFee,this.converter):t.fromVirtualTerminal?new Zv(this.stripeFeePercent,this.applicationFeePercent,this.fixedFee,t.paymentMethod,t.cardBrand,this.converter):new Jv(this.stripeFeePercent,this.applicationFeePercent,this.fixedFee,this.companyParams,this.converter),this.feeCalculator.calculate(e,n)}getFeeForWidget(e){let t;return t=this.companyParams.useCustomFee?new Vv(this.customFeePercent,this.customFixedFee,this.converter):new Jv(this.stripeFeePercent,this.applicationFeePercent,this.fixedFee,this.companyParams,this.converter),this.feeCalculator.calculate(e,t)}getFeeForVirtualTerminal(e,t){let n;return n=this.companyParams.useCustomFee?new Vv(this.customFeePercent,this.customFixedFee,this.converter):new Zv(this.stripeFeePercent,this.applicationFeePercent,this.fixedFee,t.paymentMethod,t.cardBrand,this.converter),this.feeCalculator.calculate(e,n)}}class tN{constructor(e){this.converter=e}makeFixedFee(e,t){return new Gv(e,this.makeCurrency(t))}makeAmount(e,t){return new qv(e,this.makeCurrency(t))}makePercentFee(e){return new zv(e)}makeCurrency(e){return new Yv(e,this.converter.getDigits(e))}}class nN{constructor(e){this.converter=e,this.valueObjectsFactory=new tN(e)}calculate(e,t){const n=this.valueObjectsFactory.makeAmount(e.amount,e.currency);return n.isZero()?0:this.roundFee(t.getFeeValue(n))}roundFee(e){return e<500&&(e=10*Math.ceil(e/10)),e>500&&(e=100*Math.ceil(e/100)),e}}class iN{constructor(){this.schema=new vs({applicationFeePercent:{type:Number,required:!0},customFeePercent:{type:Number,required:!0},customFixedFee:{type:Number,required:!0},stripeFee:{percent:{type:Number,required:!0},fixed:{type:Number,required:!0},currency:{type:String,required:!0}},companyParams:{defaultCurrency:{type:String,required:!0},country:{type:String,required:!0},useCustomFee:{type:Boolean,required:!0}}})}validate(e){const t=this.schema.validate(e,{typecast:!1});if(t.length){const n=t.map((t=>{const n=Xi()(e,t.path);return`${t.path}: ${n} ${t.message}`})).join("\n");throw new Error(n)}}}class sN{constructor(e){let{enabledAI:t,frequenciesHints:n,mandatoryHintsIds:i=[],distribution:s,currencyService:a,defaultCurrency:r}=e;this._hints={},this._defaultHints={},this._variantName=dC.NONE,this._enabledAI=t,this._distribution=s,this._defaultCurrency=r,this.currencyService=a,this.initHints(n,i)}get hints(){return this._hints}get defaultHints(){return this._defaultHints}get hintsAmounts(){const e={[se.ONCE]:[],[se.DAILY]:[],[se.WEEKLY]:[],[se.BIWEEKLY]:[],[se.EVERY_4_WEEKS]:[],[se.MONTHLY]:[],[se.BIMONTHLY]:[],[se.QUARTERLY]:[],[se.SEMIANNUAL]:[],[se.ANNUAL]:[]};for(const t in this._hints){const n=this._hints[t];e[t]=n?n.map((e=>{let{amount:t}=e;return t})):[]}return e}get hintFrequencies(){return Object.keys(this._hints)}get variantName(){return this._variantName}getHintsByFrequency(e){return this._hints[e]||null}getDefaultHintsByFrequency(e){return this._defaultHints[e]||null}updateHintsByAmounts(e){for(const t in e){const n=this._hints[t],i=e[t];if(!(n&&n.length&&Array.isArray(i)))continue;const s=[...i].sort(((e,t)=>e-t)),a=[];s.forEach(((e,t)=>{a.push(Object.assign(Object.assign({},n[t]),{amount:e}))})),this._hints[t]=a}}updateHintsByDefault(e,t){const n=this._hints[e],i=[];if(!n)throw new Error(`Hints for frequency ${e} not found`);n.forEach((e=>{e.id===(null==t?void 0:t.id)?i.push(Object.assign(Object.assign({},e),{default:!0})):i.push(Object.assign(Object.assign({},e),{default:!1}))})),this._hints[e]=i}initHints(e,t){if(this._distribution.initCurrentVariantName(),this._distribution.currentVariantName===dC.RANDOM)return e.forEach((e=>{let{frequency:n,hints:i}=e;const s=this.getFormattedHints({hints:i,frequency:n}),a=this.getRandomVariantHints(s,t);this._hints[n]=a,this._defaultHints[n]=a})),void(this._variantName=dC.RANDOM);throw new Error("No variant found")}getFormattedHints(e){let{hints:t,frequency:n}=e;const i=t[t.length-1].amount;return t.map(((e,t)=>{const s=e.amount||function(e){let{index:t,frequency:n,enabledAI:i,lastAmount:s}=e;const a=n===se.ONCE,r=i?a?me:he:a?de:ue,o=r.length;return o>=t+1?r[t]:s?(c=s+pe)%pe==0?c:Math.ceil(c/pe)*pe:r[o-1]+(t+1-o)*pe;var c}({index:t,frequency:n,enabledAI:this._enabledAI,lastAmount:i}),a="USD"===this._defaultCurrency?s:this.currencyService.convert(s,"USD",this._defaultCurrency);return Object.assign(Object.assign({},e),{amount:s,amountUsd:a,description:e.description})}))}getRandomVariantHints(e,t){return this._enabledAI?this.getEnabledAIHints(e,t):this.getDisabledAIHints(e)}getEnabledAIHints(e,t){if(e.length<6)throw new Error("Hints count is less than 6");return this.getRandomHints(e,t,3).sort(((e,t)=>e.amount-t.amount))}getDisabledAIHints(e){const t=e.filter((e=>{let{active:t}=e;return t}));if(t.length<3)throw new Error("Active hints count is less than 3");return t.sort(((e,t)=>e.amount-t.amount)).slice(0,3)}getRandomHints(e,t,n){const i=[],s=new Set;for(t.forEach(((t,a)=>{const r=e.find((e=>e.id===t));r&&i.length<n&&(s.add(a),i.push(r))}));i.length<n&&s.size<e.length;){let t;do{t=Math.floor(Math.random()*e.length)}while(s.has(t));s.add(t),i.push(e[t])}return this.getHintsWithRandomDefault(i)}getHintsWithRandomDefault(e){const t=e.map((e=>Object.assign(Object.assign({},e),{default:!1})));return t[Math.floor(Math.random()*t.length)].default=!0,t}}class aN{constructor(e){this.sessionAPI=e}validate(e){return(0,l.sH)(this,void 0,void 0,(function*(){const t=yield this.sessionAPI.post("mailingAddress",Object.assign({},e),{rejectsOnInvalid:!0});return Yt.isSuccess(t)?t.successResult:{valid:!1,validated:!0}}))}}class rN{constructor(e){this.sessionAPI=e}getCompanies(e){return(0,l.sH)(this,void 0,void 0,(function*(){return(yield this.getDtdCompanies(e)).map((e=>({id:e.payload.id,company_name:e.payload.company_name,ratio:e.payload.ratio,minimumMatchedAmount:e.payload.minimumMatchedAmount})))}))}getDtdCompanies(e){return(0,l.sH)(this,void 0,void 0,(function*(){try{return(yield this.sessionAPI.get("dtd",{search:e},{delay:200,retries:5,cancelSimilar:!0})).data}catch(e){return[]}}))}}class oN{constructor(){this.MIN_LENGTH=2,this.MAX_LENGTH=ul.NAME_MAX_LENGTH}}class cN extends oN{constructor(){super(...arguments),this.MIN_LENGTH=ul.NAME_MIN_LENGTH}}cN.LOCALES=[w.D.ZH_TW,w.D.ZH_CN,w.D.JA,w.D.KO],function(e){e[e.PERSONAL_INFORMATION=1]="PERSONAL_INFORMATION"}(Xv||(Xv={}));class lN{static resolveSetting(e,t){if(e===Xv.PERSONAL_INFORMATION)return function(e){return cN.LOCALES.includes(e.localeCode)?new cN:new oN}(t);throw new Error(`Unknown setting ${e}`)}constructor(e){this.personalInformation=lN.resolveSetting(Xv.PERSONAL_INFORMATION,e)}}class uN{static isDonorNameDataPoint(e,t){return t===Ra.DONOR_NAME}static isFiatDonationDataPoint(e,t){return t===KE.DONATION}static isCryptoDonationDataPoint(e,t){return t===wa.DONATION}static isPreDonationUpsellDataPoint(e,t){return t===KE.PRE_DONATION_UPSELL}static isPostDonationUpsellDataPoint(e,t){return t===KE.POST_DONATION_UPSELL}static isPaymentOptionsDataPoint(e,t){return t===KE.PAYMENT_OPTIONS}static isDTDDataPoint(e,t){return t===KE.DTD}static isCommunicationConsentDataPoint(e,t){return t===Ra.COMMUNICATION_CONSENT}static isMailingAddressDataPoint(e,t){return t===Ra.MAILING_ADDRESS}static isCustomerTitleDataPoint(e,t){return t===Ra.CUSTOMER_TITLE}constructor(e,t,n,i,s,a,r,o,c,l,u,d,h){this.checkoutConfiguration=e,this.currencyService=t,this.addressService=n,this.suggestionsService=i,this.intl=s,this.userSession=a,this.sessionAPI=r,this.experiments=o,this.tracker=c,this.sentry=l,this.mailingAddressCustomization=u,this.params=d,this.postDonationUpsellMlSuggestion=h}create(e){const t=this.getDataPoint(e);return uN.isFiatDonationDataPoint(t,e)||uN.isCryptoDonationDataPoint(t,e)?function(e,t,n,i,s,a,r,o){switch(o.flowType){case fe.MONEY:return new HC(e,t,n,a,i,s,r);case fe.CRYPTO:return new AC(e,t,n);case fe.STOCK:throw new Error(o.flowType);default:throw new F(o.flowType)}}(this.checkoutConfiguration,this.currencyService,this.suggestionsService,this.userSession,this.transactionCosts,this.experiments,this.suggestedAmountHintsAI,{flowType:this.params.flowType}):uN.isPreDonationUpsellDataPoint(t,e)?new t(this.checkoutConfiguration,this.currencyService):uN.isPostDonationUpsellDataPoint(t,e)?new t(this.checkoutConfiguration,this.postDonationUpsellMlSuggestion,this.currencyService):uN.isPaymentOptionsDataPoint(t,e)?new t(this.checkoutConfiguration):uN.isDTDDataPoint(t,e)?new t(this.checkoutConfiguration,this.currencyService,this.doubleTheDonationAPI,this.transactionCosts):uN.isCommunicationConsentDataPoint(t,e)?new t(this.checkoutConfiguration):uN.isDonorNameDataPoint(t,e)?new t(this.checkoutConfiguration,this.validationSettings.personalInformation):uN.isMailingAddressDataPoint(t,e)?new t(this.checkoutConfiguration,this.addressService,this.addressValidationAPI,this.countriesService,this.mailingAddressCustomization):(uN.isCustomerTitleDataPoint(t,e),new t(this.checkoutConfiguration))}get transactionCosts(){return this._transactionCosts||(this._transactionCosts=this.createTransactionCosts()),this._transactionCosts}get countriesService(){return this._countriesService||(this._countriesService=this.createCountriesService()),this._countriesService}get doubleTheDonationAPI(){return this.createDoubleTheDonationAPI()}get validationSettings(){return this.createValidationSettings()}get addressValidationAPI(){return this.createAddressValidationAPI()}get suggestedAmountHintsAI(){var e;return null!==(e=this.createExternalConfigSuggestedAmountHintsAI())&&void 0!==e?e:this.createSuggestedAmountHintsAI()}get distribution(){return this.createDistribution()}getDataPoint(e){return Bv[e]}createTransactionCosts(){return function(e){let{checkoutConfiguration:t,currencyService:n}=e;const i=(s=t.company,a=n,new eN(new iN,{customFixedFee:s.coverFees.amount,customFeePercent:s.coverFees.percent,applicationFeePercent:s.applicationFees.money,stripeFee:s.stripeFee,companyParams:{country:s.country||"US",defaultCurrency:s.defaultCurrency,useCustomFee:s.coverFees.custom}},new nN(a)));var s,a;return new Hv(t,i)}({checkoutConfiguration:this.checkoutConfiguration,currencyService:this.currencyService})}createCountriesService(){return(0,pC.g)({intl:this.intl,excludePalestineFromCountriesList:this.checkoutConfiguration.featureConfig.excludePalestineFromCountriesList})}createDoubleTheDonationAPI(){return new rN(this.sessionAPI)}createAddressValidationAPI(){return new aN(this.sessionAPI)}createValidationSettings(){return new lN({localeCode:this.intl.locale})}createExternalConfigSuggestedAmountHintsAI(){return function(e,t,n){var i,s;const a=null===(i=e.externalConfig.checkoutData)||void 0===i?void 0:i.hints;if(!a)return null;const r=[];for(const t of e.enabledFrequencies){const n=e.campaign.config.frequencies[t];if(n.hintsEnabled){const e=null!==(s=a[t])&&void 0!==s?s:[],i=n.suggestedAmountHints.filter((t=>e.includes(t.id)));if((null==e?void 0:e.length)!==i.length)return null;r.push({frequency:t,hints:i})}}return r.some((e=>{let{hints:t}=e;return!t.length}))?null:new sN({enabledAI:!1,frequenciesHints:r,distribution:n,currencyService:t,defaultCurrency:e.campaign.config.defaultCurrency})}(this.checkoutConfiguration,this.currencyService,this.distribution)}createSuggestedAmountHintsAI(){return function(e,t,n){var i,s;const a=[];if(e.enabledFrequencies.forEach((t=>{const n=e.campaign.config.frequencies[t];n.hintsEnabled&&a.push({frequency:t,hints:[...n.suggestedAmountHints]})})),!a.length)return null;const r=null===(s=null===(i=e.externalConfig.checkoutIntent)||void 0===i?void 0:i.donation)||void 0===s?void 0:s.selectedHintId;return new sN({enabledAI:e.campaign.config.enableAI,frequenciesHints:a,mandatoryHintsIds:r?[r]:void 0,distribution:n,currencyService:t,defaultCurrency:e.campaign.config.defaultCurrency})}(this.checkoutConfiguration,this.currencyService,this.distribution)}createDistribution(){return new Ya({distributionId:this.tracker.clientId,name:"suggestedAmountHintsAI",variants:gC,sentry:this.sentry})}}class dN{constructor(e){this.dataPointFactory=e,this.dataPoints=new Map}get list(){return[...this.dataPoints.values()]}getDataPoint(e){let t=this.dataPoints.get(e);return void 0===t&&(t=this.registerDataPoint(e)),t}registerDataPoint(e){const t=this.dataPointFactory.create(e);return this.dataPoints.set(e,t),t}}class hN{constructor(e){this.sessionAPI=e}pay(e){return(0,l.sH)(this,void 0,void 0,(function*(){return this.sessionAPI.post("pay",{paymentMethod:null==e?void 0:e.paymentMethod})}))}hold(e){return(0,l.sH)(this,void 0,void 0,(function*(){const t=Object.assign({},e);return this.sessionAPI.post("hold",t,{rejectsOnInvalid:!0})}))}status(){return(0,l.sH)(this,void 0,void 0,(function*(){try{return(yield this.sessionAPI.get("status",{},{retries:5,delay:200,rejectsOnInvalid:!0})).completed}catch(e){throw new Error("Payment was not started")}}))}}const mN={amount:0,currency:"USD",isFallback:!0};class pN{constructor(e,t,n){this.sessionApi=e,this.currencyService=t,this.suggestions=n,this._amountSuggestion=mN,this._originalAmountSuggestion=mN}getOriginalAmountSuggestion(){return this._originalAmountSuggestion}getAdjustedAmountSuggestion(){return this._amountSuggestion}fetchAmountSuggestion(e){return(0,l.sH)(this,void 0,void 0,(function*(){try{const t=yield this.sessionApi.post("getPduAmount",e);if(Yt.isSuccess(t)){const n=t.successResult;this._originalAmountSuggestion=n,this._amountSuggestion=this.adjustSuggestion(n,e.minRecurringAmount)}else this._originalAmountSuggestion=mN,this._amountSuggestion=mN}catch(e){this._originalAmountSuggestion=mN,this._amountSuggestion=mN}}))}adjustSuggestion(e,t){const{amount:n,currency:i}=e;if(n<t)return Object.assign(Object.assign({},e),{amount:t});const s=this.currencyService.convert(pN.MAX_AMOUNT_IN_USD,"USD",i);return n>s?Object.assign(Object.assign({},e),{amount:this.suggestions.beautify(s,i)}):Object.assign(Object.assign({},e),{amount:n})}}pN.MAX_AMOUNT_IN_USD=1e5;class gN{constructor(e,t,n,i,s,a,r,o){this.globalWindow=e,this.checkoutConfiguration=t,this.currencyService=n,this.donationDataPoint=i,this.postDonationUpsellDataPoint=s,this.donorNameDataPoint=a,this.donorEmailDataPoint=r,this.designationDataPoint=o}getUrl(e){var t,n,i;if(this.isShowcase)return null;const s=this.resolveTargetConfig(),a=s.type===u.N4.REDIRECT,r=this.checkoutConfiguration.queryParams.successUrl||(a?s.redirect.url:null);if(!r)return null;const o={amount:this.currencyService.toFloatUnformattedStr(this.donationDataPoint.total,this.donationDataPoint.currency),monthly:this.postDonationUpsellDataPoint.isAccepted||this.donationDataPoint.frequency===se.MONTHLY,donationId:null!==(n=null===(t=e.donationResultState)||void 0===t?void 0:t.donationId)&&void 0!==n?n:"",currency:this.donationDataPoint.currency,frequency:this.donationDataPoint.frequency,lang:(0,hi.Qk)(this.checkoutConfiguration.environmentConfig.locale)};if(a&&!s.redirect.includeSupporterData||(o.supporterFirstName=this.donorNameDataPoint.firstName,o.supporterLastName=this.donorNameDataPoint.lastName,o.supporterEmail=this.donorEmailDataPoint.email),this.designationDataPoint.goalKey){const e=this.designationDataPoint.goals.find((e=>e.key===this.designationDataPoint.goalKey));o.designationId=null==e?void 0:e.key,o.designationName=null==e?void 0:e.name}(null===(i=e.donationResultState)||void 0===i?void 0:i.tributeId)&&(o.tributeId=e.donationResultState.tributeId);try{const e=this.createURL(r);for(const t in o)if(Object.prototype.hasOwnProperty.call(o,t)){const n=o[t];e.searchParams.append(t,String(n))}return e.toString()}catch(e){return console.error("Invalid redirect URL"),null}}canRedirect(e){return!!this.getUrl(e)}tryRedirect(e){const t=this.getUrl(e.getState());return t?new Promise((()=>{this.redirect(t,e)})):Promise.resolve()}redirect(e,t){t.disarmCloseGuard(),this.globalWindow.location.replace(e)}get isShowcase(){return this.checkoutConfiguration.infrastructureParams.showcase}createURL(e){return"/"===e[0]&&(e=this.globalWindow.location.origin+e),/^https?:\/\//m.test(e)||(e="https://"+e),new URL(e)}resolveTargetConfig(){return this.checkoutConfiguration.checkoutType===Se.PAGE&&this.checkoutConfiguration.campaignPage.thankYouScreen?this.checkoutConfiguration.campaignPage.thankYouScreen:this.checkoutConfiguration.campaign.config.thankYouScreen}}class yN extends Error{constructor(e){super(`Component "${e} doesnt defined, unable to preload`)}}class fN{constructor(e){this.componentsMap=e,this.componentImports=new Set}add(e){return this.assertComponentDefined(e),this.componentImports.add(this.componentsMap[e]),this}load(){for(const e of this.componentImports)e()}assertComponentDefined(e){if(!this.componentsMap[e])throw new yN(e)}}class SN{constructor(e,t){this.loadableComponents=e,this.campaignConfig=t}preload(){return this.configureLoadableComponents(),this.loadableComponents.load()}}var AN;!function(e){e.PHONE_INPUT="PrivacyPhoneInput"}(AN||(AN={}));class EN extends SN{configureLoadableComponents(){this.campaignConfig.showPhone&&this.loadableComponents.add(AN.PHONE_INPUT)}}const CN={[AN.PHONE_INPUT]:()=>Promise.all([n.e(681),n.e(16)]).then(n.bind(n,3016))};function vN(e){const t=new fN(CN);return new EN(t,e)}class NN{constructor(e,t,n){var i;this.componentsPreloader=e,this.checkoutState=t,this.showPaymentLoader=!1,this.askPageActiveTab=Ua.CAUSE,this.pagesOfQuestionsScreen=0,this.cookiePreferencesModalShown=!1,this.cookiePreferencesModalInitiatorElement=null,this.isDonationFormVisibleTrackEventBlocked=!1,this._showCloseButton=!0,this.firstScreen=n.screens.firstScreen,this.unrestrictedExitScreens=n.screens.unrestrictedExitScreens,this.mobileExitScreens=n.screens.mobileExitScreens,this.alwaysRenderedScreens=n.screens.alwaysRenderedScreens,this.screensWithoutTributeBadge=n.screens.screensWithoutTributeBadge,this.mobileScreensWithoutAskTitle=n.screens.mobileScreensWithoutAskTitle,this.mobileScreensWithAskText=n.screens.mobileScreensWithAskText,this.mobileScreensWithoutFaqLinks=n.screens.mobileScreensWithoutFaqLinks,this.mobileScreensWithoutAskPage=n.screens.mobileScreensWithoutAskPage,this.screensWithoutAskOverlay=n.screens.screensWithoutAskOverlay,this.canNotGoBackScreens=n.screens.canNotGoBackScreens,this.alwaysShowCloseButtonScreens=n.screens.alwaysShowCloseButtonScreens,this.conditionallyShowCloseButtonScreens=n.screens.conditionallyShowCloseButtonScreens,this.finalUnavailableScreens=null===(i=null==n?void 0:n.screens)||void 0===i?void 0:i.finalUnavailableScreens}get showCloseButton(){return this._showCloseButton}get showFAQLinks(){return!0}preloadComponents(){return this.componentsPreloader.preload()}setCloseButtonVisibility(e,t){this._showCloseButton=!t.includes(this.firstScreen)&&this.conditionallyShowCloseButtonScreens.includes(e)||this.alwaysShowCloseButtonScreens.includes(e),this.checkoutState.syncUpdate()}isUnrestrictedExitScreen(e){return this.unrestrictedExitScreens.includes(e)}isMobileExitScreen(e){return this.mobileExitScreens.includes(e)}isScreenWithoutTributeBadge(e){return this.screensWithoutTributeBadge.includes(e)}isMobileScreenWithoutAskTitle(e){return this.mobileScreensWithoutAskTitle.includes(e)}isMobileScreenWithAskText(e){return this.mobileScreensWithAskText.includes(e)}isMobileScreenWithoutFaqLinks(e){return this.mobileScreensWithoutFaqLinks.includes(e)}isMobileScreenWithoutAskPage(e){return this.mobileScreensWithoutAskPage.includes(e)}isScreenWithoutAskOverlay(e){return this.screensWithoutAskOverlay.includes(e)}isCanNotGoBackScreen(e){return this.canNotGoBackScreens.includes(e)}isFinalAvailableScreen(e){return void 0!==this.finalUnavailableScreens&&!this.finalUnavailableScreens.includes(e)}}class bN extends NN{}const PN=[ka.THANK_YOU],DN=[],_N=[ka.THANK_YOU,ka.BLOCKED],TN=[ka.THANK_YOU],ON=[ka.THANK_YOU],xN=[],kN=[ka.THANK_YOU],IN=[],wN=[],RN=Ia.CRYPTO_CURRENCY,MN=[...TN,Ia.CRYPTO_CURRENCY],LN=[...xN,Ia.CRYPTO_CURRENCY],UN=[...wN,Ia.CRYPTO_CURRENCY],FN=[Ia.CRYPTO_CURRENCY,ka.THANK_YOU,ka.BLOCKED],jN=[ka.COMMENT],BN=[..._N,ka.QUESTIONS,Ia.CRYPTO_CURRENCY],HN=[...PN,Ia.CRYPTO_CURRENCY],qN=[...kN],GN=[...IN],VN=[ka.THANK_YOU],YN=[...DN],KN=[],zN="facebook",$N="twitter",WN="linkedin",XN="email";function QN(e,t){if(void 0!==t){let n="?";return e.includes("?")&&(n="&"),`${e}${n}ref=${t}`}return e}function ZN(e,t,n,i,s){let a="";switch(e){case WN:return a=vi.stringify({mini:"true",url:QN(t,s),summary:n}),`https://www.linkedin.com/shareArticle?${a}`;case $N:return a=vi.stringify({url:QN(t,s),text:n}),`https://twitter.com/intent/tweet?${a}`;case zN:return a=vi.stringify({u:QN(t,s),quote:n}),`https://www.facebook.com/sharer.php?${a}`;case XN:return a=vi.stringify({body:DA([n,t],"\n"),subject:i||""}),`mailto:?${a}`;default:return""}}var JN,eb;!function(e){e.TWITTER="twitter",e.FACEBOOK="facebook",e.LINKEDIN="linkedin",e.EMAIL="email",e.MORE="more"}(JN||(JN={}));class tb{constructor(e){this.sharingApiParams=e}get isSharingEnabled(){const{email:e,twitter:t,linkedin:n,facebook:i,copyLink:s}=this.sharingChannels;return e||t||n||i||s}get sharingChannels(){return this.sharingApiParams.sharingChannels}get shareLink(){const e=this.sharingApiParams.sharingLink;return e?/^https?:\/\//m.test(e)?e:"https://"+e:window.location.href}get sharingText(){return this.sharingApiParams.sharingText||""}share(e,t,n){if(this.sharingApiParams.showcase)return;const i=this.getSharingLink(e,t,n);window.open(i,"_blank","location=yes,height=400,width=550,scrollbars=yes,status=yes")}getSharingLink(e,t,n){const i=function(e,t){const n=new URL(e),i={[md.FACEBOOK]:JN.FACEBOOK,[md.LINKEDIN]:JN.LINKEDIN,[md.TWITTER]:JN.TWITTER,[md.EMAIL]:JN.EMAIL,[md.MORE]:JN.MORE,[md.LINK]:null};return i[t]?(n.searchParams.set("sharingVendor",i[t]),n.toString()):e}(this.shareLink,e),s=this.sharingApiParams.sharingText||"";switch(e){case md.TWITTER:return ZN($N,i,s,void 0,n);case md.LINKEDIN:return ZN(WN,i,s,void 0,n);case md.FACEBOOK:return ZN(zN,i,s,void 0,n);case md.EMAIL:return ZN(XN,i,s,t);case md.MORE:return i;case md.LINK:return this.shareLink;default:throw new Error(`Unknown sharing type ${e}`)}}}function nb(e){var t;return e.checkoutType===Se.PAGE&&(null===(t=e.campaignConfig)||void 0===t?void 0:t.campaignPage)?new tb({sharingChannels:Object.assign(Object.assign({},e.campaignConfig.campaignPage.thankYouScreen.sharing.channels),{copyLink:!1}),sharingLink:e.campaignConfig.campaignPage.thankYouScreen.sharing.link,showcase:e.isShowcase,sharingText:e.campaignConfig.campaignPage.thankYouScreen.sharing.text}):new tb({sharingChannels:Object.assign(Object.assign({},e.campaignConfig.thankYouScreen.sharing.channels),{copyLink:!1}),sharingLink:e.campaignConfig.thankYouScreen.sharing.link,showcase:e.isShowcase,sharingText:e.campaignConfig.thankYouScreen.sharing.text})}!function(e){e.PENDING_STATE_CHANGED="pendingStateChanged",e.SUBMIT="submit",e.SKIP="skip"}(eb||(eb={}));class ib extends FE{constructor(e,t,n){let{name:i}=t;super(),this.flow=e,this.debug=n,this._pending=!1,this.updateListeners=new Set,this.name=i}get data(){return{}}get pending(){return this._pending}set pending(e){this._pending=e,this.emit(eb.PENDING_STATE_CHANGED,this._pending)}dispose(){this.removeUpdateListeners(),this.removeAllListeners()}onUpdate(e){this.updateListeners.add(e)}removeUpdateListener(e){this.updateListeners.delete(e)}beforeLeave(e){return Promise.resolve(!0)}beforeEnter(){return Promise.resolve()}getScreenData(){return{}}leave(){return this.flow.next()}submit(){this.emit(eb.SUBMIT)}skip(){this.emit(eb.SKIP)}syncUpdate(){this.triggerUpdate()}update(){this.scheduleUpdate()}triggerUpdate(){this.updateListeners.forEach((e=>e()))}scheduleUpdate(){void 0!==this.updateTimeout&&window.clearTimeout(this.updateTimeout),this.updateTimeout=window.setTimeout((()=>{this.triggerUpdate()}),ib.UPDATE_DEBOUNCE_MS)}removeUpdateListeners(){this.updateListeners.clear()}}ib.UPDATE_DEBOUNCE_MS=250;class sb extends ib{constructor(e){let{flow:t,name:n,checkoutService:i,checkoutState:s,debug:a,intl:r,subscriptionPeriodLabelsService:o,currencyService:c,experiments:l}=e;super(t,{name:n},a),this.checkoutService=i,this.checkoutState=s,this.intl=r,this.subscriptionPeriodLabelsService=o,this.currencyService=c,this.experiments=l,this.viewState=(0,Ae.Ay)(this.getInitialViewState(),(e=>e)),this.on(eb.PENDING_STATE_CHANGED,(e=>{"boolean"==typeof e&&this.setLocked(e)}))}getScreenData(){return this.viewState}leave(e){return this.name!==this.flow.getCurrentScreen().name?Promise.resolve():this.flow.next({getMandatoryAllowance:()=>this.checkoutService.shouldFindMandatoryScreen,direction:null==e?void 0:e.direction,omitBeforeLeave:null==e?void 0:e.omitBeforeLeave})}produceViewState(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.viewState=(0,Ae.Ay)(this.viewState,e),t||this.syncUpdate()}setLocked(e){e?(this.flow.lock(),this.produceViewState((e=>{e.locked=!0}))):(this.flow.unlock(),this.produceViewState((e=>{e.locked=!1})))}withPending(e){return(0,l.sH)(this,void 0,void 0,(function*(){this.pending=!0;const t=yield e();return this.pending=!1,t}))}}class ab extends sb{getInitialViewState(){return{locked:!1}}}class rb extends sC{constructor(e,t,n,i,s,a,r,o,c,l,d,h,m,p,g,y,f,S,A){super(f.campaign.config,y,f,S),this.donation=e,this.designation=t,this.tribute=n,this.preDonationUpsell=i,this.postDonationUpsell=s,this.privacy=a,this.paymentOptions=r,this.giftAid=o,this.communicationConsent=c,this.mailingAddress=l,this.comment=d,this.doubleTheDonation=h,this.questions=m,this.remindMeLater=p,this.checkoutStateSynchronizer=g,this.debug=y,this.dataPointRegistry=S,this.experiments=A,this.flowType=fe.MONEY,this.paymentErrors={[u._h.CARD]:!1,[u._h.UK_BACS]:!1,[u._h.US_BANK_ACCOUNT]:!1,[u._h.PAYPAL]:!1}}get isReadyToRetryPay(){if(!this.hasPaymentAttempt)return!1;const e=this.dataPointRegistry.getDataPoint(KE.PAYMENT_OPTIONS).clientPaymentMethod;return!!e&&[u._h.CARD,u._h.UK_BACS].includes(e)}initialize(){this.checkoutStateSynchronizer.onInit()}get(){var e;return{hasPaymentAttempt:this.hasPaymentAttempt,isReadyToRetryPay:this.isReadyToRetryPay,hasMailingAddressError:this.hasMailingAddressError,donation:this.donationState,personalInformation:this.personalInformationState,mailingListSubscription:this.mailingListSubscriptionState,paymentErrors:this.paymentErrors,giftAid:this.giftAidState,tribute:this.tributeState,comment:this.commentState,donateAnonymous:this.donateAnonymousState,designation:this.designationState,paymentOptions:this.paymentOptionsState,mailingAddress:this.mailingAddressState,preDonationUpsell:this.preDonationUpsellState,phoneNumber:this.phoneNumberState,onBehalfOf:this.onBehalfOfState,termsAndConditions:this.termsAndConditionsState,remindMeLater:this.remindMeLaterState,postDonationUpsell:this.postDonationUpsellState,questions:this.questionsState,doubleDonation:this.doubleDonationState,donationResultState:this.donationResultState,isPaid:Boolean(null===(e=this.donationResultState)||void 0===e?void 0:e.donationId),communicationConsent:this.communicationConsentState}}setPaymentError(e,t){this.paymentErrors[e]=t}get phoneNumberState(){const e=this.dataPointRegistry.getDataPoint(Ra.PHONE_NUMBER);return{isEnabled:e.isEnabled,isRequired:e.isRequired}}get remindMeLaterState(){const e=this.dataPointRegistry.getDataPoint(Ra.REMIND_ME_LATER),t=this.dataPointRegistry.getDataPoint(Ra.DONOR_EMAIL),n=this.dataPointRegistry.getDataPoint(Ra.TERMS_AND_CONDITIONS),i={show:!1,isEnabled:e.isEnabled,isRequired:e.isRequired};return e.isEnabled&&(t.isEnabled&&!t.validate().isValid||n.isEnabled&&!n.isAccepted)?Object.assign(Object.assign({},i),{show:!0}):i}get mailingListSubscriptionState(){return{isEnabled:this.dataPointRegistry.getDataPoint(Ra.MAILING_ADDRESS).isEnabled}}get donationState(){const e=this.dataPointRegistry.getDataPoint(KE.DONATION);return{isEnabled:e.isEnabled,isRequired:e.isRequired,amount:e.amount,currency:e.currency,frequency:e.frequency,defaultAmount:e.defaultAmount||0,amountOptions:e.amountOptions,amountInUsd:e.amountInUSD||0}}get personalInformationState(){const e=this.dataPointRegistry.getDataPoint(KE.DONATION);return{isEnabled:e.isEnabled,isRequired:e.isRequired}}get donateAnonymousState(){const e=this.dataPointRegistry.getDataPoint(Ra.DONATE_ANONYMOUS);return{isEnabled:e.isEnabled,isRequired:e.isRequired}}get onBehalfOfState(){const e=this.dataPointRegistry.getDataPoint(Ra.ON_BEHALF_OF);return{isEnabled:e.isEnabled,isRequired:e.isRequired,isActive:e.isActive}}get termsAndConditionsState(){return{isEnabled:this.dataPointRegistry.getDataPoint(Ra.TERMS_AND_CONDITIONS).isEnabled}}get commentState(){const e=this.dataPointRegistry.getDataPoint(Ra.COMMENT);return{isEnabled:e.isEnabled,isRequired:e.isRequired}}get giftAidState(){const e=this.dataPointRegistry.getDataPoint(KE.GIFT_AID);return{isEnabled:e.isEnabled,isAccepted:e.isAccepted}}get tributeState(){const e=this.dataPointRegistry.getDataPoint(Ra.TRIBUTE);return{isEnabled:e.isEnabled,isRequired:e.isRequired,name:e.tributeeName,labelType:e.labelType,isActive:e.isActive}}get designationState(){const e=this.dataPointRegistry.getDataPoint(Ra.DESIGNATION);return{isEnabled:e.isEnabled,isRequired:e.isRequired}}get paymentOptionsState(){const e=this.dataPointRegistry.getDataPoint(KE.PAYMENT_OPTIONS),t=this.dataPointRegistry.getDataPoint(KE.US_BANK_ACCOUNT);return{isEnabled:e.isEnabled,isRequired:e.isRequired,clientPaymentMethod:e.clientPaymentMethod,selectedPaymentOption:e.selectedPaymentOption,preSelectedPaymentOption:e.preSelectedPaymentOption,usBankAccountVerificationSetup:{isInstantOnly:t.usBankAccountVerificationSetup.isInstantOnly,isAbavOnly:t.usBankAccountVerificationSetup.isAbavOnly,isMicroDepositOnly:t.usBankAccountVerificationSetup.isMicroDepositOnly,isInstantAndMicroDeposit:t.usBankAccountVerificationSetup.isInstantAndMicroDeposit,isInstantAndAbav:t.usBankAccountVerificationSetup.isInstantAndAbav,verificationType:t.verificationType}}}get mailingAddressState(){const e=this.dataPointRegistry.getDataPoint(Ra.MAILING_ADDRESS);return{isEnabled:e.isEnabled,isRequired:e.isRequired}}get postDonationUpsellState(){const e=this.dataPointRegistry.getDataPoint(KE.POST_DONATION_UPSELL);return{isEnabled:e.isEnabled,isShowed:e.isShowed}}get preDonationUpsellState(){const e=this.dataPointRegistry.getDataPoint(KE.PRE_DONATION_UPSELL),t=this.dataPointRegistry.getDataPoint(Ra.TRIBUTE);let n=!1;return this.experiments.has(cn.UPSELL_CURTAIN_EXPERIMENT)&&(n=this.experiments.get(cn.UPSELL_CURTAIN_EXPERIMENT).canOpenUpsellCurtain({tributeIsFilled:t.isFilled,targetFrequency:e.upsellFrequency,preDonationUpsellIsEnabled:e.isEnabled})),{isEnabled:e.isEnabled,upsellCurtainUsed:n}}get doubleDonationState(){const e=this.dataPointRegistry.getDataPoint(KE.DTD);return{isEnabled:e.isEnabled,isIntegrationEnabled:e.isIntegrationEnabled,isAccepted:e.isUpsellAccepted}}get questionsState(){return{isEnabled:this.dataPointRegistry.getDataPoint(Ra.QUESTIONS).isEnabled}}get communicationConsentState(){return{isCustomizedEnabled:this.dataPointRegistry.getDataPoint(Ra.COMMUNICATION_CONSENT).isCustomizedConsentEnabled}}}class ob extends sb{beforeEnter(){return(0,l.sH)(this,void 0,void 0,(function*(){this.checkoutService.makeDataPointOptional(Ra.COMMENT),this.produceViewState((e=>{e.comment=this.commentDataPoint.comment}))}))}beforeLeave(e){return(0,l.sH)(this,void 0,void 0,(function*(){return this.checkoutService.updateSession({canUseAmountDefaults:!0}),!0}))}setComment(e){this.produceViewState((t=>{t.comment=e}))}submitComment(){this.checkoutState instanceof rb?this.checkoutState.comment.saveComment(this.viewState.comment):this.commentDataPoint.saveComment(this.viewState.comment),this.leave({direction:Io.BACKWARD})}getInitialViewState(){return{locked:!1,comment:""}}get commentDataPoint(){return this.checkoutService.getDataPoint(Ra.COMMENT)}}var cb=n(4270);const lb=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:16,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ",n="";for(let i=0;i<e;i+=1)n+=t[Math.floor(Math.random()*t.length)];return n};var ub={[fe.MONEY]:KE.DONATION,[fe.CRYPTO]:wa.DONATION,[fe.STOCK]:null};class db extends sb{constructor(e,t,n,i,s){super(s),this.onBehalfOfDataPoint=e,this.countriesService=t,this.mailingAddressCustomization=n,this.sentry=i,this.addressSessionToken=lb()}get isOnBehalfOf(){return this.onBehalfOfDataPoint.isOnBehalfOf}getStates(e){return this.mailingAddressCustomization.getPredefinedRegions({country:e})}getAriaErrorMessage(e){return this.intl.translate("mailingAddressScreen.addressForm.error.required",{field:e})}beforeEnter(){return(0,l.sH)(this,void 0,void 0,(function*(){this.checkoutState instanceof rb?this.checkoutState.mailingAddress.setSkipped(!1):this.mailingAddressDataPoint.setSkipped(!1);const e=this.countriesService.getMailingAddressCountriesList();this.produceViewState((t=>{var n,i,s;t.isRequired=this.mailingAddressDataPoint.isRequired,t.isPaymentScreen=this.isPaymentScreen,t.isCryptoFlow=this.isCryptoFlow,t.line1=this.mailingAddressDataPoint.line1,t.line2=this.mailingAddressDataPoint.line2,t.postal=this.mailingAddressDataPoint.postal,t.city=this.mailingAddressDataPoint.city,t.region=this.mailingAddressDataPoint.region,t.countryCode=this.mailingAddressDataPoint.countryCode,t.countryName=null!==(i=null===(n=e.find((e=>e.countryCode===this.mailingAddressDataPoint.countryCode)))||void 0===n?void 0:n.countryName)&&void 0!==i?i:"",t.countries=e,t.isRegionEnabled=this.isRegionEnabled(this.mailingAddressDataPoint.countryCode),t.isLayoutPostalCodeFirst=this.isLayoutPostalCodeFirst(this.mailingAddressDataPoint.countryCode),t.isAlternativeLabels=this.isAlternativeLabels(this.mailingAddressDataPoint.countryCode),t.formattedAmount=this.intl.formatCurrency(null!==(s=this.donationDataPoint.total)&&void 0!==s?s:0,{currency:this.donationDataPoint.currency,display:"trimzeroes"}),t.frequency=this.donationDataPoint.frequency,this.hasMailingAddressError&&(t.processingState=La.ERROR,t.payErrorMessage=this.checkoutService.payErrorMessage,t.additionalPayErrorMessage=this.checkoutService.additionalPayErrorMessage)}))}))}beforeLeave(e){return(0,l.sH)(this,void 0,void 0,(function*(){if(this.pending)return!1;this.pending=!0;const e=this.mailingAddressDataPoint.validate();if(!e.isValid)return this.produceViewState((t=>{t.validation=e,t.shakeKey+=1})),this.pending=!1,!1;if(this.mailingAddressDataPoint.checkShouldValidateOnServer()){if(this.pending=!0,this.setProcessingState(La.PENDING),!(yield this.mailingAddressDataPoint.validateAddress()))return this.produceViewState((e=>{e.shakeKey+=1,e.hasServerValidationError=!0})),this.setProcessingState(La.ERROR),this.pending=!1,!1;this.setProcessingState(La.SUCCESS),this.pending=!1}return this.checkoutService.updateSession(),this.isPaymentScreen?this.pay():(this.pending=!1,!0)}))}skip(){return(0,l.sH)(this,void 0,void 0,(function*(){return this.pending=!0,this.checkoutState instanceof rb?this.checkoutState.mailingAddress.setSkipped(!0):this.mailingAddressDataPoint.setSkipped(!0),this.checkoutService.updateSession(),this.isPaymentScreen?(yield this.pay())?this.leave({omitBeforeLeave:!0}):void 0:(this.pending=!1,this.leave({omitBeforeLeave:!0}))}))}search(e,t){return(0,l.sH)(this,void 0,void 0,(function*(){if(!this.isAutocompleteEnabled())return;if(!this.isGetPlacesDataValid(e))return;this.produceViewState((e=>{e.isLoadingPlaces=!0}));const n=yield this.getPlaces(e,t);this.produceViewState((e=>{e.places=n.map((e=>Object.assign(Object.assign({},e),{innerId:(0,cb.Ak)()}))),e.isLoadingPlaces=!1}))}))}getPlaceById(e){const t=this.viewState.places.find((t=>t.innerId===e));if(!t)throw new Error(`No place with selected innerId "${e}"`);return t}shouldFindSubplaces(e){return this.mailingAddressDataPoint.shouldFindSubplaces(e)}retrieveSubplaces(e,t){return(0,l.sH)(this,void 0,void 0,(function*(){const n="line1"===t?this.viewState.line1:this.viewState.postal;return this.search(n,e)}))}retrieveDetails(e){return(0,l.sH)(this,void 0,void 0,(function*(){let t;try{t=yield this.mailingAddressDataPoint.getDetails(e,this.addressSessionToken)}finally{this.addressSessionToken=lb()}this.setLine1(t.line1),this.setCity(t.city),this.isPostalCodeAutocompleteEnabled(this.mailingAddressDataPoint.countryCode)&&this.setPostal(t.postal),"string"==typeof t.line2&&this.setLine2(t.line2),t.region&&this.setRegion(t.region),this.produceViewState((e=>{e.line1=this.mailingAddressDataPoint.line1,e.line2=this.mailingAddressDataPoint.line2,e.city=this.mailingAddressDataPoint.city,e.region=this.mailingAddressDataPoint.region,e.postal=this.mailingAddressDataPoint.postal,e.validation=qC.defaultValidationResult}))}))}changeLine1(e){this.setLine1(e),this.produceViewState((e=>{e.validation.fields.line1.isValid||(e.validation.fields.line1=qC.defaultValidationResult.fields.line1),e.line1=this.mailingAddressDataPoint.line1}))}changeLine2(e){this.setLine2(e),this.produceViewState((e=>{e.validation.fields.line2.isValid||(e.validation.fields.line2=qC.defaultValidationResult.fields.line2),e.line2=this.mailingAddressDataPoint.line2}))}changeCity(e){this.setCity(e),this.produceViewState((e=>{e.validation.fields.city.isValid||(e.validation.fields.city=qC.defaultValidationResult.fields.city),e.city=this.mailingAddressDataPoint.city}))}changeRegion(e){this.setRegion(e),this.produceViewState((e=>{e.validation.fields.region.isValid||(e.validation.fields.region=qC.defaultValidationResult.fields.region),e.region=this.mailingAddressDataPoint.region}))}changePostalCode(e){this.setPostal(e),this.produceViewState((e=>{e.validation.fields.postal.isValid||(e.validation.fields.postal=qC.defaultValidationResult.fields.postal),e.postal=this.mailingAddressDataPoint.postal}))}changeSelectedCountry(e){const t=this.isLayoutPostalCodeFirst(this.mailingAddressDataPoint.countryCode),n=this.isRegionEnabled(this.mailingAddressDataPoint.countryCode),i=this.viewState.countries.find((t=>t.countryCode===e));i?(this.setCountryCode(e),this.setRegion(this.getPredefinedRegion(e,t,n)),this.produceViewState((t=>{t.countryCode=this.mailingAddressDataPoint.countryCode,t.countryName=i.countryName,t.region=this.mailingAddressDataPoint.region,t.places.splice(0,t.places.length),t.isRegionEnabled=this.isRegionEnabled(this.mailingAddressDataPoint.countryCode),t.isLayoutPostalCodeFirst=this.isLayoutPostalCodeFirst(this.mailingAddressDataPoint.countryCode),t.isAlternativeLabels=this.isAlternativeLabels(e)}))):this.sentry.captureException(new Error("Unknown country code"),{extra:{prevCountryCode:this.mailingAddressDataPoint.countryCode,nextCountryCode:e}})}getPredefinedRegion(e,t,n){var i,s;const a=this.getStates(e);if(a){if(Array.isArray(a))return null===(i=a[0])||void 0===i?void 0:i.code;const e=a[Object.keys(a)[0]],t=null===(s=null==e?void 0:e[0])||void 0===s?void 0:s.code;if(t)return t}const r=this.isLayoutPostalCodeFirst(this.mailingAddressDataPoint.countryCode),o=this.isRegionEnabled(this.mailingAddressDataPoint.countryCode);return t!==r||n!==o?"":this.mailingAddressDataPoint.region}getInitialViewState(){return{locked:!1,isRequired:!1,isPaymentScreen:!0,isCryptoFlow:!1,processingState:La.IDLE,hasServerValidationError:!1,line1:"",line2:"",city:"",region:"",postal:"",countryCode:u.tg.UNITED_STATES,countryName:"",isLayoutPostalCodeFirst:!1,isRegionEnabled:!1,isAlternativeLabels:!1,countries:[],places:[],isLoadingPlaces:!1,shakeKey:0,validation:qC.defaultValidationResult,formattedAmount:"",frequency:se.MONTHLY}}get hasMailingAddressError(){return this.checkoutService.getState().hasMailingAddressError}get mailingAddressDataPoint(){return this.checkoutService.getDataPoint(Ra.MAILING_ADDRESS)}get isPaymentScreen(){return this.name===this.checkoutService.getPaymentScreen(this.name,this.flow.getHistoricalScreens())}get isCryptoFlow(){return this.checkoutService.type===fe.CRYPTO}get donationDataPoint(){return this.checkoutService.getDataPoint(ub[this.checkoutService.type])}isLayoutPostalCodeFirst(e){return this.mailingAddressCustomization.isLayoutPostalCodeFirst({country:e})}isRegionEnabled(e){return this.mailingAddressCustomization.isRegionEnabled({country:e})}isPostalCodeAutocompleteEnabled(e){return this.mailingAddressCustomization.isPostalCodeAutocompleteEnabled({country:e})}isAlternativeLabels(e){return this.mailingAddressCustomization.isAlternativeLabels({country:e})}setProcessingState(e){this.produceViewState((t=>{t.processingState=e}))}pay(){return(0,l.sH)(this,void 0,void 0,(function*(){this.pending=!0,this.setProcessingState(La.PENDING);const e=yield this.checkoutService.pay({screen:this.name,predictedNextScreen:this.flow.predictNextScreen()});return Yt.isSuccess(e)?(this.isCryptoFlow||(this.setProcessingState(La.SUCCESS),yield Da(this.checkoutService.checkoutConfiguration.successPaymentDelayBeforeLeave)),this.pending=!1,!0):e.failureResult.shouldLeave?(this.pending=!1,!0):(this.produceViewState((e=>{e.payErrorMessage=this.checkoutService.payErrorMessage,e.additionalPayErrorMessage=this.checkoutService.additionalPayErrorMessage})),this.setProcessingState(La.ERROR),this.pending=!1,!1)}))}getPlaces(e,t){return(0,l.sH)(this,void 0,void 0,(function*(){const n={input:this.prepareGetPlacesText(e),restrictCountries:[this.viewState.countryCode],sessionToken:this.addressSessionToken};return t?this.mailingAddressDataPoint.getSubplaces(Object.assign({place:t},n)):this.mailingAddressDataPoint.getPlaces(Object.assign({},n))}))}isAutocompleteEnabled(){return this.mailingAddressCustomization.isAutocompleteEnabled({company:this.checkoutService.checkoutConfiguration.company.key})}isGetPlacesDataValid(e){return Boolean(this.prepareGetPlacesText(e))&&Boolean(this.addressSessionToken)}prepareGetPlacesText(e){return e.trim()}setLine1(e){this.checkoutState instanceof rb?this.checkoutState.mailingAddress.setLine1(e):this.mailingAddressDataPoint.setLine1(e)}setLine2(e){this.checkoutState instanceof rb?this.checkoutState.mailingAddress.setLine2(e):this.mailingAddressDataPoint.setLine2(e)}setCity(e){this.checkoutState instanceof rb?this.checkoutState.mailingAddress.setCity(e):this.mailingAddressDataPoint.setCity(e)}setCountryCode(e){this.checkoutState instanceof rb?this.checkoutState.mailingAddress.setCountryCode(e):this.mailingAddressDataPoint.setCountryCode(e)}setRegion(e){this.checkoutState instanceof rb?this.checkoutState.mailingAddress.setRegion(e):this.mailingAddressDataPoint.setRegion(e)}setPostal(e){this.checkoutState instanceof rb?this.checkoutState.mailingAddress.setPostal(e):this.mailingAddressDataPoint.setPostal(e)}}class hb extends sb{beforeEnter(){return(0,l.sH)(this,void 0,void 0,(function*(){this.produceViewState((e=>{var t;e.isPaymentScreen=this.isPaymentScreen,e.firstName=this.donorNameDataPoint.firstName,e.lastName=this.donorNameDataPoint.lastName,e.email=this.donorEmailDataPoint.email,e.emailConsent.isEnabled=this.donorEmailDataPoint.emailConsent.isEnabled,e.showPhone=this.phoneNumberDataPoint.isEnabled,e.phoneRequired=this.phoneNumberDataPoint.isRequired,e.phone=this.phoneNumberDataPoint.phone,e.phoneLegalText=this.phoneNumberDataPoint.phoneLegalText,e.showPhoneLegalText=this.phoneNumberDataPoint.isLegalTextEnabled,e.userCountryCode=this.phoneNumberDataPoint.countryCode,e.showAnonymous=this.donateAnonymousDataPoint.isEnabled,e.anonymousChecked=this.donateAnonymousDataPoint.anonymousChecked,e.processingState=La.IDLE,e.generalConsent={isAccepted:this.communicationConsentDataPoint.generalConsent.isAccepted,isEnabled:this.communicationConsentDataPoint.isGeneralConsentEnabled},e.onBehalfOf.companyName=this.onBehalfOfDataPoint.companyName,e.onBehalfOf.isEnabled=this.onBehalfOfDataPoint.isEnabled,e.onBehalfOf.isActive=this.onBehalfOfDataPoint.isActive,e.termsAndConditions.text=this.termsAndConditionsDataPoint.text,e.termsAndConditions.isEnabled=this.termsAndConditionsDataPoint.isEnabled,e.termsAndConditions.isAccepted=this.termsAndConditionsDataPoint.isAccepted;const{showPhone:n}=e,i=!!this.customerTitleDataPoint.isEnabled&&n&&e.onBehalfOf.isEnabled&&e.showAnonymous&&e.mailingListSubscription.show&&e.termsAndConditions.isEnabled;e.isApplePayAlertVisible=this.isApplePayAlertVisible,e.allOptionsEnabled=i,e.customerTitle.title=this.customerTitleDataPoint.title,e.customerTitle.list=this.customerTitleDataPoint.titleList,e.customerTitle.isEnabled=this.customerTitleDataPoint.isEnabled,e.customerTitle.isRequired=this.customerTitleDataPoint.isRequired,e.birthday.value=this.birthdayDataPoint.dateValue,e.birthday.isEnabled=this.birthdayDataPoint.isEnabled,e.birthday.dateFormat=this.birthdayDataPoint.dateFormat,e.birthday.convertedDate=this.birthdayDataPoint.convertedDate,e.donation.formattedAmount=this.intl.formatCurrency(null!==(t=this.donationDataPoint.total)&&void 0!==t?t:0,{currency:this.donationDataPoint.currency,display:"trimzeroes"}),e.donation.frequency=this.donationDataPoint.frequency,e.autoFocus=this.getAutoFocusConfig(e.customerTitle.isEnabled)})),this.tryStartBirthdayExperiment(),this.tryExposeBirthdayExperiment()}))}beforeLeave(e){return(0,l.sH)(this,void 0,void 0,(function*(){if(this.pending)return!1;this.pending=!0;let e=!1;if(this.produceViewState((t=>{t.validation.customerTitle=this.customerTitleDataPoint.validate(),t.validation.donorName=this.donorNameDataPoint.validate(),t.validation.donorEmail=this.donorEmailDataPoint.validate(),t.validation.phone=this.phoneNumberDataPoint.validate(),t.validation.isAccepted=this.termsAndConditionsDataPoint.validate(),t.validation.onBehalfOf=this.onBehalfOfDataPoint.validate(),t.validation.birthday=this.birthdayDataPoint.validate(),e=this.checkHasError(t),e&&(t.shakeKey+=1)})),e)return this.pending=!1,!1;this.setProcessingState(La.PENDING);const t=yield this.checkoutService.updateSession();if(Yt.isFailure(t)&&t.failureResult.customerEmailError)return yield this.startServerErrorFlow(),!1;if(!this.isPaymentScreen)return this.setProcessingState(La.IDLE),this.pending=!1,!0;const n=yield this.checkoutService.pay({screen:this.name,predictedNextScreen:this.flow.predictNextScreen()});return Yt.isSuccess(n)?(this.isCryptoFlow||(this.setProcessingState(La.SUCCESS),yield Da(this.checkoutService.checkoutConfiguration.successPaymentDelayBeforeLeave)),this.pending=!1,!0):n.failureResult.shouldLeave?(this.pending=!1,!0):(this.produceViewState((e=>{e.payErrorMessage=this.checkoutService.payErrorMessage||this.intl.translate("common.errorOccurredText"),e.additionalPayErrorMessage=this.checkoutService.additionalPayErrorMessage||""})),this.setProcessingState(La.ERROR),this.pending=!1,!1)}))}changeCompanyName(e){this.checkoutState instanceof rb?this.checkoutState.privacy.setOnBehalfOfCompanyName(e):this.onBehalfOfDataPoint.setCompanyName(e),this.produceViewState((e=>{e.validation.onBehalfOf.isValid||(e.validation.onBehalfOf=GC.defaultValidationResult),e.onBehalfOf.companyName=this.onBehalfOfDataPoint.companyName}))}changeCustomerTitle(e){this.checkoutState instanceof rb?this.checkoutState.privacy.setDonorTitle(e):this.customerTitleDataPoint.setTitle(e),this.produceViewState((e=>{e.validation.customerTitle.isValid||(e.validation.customerTitle=MC.defaultValidationResult),e.customerTitle.title=this.customerTitleDataPoint.title}))}changeFirstName(e){this.checkoutState instanceof rb?this.checkoutState.privacy.setDonorFirstName(e):this.donorNameDataPoint.setFirstName(e),this.produceViewState((e=>{e.validation.donorName.fields.firstName.isValid||(e.validation.donorName.fields.firstName=$C.defaultValidationResult.fields.firstName),e.firstName=this.donorNameDataPoint.firstName}))}changeLastName(e){this.checkoutState instanceof rb?this.checkoutState.privacy.setDonorLastName(e):this.donorNameDataPoint.setLastName(e),this.produceViewState((e=>{e.validation.donorName.fields.lastName.isValid||(e.validation.donorName.fields.lastName=$C.defaultValidationResult.fields.lastName),e.lastName=this.donorNameDataPoint.lastName}))}changeEmail(e){this.checkoutState instanceof rb?this.checkoutState.privacy.setDonorEmail(e):this.donorEmailDataPoint.setEmail(e),this.produceViewState((e=>{e.validation.donorEmail.fields.email.isValid||(e.validation.donorEmail.fields.email=WC.defaultValidationResult.fields.email),e.email=this.donorEmailDataPoint.email}))}changePhone(e){this.checkoutState instanceof rb?this.checkoutState.privacy.setPhoneNumber(e):this.phoneNumberDataPoint.setPhone(e),this.produceViewState((e=>{e.validation.phone.isValid||(e.validation.phone=XC.defaultValidationResult),e.phone=this.phoneNumberDataPoint.phone}))}changePlainPhone(e){this.checkoutState instanceof rb?this.checkoutState.privacy.setPhoneCleanNumber(e):this.phoneNumberDataPoint.setCleanPhone(e)}changeBirthday(e){this.checkoutState instanceof rb?this.checkoutState.privacy.setBirthday(e):this.birthdayDataPoint.setValue(e),this.produceViewState((t=>{t.validation.birthday.isValid||(t.validation.birthday=jv.defaultValidationResult),t.birthday.convertedDate=this.birthdayDataPoint.convertedDate,t.birthday.value=e}))}changeCountryCode(e){this.checkoutState instanceof rb?this.checkoutState.privacy.setPhoneCountryCode(e):this.phoneNumberDataPoint.setCountryCode(e),this.produceViewState((e=>{e.userCountryCode=this.phoneNumberDataPoint.countryCode}))}toggleOnBehalfOf(){this.checkoutState instanceof rb?this.checkoutState.privacy.setOnBehalfOfActive(!this.onBehalfOfDataPoint.isActive):this.onBehalfOfDataPoint.setIsActive(!this.onBehalfOfDataPoint.isActive),this.produceViewState((e=>{e.onBehalfOf.isActive=this.onBehalfOfDataPoint.isActive,e.isPaymentScreen=this.isPaymentScreen}))}toggleTermsAndConditionsAccepted(){this.checkoutState instanceof rb?this.checkoutState.privacy.setTermsAndConditionsAccepted(!this.termsAndConditionsDataPoint.isAccepted):this.termsAndConditionsDataPoint.setIsAccepted(!this.termsAndConditionsDataPoint.isAccepted),this.produceViewState((e=>{var t;(null===(t=e.validation.isAccepted)||void 0===t?void 0:t.isValid)||(e.validation.isAccepted=JC.defaultValidationResult),e.termsAndConditions.isAccepted=this.termsAndConditionsDataPoint.isAccepted}))}toggleAnonymousChecked(){this.checkoutState instanceof rb?this.checkoutState.privacy.setDonateAnonymousChecked(!this.donateAnonymousDataPoint.anonymousChecked):this.donateAnonymousDataPoint.setAnonymousChecked(!this.donateAnonymousDataPoint.anonymousChecked),this.produceViewState((e=>{e.anonymousChecked=this.donateAnonymousDataPoint.anonymousChecked}))}toggleGeneralConsentChecked(e){this.checkoutState instanceof rb&&this.checkoutState.communicationConsent.setGeneralConsentState(e),this.checkoutState instanceof rb||(e?this.communicationConsentDataPoint.acceptGeneralConsent():this.communicationConsentDataPoint.rejectGeneralConsent()),this.produceViewState((e=>{e.generalConsent.isAccepted=this.communicationConsentDataPoint.generalConsent.isAccepted}))}setGeneralConsentShown(){this.checkoutState instanceof rb?this.checkoutState.communicationConsent.setGeneralConsentShown():this.communicationConsentDataPoint.setGeneralConsentShown()}clearEmailServerError(){this.produceViewState((e=>{e.serverErrors.email=!1,e.processingState=La.IDLE}))}getInitialViewState(){return{shakeKey:0,validation:{customerTitle:MC.defaultValidationResult,donorName:$C.defaultValidationResult,donorEmail:WC.defaultValidationResult,onBehalfOf:GC.defaultValidationResult,phone:XC.defaultValidationResult,isAccepted:JC.defaultValidationResult,birthday:jv.defaultValidationResult},serverErrors:{},showPhone:!1,phoneRequired:!1,showPhoneLegalText:!1,phoneLegalText:"",showAnonymous:!1,anonymousChecked:!1,mailingListSubscription:{checked:!1,show:!1,text:""},textIsVisible:!1,isApplePayAlertVisible:!1,allOptionsEnabled:!1,firstName:"",lastName:"",email:"",emailConsent:{isEnabled:!1},phone:null,isPaymentScreen:!1,payErrorMessage:"",additionalPayErrorMessage:"",userCountryCode:u.tg.UNITED_STATES,processingState:La.IDLE,termsAndConditions:{isAccepted:!1,isEnabled:!1,text:""},onBehalfOf:{isEnabled:!1,isActive:!1,companyName:""},customerTitle:{title:PC.NONE,list:[],isEnabled:!1,isRequired:!1},locked:!1,donation:{formattedAmount:"",frequency:se.MONTHLY},autoFocus:this.createDefaultAutoFocusConfig(),generalConsent:{isAccepted:!1,isEnabled:!1},birthday:{isEnabled:!1,value:"",dateFormat:wv.DASH_YYYY_MM_DD,convertedDate:""}}}get isPaymentScreen(){return this.name===this.checkoutService.getPaymentScreen(this.name,this.flow.getHistoricalScreens())}get isFiatFlow(){return this.checkoutService.type===fe.MONEY}get isCryptoFlow(){return this.checkoutService.type===fe.CRYPTO}get donorNameDataPoint(){return this.checkoutService.getDataPoint(Ra.DONOR_NAME)}get donorEmailDataPoint(){return this.checkoutService.getDataPoint(Ra.DONOR_EMAIL)}get termsAndConditionsDataPoint(){return this.checkoutService.getDataPoint(Ra.TERMS_AND_CONDITIONS)}get phoneNumberDataPoint(){return this.checkoutService.getDataPoint(Ra.PHONE_NUMBER)}get donateAnonymousDataPoint(){return this.checkoutService.getDataPoint(Ra.DONATE_ANONYMOUS)}get onBehalfOfDataPoint(){return this.checkoutService.getDataPoint(Ra.ON_BEHALF_OF)}get customerTitleDataPoint(){return this.checkoutService.getDataPoint(Ra.CUSTOMER_TITLE)}get donationDataPoint(){return this.checkoutService.getDataPoint(ub[this.checkoutService.type])}get paymentOptionsDataPoint(){return this.checkoutService.getDataPoint(KE.PAYMENT_OPTIONS)}get communicationConsentDataPoint(){return this.checkoutService.getDataPoint(Ra.COMMUNICATION_CONSENT)}get birthdayDataPoint(){return this.checkoutService.getDataPoint(Ra.BIRTHDAY_DATE)}get isApplePay(){return this.paymentOptionsDataPoint.clientPaymentMethod===u._h.APPLE_PAY}get isMobile(){return this.checkoutService.checkoutConfiguration.infrastructureParams.isMobile}get isApplePayAlertVisible(){return this.isMobile&&this.isFiatFlow&&this.isApplePay}get tributeDataPoint(){return this.checkoutService.getDataPoint(Ra.TRIBUTE)}get birthdayDonationCheckoutExperiment(){return this.experiments.get(cn.BIRTHDAY_DONATION_CHECKOUT_EXPERIMENT)}get birthdayDonationCampaignPageExperiment(){return this.experiments.get(cn.BIRTHDAY_DONATION_CAMPAIGN_PAGE_EXPERIMENT)}tryExposeBirthdayExperiment(){this.birthdayDonationCheckoutExperiment.tryToExpose(),this.birthdayDonationCampaignPageExperiment.tryToExpose()}tryStartBirthdayExperiment(){const e={isPhoneEnabled:this.phoneNumberDataPoint.isEnabled,isOnBehalfOfEnabled:this.onBehalfOfDataPoint.isEnabled,isAnonymousEnabled:this.donateAnonymousDataPoint.isEnabled,isGeneralConsentEnabled:this.communicationConsentDataPoint.isGeneralConsentEnabled,isTermsAndConditionsEnabled:this.termsAndConditionsDataPoint.isEnabled,isTributeFilled:this.tributeDataPoint.isFilled,isDesktop:!this.isMobile,intl:this.intl};this.birthdayDonationCheckoutExperiment.tryStart(e),this.birthdayDonationCampaignPageExperiment.tryStart({intl:this.intl}),this.birthdayDonationCheckoutExperiment.isEnabled(e)||this.birthdayDonationCampaignPageExperiment.isEnabled({intl:this.intl})?this.setBirthdayEnabled():this.setBirthdayDisabled()}setBirthdayEnabled(){this.checkoutState instanceof rb?this.checkoutState.privacy.setBirthdayEnabled():this.birthdayDataPoint.setIsEnabled(),this.produceViewState((e=>{e.birthday.isEnabled=!0}))}setBirthdayDisabled(){this.produceViewState((e=>{e.birthday.isEnabled=!1,e.birthday.value="",e.birthday.convertedDate=""}))}checkHasError(e){return Object.keys(e.validation).some((t=>{const n=e.validation[t];return!!n&&!n.isValid}))}startServerErrorFlow(){return(0,l.sH)(this,void 0,void 0,(function*(){this.produceViewState((e=>{e.serverErrors.email=!0,e.shakeKey+=1,e.processingState=La.ERROR})),this.pending=!1}))}setProcessingState(e){return this.produceViewState((t=>{t.processingState=e})),this}getAutoFocusConfig(e){const t=this.createDefaultAutoFocusConfig();return e&&(t.firstName=!1,t.customerTitle=!0),t}createDefaultAutoFocusConfig(){return{customerTitle:!1,firstName:!0}}}class mb extends sb{get showBackButton(){const e=1!==this.viewState.page||this.checkoutService.canGoBack,t=this.checkoutService.checkoutConfiguration.infrastructureParams.isMobile;return{header:!t&&e,footer:t&&e}}beforeEnter(){return(0,l.sH)(this,void 0,void 0,(function*(){this.produceViewState((e=>{e.questions=[...this.questionsDataPoint.questions.entries()].map((e=>{let[t,n]=e;return{key:t,type:n.type,required:n.required,code:n.code,question:n.question,answer:n.answer,page:null,options:[...n.options]}})),e.isMeasuring=!0}))}))}beforeLeave(e){return(0,l.sH)(this,void 0,void 0,(function*(){const e=this.viewState.page,t=this.viewState.questions.filter((t=>{let{page:n}=t;return n===e})),n=this.questionsDataPoint.validateQuestionsByKeys(t.map((e=>{let{key:t}=e;return t})));return n.isValid?this.viewState.questions.some((t=>{let{page:n}=t;return null===n||n>e}))?(this.produceViewState((e=>{e.page+=1})),yield this.checkoutService.updateSession(),!1):(this.checkoutService.updateSession(),!0):(this.produceViewState((e=>{for(const[t,{isValid:i}]of Object.entries(n.fields))e.questionErrors[t]=!i;e.shakeKey+=1})),!1)}))}back(){return(0,l.sH)(this,void 0,void 0,(function*(){const e=this.viewState.page;if(1===e&&this.flow.canGoBack&&this.checkoutService.canGoBack)return this.flow.prev();this.produceViewState((t=>{for(const n of t.questions)n.page===e&&(t.questionErrors[n.key]=!1);t.page-=1}))}))}answerQuestion(e,t){this.checkoutState instanceof rb?this.checkoutState.questions.setAnswer(e,t):this.questionsDataPoint.setAnswer(e,t),this.produceViewState((t=>{const n=t.questions.find((t=>t.key===e));if(!n)throw new Error(`No question with such key: "${e}"`);t.questionErrors[e]=!1;const i=this.questionsDataPoint.getAnswer(e);Array.isArray(i)?Array.isArray(n.answer)?n.answer.splice(0,n.answer.length,...i):n.answer=[...i]:n.answer=i}))}navigateInShowcaseToPage(e){if(!this.viewState.isShowcase)throw new Error("Can be used only in showcase");this.produceViewState((t=>{t.page=e}))}completeMeasurement(e){if(e.size!==this.viewState.questions.length)throw new Error('"questionIndexesToPages" map should have the same length as questions array');this.produceViewState((t=>{for(const[n,i]of e)void 0!==t.questions[n]&&(t.questions[n].page=i,this.viewState.isShowcase&&(t.page=i));const n=this.checkoutService.checkoutConfiguration.showcase,i=n&&n.currentQuestionsPage;i&&(t.page=i),t.isMeasuring=!1}));const t=this.getPagesOfQuestionsScreen(e);return this.checkoutService.checkoutUIState.pagesOfQuestionsScreen=t,t}getInitialViewState(){return{locked:!1,page:1,questions:[],hasBackButton:!0,isMeasuring:!1,questionErrors:{},shakeKey:0,isShowcase:this.checkoutService.checkoutConfiguration.infrastructureParams.showcase}}get questionsDataPoint(){return this.checkoutService.getDataPoint(Ra.QUESTIONS)}getPagesOfQuestionsScreen(e){const t=[...e.values()];return t[t.length-1]}}class pb extends sb{beforeEnter(){return(0,l.sH)(this,void 0,void 0,(function*(){this.resetToDefaultState(),this.checkoutService.updateSession({canUseAmountDefaults:!0}),this.checkoutService.abandonSession();const e={used:ne.NO,shown:!0};this.checkoutState instanceof rb?this.checkoutState.remindMeLater.setState(e):this.remindMeLaterDataPoint.setState(e)}))}resetToDefaultState(){const e={used:ne.NOT_GIVEN,shown:!0};this.checkoutState instanceof rb?this.checkoutState.remindMeLater.setState(e):this.remindMeLaterDataPoint.setState(e)}updateEmail(e){this.checkoutState instanceof rb?this.checkoutState.privacy.setDonorEmail(e):this.donorEmailDataPoint.setEmail(e),this.produceViewState((t=>{t.email.isValid||(t.email.isValid=WC.defaultValidationResult.fields.email.isValid),t.email.value=e}))}updateIsTermsAndConditionsAccepted(e){this.checkoutState instanceof rb?this.checkoutState.privacy.setTermsAndConditionsAccepted(e):this.termsAndConditionsDataPoint.setIsAccepted(e),this.produceViewState((t=>{t.termsAndConditions.isValid||(t.termsAndConditions.isValid=JC.defaultValidationResult.fields.isAccepted.isValid),t.termsAndConditions.isAccepted=e}))}save(){return(0,l.sH)(this,void 0,void 0,(function*(){if(this.pending)return!1;this.pending=!0,this.setProcessingState(La.PENDING);const e=this.donorEmailDataPoint.validate().isValid,t=this.termsAndConditionsDataPoint.validate().isValid,n=this.remindMeLaterDataPoint.validate().isValid,i=e&&t&&n;if(this.produceViewState((n=>{n.email.isValid=e,n.termsAndConditions.isValid=t,i||(n.shakeKey+=1)})),!i)return this.setProcessingState(La.IDLE),this.pending=!1,!1;const s={used:ne.YES,shown:!0};this.checkoutState instanceof rb?this.checkoutState.remindMeLater.setState(s):this.remindMeLaterDataPoint.setState(s);const a=yield this.checkoutService.updateSession({canUseAmountDefaults:!0});if(Yt.isFailure(a)&&a.failureResult.customerEmailError)return this.showEmailServerValidationError(),this.pending=!1,!1;const r=yield this.checkoutService.abandonSession();return Yt.isFailure(r)&&r.failureResult.customerEmailError?(this.showEmailServerValidationError(),this.pending=!1,!1):(this.setProcessingState(La.SUCCESS),this.pending=!1,!0)}))}saveOnClose(){this.donorEmailDataPoint.validate().isValid||this.updateEmail(""),this.termsAndConditionsDataPoint.validate().isValid||this.updateIsTermsAndConditionsAccepted(!1),this.checkoutService.updateSession({canUseAmountDefaults:!0}),this.checkoutService.abandonSession()}clearEmailServerError(){this.produceViewState((e=>{e.serverErrors.email=!1,e.processingState=La.IDLE}))}getInitialViewState(){return{locked:!1,email:{value:this.donorEmailDataPoint.email,isValid:!0},termsAndConditions:{isAccepted:this.termsAndConditionsDataPoint.isAccepted,isValid:!0,text:this.termsAndConditionsDataPoint.text},isTermsAndConditionsEnabled:this.termsAndConditionsDataPoint.isEnabled,processingState:La.IDLE,serverErrors:{},shakeKey:0}}get remindMeLaterDataPoint(){return this.checkoutService.getDataPoint(Ra.REMIND_ME_LATER)}get termsAndConditionsDataPoint(){return this.checkoutService.getDataPoint(Ra.TERMS_AND_CONDITIONS)}get donorEmailDataPoint(){return this.checkoutService.getDataPoint(Ra.DONOR_EMAIL)}setProcessingState(e){this.produceViewState((t=>{t.processingState=e}))}showEmailServerValidationError(){this.produceViewState((e=>{e.processingState=La.ERROR,e.serverErrors.email=!0,e.shakeKey+=1}))}}class gb extends sb{constructor(e,t,n,i,s,a,r){super(r),this.donationDataPoint=e,this.tributeDataPoint=t,this.donorNameDataPoint=n,this.postDonationUpsellDataPoint=i,this.redirectApi=s,this.sharingApi=a}get hasTribute(){return this.tributeDataPoint.isActive&&!!this.tributeDataPoint.tributeeName}get hasPostDonationUpsell(){var e,t;return null!==(t=null===(e=this.postDonationUpsellDataPoint)||void 0===e?void 0:e.isAccepted)&&void 0!==t&&t}get thankYouTitle(){return this.intl.translate("common.thankYouTitle",{name:this.checkoutService.checkoutConfiguration.infrastructureParams.showcase?"John":this.donorNameDataPoint.firstName})}get descriptionSharing(){switch(this.viewState.flowType){case fe.MONEY:return this.descriptionSharingFiat;case fe.CRYPTO:return this.intl.translate("thankYouScreen.description.once",{amount:this.viewState.formattedTotal});case fe.STOCK:default:{const e=this.viewState.flowType;throw new Error(`Unknown flow type "${e}"`)}}}get descriptionTribute(){if(this.donationDataPoint instanceof HC&&this.donationDataPoint.frequency!==se.ONCE&&this.donationDataPoint.showDonationEndDate&&this.donationDataPoint.donationEndDate&&this.donationDataPoint.isDonationEndDateActive){const e=this.intl.formatDate(this.donationDataPoint.donationEndDate,{type:Zs.SHORT_WITH_YEAR});return this.intl.translate("thankYouScreen.description.tribute.recurring.withEndDate",{amount:this.viewState.formattedTotal,recurringType:this.getRecurringTypeDescriptionAdjective(this.donationDataPoint.frequency),date:e,dedicatedTo:this.viewState.tribute.inHonorOf})}if(!this.checkoutService.checkoutConfiguration.infrastructureParams.showcase&&this.donationDataPoint instanceof HC){const e=this.donationDataPoint.frequency;if(e!==se.ONCE)return this.intl.translate("thankYouScreen.description.tribute.recurring.default",{amount:this.viewState.formattedTotal,recurringType:this.getRecurringTypeDescriptionAdjective(e),dedicatedTo:this.viewState.tribute.inHonorOf})}return this.intl.translate("thankYouScreen.description.tribute.once",{amount:this.viewState.formattedTotal,dedicatedTo:this.viewState.tribute.inHonorOf})}get descriptionUpsell(){if(this.hasPostDonationUpsell)return this.intl.translate("thankYouScreen.description.upsell",{amount:this.viewState.formattedTotal,recurringType:this.viewState.postDonationUpsellData.recurringType,date:this.viewState.postDonationUpsellData.formattedStartDate,guaranteedAmount:this.viewState.postDonationUpsellData.formattedAmount})}beforeEnter(){return(0,l.sH)(this,void 0,void 0,(function*(){this.redirectApi.canRedirect(this.checkoutService.getState())?(yield this.checkoutService.tryCloseSession(),yield this.redirectApi.tryRedirect(this.checkoutService)):this.checkoutService.tryCloseSession();const e=this.donationDataPoint.total||0,t=this.donationDataPoint.currency;this.produceViewState((n=>{var i,s;n.currency=t,n.total=e,n.formattedTotal=this.intl.formatCurrency(n.total,{currency:n.currency,display:"fulltrimzeroes"}),n.tributeDonorPortalLink=null!==(s=null===(i=this.checkoutService.getState().donationResultState)||void 0===i?void 0:i.tributeDonorPortalLink)&&void 0!==s?s:"",n.tribute.inHonorOf=this.tributeDataPoint.tributeeName,n.tribute.makeAnotherDonation=this.variant===Ma.TRIBUTE,n.tribute.completeDedication=this.variant===Ma.TRIBUTE,n.variant=this.variant;const{email:a,twitter:r,linkedin:o,facebook:c}=this.sharingApi.sharingChannels;n.sharing.showEmail=this.variant===Ma.SHARING&&a,n.sharing.showTwitter=this.variant===Ma.SHARING&&r,n.sharing.showLinkedin=this.variant===Ma.SHARING&&o,n.sharing.showFacebook=this.variant===Ma.SHARING&&c,n.sharing.sharingText=this.sharingApi.sharingText,n.postDonationUpsellData=this.postDonationUpsellData}))}))}getSharingLink(e){return this.sharingApi.getSharingLink(e,this.intl.translate("thankYouScreen.share.emailSubject"))}share(e,t){this.sharingApi.share(e,this.intl.translate("thankYouScreen.share.emailSubject"),t)}makeAnotherDonation(){}getRecurringTypeDescriptionAdjective(e){var t;return null!==(t={[se.DAILY]:this.intl.translate("widgetSubscriptionPeriodLabel.daily.adjective"),[se.WEEKLY]:this.intl.translate("widgetSubscriptionPeriodLabel.weekly.adjective"),[se.BIWEEKLY]:this.intl.translate("widgetSubscriptionPeriodLabel.biweekly.adjective"),[se.EVERY_4_WEEKS]:this.intl.translate("widgetSubscriptionPeriodLabel.every4weeks.adjective"),[se.MONTHLY]:this.intl.translate("widgetSubscriptionPeriodLabel.monthly.adjective"),[se.BIMONTHLY]:this.intl.translate("widgetSubscriptionPeriodLabel.bimonthly.adjective"),[se.QUARTERLY]:this.intl.translate("widgetSubscriptionPeriodLabel.quarterly.adjective"),[se.SEMIANNUAL]:this.intl.translate("widgetSubscriptionPeriodLabel.semiannual.adjective"),[se.ANNUAL]:this.intl.translate("widgetSubscriptionPeriodLabel.annual.adjective")}[e])&&void 0!==t?t:""}getRecurringTypeDescriptionAdverb(e){var t;return null!==(t={[se.DAILY]:this.intl.translate("widgetSubscriptionPeriodLabel.daily.adverb"),[se.WEEKLY]:this.intl.translate("widgetSubscriptionPeriodLabel.weekly.adverb"),[se.BIWEEKLY]:this.intl.translate("widgetSubscriptionPeriodLabel.biweekly.adverb"),[se.EVERY_4_WEEKS]:this.intl.translate("widgetSubscriptionPeriodLabel.every4weeks.adverb"),[se.MONTHLY]:this.intl.translate("widgetSubscriptionPeriodLabel.monthly.adverb"),[se.BIMONTHLY]:this.intl.translate("widgetSubscriptionPeriodLabel.bimonthly.adverb"),[se.QUARTERLY]:this.intl.translate("widgetSubscriptionPeriodLabel.quarterly.adverb"),[se.SEMIANNUAL]:this.intl.translate("widgetSubscriptionPeriodLabel.semiannual.adverb"),[se.ANNUAL]:this.intl.translate("widgetSubscriptionPeriodLabel.annual.adverb")}[e])&&void 0!==t?t:""}getInitialViewState(){return{locked:!1,variant:Ma.SHARING,currency:"USD",total:0,formattedTotal:"",sharing:{showFacebook:!0,showTwitter:!0,showLinkedin:!0,showEmail:!0,sharingText:""},tribute:{inHonorOf:"",makeAnotherDonation:!0,completeDedication:!0},postDonationUpsellData:{formattedAmount:"",formattedStartDate:"",recurringType:""},tributeDonorPortalLink:"",flowType:this.checkoutService.type}}get descriptionSharingFiat(){if(this.donationDataPoint instanceof HC&&this.donationDataPoint.frequency!==se.ONCE&&this.donationDataPoint.showDonationEndDate&&this.donationDataPoint.donationEndDate&&this.donationDataPoint.isDonationEndDateActive){const e=this.intl.formatDate(this.donationDataPoint.donationEndDate,{type:Zs.SHORT_WITH_YEAR});return this.intl.translate("thankYouScreen.description.recurring.withEndDate",{amount:this.viewState.formattedTotal,recurringType:this.getRecurringTypeDescriptionAdjective(this.donationDataPoint.frequency),date:e})}if(!this.checkoutService.checkoutConfiguration.infrastructureParams.showcase&&this.donationDataPoint instanceof HC){const e=this.donationDataPoint.frequency;if(e!==se.ONCE)return this.intl.translate("thankYouScreen.description.recurring.default",{amount:this.viewState.formattedTotal,recurringType:this.getRecurringTypeDescriptionAdjective(e)})}return this.intl.translate("thankYouScreen.description.once",{amount:this.viewState.formattedTotal})}get postDonationUpsellFormattedAmount(){var e;return this.intl.formatCurrency((null===(e=this.postDonationUpsellDataPoint)||void 0===e?void 0:e.upsellAmount)||0,{currency:this.donationDataPoint.currency,display:"fulltrimzeroes"})}get postDonationUpsellFormattedStartDate(){var e;return this.intl.formatDate((null===(e=this.postDonationUpsellDataPoint)||void 0===e?void 0:e.upsellStartDate)||"",{type:Zs.LONG})}get postDonationUpsellRecurringType(){var e;return(null===(e=this.postDonationUpsellDataPoint)||void 0===e?void 0:e.upsellFrequency)?this.getRecurringTypeDescriptionAdverb(this.postDonationUpsellDataPoint.upsellFrequency):""}get postDonationUpsellData(){return{recurringType:this.postDonationUpsellRecurringType,formattedAmount:this.postDonationUpsellFormattedAmount,formattedStartDate:this.postDonationUpsellFormattedStartDate}}get isSharingEnabled(){return this.sharingApi.isSharingEnabled}get variant(){return this.hasTribute&&this.tributeDataPoint.isSharingEnabled?Ma.TRIBUTE:this.isSharingEnabled?Ma.SHARING:Ma.DEFAULT}}class yb extends sb{constructor(e){super(e),this.donationDataPoint=e.donationDataPoint,this.tributeDataPoint=e.tributeDataPoint,this.commentDataPoint=e.commentDataPoint,this.designationDataPoint=e.designationDataPoint}addComment(){return(0,l.sH)(this,void 0,void 0,(function*(){return this.checkoutService.makeDataPointRequired(Ra.COMMENT),this.leave({omitBeforeLeave:!0})}))}validateDesignation(){const e=this.designationDataPoint.validateDesignation(this.getGoalRepeat(this.viewState.frequency));this.produceViewState((t=>{t.designation.isValid=e.isValid,t.errors.designation.required=e.fields.goal.errors.required}))}beforeEnter(){return(0,l.sH)(this,void 0,void 0,(function*(){this.designationDataPoint.goalKey||this.designationDataPoint.setComputedGoalKeyByGoalRepeat(je.ONE_TIME),this.produceViewState((e=>{e.currencyCode=this.donationDataPoint.currency,e.currencyName=this.currencyService.getName(this.donationDataPoint.currency),e.currencies=this.donationDataPoint.currencyList.map((e=>({code:e,name:this.donationDataPoint.getCurrencyName(e),type:e}))),e.defaultFiatCurrency=this.donationDataPoint.defaultFiatCurrency,e.frequency=se.ONCE,e.amount=this.donationDataPoint.amount||null,e.amountInUsd=this.donationDataPoint.amountInUSD||0,e.amountInDefaultFiat=this.donationDataPoint.amountInDefaultFiat,e.minAmount=this.donationDataPoint.minAmount,e.tribute.show=this.tributeDataPoint.isEnabled,e.tribute.isActive=this.tributeDataPoint.isActive,e.tribute.labelType=this.tributeDataPoint.labelType,e.tribute.sharingEnabled=this.tributeDataPoint.isSharingEnabled,e.tribute.name=this.tributeDataPoint.tributeeName,e.tribute.isFilled=this.tributeDataPoint.isFilled,e.tribute.isOptional=this.tributeDataPoint.isOptional,e.tribute.isTributeOriented=this.tributeDataPoint.isTributeOriented,e.designation.show=this.designationDataPoint.isEnabled,e.designation.goalKey=this.designationDataPoint.goalKey,e.designation.goal=this.designationDataPoint.selectedGoal,e.designation.goals=this.designationDataPoint.getAllowedGoalsByFrequency(this.getGoalRepeat(e.frequency)),e.designation.shouldShowDesignation=this.designationDataPoint.shouldShowDesignation(this.getGoalRepeat(e.frequency)),e.designation.isEditable=this.designationDataPoint.isEditable(this.getGoalRepeat(e.frequency)),e.comment.isEnabled=this.commentDataPoint.isEnabled,e.comment.content=this.commentDataPoint.comment,e.comment.prevContent=this.commentDataPoint.prevComment,e.livemode=this.checkoutService.livemode,e.isCryptoAccountConnected=!!this.checkoutService.company.cryptoProvider}))}))}changeAmount(e){return(0,l.sH)(this,void 0,void 0,(function*(){this.donationDataPoint.amount=e,this.checkoutService.syncUpdateCheckoutState();const t=this.donationDataPoint.validate();this.produceViewState((n=>{n.amount=e,n.amountInUsd=this.donationDataPoint.amountInUSD||0,n.amountInDefaultFiat=this.donationDataPoint.amountInDefaultFiat,n.isDefaultAmount=!1,n.errors.amount.required=!1,n.errors.amount.min&&(n.errors.amount.min=t.fields.amount.errors.min),n.errors.amount.max&&(n.errors.amount.max=t.fields.amount.errors.max)}))}))}validateAmount(){const e=this.donationDataPoint.validate();this.produceViewState((t=>{t.isAmountValid=e.fields.amount.isValid,t.errors.amount.min=e.fields.amount.errors.min,t.errors.amount.max=e.fields.amount.errors.max,t.errors.amount.required=e.fields.amount.errors.required}))}savePrevComment(){this.checkoutService.checkoutConfiguration.infrastructureParams.showcase||this.commentDataPoint.savePrevComment()}changeCryptoCurrency(e){return(0,l.sH)(this,void 0,void 0,(function*(){this.donationDataPoint.currency=e,this.viewState.isDefaultAmount&&(this.donationDataPoint.setAmountByDefault(e),this.produceViewState((e=>{e.amount=this.donationDataPoint.total}))),this.checkoutService.syncUpdateCheckoutState(),this.produceViewState((t=>{t.currencyCode=e,t.currencyName=this.currencyService.getName(e),t.amountInUsd=this.donationDataPoint.amountInUSD||0,t.amountInDefaultFiat=this.donationDataPoint.amountInDefaultFiat}))}))}toggleTribute(){this.tributeDataPoint.isActive=!this.tributeDataPoint.isActive,this.checkoutService.syncUpdateCheckoutState(),this.produceViewState((e=>{e.tribute.isActive=this.tributeDataPoint.isActive,e.tribute.isFilled=this.tributeDataPoint.isFilled}))}changeTributeName(e){this.tributeDataPoint.tributeeName=e,this.checkoutService.syncUpdateCheckoutState(),this.produceViewState((e=>{e.tribute.name=this.tributeDataPoint.tributeeName,e.tribute.isFilled=this.tributeDataPoint.isFilled}))}changeGoal(e){this.designationDataPoint.setGoalKey(e,this.getGoalRepeat(this.viewState.frequency)),this.produceViewState((e=>{e.designation.goalKey=this.designationDataPoint.goalKey,e.designation.goal=this.designationDataPoint.selectedGoal})),this.validateDesignation()}beforeLeave(e){return(0,l.sH)(this,void 0,void 0,(function*(){return!this.pending&&(this.pending=!0,this.produceViewState((e=>{e.processingState=La.PENDING})),this.validateAmount(),this.validateDesignation(),this.viewState.isAmountValid?this.viewState.designation.isValid?(this.checkoutState.onCryptoCurrencyDataPointCollect(),this.checkoutService.updateSession(),this.hold()):(this.produceViewState((e=>{e.designationShakeKey+=1,e.processingState=La.IDLE})),this.pending=!1,!1):(this.produceViewState((e=>{e.processingState=La.IDLE})),this.pending=!1,!1))}))}getInitialViewState(){return{processingState:La.IDLE,locked:!1,amount:null,amountInUsd:0,amountInDefaultFiat:0,minAmount:yb.MIN_DONATION_AMOUNT_IN_USD,maxAmount:yb.MAX_DONATION_AMOUNT_IN_USD,isAmountValid:!0,currencyCode:"BTC",currencyName:this.currencyService.getName("BTC"),defaultFiatCurrency:"USD",frequency:se.ONCE,errors:{amount:{min:!1,max:!1,required:!1},payment:{status:!1},designation:{required:!1}},tribute:{name:"",isActive:!1,show:!1,labelType:u.dR.IN_HONOR_MEMORY,sharingEnabled:!1,isFilled:!1,inHonorOfMaxLength:Nv.getInHonorOfMaxLength(),isOptional:!1,isTributeOriented:!1},designation:{show:!1,goalKey:null,goals:[],isEditable:!0,isValid:!0,shouldShowDesignation:!1,goal:null},currencies:[],enabledFlows:{money:this.checkoutService.checkoutConfiguration.enabledFlows.money},comment:{isEnabled:this.checkoutService.campaignConfig.showComment,content:"",prevContent:""},flowType:this.checkoutService.type,livemode:!0,isCryptoAccountConnected:!0,isDefaultAmount:!0,designationShakeKey:0}}hold(){return(0,l.sH)(this,void 0,void 0,(function*(){const e=yield this.checkoutService.hold();return this.pending=!1,!Yt.isFailure(e)||(this.handleHoldError(e),!1)}))}handleHoldError(e){Yt.isSuccess(e)||this.produceViewState((e=>{e.errors.payment.status=!0,e.errors.payment.title=this.intl.translate("common.errorOccurredText"),e.errors.payment.message="",e.processingState=La.ERROR}))}getGoalRepeat(e){return e===se.ONCE?je.ONE_TIME:je.RECURRING}}yb.MIN_DONATION_AMOUNT_IN_USD=100,yb.MAX_DONATION_AMOUNT_IN_USD=1e8;class fb extends sb{constructor(e){super(e),this.donationDataPoint=e.donationDataPoint}beforeEnter(){return(0,l.sH)(this,void 0,void 0,(function*(){const{cryptoAddress:e}=this.checkoutService.getState();if(!e)throw new Error("cryptoAddress was not set");this.produceViewState((t=>{var n;t.formattedAmount=this.intl.formatCurrency(null!==(n=this.donationDataPoint.total)&&void 0!==n?n:0,{display:"trimzeroes",currency:this.donationDataPoint.currency,withoutPrefix:!0,withoutSuffix:!0}),t.currencyCode=this.donationDataPoint.currency,t.walletAddress=e,t.networkName=this.donationDataPoint.currencyNetworkData.networkName,t.protocol=this.donationDataPoint.currencyNetworkData.protocol})),this.leaveOnSuccessfulPayment()}))}getInitialViewState(){return{locked:!1,formattedAmount:"0",walletAddress:"",currencyCode:"",networkName:"",protocol:""}}leaveOnSuccessfulPayment(){const e=setInterval((()=>{this.checkoutService.isPaymentCompleted&&(clearInterval(e),this.leave())}),5e3)}}const Sb={[Ia.CRYPTO_CURRENCY]:class extends yb{},[Ia.CRYPTO_WALLET]:class extends fb{},[ka.COMMENT]:class extends ob{},[ka.PRIVACY]:class extends hb{},[ka.THANK_YOU]:class extends gb{},[ka.REMIND_ME]:class extends pb{},[ka.MAILING_ADDRESS]:class extends db{},[ka.QUESTIONS]:class extends mb{},[ka.BLOCKED]:class extends ab{}};class Ab{static isCryptoCurrencyScreenController(e,t){return t===Ia.CRYPTO_CURRENCY}static isCryptoWalletScreenController(e,t){return t===Ia.CRYPTO_WALLET}static isThankYouScreenController(e,t){return t===ka.THANK_YOU}static isMailingAddressScreenController(e,t){return t===ka.MAILING_ADDRESS}static isBlockedScreenController(e,t){return t===ka.BLOCKED}constructor(e,t,n,i,s,a,r,o,c){this.checkoutService=e,this.checkoutState=t,this.intl=n,this.debug=i,this.sentry=s,this.currencyService=a,this.subscriptionPeriodLabelsService=r,this.mailingAddressCustomization=o,this.experiments=c}create(e,t){const n=Sb[e],i={name:e,flow:t,checkoutService:this.checkoutService,checkoutState:this.checkoutState,debug:this.debug,intl:this.intl,subscriptionPeriodLabelsService:this.subscriptionPeriodLabelsService,currencyService:this.currencyService,experiments:this.experiments};return Ab.isCryptoCurrencyScreenController(n,e)?new n(Object.assign(Object.assign({},i),{donationDataPoint:this.checkoutService.getDataPoint(wa.DONATION),tributeDataPoint:this.checkoutService.getDataPoint(Ra.TRIBUTE),commentDataPoint:this.checkoutService.getDataPoint(Ra.COMMENT),designationDataPoint:this.checkoutService.getDataPoint(Ra.DESIGNATION)})):Ab.isCryptoWalletScreenController(n,e)?new n(Object.assign(Object.assign({},i),{donationDataPoint:this.checkoutService.getDataPoint(wa.DONATION)})):Ab.isThankYouScreenController(n,e)?new n(this.checkoutService.getDataPoint(wa.DONATION),this.checkoutService.getDataPoint(Ra.TRIBUTE),this.checkoutService.getDataPoint(Ra.DONOR_NAME),null,this.redirectApi,this.sharingApi,i):Ab.isMailingAddressScreenController(n,e)?new n(this.checkoutService.getDataPoint(Ra.ON_BEHALF_OF),this.countriesService,this.mailingAddressCustomization,this.sentry,i):(Ab.isBlockedScreenController(n,e),new n(i))}get redirectApi(){return this.checkoutService.redirectApi}get sharingApi(){return this._sharingApi||(this._sharingApi=nb({checkoutType:this.checkoutService.checkoutConfiguration.checkoutType,isShowcase:this.checkoutService.checkoutConfiguration.infrastructureParams.showcase,campaignConfig:this.checkoutService.campaignConfig})),this._sharingApi}get countriesService(){return this._countriesService||(this._countriesService=(0,pC.g)({intl:this.intl,excludePalestineFromCountriesList:this.checkoutService.checkoutConfiguration.featureConfig.excludePalestineFromCountriesList})),this._countriesService}}class Eb{constructor(e){this.options=e}getCustomExternalConfigScreen(){var e;const{checkoutConfiguration:t,isValidScreen:n}=this.options,i=null===(e=t.externalConfig.checkoutData)||void 0===e?void 0:e.screen;return void 0!==i&&n(i)?i:void 0}}class Cb extends Eb{getInitialScreen(){return(0,l.sH)(this,void 0,void 0,(function*(){if(this.isCompanyBlocked())return ka.BLOCKED;const e=this.getCustomExternalConfigScreen();return void 0!==e?e:Ia.CRYPTO_CURRENCY}))}isCompanyBlocked(){return Boolean(this.options.checkoutConfiguration.company.blockedAt)}}const vb=Ia.CRYPTO_CURRENCY;function Nb(e){return function(t){return e.some((e=>e===t))}}const bb=Nb([Ia.CRYPTO_CURRENCY,Ia.CRYPTO_WALLET,ka.COMMENT,ka.PRIVACY,ka.THANK_YOU,ka.MAILING_ADDRESS,ka.QUESTIONS,ka.BLOCKED]);Error,Error;class Pb extends Error{constructor(){super("Intent secret is not provided")}}Error;class Db extends Error{constructor(){super("Could not retrieve iDEAL payment intent")}}Error;class _b{static handleError(e){return"validation_error"===e.type?Yt.fail({}):Yt.fail({message:e.message})}constructor(e,t,n,i,s){this.stripe=e,this.intl=t,this.sentry=n,this.paymentAPI=i,this.setPaymentMethod=s,this.name=u._h.ACSS,this.intentSecret=null,this.params=null}initiateFlow(e){return(0,l.sH)(this,void 0,void 0,(function*(){return this.params=e,!0}))}hold(){return(0,l.sH)(this,void 0,void 0,(function*(){const e=yield this.paymentAPI.hold({clientPaymentMethod:u._h.ACSS});if(Yt.isFailure(e))return e;const{intentSecret:t}=e.successResult;if(!t)throw new Pb;return this.intentSecret=t,Yt.success(void 0)}))}startFlow(){return(0,l.sH)(this,void 0,void 0,(function*(){var e,t,n,i,s;if(this.setPaymentMethod(u._h.ACSS),yield this.hold(),!this.intentSecret)return Yt.fail({});if((null===(e=(yield this.stripe.retrieveSetupIntent(this.intentSecret)).setupIntent)||void 0===e?void 0:e.status)===Qv.Zq.SUCCEEDED)return Yt.success(void 0);let a;try{null===(n=null===(t=this.params)||void 0===t?void 0:t.onPopupOpen)||void 0===n||n.call(t),a=yield this.stripe.confirmAcssDebitSetup(this.intentSecret,{payment_method:{billing_details:{name:K,email:z}}},{skipMandate:!1})}catch(r){return this.sentry.captureException(r),Yt.fail({message:this.commonErrorText})}finally{null===(s=null===(i=this.params)||void 0===i?void 0:i.onPopupClose)||void 0===s||s.call(i)}const r=a.error;return r?_b.handleError(r):Yt.success(void 0)}))}pay(){return(0,l.sH)(this,void 0,void 0,(function*(){const e=yield this.paymentAPI.pay();return Yt.isSuccess(e)?e:Yt.fail({shouldLeave:!1,message:e.failureResult.message})}))}get commonErrorText(){return this.intl.translate("common.errorOccurredText")}}var Tb;!function(e){e.PAYMENT_METHOD_MICRODEPOSIT_VERIFICATION_DESCRIPTOR_CODE_MISMATCH="payment_method_microdeposit_verification_descriptor_code_mismatch",e.PAYMENT_METHOD_MICRODEPOSIT_VERIFICATION_ATTEMPTS_EXCEEDED="payment_method_microdeposit_verification_attempts_exceeded",e.BANK_ACCOUNT_UNUSABLE="bank_account_unusable",e.ACCOUNT_NUMBER_INVALID="account_number_invalid",e.PAYMENT_INTENT_AUTHENTICATION_FAILURE="payment_intent_authentication_failure"}(Tb||(Tb={}));const Ob=["INR","USD","EUR","GBP","SGD","CAD","CHF","SEK","AED","JPY","NOK","MYR","HKD"];class xb{static handleCardError(e,t,n){return{message:t?e.translate("creditCardScreen.cardError.title"):n,additionalMessage:t?e.translate("creditCardScreen.cardError.message"):void 0}}static handle3DsAuthResult(e){return e?e.code===Tb.PAYMENT_INTENT_AUTHENTICATION_FAILURE?Yt.fail({message:e.message}):Yt.fail({}):Yt.success({})}constructor(e,t){this.stripe=e,this.paymentAPI=t}validateStripePaymentMethod(e,t,n){var i;if((null===(i=null==e?void 0:e.card)||void 0===i?void 0:i.country)!==u.tg.INDIA)return Yt.success({});const s=this.validateIndianCard(t,n);return Yt.isFailure(s)?s:Yt.success({})}perform(e){return(0,l.sH)(this,void 0,void 0,(function*(){const t=yield this.paymentAPI.pay({paymentMethod:e});if(Yt.isSuccess(t))return t;const n=t.failureResult.errors,i=null==n?void 0:n.customCode,s=null==n?void 0:n.intentSecret;return n?i&&s&&"requires_action"===n.customCode?this.initiate3DS(n.intentSecret,e):Yt.fail({}):Yt.fail({hasBaseErrorMessage:!!t.failureResult.message})}))}validateIndianCard(e,t){return e.getFrequency()===se.ONCE?Yt.success({}):e.getFrequency()===se.DAILY&&this.isIndianCardRestrictedRecurringCurrency(e.getCurrency())?Yt.fail({shouldLeave:!1,title:t.translate("creditCardScreen.cardError.indianCardError.title"),message:t.translate("creditCardScreen.cardError.indianCardError.notValidFrequencyAndCurrency",{currency:e.getCurrency()})}):e.getFrequency()===se.DAILY?Yt.fail({shouldLeave:!1,title:t.translate("creditCardScreen.cardError.indianCardError.title"),message:t.translate("creditCardScreen.cardError.indianCardError.notValidFrequency")}):this.isIndianCardRestrictedRecurringCurrency(e.getCurrency())?Yt.fail({shouldLeave:!1,title:t.translate("creditCardScreen.cardError.indianCardError.title"),message:t.translate("creditCardScreen.cardError.indianCardError.notValidCurrency",{currency:e.getCurrency()})}):Yt.success({})}isIndianCardRestrictedRecurringCurrency(e){return!Ob.includes(e)}initiate3DS(e,t){return(0,l.sH)(this,void 0,void 0,(function*(){const n=yield this.stripe.handleCardAction(e),i=xb.handle3DsAuthResult(n.error);if(Yt.isFailure(i))return i;const s=yield this.paymentAPI.pay({paymentMethod:t});return Yt.isFailure(s)?Yt.fail({}):s}))}}const kb="Payment cancelled";class Ib{constructor(e){this.params=e}init(){return this.makePaymentRequest().then((e=>{let{canMakePaymentResult:t}=e;return!!(null==t?void 0:t.applePay)}))}create(e){return this.makePaymentRequest().then((t=>{let{paymentRequest:n}=t;const i=new Promise(((e,t)=>{n.once("token",(t=>{t.complete("success"),e({token:t.token,payerName:t.payerName,payerEmail:t.payerEmail})})).once("cancel",(()=>{t(kb)}))})),{total:s,displayItems:a}=this.params.request;return n.update({total:{label:s.label,amount:e.amount},displayItems:a,currency:e.currency}),n.show(),i.finally((()=>{n.off("token").off("cancel")}))})).then((e=>({stripeVerifier:e})))}makePaymentRequest(){let e;if(this.paymentRequest)e=Promise.resolve(this.paymentRequest);else{const t=this.params.stripe();if(!t)throw new Error("Stripe is not provided");e=t.then((e=>{const t=Object.assign(Object.assign({},this.params.request),{requestPayerEmail:!0,requestPayerName:!0,wallets:["applePay"]});return this.paymentRequest=e.paymentRequest(t),this.paymentRequest}))}return e.then((e=>new Promise(((t,n)=>{e.canMakePayment().then((n=>{t({canMakePaymentResult:n,paymentRequest:e})})).catch((e=>{n(e)}))}))))}}class wb{constructor(e,t,n,i,s,a,r,o,c,l,d,h,m,p,g){this.config=e,this.applePayStripeLoadingPromise=t,this.donationDataPoint=n,this.sentry=i,this.intl=s,this.paymentAPI=a,this.setPaymentMethod=r,this.setDonorFullNameIfEmpty=o,this.setDonorEmailIfEmpty=c,this.setCountryCodeIfEmptyAddress=l,this.setCityIfEmpty=d,this.setLine1IfEmpty=h,this.setLine2IfEmpty=m,this.setPostalIfEmpty=p,this.setRegionIfEmpty=g,this.name=u._h.APPLE_PAY,this.cardToken=null,this.applePayPaymentMethodService=new Ib({request:e,stripe:this.applePayStripeLoadingPromise})}checkAvailability(){return(0,l.sH)(this,void 0,void 0,(function*(){try{return yield this.applePayPaymentMethodService.init()}catch(e){return this.sentry.captureException(e),!1}}))}initiateFlow(){return(0,l.sH)(this,void 0,void 0,(function*(){return!0}))}startFlow(){return(0,l.sH)(this,void 0,void 0,(function*(){if(this.setPaymentMethod(u._h.APPLE_PAY),this.cardToken=yield this.createToken(),!this.cardToken)return Yt.fail({});const e=yield this.hold();return Yt.isFailure(e)?Yt.fail({message:this.intl.translate("common.errorOccurredText")}):Yt.success(void 0)}))}hold(){return(0,l.sH)(this,void 0,void 0,(function*(){try{const e=yield this.paymentAPI.hold({clientPaymentMethod:u._h.APPLE_PAY});if(Yt.isFailure(e))return e}catch(e){return Yt.fail({shouldLeave:!1})}return Yt.success(void 0)}))}pay(){return(0,l.sH)(this,void 0,void 0,(function*(){if(this.cardToken||(this.cardToken=yield this.createToken()),!this.cardToken)return Yt.fail({shouldLeave:!1});const e=yield this.createStripePaymentMethod(this.cardToken);if(Yt.isFailure(e))return this.cardToken=null,Yt.fail({shouldLeave:!1,message:e.failureResult.message});const t=yield this.initiatePayment(e.successResult);if(this.cardToken=null,Yt.isSuccess(t))return t;const{message:n,additionalMessage:i}=xb.handleCardError(this.intl,t.failureResult.hasBaseErrorMessage,t.failureResult.message);return Yt.fail({shouldLeave:!1,message:n,additionalMessage:i})}))}initiatePayment(e){return(0,l.sH)(this,void 0,void 0,(function*(){const t=yield this.applePayStripeLoadingPromise();if(!t)throw new Error("Stripe is not provided");return new xb(t,this.paymentAPI).perform(e)}))}createStripePaymentMethod(e){return(0,l.sH)(this,void 0,void 0,(function*(){const t=yield this.applePayStripeLoadingPromise();if(!t)throw new Error("Stripe is not provided");let n;try{n=yield t.createPaymentMethod({type:u.qs.CARD,card:{token:e}})}catch(e){return this.sentry.captureException(e),Yt.fail({})}return n.error?Yt.fail({message:n.error.message}):n.paymentMethod?Yt.success(n.paymentMethod):Yt.fail({})}))}createToken(){return(0,l.sH)(this,void 0,void 0,(function*(){var e,t;let n;try{n=yield this.applePayPaymentMethodService.create({amount:this.donationDataPoint.total,currency:this.donationDataPoint.currency.toLowerCase()}),n.stripeVerifier&&this.setDonorInfo(n.stripeVerifier)}catch(e){return e!==kb&&this.sentry.captureException(e),null}return(null===(t=null===(e=n.stripeVerifier)||void 0===e?void 0:e.token)||void 0===t?void 0:t.id)||null}))}setDonorInfo(e){var t;const n=e.payerEmail;n&&this.setDonorEmailIfEmpty(n);const i=e.payerName||(null===(t=e.token.card)||void 0===t?void 0:t.name)||"";i&&this.setDonorFullNameIfEmpty(i),this.setDonorMailingAddress(e)}setDonorMailingAddress(e){const{card:t}=e.token;t&&(t.address_country&&this.setCountryCodeIfEmptyAddress(t.address_country),this.setCityIfEmpty(t.address_city||""),this.setLine1IfEmpty(t.address_line1||""),this.setLine2IfEmpty(t.address_line2||""),this.setRegionIfEmpty(t.address_state||""),this.setPostalIfEmpty(t.address_zip||""))}}Error,Error;class Rb extends Error{constructor(){super("AU BECS intent secret not found")}}class Mb extends Error{constructor(){super("AU BECS personal information required")}}class Lb{constructor(e,t,n,i,s,a,r){this.stripe=e,this.stripeElements=t,this.donorNameDataPoint=n,this.donorEmailDataPoint=i,this.sentry=s,this.paymentAPI=a,this.params=r,this.name=u._h.AU_BECS,this.intentSecret=null,this.completed=!1,this.elementReady=!1,this.hasElementError=!1,this.initiated=!1,this.onElementChange=e=>{this.completed=e.complete,this.hasElementError=!!e.error}}initiateFlow(e,t){return(0,l.sH)(this,void 0,void 0,(function*(){return this.initiated||(this.auBankAccountElement=this.createElement(),this.auBankAccountElement.once("ready",(()=>{this.elementReady=!0,(null==t?void 0:t.onAuBankAccountElementReady)&&t.onAuBankAccountElementReady()})),this.auBankAccountElement.on("change",this.onElementChange),this.auBankAccountElement.mount(e),this.initiated=!0),!0}))}startFlow(){return(0,l.sH)(this,void 0,void 0,(function*(){return this.elementReady?!this.completed&&!(yield this.validatePayment())||this.hasElementError?Yt.fail({}):Yt.success(void 0):Yt.fail({})}))}hold(){return(0,l.sH)(this,void 0,void 0,(function*(){const e=yield this.paymentAPI.hold({clientPaymentMethod:u._h.AU_BECS});if(Yt.isFailure(e))return e;const{intentSecret:t}=e.successResult;if(!t)throw new Rb;return this.intentSecret=t,Yt.success(void 0)}))}pay(){return(0,l.sH)(this,void 0,void 0,(function*(){if(!this.intentSecret)throw new Rb;const{firstName:e,lastName:t}=this.donorNameDataPoint.toObject(),{email:n}=this.donorEmailDataPoint.toObject();if(!n||!e||!t)throw new Mb;const i=yield this.retrieveSetupIntent(this.intentSecret);if(!i)return Yt.fail({shouldLeave:!1});if(i.status===Qv.Zq.SUCCEEDED)return this.requestPay();const s=yield this.confirmDebitSetup(this.intentSecret);return Yt.isFailure(s)?Yt.fail({shouldLeave:!1,message:s.failureResult.message}):s.successResult.status===Qv.Zq.SUCCEEDED?this.requestPay():Yt.fail({shouldLeave:!1})}))}destroy(){return(0,l.sH)(this,void 0,void 0,(function*(){var e;null===(e=this.auBankAccountElement)||void 0===e||e.destroy()}))}requestPay(){return(0,l.sH)(this,void 0,void 0,(function*(){const e=yield this.paymentAPI.pay();return Yt.isSuccess(e)?e:Yt.fail({shouldLeave:!1,message:e.failureResult.message})}))}confirmDebitSetup(e){return(0,l.sH)(this,void 0,void 0,(function*(){const t=this.getElement(),{firstName:n,lastName:i}=this.donorNameDataPoint.toObject(),{email:s}=this.donorEmailDataPoint.toObject();let a;try{a=yield this.stripe.confirmAuBecsDebitSetup(e,{payment_method:{au_becs_debit:t,billing_details:{name:DA([n,i]),email:s}}})}catch(e){return this.sentry.captureException(e),Yt.fail({shouldLeave:!1})}return a.error?"validation_error"===a.error.type||a.error.code===Tb.ACCOUNT_NUMBER_INVALID?Yt.fail({shouldLeave:!1,message:a.error.message}):Yt.fail({shouldLeave:!1}):Yt.success(a.setupIntent)}))}retrieveSetupIntent(e){return(0,l.sH)(this,void 0,void 0,(function*(){let t;try{t=yield this.stripe.retrieveSetupIntent(e)}catch(e){return this.sentry.captureException(e),null}return t.error?null:t.setupIntent}))}validatePayment(){return(0,l.sH)(this,void 0,void 0,(function*(){const e=this.getElement();let t;try{t=yield this.stripe.createPaymentMethod({type:u.qs.AU_BECS,au_becs_debit:e,billing_details:{name:"customer",email:"test@test.ru"}})}catch(e){return this.sentry.captureException(e),!1}return!!t.paymentMethod&&!t.error}))}getElement(){if(!this.auBankAccountElement)throw new Error("auBankAccountElement is not initialized");return this.auBankAccountElement}createElement(){return this.stripeElements.create("auBankAccount",{iconStyle:"default",disabled:!1,hideIcon:!1,style:this.params.stripe.elementStyles,classes:this.params.stripe.elementClasses})}}class Ub extends Error{constructor(){super("Card element not found")}}class Fb{constructor(e,t,n,i,s,a,r,o,c){this.stripe=e,this.stripeElements=t,this.sentry=n,this.intl=i,this.failureHandler=s,this.paymentAPI=a,this.setPaymentMethodCountry=r,this.donation=o,this.params=c,this.name=u._h.CARD,this.elementsSource=null,this.elementsState=this.getElementsInitialState(),this.handleElementChange=(e,t)=>{this.elementsState[e].completed=t.complete,this.elementsState[e].hasError=!!t.error},this.handleElementReady=(e,t)=>{this.elementsState[e].ready=!0,t&&t(e)},this.cardPaymentInitiator=new xb(this.stripe,this.paymentAPI)}initiateFlow(e){return(0,l.sH)(this,void 0,void 0,(function*(){var t,n,i;const{source:s,cardCvcContainer:a,cardExpiryContainer:r,cardNumberContainer:o,cardCvcOptions:c,cardNumberOptions:l,stripeElementStyleOverride:u,onCardElementReady:d}=e;if(this.elementsSource===s)return!0;this.elementsSource=s,this.elementsState=this.getElementsInitialState(),null===(t=this.stripeElements.getElement(Fa.CARD_NUMBER))||void 0===t||t.destroy(),null===(n=this.stripeElements.getElement(Fa.CARD_EXPIRY))||void 0===n||n.destroy(),null===(i=this.stripeElements.getElement(Fa.CARD_CVC))||void 0===i||i.destroy();const h=this.stripeElements.create(Fa.CARD_NUMBER,{iconStyle:"default",showIcon:void 0===(null==l?void 0:l.showIcon)||l.showIcon,style:void 0!==u?u:this.params.stripe.elementStyles,classes:this.params.stripe.elementClasses,placeholder:void 0!==(null==l?void 0:l.placeholder)?l.placeholder:this.intl.translate("creditCardScreen.cardForm.numberInput.label"),disableLink:!0}),m=this.stripeElements.create(Fa.CARD_EXPIRY,{style:void 0!==u?u:this.params.stripe.elementStyles,classes:this.params.stripe.elementClasses}),p=this.stripeElements.create(Fa.CARD_CVC,{style:void 0!==u?u:this.params.stripe.elementStyles,classes:this.params.stripe.elementClasses,placeholder:void 0!==(null==c?void 0:c.placeholder)?c.placeholder:void 0});return h.on("change",this.handleElementChange.bind(this,Fa.CARD_NUMBER)),m.on("change",this.handleElementChange.bind(this,Fa.CARD_EXPIRY)),p.on("change",this.handleElementChange.bind(this,Fa.CARD_CVC)),h.once("ready",this.handleElementReady.bind(this,Fa.CARD_NUMBER,d)),m.once("ready",this.handleElementReady.bind(this,Fa.CARD_EXPIRY,d)),p.once("ready",this.handleElementReady.bind(this,Fa.CARD_CVC,d)),h.mount(o),m.mount(r),p.mount(a),!0}))}startFlow(){return(0,l.sH)(this,void 0,void 0,(function*(){return this.elementsReady?!this.elementsCompleted||this.hasElementsError?(yield this.stripe.createToken(this.getCardNumberElement()),Yt.fail({})):Yt.success(void 0):Yt.fail({})}))}hold(){return(0,l.sH)(this,void 0,void 0,(function*(){return this.paymentAPI.hold({clientPaymentMethod:u._h.CARD})}))}destroy(){return(0,l.sH)(this,void 0,void 0,(function*(){const e=this.stripeElements.getElement(Fa.CARD_NUMBER),t=this.stripeElements.getElement(Fa.CARD_EXPIRY),n=this.stripeElements.getElement(Fa.CARD_CVC);null==e||e.destroy(),null==t||t.destroy(),null==n||n.destroy()}))}pay(){return(0,l.sH)(this,void 0,void 0,(function*(){const e=yield this.createStripePaymentMethod();if(en()&&Yt.isSuccess(e)){const t=this.cardPaymentInitiator.validateStripePaymentMethod(e.successResult,this.donation,this.intl);if(Yt.isFailure(t))return t}if(Yt.isFailure(e))return this.failureHandler(),Yt.fail({shouldLeave:!0,message:e.failureResult.message});const t=yield this.initiatePayment(e.successResult);return Yt.isFailure(t)?(this.failureHandler(),Yt.fail({shouldLeave:!0,message:t.failureResult.message})):t}))}get elementsReady(){return Object.values(this.elementsState).every((e=>{let{ready:t}=e;return t}))}get elementsCompleted(){return Object.values(this.elementsState).every((e=>{let{completed:t}=e;return t}))}get hasElementsError(){return Object.values(this.elementsState).some((e=>{let{hasError:t}=e;return t}))}getCardNumberElement(){const e=this.stripeElements.getElement(Fa.CARD_NUMBER);if(!e)throw new Ub;return e}initiatePayment(e){return this.cardPaymentInitiator.perform(e)}createStripePaymentMethod(){return(0,l.sH)(this,void 0,void 0,(function*(){var e;const t=this.getCardNumberElement();let n;try{n=yield this.stripe.createPaymentMethod({type:u.qs.CARD,card:t})}catch(e){return this.sentry.captureException(e),Yt.fail({})}return n.error?Yt.fail({message:n.error.message}):n.paymentMethod?((null===(e=n.paymentMethod.card)||void 0===e?void 0:e.country)&&this.setPaymentMethodCountry(n.paymentMethod.card.country),Yt.success(n.paymentMethod)):Yt.fail({})}))}getElementsInitialState(){return{[Fa.CARD_NUMBER]:{ready:!1,completed:!1,hasError:!1},[Fa.CARD_EXPIRY]:{ready:!1,completed:!1,hasError:!1},[Fa.CARD_CVC]:{ready:!1,completed:!1,hasError:!1}}}}var jb;!function(e){e.CANCELED="CANCELED"}(jb||(jb={}));var Bb=n(2093);class Hb extends Error{constructor(e){super(e.message||"Google Pay payment flow error"),this.meta=e,this.name="GooglePayPaymentFlowError"}}class qb{constructor(e,t,n,i,s,a,r,o,c,l,d,h,m){this.config=e,this.livemode=t,this.env=n,this.stripe=i,this.currencyService=s,this.donationDataPoint=a,this.sentry=r,this.intl=o,this.paymentAPI=c,this.googlePayAPI=l,this.setPaymentMethod=d,this.setDonorFullNameIfEmpty=h,this.setDonorEmailIfEmpty=m,this.name=u._h.GOOGLE_PAY,this.cardToken=null,this.googlePayJwt=null,this.client=null,this.googlePaySdkEnv="TEST",this.stripeLivemode="test",this.livemode&&this.env===u.hY.PRODUCTION&&(this.googlePaySdkEnv="PRODUCTION",this.stripeLivemode="live")}checkAvailability(){return(0,l.sH)(this,void 0,void 0,(function*(){try{if(!this.client)return!1;const e=this.makeReadyToPayRequest();return(yield this.client.isReadyToPay(e)).result}catch(e){return this.sentry.captureException(new Error(e.statusMessage),e),!1}}))}initiateFlow(){return(0,l.sH)(this,void 0,void 0,(function*(){try{this.googlePayJwt=yield this.getJwt()}catch(e){return!1}return this.client=yield this.loadClient(),!0}))}startFlow(){return(0,l.sH)(this,void 0,void 0,(function*(){if(this.setPaymentMethod(u._h.GOOGLE_PAY),this.cardToken=yield this.createToken(),!this.cardToken)return Yt.fail({});const e=yield this.hold();return Yt.isFailure(e)?Yt.fail({message:this.intl.translate("common.errorOccurredText")}):Yt.success(void 0)}))}pay(){return(0,l.sH)(this,void 0,void 0,(function*(){if(this.cardToken||(this.cardToken=yield this.createToken()),!this.cardToken)return Yt.fail({shouldLeave:!1});const e=yield this.createStripePaymentMethod(this.cardToken);if(Yt.isFailure(e))return this.cardToken=null,Yt.fail({shouldLeave:!1,message:e.failureResult.message});const t=yield this.initiatePayment(e.successResult);if(this.cardToken=null,Yt.isSuccess(t))return t;const{message:n,additionalMessage:i}=xb.handleCardError(this.intl,t.failureResult.hasBaseErrorMessage,t.failureResult.message);return Yt.fail({shouldLeave:!1,message:n,additionalMessage:i})}))}hold(){return(0,l.sH)(this,void 0,void 0,(function*(){try{const e=yield this.paymentAPI.hold({clientPaymentMethod:u._h.GOOGLE_PAY});if(Yt.isFailure(e))return e}catch(e){return Yt.fail({shouldLeave:!1})}return Yt.success(void 0)}))}get merchantInfo(){if(!this.googlePayJwt)throw new Error("GPay token is required");return{merchantId:this.config.googlePayInfo.merchantId,merchantName:this.config.companyName,merchantOrigin:window.location.hostname,authJwt:this.googlePayJwt}}initiatePayment(e){return(0,l.sH)(this,void 0,void 0,(function*(){return new xb(this.stripe,this.paymentAPI).perform(e)}))}createStripePaymentMethod(e){return(0,l.sH)(this,void 0,void 0,(function*(){let t;try{t=yield this.stripe.createPaymentMethod({type:u.qs.CARD,card:{token:e}})}catch(e){return this.sentry.captureException(e),Yt.fail({})}return t.error?Yt.fail({message:t.error.message}):t.paymentMethod?Yt.success(t.paymentMethod):Yt.fail({})}))}create(e){return(0,l.sH)(this,void 0,void 0,(function*(){if(!this.client)throw new Error("GPay client not found");const t=this.makePaymentRequest(e),n=yield this.client.loadPaymentData(t);if(n.errorCode)throw new Error("GPay payment data is not loaded");return{token:JSON.parse(n.paymentMethodData.tokenizationData.token),email:n.email}}))}makePaymentRequest(e){const{amount:t,currency:n}=e;return{apiVersion:2,apiVersionMinor:0,emailRequired:!0,allowedPaymentMethods:[{type:"CARD",parameters:{allowedAuthMethods:this.config.googlePayInfo.allowedAuthMethods,allowedCardNetworks:this.config.googlePayInfo.allowedCardNetworks},tokenizationSpecification:{type:"PAYMENT_GATEWAY",parameters:{gateway:"stripe",gatewayMerchantId:this.merchantInfo.merchantId,"stripe:version":this.config.googlePayInfo.stripeAPIVersion,"stripe:publishableKey":this.config.stripePublicKey[this.stripeLivemode]+"/"+this.config.stripeAccount}}}],transactionInfo:{countryCode:this.config.countryCode,currencyCode:n.toUpperCase(),totalPriceStatus:"FINAL",totalPrice:this.currencyService.toFloatUnformattedStr(t,n.toUpperCase())},merchantInfo:this.merchantInfo}}makeReadyToPayRequest(){return{allowedPaymentMethods:[{type:"CARD",parameters:{allowedAuthMethods:this.config.googlePayInfo.allowedAuthMethods,allowedCardNetworks:this.config.googlePayInfo.allowedCardNetworks}}],apiVersion:2,apiVersionMinor:0}}getJwt(){return(0,l.sH)(this,void 0,void 0,(function*(){return this.googlePayAPI.getToken(window.location.hostname)}))}loadClient(){return(0,l.sH)(this,void 0,void 0,(function*(){const e=(0,Bb.A)();yield Y("https://pay.google.com/gp/p/js/pay.js",!1,window);const t=window.google;return e&&!t?null:new t.payments.api.PaymentsClient({environment:this.googlePaySdkEnv})}))}createToken(){return(0,l.sH)(this,void 0,void 0,(function*(){var e;let t;try{t=yield this.create({currency:this.donationDataPoint.currency,amount:this.donationDataPoint.total}),t.token&&this.setDonorInfo(t)}catch(e){const t=e&&"object"==typeof e?e:{},n={toString:t.toString(),stringify:JSON.stringify(t),message:t.message,name:t.name,code:t.code};return t.statusCode!==jb.CANCELED&&this.sentry.captureException(new Hb(n),{extra:n}),null}return(null===(e=t.token)||void 0===e?void 0:e.id)||null}))}setDonorInfo(e){var t,n;const i=e.email;i&&this.setDonorEmailIfEmpty(i);const s=(null===(n=null===(t=e.token)||void 0===t?void 0:t.card)||void 0===n?void 0:n.name)||"";s&&this.setDonorFullNameIfEmpty(s)}}var Gb=n(4909);function Vb(e,t){return(0,l.sH)(this,arguments,void 0,(function*(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;try{return yield e()}catch(i){if(n>=t.retries)throw i;return yield new Promise((e=>setTimeout(e,t.delay))),Vb(e,t,++n)}}))}class Yb{static removeAuthorizePaymentHandler(e){e&&window.removeEventListener("message",e)}constructor(e,t,n,i,s,a,r,o,c){this.sessionAPI=e,this.stripe=t,this.env=n,this.donorNameDataPoint=i,this.donorEmailDataPoint=s,this.donationDataPoint=a,this.intl=r,this.sentry=o,this.paymentAPI=c,this.name=Qv._h.IDEAL,this.intentSecret=null,this.paymentIntent=null,this.popup=null,this.popupParams={},this.counter=0}initiateFlow(){return(0,l.sH)(this,void 0,void 0,(function*(){return!0}))}startFlow(){return(0,l.sH)(this,void 0,void 0,(function*(){return Yt.success(void 0)}))}hold(){return(0,l.sH)(this,void 0,void 0,(function*(){let e;try{if(e=yield this.paymentAPI.hold({clientPaymentMethod:Qv._h.IDEAL,token:{initOnly:!1}}),Yt.isFailure(e))return e}catch(e){return Yt.fail({message:this.commonErrorText})}const{intentSecret:t}=e.successResult;if(!t)throw new Pb;return this.intentSecret=t,Yt.success(void 0)}))}pay(){return(0,l.sH)(this,void 0,void 0,(function*(){var e;if(this.intentSecret){const e=yield this.retrievePaymentIntent(this.intentSecret);if((null==e?void 0:e.status)===Qv.Zq.SUCCEEDED)return this.closePopup(),this.requestPay()}if(!this.intentSecret)throw this.closePopup(),new Pb;const t=yield this.confirmPaymentIntent(this.intentSecret);if(Yt.isFailure(t))return t;if(this.paymentIntent=t.successResult,!this.paymentIntent)return this.closePopup(),Yt.fail({message:this.paymentErrorText});if(this.paymentIntent.status===Qv.Zq.SUCCEEDED)return this.closePopup(),this.requestPay();const n=this.paymentIntent.next_action;return"redirect_to_url"===(null==n?void 0:n.type)&&(null===(e=n.redirect_to_url)||void 0===e?void 0:e.url)?this.handleAction(this.intentSecret,n.redirect_to_url.url):(this.closePopup(),this.requestPay())}))}openConfirmationWindow(e){var t;if(this.popup)return this.popup;(null===(t=this.paymentIntent)||void 0===t?void 0:t.status)!==Qv.Zq.SUCCEEDED?(this.popupParams=e,this.popup=window.open(this.popupPreLoadingPage,"_blank"),this.assertPopup(this.popup)):e.onClose&&e.onClose()}focusConfirmationWindow(){this.popup&&(this.popup.blur(),this.popup.focus())}destroy(){return(0,l.sH)(this,void 0,void 0,(function*(){}))}isPaid(){return(0,l.sH)(this,void 0,void 0,(function*(){if(!this.paymentIntent)return!1;if(this.paymentIntent.status===Qv.Zq.SUCCEEDED)return!0;this.assert(this.paymentIntent.client_secret);const e=yield this.retrievePaymentIntent(this.paymentIntent.client_secret);return(null==e?void 0:e.status)===Qv.Zq.SUCCEEDED}))}isPaymentStarted(){return null!==this.paymentIntent}get commonErrorText(){return this.intl.translate("common.errorOccurredText")}get paymentErrorText(){return this.intl.translate("common.paymentNotAuthorizedError")}get popupPreLoadingPage(){switch(this.env){case Gb.h.PRODUCTION:return"https://checkout.fundraiseup.com/ideal";case Gb.h.STAGING:return"https://checkout.funstaging.com/ideal";case Gb.h.TESTING:return"http://checkout.fun.internal/ideal";default:return"https://checkout.localtest.me/ideal"}}confirmPaymentIntent(e){return(0,l.sH)(this,void 0,void 0,(function*(){var t;const n=this.donorNameDataPoint.toObject(),i=this.donorEmailDataPoint.toObject(),s={ideal:{},billing_details:{name:DA([n.firstName,n.lastName]),email:i.email}};try{const n=yield this.stripe.confirmIdealPayment(e,{payment_method:s,return_url:this.popupPreLoadingPage},{handleActions:!1});return n.error?(null===(t=n.error.payment_intent)||void 0===t?void 0:t.status)===Qv.Zq.SUCCEEDED?Yt.success(n.error.payment_intent):Yt.fail({message:n.error.message}):Yt.success(n.paymentIntent)}catch(e){return Yt.fail({message:e.message})}}))}handleAction(e,t){return(0,l.sH)(this,void 0,void 0,(function*(){var n;switch(yield this.authorizePayment(t),this.paymentIntent=yield this.retrievePaymentIntent(e),null===(n=this.paymentIntent)||void 0===n?void 0:n.status){case Qv.Zq.SUCCEEDED:return this.requestPay();case Qv.Zq.REQUIRES_PAYMENT_METHOD:{const t=yield this.confirmPaymentIntent(e);return Yt.isSuccess(t)&&(this.paymentIntent=t.successResult),Yt.fail({message:this.paymentErrorText})}case Qv.Zq.REQUIRES_ACTION:return Yt.fail({message:this.paymentErrorText});default:return this.notifyAboutError(new Error("Unexpected payment intent status"),{paymentIntent:this.paymentIntent}),this.closePopup(),Yt.fail({message:this.paymentErrorText})}}))}retrievePaymentIntent(e){return(0,l.sH)(this,void 0,void 0,(function*(){try{return yield this.retrievePaymentIntentWithRetry(e)}catch(e){return e instanceof Db&&this.notifyAboutWarning(e,{stripeError:e.resultError}),null}}))}retrievePaymentIntentWithRetry(e){return(0,l.sH)(this,void 0,void 0,(function*(){return Vb((()=>(0,l.sH)(this,void 0,void 0,(function*(){let t;try{t=yield this.stripe.retrievePaymentIntent(e)}catch(e){return this.sentry.captureException(e),null}if(t.error)throw new Db;return t.paymentIntent?t.paymentIntent:null}))),{retries:2,delay:500})}))}authorizePayment(e){return(0,l.sH)(this,void 0,void 0,(function*(){const t=this.popup;let n,i,s;return this.assertPopup(t),this.focusConfirmationWindow(),t.location=e,new Promise((e=>{s=this.authorizePaymentHandlerFn(e),n=setInterval((()=>{if(t.closed)return this.closePopup(),e()}),20),window.addEventListener("message",s),setTimeout((()=>{this.resetCounter(),i=setInterval((()=>this.waitWhileIntentWillUpdated(e,1e3,i)),1e3)}),5e3)})).then((()=>{clearInterval(n),clearInterval(i),Yb.removeAuthorizePaymentHandler(s)}))}))}authorizePaymentHandlerFn(e){const t=new URL(this.popupPreLoadingPage).origin;return n=>{if(n.origin===t)return this.closePopup(),e()}}waitWhileIntentWillUpdated(e,t,n){return(0,l.sH)(this,void 0,void 0,(function*(){var i;this.assert(this.intentSecret);const s=Math.round(9e5/t);if(this.counter>=s&&n)return clearInterval(n),this.closePopup(),e();this.counter++;const a=yield this.retrievePaymentIntent(this.intentSecret);return a&&a.status!==(null===(i=this.paymentIntent)||void 0===i?void 0:i.status)?(this.closePopup(),e()):void 0}))}resetCounter(){this.counter=0}requestPay(){return(0,l.sH)(this,void 0,void 0,(function*(){const e=yield this.paymentAPI.pay();return Yt.isSuccess(e)?e:Yt.fail({shouldLeave:!1,message:e.failureResult.message})}))}closePopup(){this.popup&&(this.popup.close(),this.popupParams.onClose&&this.popupParams.onClose(),this.resetPopup())}resetPopup(){this.popup=null,this.popupParams={}}assertPopup(e){var t;const n=new Error(this.commonErrorText);if(!e)throw this.notifyAboutError(new Error("Can not create iDEAL popup"),{intent:null===(t=this.paymentIntent)||void 0===t?void 0:t.id}),n}assert(e){const t=new Error(this.commonErrorText);if(!e)throw t}notifyAboutError(e,t){this.sentry.captureException(e,{extra:Object.assign(Object.assign({},t),{widgetSession:this.sessionAPI.sessionToken})})}notifyAboutWarning(e,t){this.sentry.captureException(e,{level:"warning",extra:Object.assign(Object.assign({},t),{widgetSession:this.sessionAPI.sessionToken})})}}class Kb extends Error{constructor(){super("Paypal hold payload is invalid")}}const zb=["Component closed","Detected container element removed from DOM"],$b=["Window closed before response","Window closed for postrobot_method before ack"];class Wb{constructor(e,t,n,i){this.config=e,this.sentry=t,this.locale=n,this.iframeWindow=i,this.scriptParams=null,this.buttonParams=null,this.actions=null,this.rendered=!1,this.paypalButtons=null,this.scriptLoadingPromise=null}setCurrency(e,t){var n;const{paypalMerchantId:i,paypalClientId:s,subscriptionsEnabled:a}=this.config;if(!i){const e=new Error("Paypal merchant ID is not provided");throw this.sentry.captureException(e),e}const r={"client-id":s,"merchant-id":i,currency:this.getPaypalCurrency(e,t).toUpperCase(),"disable-funding":"venmo",locale:"automatic",intent:"capture",vault:"false"},o=L(this.locale);return o&&(r.locale=o),a&&(r.intent="tokenize",r.vault="true"),r.currency!==(null===(n=this.scriptParams)||void 0===n?void 0:n.currency)&&(this.scriptLoadingPromise=null),this.scriptParams=r,this}setButtonParams(e){let{onCreate:t,onApprove:n,onButtonClick:i,buttonColor:s,onCancel:a,onFail:r,onInit:o}=e;return this.buttonParams={fundingSource:u._h.PAYPAL,style:{color:s,tagline:!1,shape:"rect",height:48,size:"responsive"},[this.paypalIdentifierMethod]:()=>t(this.clientPaymentMethod),onApprove:e=>(0,l.sH)(this,void 0,void 0,(function*(){const t=e[this.paypalIdentifierKey];if(!t)return this.handleEmptyTokenError(e);yield n(this.clientPaymentMethod,t)})),onInit:(e,t)=>{this.actions=t,null==o||o()},onClick:()=>{null==i||i(this.clientPaymentMethod)},onError:e=>{const t=e.message;if(!t||!(t.includes("popup close")||t.includes("cross-domain")||t.includes("Window is closed")))throw e;r({message:"Window is closed"})},onCancel:()=>{null==a||a()}},this}disable(){return(0,l.sH)(this,void 0,void 0,(function*(){var e;try{yield null===(e=this.actions)||void 0===e?void 0:e.disable()}catch(e){if($b.includes(e.message))return;throw e}}))}enable(){return(0,l.sH)(this,void 0,void 0,(function*(){var e;try{yield null===(e=this.actions)||void 0===e?void 0:e.enable()}catch(e){if($b.includes(e.message))return;throw e}}))}loadPayPalScriptIfNeeded(){return(0,l.sH)(this,void 0,void 0,(function*(){if(!this.scriptParams)throw new Error("Call `setCurrency` before you mount");return this.scriptLoadingPromise||(this.scriptLoadingPromise=Y(`https://www.paypal.com/sdk/js?${(0,Be.Ws)(this.scriptParams)}`,!1,this.iframeWindow,{},!0)),this.scriptLoadingPromise}))}mount(e){return(0,l.sH)(this,void 0,void 0,(function*(){if(!this.buttonParams)throw new Error("Call `setHandlers` before you mount");if(e){this.paypalButtons=this.iframeWindow.paypal.Buttons(this.buttonParams);try{yield this.paypalButtons.render(e),this.rendered=!0}catch(e){if(zb.includes(null==e?void 0:e.message))return;throw e}}}))}destroy(){return(0,l.sH)(this,void 0,void 0,(function*(){this.rendered&&this.paypalButtons&&(yield this.paypalButtons.close(),this.rendered=!1,this.actions=null)}))}get clientPaymentMethod(){return u._h.PAYPAL}get paypalIdentifierMethod(){return this.config.subscriptionsEnabled?"createBillingAgreement":"createOrder"}get paypalIdentifierKey(){return this.config.subscriptionsEnabled?"billingToken":"orderID"}getPaypalCurrency(e,t){const n=this.config.paypalCurrencies;return n.includes(e)?e:n.includes(t)?t:"USD"}handleEmptyTokenError(e){this.sentry.captureException(new Error(`Got an undefined token by paypalIdentifierKey: ${this.paypalIdentifierKey}`),{extra:{paypalIdentifierKey:this.paypalIdentifierKey,paypalData:e}})}}class Xb{constructor(e,t,n,i,s,a,r,o,c,l,u,d,h,m,p,g,y,f,S,A,E){this.config=e,this.sentry=t,this.locale=n,this.iframeWindow=i,this.donationDataPoint=s,this.paypalAPI=a,this.paymentAPI=r,this.updateSession=o,this.setPaymentMethod=c,this.setDonorFirstNameIfEmpty=l,this.setDonorLastNameIfEmpty=u,this.setDonorEmailIfEmpty=d,this.setPhoneCountryCodeIfEmptyPhone=h,this.setPhoneNumberIfEmpty=m,this.setCountryCodeIfEmptyAddress=p,this.setCityIfEmpty=g,this.setLine1IfEmpty=y,this.setLine2IfEmpty=f,this.setPostalIfEmpty=S,this.setRegionIfEmpty=A,this.paymentFailureHandler=E,this.name=Qv._h.PAYPAL,this.paypalButtonBuilder=new Wb(this.config,this.sentry,this.locale,this.iframeWindow)}initiateFlow(e){return(0,l.sH)(this,arguments,void 0,(function*(e){let{element:t,holdDone:n,onFail:i,buttonColor:s,onButtonClick:a,onCancel:r,onInit:o}=e;return yield this.loadPayPalScriptIfNeeded(),yield this.paypalButtonBuilder.setButtonParams({buttonColor:s,onCreate:e=>(0,l.sH)(this,void 0,void 0,(function*(){yield this.updateSession();const t=yield this.paypalAPI.createOrder(e);if(!Yt.isFailure(t))return t.successResult;i(t.failureResult)})),onApprove:(e,t)=>(0,l.sH)(this,void 0,void 0,(function*(){this.setPaymentMethod(e),this.clientPaymentMethod=e,this.token=t;const s=yield this.hold();Yt.isFailure(s)?i(s.failureResult):n()})),onButtonClick:a,onCancel:r,onFail:i,onInit:o}).mount(t),!0}))}loadPayPalScriptIfNeeded(){return(0,l.sH)(this,void 0,void 0,(function*(){return this.paypalButtonBuilder.setCurrency(this.donationDataPoint.currency,this.donationDataPoint.defaultCurrency).loadPayPalScriptIfNeeded()}))}startFlow(){return(0,l.sH)(this,void 0,void 0,(function*(){return Yt.success(void 0)}))}hold(){return(0,l.sH)(this,void 0,void 0,(function*(){if(!this.token||!this.clientPaymentMethod)throw new Kb;const e={token:this.token,clientPaymentMethod:this.clientPaymentMethod};try{const t=yield this.paymentAPI.hold(e);return Yt.isFailure(t)?t:(this.setDonorInfo(t.successResult),Yt.success(void 0))}catch(e){return Yt.fail({})}}))}pay(){return(0,l.sH)(this,void 0,void 0,(function*(){var e,t,n;const i=yield this.paymentAPI.pay();return Yt.isSuccess(i)?i:(null===(e=i.failureResult.errors)||void 0===e?void 0:e.code)===Qv.M6.ORDER_EXPIRED?(this.paymentFailureHandler(),Yt.fail({shouldLeave:!0,message:null===(t=i.failureResult.errors)||void 0===t?void 0:t.message})):Yt.fail({shouldLeave:!1,message:null===(n=i.failureResult.errors)||void 0===n?void 0:n.message})}))}closePaypal(){this.paypalButtonBuilder.destroy()}togglePaypalActions(e){e?this.paypalButtonBuilder.enable():this.paypalButtonBuilder.disable()}setDonorInfo(e){var t,n,i,s,a,r,o,c;this.setDonorFirstNameIfEmpty(e.firstName||""),this.setDonorLastNameIfEmpty(e.lastName||""),this.setDonorEmailIfEmpty(e.email||""),(null===(t=e.address)||void 0===t?void 0:t.countryCode)&&this.setPhoneCountryCodeIfEmptyPhone(e.address.countryCode),this.setPhoneNumberIfEmpty(e.phone||""),(null===(n=e.address)||void 0===n?void 0:n.countryCode)&&this.setCountryCodeIfEmptyAddress(e.address.countryCode),this.setCityIfEmpty((null===(i=e.address)||void 0===i?void 0:i.city)||""),this.setLine1IfEmpty((null===(s=e.address)||void 0===s?void 0:s.line1)||""),this.setLine2IfEmpty((null===(a=e.address)||void 0===a?void 0:a.line2)||""),this.setRegionIfEmpty((null===(r=e.address)||void 0===r?void 0:r.region)||""),this.setPostalIfEmpty((null===(c=null===(o=e.address)||void 0===o?void 0:o.postal)||void 0===c?void 0:c.toString())||"")}}class Qb{constructor(e,t,n,i,s,a,r,o,c,l,u,d,h){this.stripe=e,this.stripeElements=t,this.donorNameDataPoint=n,this.donorEmailDataPoint=i,this.mailingAddressDataPoint=s,this.paymentOptionsDataPoint=a,this.sentry=r,this.paymentMethodManager=o,this.checkoutConfiguration=c,this.setPaymentMethodCountry=l,this.mailingAddressFailureHandler=u,this.paymentAPI=d,this.params=h,this.name=Qv._h.SEPA,this.intentSecret=null,this.completed=!1,this.elementReady=!1,this.ibanElement=null,this.hasElementError=!1,this.initiated=!1,this.onElementChange=e=>{this.setPaymentMethodCountry(e.country),this.completed=e.complete,this.hasElementError=!!e.error}}initiateFlow(e,t){return(0,l.sH)(this,void 0,void 0,(function*(){return this.initiated||(this.ibanElement=this.createElement(t),this.ibanElement.once("ready",(()=>{this.elementReady=!0,(null==t?void 0:t.onIbanElementReady)&&t.onIbanElementReady()})),this.ibanElement.on("change",this.onElementChange),this.ibanElement.mount(e),this.initiated=!0),!0}))}startFlow(){return(0,l.sH)(this,void 0,void 0,(function*(){return this.elementReady?!this.completed&&!(yield this.validatePayment())||this.hasElementError?Yt.fail({}):Yt.success(void 0):Yt.fail({})}))}hold(){return(0,l.sH)(this,void 0,void 0,(function*(){const e=yield this.paymentAPI.hold({clientPaymentMethod:Qv._h.SEPA});if(Yt.isFailure(e))return Yt.fail(e.failureResult);const{intentSecret:t}=e.successResult;if(!t)throw new Pb;return this.intentSecret=t,Yt.success(void 0)}))}pay(){return(0,l.sH)(this,void 0,void 0,(function*(){if(!this.intentSecret)throw new Pb;const{isValid:e}=this.mailingAddressDataPoint.validate();if(this.paymentMethodManager.isRequired("address",{ibanCountry:this.country})&&!e)throw new Error(`Wrong address format for ${this.country} IBAN`);const t=yield this.retrieveSetupIntent(this.intentSecret);if(!t)return Yt.fail({shouldLeave:!1});if(t.status===Qv.Zq.SUCCEEDED)return this.requestPay();const n=yield this.confirmSepaDebitSetup(this.intentSecret);if(Yt.isFailure(n))return n;const i=n.successResult;return i&&i.status===Qv.Zq.SUCCEEDED?this.requestPay():Yt.fail({shouldLeave:!1})}))}destroy(){return(0,l.sH)(this,void 0,void 0,(function*(){var e;try{null===(e=this.ibanElement)||void 0===e||e.destroy()}catch(e){}}))}get country(){if(!this.paymentOptionsDataPoint.paymentMethodCountry)throw new Error("Country is not set");return this.paymentOptionsDataPoint.paymentMethodCountry}retrieveSetupIntent(e){return(0,l.sH)(this,void 0,void 0,(function*(){let t;try{t=yield this.stripe.retrieveSetupIntent(e)}catch(e){return this.sentry.captureException(e),null}return t.setupIntent?t.setupIntent:null}))}confirmSepaDebitSetup(e){return(0,l.sH)(this,void 0,void 0,(function*(){var t;const n=this.getElement();if(!this.country)throw new Error("country was not set");const i=this.donorNameDataPoint.toObject(),s=this.donorEmailDataPoint.toObject(),a=this.mailingAddressDataPoint.toObject();let r;try{r=yield this.stripe.confirmSepaDebitSetup(e,{payment_method:{sepa_debit:n,billing_details:{name:DA([i.firstName,i.lastName]),email:s.email,address:{line1:a.line1,city:a.city,country:a.countryCode,postal_code:a.postal}}}})}catch(e){return this.sentry.captureException(e),Yt.fail({})}return r.error?"validation_error"===r.error.type?Yt.fail({shouldLeave:!1,message:r.error.message}):["invalid_owner_address","country-code-invalid"].includes(null!==(t=r.error.message)&&void 0!==t?t:"")?(this.mailingAddressFailureHandler(),Yt.fail({shouldLeave:!0,message:r.error.message})):Yt.fail({shouldLeave:!1}):Yt.success(r.setupIntent)}))}requestPay(){return(0,l.sH)(this,void 0,void 0,(function*(){const e=yield this.paymentAPI.pay();return Yt.isSuccess(e)?e:Yt.fail({shouldLeave:!1,message:e.failureResult.message})}))}getElement(){if(!this.ibanElement)throw new Error("ibanElement is not initialized");return this.ibanElement}createElement(e){const{stripeElementStyleOverride:t,showIcon:n}=null!=e?e:{};return this.stripeElements.create("iban",{iconStyle:"default",disabled:!1,hideIcon:void 0!==n&&!n,placeholderCountry:this.checkoutConfiguration.company.country,style:void 0!==t?t:Object.assign(Object.assign({},this.params.stripe.elementStyles),{base:Object.assign(Object.assign({},this.params.stripe.elementStyles.base),{fontSize:"14px"})}),classes:this.params.stripe.elementClasses,supportedCountries:["SEPA"]})}validatePayment(){return(0,l.sH)(this,void 0,void 0,(function*(){const e=this.getElement();let t;try{t=yield this.stripe.createPaymentMethod({type:u.qs.SEPA,sepa_debit:e,billing_details:{name:K,email:z}})}catch(e){return this.sentry.captureException(e),!1}return!!t.paymentMethod&&!t.error}))}}class Zb{constructor(e,t,n,i,s,a,r,o,c){this.stripe=e,this.donorEmailDataPoint=t,this.mailingAddressDataPoint=n,this.ukBacsDataPoint=i,this.sentry=s,this.intl=a,this.mailingAddressFailureHandler=r,this.ukBacsFailureHandler=o,this.paymentAPI=c,this.name=u._h.UK_BACS,this.intentSecret=null}initiateFlow(){return(0,l.sH)(this,void 0,void 0,(function*(){return!0}))}startFlow(){return(0,l.sH)(this,void 0,void 0,(function*(){return Yt.success(void 0)}))}hold(){return(0,l.sH)(this,void 0,void 0,(function*(){const e=yield this.paymentAPI.hold({clientPaymentMethod:u._h.UK_BACS});if(Yt.isFailure(e))return e;const{intentSecret:t}=e.successResult;if(!t)throw new Pb;return this.intentSecret=t,Yt.success(void 0)}))}pay(){return(0,l.sH)(this,void 0,void 0,(function*(){if(!this.intentSecret)throw new Pb;const e=yield this.retrieveSetupIntent(this.intentSecret);if(!e)return Yt.fail({shouldLeave:!1});if(e.status===Qv.Zq.SUCCEEDED)return this.requestPay();const t=yield this.confirmBacsDebitSetup(this.intentSecret);if(Yt.isFailure(t))return t;const n=t.successResult;return n&&n.status===Qv.Zq.SUCCEEDED?this.requestPay():Yt.fail({shouldLeave:!0})}))}retrieveSetupIntent(e){return(0,l.sH)(this,void 0,void 0,(function*(){let t;try{t=yield this.stripe.retrieveSetupIntent(e)}catch(e){return this.sentry.captureException(e),null}return t.setupIntent?t.setupIntent:null}))}confirmBacsDebitSetup(e){return(0,l.sH)(this,void 0,void 0,(function*(){var t,n,i;let s;const a=this.donorEmailDataPoint.toObject(),r=this.mailingAddressDataPoint.toObject(),o=this.ukBacsDataPoint.toObject();try{s=yield this.stripe.confirmBacsDebitSetup(e,{payment_method:{bacs_debit:{sort_code:o.sortCode,account_number:o.accountNumber},billing_details:{name:o.accountHolderName,email:a.email,address:{line1:r.line1,city:r.city,country:r.countryCode,postal_code:r.postal}}}})}catch(e){return this.sentry.captureException(e),Yt.fail({})}return s.error?["invalid_owner_address","country-code-invalid"].includes(null!==(n=s.error.code)&&void 0!==n?n:"")?(this.mailingAddressFailureHandler(),Yt.fail({shouldLeave:!0,additionalMessage:s.error.message,message:this.intl.translate("mailingAddressScreen.validationError.title")})):(this.ukBacsFailureHandler(),["invalid_bank_account_account_number","invalid_bank_account"].includes(null!==(i=s.error.code)&&void 0!==i?i:"")?Yt.fail({shouldLeave:!0,message:s.error.message}):s.error.message?Yt.fail({shouldLeave:!1,message:s.error.message}):Yt.fail({shouldLeave:!0})):Yt.success(null!==(t=s.setupIntent)&&void 0!==t?t:null)}))}requestPay(){return(0,l.sH)(this,void 0,void 0,(function*(){const e=yield this.paymentAPI.pay();return Yt.isSuccess(e)?e:Yt.fail({shouldLeave:!1,message:e.failureResult.message})}))}}const Jb="venmo",eP=["Window closed before response","Window closed for postrobot_method before ack"];class tP{constructor(e,t,n,i){this.config=e,this.sentry=t,this.locale=n,this.iframeWindow=i,this.available=!0,this.scriptParams=null,this.buttonParams=null,this.actions=null,this.rendered=!1,this.scriptLoadingPromise=null}init(){const{paypalMerchantId:e,paypalClientId:t}=this.config;if(!e){const e=new Error("Paypal merchant ID is not provided");throw this.sentry.captureException(e),e}const n={"client-id":t,"merchant-id":e,currency:"USD","enable-funding":Jb,"disable-funding":"card"},i=L(this.locale);return i&&(n.locale=i),this.scriptParams=n,this}setHandlers(e){let{onCreate:t,onApprove:n,onButtonClick:i,onCancel:s,onInit:a}=e;return this.buttonParams={fundingSource:Jb,style:{tagline:!1,shape:"rect",height:48,size:"responsive"},createOrder:()=>t(u._h.VENMO),onApprove:e=>(0,l.sH)(this,void 0,void 0,(function*(){if(!this.venmoButtons)throw new Error("Venmo Buttons not initialized");const t=e.orderID;if(!t)return this.handleEmptyTokenError(e);yield n(this.clientPaymentMethod,t)})),onInit:(e,t)=>{this.actions=t,null==a||a()},onClick:()=>(0,l.sH)(this,void 0,void 0,(function*(){null==i||i(this.clientPaymentMethod)})),onError:e=>{const t=e.message;if(!t||!t.includes("popup close")&&!t.includes("cross-domain"))throw e},onCancel:()=>{null==s||s()}},this}disable(){return(0,l.sH)(this,void 0,void 0,(function*(){var e;try{yield null===(e=this.actions)||void 0===e?void 0:e.disable()}catch(e){if(eP.includes(e.message))return;throw e}}))}enable(){return(0,l.sH)(this,void 0,void 0,(function*(){var e;try{yield null===(e=this.actions)||void 0===e?void 0:e.enable()}catch(e){if(eP.includes(e.message))return;throw e}}))}loadPayPalScriptIfNeeded(){return(0,l.sH)(this,void 0,void 0,(function*(){if(!this.scriptParams)throw new Error("Call `setCurrency` before init");return this.scriptLoadingPromise||(this.scriptLoadingPromise=Y(`https://www.paypal.com/sdk/js?${(0,Be.Ws)(this.scriptParams)}`,!1,this.iframeWindow,{"data-namespace":"venmo"})),this.scriptLoadingPromise}))}mount(e){return(0,l.sH)(this,void 0,void 0,(function*(){if(!this.buttonParams)throw new Error("Call `setHandlers` before you mount");if(yield this.loadPayPalScriptIfNeeded(),e)if(this.venmoButtons=this.iframeWindow.venmo.Buttons(this.buttonParams),this.venmoButtons.isEligible())try{yield this.venmoButtons.render(e),this.rendered=!0}catch(e){if(["Component closed","Detected container element removed from DOM"].includes(null==e?void 0:e.message))return;throw e}else this.available=!1}))}destroy(){return(0,l.sH)(this,void 0,void 0,(function*(){this.rendered&&this.venmoButtons&&(yield this.venmoButtons.close(),this.rendered=!1)}))}get clientPaymentMethod(){return u._h.VENMO}handleEmptyTokenError(e){this.sentry.captureException(new Error("Got an undefined token"),{extra:{data:e}})}}class nP{constructor(e,t,n,i,s,a,r,o,c,l,u,d,h,m,p,g,y,f,S,A,E){this.livemode=e,this.showcase=t,this.config=n,this.sentry=i,this.locale=s,this.iframeWindow=a,this.updateSession=r,this.setPaymentMethod=o,this.setDonorFirstNameIfEmpty=c,this.setDonorLastNameIfEmpty=l,this.setDonorEmailIfEmpty=u,this.setPhoneCountryCodeIfEmptyPhone=d,this.setPhoneNumberIfEmpty=h,this.setCountryCodeIfEmptyAddress=m,this.setCityIfEmpty=p,this.setLine1IfEmpty=g,this.setLine2IfEmpty=y,this.setPostalIfEmpty=f,this.setRegionIfEmpty=S,this.paypalAPI=A,this.paymentAPI=E,this.name=Qv._h.VENMO,this.venmoButtonBuilder=new tP(this.config,this.sentry,this.locale,this.iframeWindow)}checkAvailability(){return this.venmoButtonBuilder.available}initiateFlow(e){return(0,l.sH)(this,arguments,void 0,(function*(e){let{element:t,holdDone:n,onFail:i,onButtonClick:s,onCancel:a,onInit:r}=e;return yield this.loadPayPalScriptIfNeeded(),yield this.venmoButtonBuilder.setHandlers({onCreate:e=>(0,l.sH)(this,void 0,void 0,(function*(){yield this.updateSession();const t=yield this.paypalAPI.createOrder(e);if(!Yt.isFailure(t))return t.successResult;i(t.failureResult)})),onApprove:(e,t)=>(0,l.sH)(this,void 0,void 0,(function*(){this.setPaymentMethod(e),this.clientPaymentMethod=e,this.token=t;const s=yield this.hold();Yt.isFailure(s)?i(s.failureResult):n()})),onButtonClick:s,onCancel:()=>{null==a||a()},onInit:r}).mount(t),this.venmoButtonBuilder.available}))}loadPayPalScriptIfNeeded(){return this.venmoButtonBuilder.init().loadPayPalScriptIfNeeded()}startFlow(){return(0,l.sH)(this,void 0,void 0,(function*(){return Yt.success(void 0)}))}hold(){return(0,l.sH)(this,void 0,void 0,(function*(){if(!this.token||!this.clientPaymentMethod)throw new Kb;const e={token:this.token,clientPaymentMethod:this.clientPaymentMethod},t=yield this.paymentAPI.hold(e);return Yt.isFailure(t)?Yt.fail(t.failureResult):(this.setDonorInfo(t.successResult),Yt.success(void 0))}))}pay(){return(0,l.sH)(this,void 0,void 0,(function*(){const e=yield this.paymentAPI.pay();return Yt.isSuccess(e)?e:Yt.fail({shouldLeave:!1})}))}closeButton(){this.venmoButtonBuilder.destroy()}toggleVenmoActions(e){e?this.venmoButtonBuilder.enable():this.venmoButtonBuilder.disable()}setDonorInfo(e){var t,n,i,s,a,r,o,c;this.setDonorFirstNameIfEmpty(e.firstName||""),this.setDonorLastNameIfEmpty(e.lastName||""),this.setDonorEmailIfEmpty(e.email||""),(null===(t=e.address)||void 0===t?void 0:t.countryCode)&&this.setPhoneCountryCodeIfEmptyPhone(e.address.countryCode),this.setPhoneNumberIfEmpty(e.phone||""),(null===(n=e.address)||void 0===n?void 0:n.countryCode)&&this.setCountryCodeIfEmptyAddress(e.address.countryCode),this.setCityIfEmpty((null===(i=e.address)||void 0===i?void 0:i.city)||""),this.setLine1IfEmpty((null===(s=e.address)||void 0===s?void 0:s.line1)||""),this.setLine2IfEmpty((null===(a=e.address)||void 0===a?void 0:a.line2)||""),this.setRegionIfEmpty((null===(r=e.address)||void 0===r?void 0:r.region)||""),this.setPostalIfEmpty((null===(c=null===(o=e.address)||void 0===o?void 0:o.postal)||void 0===c?void 0:c.toString())||"")}}class iP{constructor(e){this.sessionAPI=e}getToken(e){return(0,l.sH)(this,void 0,void 0,(function*(){try{return yield this.sessionAPI.get("googlePay/token",{merchantOrigin:e},{retries:5,delay:200,rejectsOnInvalid:!0})}catch(e){throw Error("Error while receiving google pay token")}}))}}class sP{constructor(e){this.sessionAPI=e}createOrder(e){return(0,l.sH)(this,void 0,void 0,(function*(){return this.sessionAPI.post("paypal/order",{clientPaymentMethod:e})}))}}class aP{constructor(e,t,n,i,s,a,r,o,c,l,u,d,h){this.stripe=e,this.usBankAccountDataPoint=t,this.donationDataPoint=n,this.sentry=i,this.paymentAPI=s,this.intl=a,this.params=r,this.paymentFailureHandler=o,this.setFinancialInstitution=c,this.setVerificationType=l,this.setAccountNumber=u,this.setRoutingNumber=d,this.setAccountType=h,this.name=Qv._h.US_BANK_ACCOUNT,this.intentSecret=null,this.initiateParams=null}initiateFlow(e){return(0,l.sH)(this,void 0,void 0,(function*(){return this.initiateParams=e,!0}))}startFlow(){return(0,l.sH)(this,void 0,void 0,(function*(){const e=this.usBankAccountDataPoint.usBankAccountVerificationSetup;if(e.isMicroDepositOnly||e.isAbavOnly)return Yt.success(void 0);const t=yield this.hold();if(Yt.isFailure(t))return Yt.fail({message:t.failureResult.message||this.commonErrorText});if(!this.intentSecret)return Yt.fail({message:this.commonErrorText});const n=yield this.collectBankAccountForSetup(this.intentSecret);if(Yt.isFailure(n))return n;const i=n.successResult;if(i.status===Qv.Zq.REQUIRES_PAYMENT_METHOD)return Yt.fail({});const s=i.payment_method;return this.assertUSBankAccountPaymentMethod(s),this.paymentMethod=s,this.setFinancialInstitution(s.us_bank_account.bank_name),this.setAccountNumber(s.us_bank_account.last4),this.setRoutingNumber(s.us_bank_account.routing_number),this.setAccountType(s.us_bank_account.account_holder_type),Yt.success(void 0)}))}hold(){return(0,l.sH)(this,void 0,void 0,(function*(){if(this.shouldCreatePaymentMethod){const e=yield this.createPaymentMethod();if(Yt.isFailure(e))return e}const e=yield this.paymentAPI.hold({clientPaymentMethod:Qv._h.US_BANK_ACCOUNT,token:{verificationType:this.verificationType}});if(Yt.isFailure(e))return Yt.fail(e.failureResult);const{intentSecret:t}=e.successResult;if(!t)throw new Pb;return this.intentSecret=t,Yt.success(void 0)}))}pay(){return(0,l.sH)(this,void 0,void 0,(function*(){if(!this.intentSecret)throw new Pb;const e=yield this.retrieveSetupIntent(this.intentSecret);if(Yt.isFailure(e))return e;if(e.successResult.status===Qv.Zq.SUCCEEDED)return this.requestPay();const t=yield this.confirmUsBankAccountSetup(this.intentSecret);if(Yt.isFailure(t))return t;const n=t.successResult;return!n||n.status!==Qv.Zq.SUCCEEDED&&n.status!==Qv.Zq.REQUIRES_ACTION?Yt.fail({shouldLeave:!0}):(n.next_action&&(this.assertUSBankAccountNextAction(n.next_action),this.setVerificationType(n.next_action.verify_with_microdeposits.microdeposit_type)),this.requestPay())}))}get verificationType(){var e;if(null===(e=this.initiateParams)||void 0===e?void 0:e.verificationType)return this.initiateParams.verificationType;const t=this.usBankAccountDataPoint.usBankAccountVerificationSetup;return t.isAbavOnly?"instant_or_skip":t.isInstantOnly?"instant":t.isInstantAndMicroDeposit?xv(function(e,t,n){if("USD"!==n)return t;const i=function(e){switch(e){case tv.ONE_FOR_ISRAEL:return 150;case tv.FCA:return 200;default:return null}}(e);return null===i?t:t<9500&&t>=i?9500:t}(this.params.companyKey,this.donationDataPoint.total,this.donationDataPoint.currency))?"automatic":"instant":t.isInstantAndAbav?"instant_or_skip":"microdeposits"}get shouldCreatePaymentMethod(){return"microdeposits"===this.verificationType||"instant_or_skip"===this.verificationType}get commonErrorText(){return this.intl.translate("common.errorOccurredText")}get captureErrorContext(){return{extra:{widgetSession:this.params.sessionToken}}}createPaymentMethod(){return(0,l.sH)(this,void 0,void 0,(function*(){const e=this.usBankAccountDataPoint.toObject();let t;try{t=yield this.stripe.createPaymentMethod({type:Qv.qs.US_BANK_ACCOUNT,billing_details:{name:this.usBankAccountDataPoint.accountHolderName},us_bank_account:{account_number:e.accountNumber,routing_number:e.routingNumber,account_holder_type:e.accountType}})}catch(e){return this.sentry.captureException(e,this.captureErrorContext),Yt.fail({shouldLeave:!1})}if(t.error)return Yt.fail({shouldLeave:!1,message:t.error.message||this.commonErrorText});const n=t.paymentMethod;return this.assertUSBankAccountPaymentMethod(n),this.paymentMethod=n,this.setFinancialInstitution(n.us_bank_account.bank_name),Yt.success(n)}))}retrieveSetupIntent(e){return(0,l.sH)(this,void 0,void 0,(function*(){let t;try{t=yield this.stripe.retrieveSetupIntent(e)}catch(e){return this.sentry.captureException(e,this.captureErrorContext),Yt.fail({shouldLeave:!1})}return t.setupIntent?Yt.success(t.setupIntent):Yt.fail({shouldLeave:!1})}))}confirmUsBankAccountSetup(e){return(0,l.sH)(this,void 0,void 0,(function*(){var t;let n;this.assertUSBankAccountPaymentMethod(this.paymentMethod);try{n=yield this.stripe.confirmUsBankAccountSetup(e,{payment_method:this.paymentMethod.id,expand:["payment_method"]})}catch(e){return this.sentry.captureException(e,this.captureErrorContext),Yt.fail({shouldLeave:!1})}return n.setupIntent?Yt.success(n.setupIntent):(this.paymentFailureHandler(),["invalid_bank_account_account_number","invalid_bank_account"].includes(null!==(t=n.error.code)&&void 0!==t?t:"")||n.error.message?Yt.fail({shouldLeave:!0,message:n.error.message}):Yt.fail({shouldLeave:!0}))}))}collectBankAccountForSetup(e){return(0,l.sH)(this,void 0,void 0,(function*(){var t,n,i,s;let a;try{null===(n=null===(t=this.initiateParams)||void 0===t?void 0:t.onPopupOpen)||void 0===n||n.call(t),a=yield this.stripe.collectBankAccountForSetup({clientSecret:e,params:{payment_method_type:Qv.qs.US_BANK_ACCOUNT,payment_method_data:{billing_details:{name:K}}},expand:["payment_method"]})}catch(e){return this.sentry.captureException(e,this.captureErrorContext),Yt.fail({shouldLeave:!1})}finally{null===(s=null===(i=this.initiateParams)||void 0===i?void 0:i.onPopupClose)||void 0===s||s.call(i)}return a.setupIntent?Yt.success(a.setupIntent):a.error?Yt.fail({shouldLeave:!1,message:a.error.message||this.commonErrorText}):Yt.fail({shouldLeave:!1})}))}requestPay(){return(0,l.sH)(this,void 0,void 0,(function*(){const e=yield this.paymentAPI.pay();return Yt.isSuccess(e)?e:Yt.fail({shouldLeave:!1,message:e.failureResult.message})}))}assertUSBankAccountPaymentMethod(e){if("us_bank_account"!==e.type)throw this.sentry.captureException(new Error(`Expected us_bank_account payment method, but ${e.type} has been retrieved`),this.captureErrorContext),new Error(this.commonErrorText)}assertUSBankAccountNextAction(e){if("verify_with_microdeposits"!==e.type)throw this.sentry.captureException(new Error(`Expected verify_with_microdeposits next action, but ${e.type} has been retrieved`),this.captureErrorContext),new Error(this.commonErrorText)}}class rP{constructor(e,t,n,i){this.sentry=e,this.intl=t,this.paymentMethodAvailabilityManagerRepository=n,this.params=i,this.paymentFlows={}}destroy(){return(0,l.sH)(this,void 0,void 0,(function*(){for(const e of Object.values(this.paymentFlows))e.destroy&&(yield e.destroy())}))}resolveCard(e){let{sessionAPI:t,stripe:n,stripeElements:i,failureHandler:s,setPaymentMethodCountry:a,donationDataPoint:r}=e;return this.getOrCreatePaymentFlow(u._h.CARD,(()=>{if(!n||!i)throw new Error("Credit card dependencies are not provided");return new Fb(n,i,this.sentry,this.intl,s,new hN(t),a,{getFrequency:()=>r.frequency,getCurrency:()=>r.currency},{stripe:{elementClasses:this.params.stripe.elementClasses,elementStyles:this.params.stripe.elementStyles}})}))}resolvePaypal(e){let{sessionAPI:t,locale:n,iframeWindow:i,paypalClientId:s,paypalMerchantId:a,paypalCurrencies:r,subscriptionsEnabled:o,donationDataPoint:c,updateSession:l,setPaymentMethod:d,setDonorFirstNameIfEmpty:h,setDonorLastNameIfEmpty:m,setDonorEmailIfEmpty:p,setPhoneCountryCodeIfEmptyPhone:g,setPhoneNumberIfEmpty:y,setCountryCodeIfEmptyAddress:f,setCityIfEmpty:S,setLine1IfEmpty:A,setLine2IfEmpty:E,setPostalIfEmpty:C,setRegionIfEmpty:v,paymentFailureHandler:N}=e;return this.getOrCreatePaymentFlow(u._h.PAYPAL,(()=>new Xb({paypalClientId:s,paypalMerchantId:a,paypalCurrencies:r,subscriptionsEnabled:o},this.sentry,n,i,c,new sP(t),new hN(t),l,d,h,m,p,g,y,f,S,A,E,C,v,N)))}resolveGooglePay(e){let{sessionAPI:t,livemode:n,env:i,googlePayInfo:s,stripeAccount:a,companyName:r,stripePublicKey:o,countryCode:c,stripe:l,currencyService:d,donationDataPoint:h,setPaymentMethod:m,setDonorFullNameIfEmpty:p,setDonorEmailIfEmpty:g}=e;return this.getOrCreatePaymentFlow(u._h.GOOGLE_PAY,(()=>{if(!l||!a)throw new Error("Stripe and Stripe account are required for GPay");return new qb({googlePayInfo:s,stripeAccount:a,stripePublicKey:o,companyName:r,countryCode:c},n,i,l,d,h,this.sentry,this.intl,new hN(t),new iP(t),m,p,g)}))}resolveUkBacs(e){let{sessionAPI:t,stripe:n,donorEmailDataPoint:i,mailingAddressDataPoint:s,ukBacsDataPoint:a,mailingAddressFailureHandler:r,ukBacsFailureHandler:o}=e;return this.getOrCreatePaymentFlow(u._h.UK_BACS,(()=>{if(!n)throw new Error("Stripe is not provided");return new Zb(n,i,s,a,this.sentry,this.intl,r,o,new hN(t))}))}resolveApplePay(e){let{sessionAPI:t,companyName:n,applePayStripeLoadingPromise:i,donationDataPoint:s,setPaymentMethod:a,setDonorFullNameIfEmpty:r,setDonorEmailIfEmpty:o,setCountryCodeIfEmptyAddress:c,setCityIfEmpty:l,setLine1IfEmpty:d,setLine2IfEmpty:h,setPostalIfEmpty:m,setRegionIfEmpty:p}=e;return this.getOrCreatePaymentFlow(u._h.APPLE_PAY,(()=>{const e={country:u.tg.UNITED_STATES,currency:s.currency.toLowerCase(),total:{label:n,amount:s.total||0}};return new wb(e,i,s,this.sentry,this.intl,new hN(t),a,r,o,c,l,d,h,m,p)}))}resolveAuBECS(e){let{sessionAPI:t,stripe:n,stripeElements:i,donorNameDataPoint:s,donorEmailDataPoint:a}=e;return this.getOrCreatePaymentFlow(u._h.AU_BECS,(()=>{if(!n||!i)throw new Error("Elements are not provided");return new Lb(n,i,s,a,this.sentry,new hN(t),{stripe:{elementClasses:this.params.stripe.elementClasses,elementStyles:this.params.stripe.elementStyles}})}))}resolveSepa(e){let{sessionAPI:t,stripe:n,stripeElements:i,mailingAddressDataPoint:s,donorNameDataPoint:a,donorEmailDataPoint:r,paymentOptionsDataPoint:o,checkoutConfiguration:c,setPaymentMethodCountry:l,mailingAddressFailureHandler:d}=e;return this.getOrCreatePaymentFlow(u._h.SEPA,(()=>{if(!n||!i)throw new Error("Elements are not provided");const e=this.paymentMethodAvailabilityManagerRepository.getManager(u._h.SEPA,ot.WIDGET);return new Qb(n,i,a,r,s,o,this.sentry,e,c,l,d,new hN(t),{stripe:{elementClasses:this.params.stripe.elementClasses,elementStyles:this.params.stripe.elementStyles}})}))}resolveIDEAL(e){let{sessionAPI:t,stripe:n,stripeElements:i,donorNameDataPoint:s,donorEmailDataPoint:a,donationDataPoint:r,env:o}=e;return this.getOrCreatePaymentFlow(u._h.IDEAL,(()=>{if(!n||!i)throw new Error("Elements are not provided");return new Yb(t,n,o,s,a,r,this.intl,this.sentry,new hN(t))}))}resolveUSBankAccount(e){let{stripe:t,usBankAccountDataPoint:n,donationDataPoint:i,sessionAPI:s,checkoutConfiguration:a,paymentFailureHandler:r,setFinancialInstitution:o,setVerificationType:c,setAccountNumber:l,setRoutingNumber:d,setAccountType:h}=e;return this.getOrCreatePaymentFlow(u._h.US_BANK_ACCOUNT,(()=>{if(!t)throw new Error("Stripe is not provided");return new aP(t,n,i,this.sentry,new hN(s),this.intl,{companyKey:a.company.key,sessionToken:s.sessionToken},r,o,c,l,d,h)}))}resolveACSS(e){let{sessionAPI:t,stripe:n,setPaymentMethod:i}=e;return this.getOrCreatePaymentFlow(u._h.ACSS,(()=>{if(!n)throw new Error("Stripe is not provided");return new _b(n,this.intl,this.sentry,new hN(t),i)}))}resolveVenmo(e){let{sessionAPI:t,livemode:n,showcase:i,locale:s,iframeWindow:a,paypalClientId:r,paypalMerchantId:o,updateSession:c,setPaymentMethod:l,setDonorFirstNameIfEmpty:d,setDonorLastNameIfEmpty:h,setDonorEmailIfEmpty:m,setPhoneCountryCodeIfEmptyPhone:p,setPhoneNumberIfEmpty:g,setCountryCodeIfEmptyAddress:y,setCityIfEmpty:f,setLine1IfEmpty:S,setLine2IfEmpty:A,setPostalIfEmpty:E,setRegionIfEmpty:C}=e;return this.getOrCreatePaymentFlow(u._h.VENMO,(()=>new nP(n,i,{paypalClientId:r,paypalMerchantId:o},this.sentry,s,a,c,l,d,h,m,p,g,y,f,S,A,E,C,new sP(t),new hN(t))))}getPaymentFlow(e){return this.paymentFlows[e]}getOrCreatePaymentFlow(e,t){return this.paymentFlows[e]||(this.paymentFlows[e]=t()),this.paymentFlows[e]}}const oP=(e,t,n,i,s)=>{const{isFallback:a}=n,r=(0,l.Tt)(n,["isFallback"]),o=e.allAmountOptions,c=e.defaultAmounts,u=e=>o[e]?o[e]:[],d=e=>c[e]?c[e]:0,h=e=>!a&&"presets"in r?r.presets[e].amountOptions:[],m=e=>!a&&"presets"in r?r.presets[e].defaultAmount:0,p={donation:{amounts:{[se.ONCE]:{amountOptions:u(se.ONCE),defaultAmount:d(se.ONCE),minAmount:e.getMinAmount(se.ONCE),currency:s},[se.MONTHLY]:{amountOptions:u(se.MONTHLY),defaultAmount:d(se.MONTHLY),minAmount:e.getMinAmount(se.MONTHLY),currency:s}}}},g={donation:{amounts:{[se.ONCE]:{amountOptions:h(se.ONCE),defaultAmount:m(se.ONCE),minAmount:e.getMinAmount(se.ONCE),currency:s},[se.MONTHLY]:{amountOptions:h(se.MONTHLY),defaultAmount:m(se.MONTHLY),minAmount:e.getMinAmount(se.MONTHLY),currency:s}}}};return{isSuggestionUsed:i&&!a,isSuggestionFallback:a,suggestionRequestDurationMs:t,suggestion:g,defaults:p}};class cP{constructor(e,t,n,i,s,a,r){this.checkoutService=e,this.checkoutState=t,this.donationDataPoint=n,this.checkoutConfiguration=i,this.currencyService=s,this.suggestionsService=a,this.amountPresetsFetcher=r,this._allowedFrequencies=[se.ONCE,se.MONTHLY],this._amountPresetsTrackData=[]}tryFetchSuggestion(){return(0,l.sH)(this,void 0,void 0,(function*(){if(this.checkoutService.tryStartMlAmountPresetsExperiment(this.getCanApplyParams()),this.checkoutService.tryStartMlAmountPresetsPagesExperiment(this.getCanApplyParams()),!this.shouldUseAdaptiveLogic())return;const e=this.getCanApplyParams(),t=this.getAmountPresetsVersion();yield Promise.all(e.currencies.map((e=>this.amountPresetsFetcher.fetchSuggestion(e,t)))),e.currencies.forEach((e=>this.saveMlAmountPresetsTrackData(e)))}))}tryApplySuggestion(){if(!this.shouldUseAdaptiveLogic())return;if(!this.canApply())return;const e=[this.donationDataPoint.currency];this.donationDataPoint.isCurrencyEnabledForFrequency(this.donationDataPoint.currency,se.MONTHLY)||this.donationDataPoint.currency===this.donationDataPoint.defaultCurrency||e.unshift(this.donationDataPoint.defaultCurrency);for(const t of e){const e=this.amountPresetsFetcher.getSuggestion(t);null!==e&&(e.isFallback||this.checkoutConfiguration.enabledFrequencies.forEach((n=>{const i=this.donationDataPoint.defaultFrequency===n;if(!this.donationDataPoint.isCurrencyEnabledForFrequency(t,n)&&this.donationDataPoint.defaultCurrency!==t||!this.allowedFrequencies.includes(n))return;if(!i||!this.checkoutConfiguration.hasExternalAmount){const i=t!==this.donationDataPoint.currency?this.currencyService.convert(e.presets[n].defaultAmount,t,this.donationDataPoint.currency):e.presets[n].defaultAmount;this.changeDefaultAmountForFrequency(i,n)}const s=e.presets[n].amountOptions,a=t!==this.donationDataPoint.defaultCurrency?s.map((e=>this.currencyService.convert(e,t,this.donationDataPoint.defaultCurrency))):s;this.setSuggestionsAndDisableAi(s,a,n)})))}}tryTrackSuggestion(){this._amountPresetsTrackData.forEach((e=>{this.checkoutService.trackCustomEvent({type:e.type,data:e.data})})),this._amountPresetsTrackData=[]}get allowedFrequencies(){var e;return null!==(e=this.checkoutService.getMlAmountPresetsExperimentAllowedFrequencies())&&void 0!==e?e:this._allowedFrequencies}shouldUseAdaptiveLogic(){return!(this.checkoutConfiguration.infrastructureParams.showcase||this.checkoutConfiguration.infrastructureParams.isLighthouse||this.checkoutConfiguration.checkoutType!==Se.PAGE&&!this.checkoutService.isMlAmountPresetsPagesExperimentEnabled()&&!this.checkoutService.isMlAmountPresetsExperimentEnabled())}getAmountPresetsCurrencies(){let e=[this.donationDataPoint.currency];return this.donationDataPoint.isCurrencyEnabledForFrequency(this.donationDataPoint.currency,se.MONTHLY)||this.donationDataPoint.currency===this.donationDataPoint.defaultCurrency||(this.allowedFrequencies.includes(se.ONCE)?e.push(this.donationDataPoint.defaultCurrency):e=[this.donationDataPoint.defaultCurrency]),e}changeDefaultAmountForFrequency(e,t){if(null!==e){const n=this.suggestionsService.beautify(e,this.donationDataPoint.currency);this.checkoutState.donation.setDefaultAmountForFrequency(n,t)}}setSuggestionsAndDisableAi(e,t,n){const i=this.suggestionsService.beautify(e,this.donationDataPoint.currency),s=this.suggestionsService.beautify(t,this.donationDataPoint.defaultCurrency);this.checkoutState.donation.setSuggestionsAndDisableAI(i,s,n)}getCanApplyParams(){var e,t;const n=this.checkoutConfiguration.enabledFrequencies,i=this.checkoutConfiguration.element,s=n.some((e=>this.checkoutConfiguration.campaign.config.frequencies[e].hintsEnabled)),a=this.getAmountPresetsCurrencies(),r=a[0]||this.donationDataPoint.currency;let o=this.donationDataPoint.getMinAmount(se.ONCE),c=this.donationDataPoint.getMinAmount(se.MONTHLY);return r!==this.donationDataPoint.currency&&(o=this.currencyService.convert(o,this.donationDataPoint.currency,r),c=this.currencyService.convert(c,this.donationDataPoint.currency,r)),{fromDonationForm:i.type===ie.DONATION_FORM,isEnabledCampaignAi:this.checkoutConfiguration.campaign.config.enableAI,isEnabledCampaignHints:s,p2pUsed:!!(null===(e=this.checkoutConfiguration.fundraisingPage)||void 0===e?void 0:e.key),enabledFrequencies:n,minAmounts:{[se.ONCE]:o,[se.MONTHLY]:c},mlSuggestion:null!==(t=this.amountPresetsFetcher.getSuggestion(r))&&void 0!==t?t:null,currencies:a}}saveMlAmountPresetsTrackData(e){if(!this.amountPresetsFetcher.isSuggestionRequested(e))return;const t=this.amountPresetsFetcher.getSuggestion(e);if(!t)return;const n=this.canApply();this._amountPresetsTrackData.push({type:"checkoutPresetsResponse",data:oP(this.donationDataPoint,this.amountPresetsFetcher.getSuggestionRequestDurationMs(e),t,n,e)}),t.v2&&this._amountPresetsTrackData.push({type:"checkoutPresetsResponseV2",data:oP(this.donationDataPoint,this.amountPresetsFetcher.getSuggestionRequestDurationMs(e),t.v2,!1,e)})}getAmountPresetsVersion(){return this.checkoutService.isMlAmountPresetsExperimentEnabled()||this.checkoutService.isMlAmountPresetsPagesExperimentEnabled()?"v3":null}canApply(){const e=this.getCanApplyParams();if(!e.isEnabledCampaignAi)return!1;if(e.isEnabledCampaignHints)return!1;if(e.p2pUsed)return!1;if(!e.mlSuggestion)return!1;if(e.mlSuggestion.isFallback)return!1;for(const t of this.allowedFrequencies){const n=e.mlSuggestion.presets[t],i=e.minAmounts[t];if(!n||!i)return!1;if(n.defaultAmount<i)return!1;if(!n.amountOptions.length)return!1;if(n.amountOptions.some((e=>e<i)))return!1}return!0}}var lP;!function(e){e.V1="v1",e.V2="v2"}(lP||(lP={}));class uP{constructor(e,t,n,i,s,a){this.checkoutConfiguration=e,this.checkoutState=t,this.donationDataPoint=n,this.tracker=i,this.defaultFrequencyFetcher=s,this.options=a,this.version=this.options.version}tryFetchSuggestion(){return(0,l.sH)(this,void 0,void 0,(function*(){if(!this.canApply())return Yt.success(void 0);if(this.isSuggestionRequestedAtLeastOnce)return Yt.success(void 0);const e=yield this.defaultFrequencyFetcher.fetchSuggestion({amount:this.donationDataPoint.amountInUSD||0,currency:this.donationDataPoint.currency||"USD",companyKey:this.params.companyKey,campaignKey:this.params.campaignKey,elementKey:this.params.elementKey,clientLocale:this.params.clientLocale,utmSource:this.params.utmSource,checkoutType:this.params.checkoutType,version:this.version});return Yt.isFailure(e)?Yt.fail(void 0):Yt.success(void 0)}))}tryApplySuggestion(){if(!this.canApply())return;const e=this.defaultFrequencyFetcher.getSuggestion();e.isFallback||this.checkoutState.donation.setFrequency(e.defaultFrequency)}tryTrackSuggestion(){if(!this.canApply())return;const e=this.defaultFrequencyFetcher.getSuggestion(),t=this.defaultFrequencyFetcher.getMeta(),n=this.version===lP.V2?"checkoutDefaultFrequencyResponseV2":"checkoutDefaultFrequencyResponse";this.tracker.customTrack({type:n,data:{isSuggestionUsed:!e.isFallback,isSuggestionFallback:e.isFallback,suggestionRequestDurationMs:t.requestDurationMs,suggestion:{defaultFrequency:e.defaultFrequency},defaults:{frequency:this.donationDataPoint.defaultFrequency}}})}get params(){var e;return{companyKey:this.checkoutConfiguration.company.key,campaignKey:this.checkoutConfiguration.campaign.key,elementKey:this.checkoutConfiguration.element.key,clientLocale:this.tracker.clientLocale,utmSource:(null===(e=this.checkoutConfiguration.externalConfig.queryParams)||void 0===e?void 0:e.utmSource)||"",isFrequenciesAIEnabled:this.checkoutConfiguration.aiConfig.frequencies.enabled,enabledFrequencies:this.checkoutConfiguration.enabledFrequencies,hasExternalFrequency:this.checkoutConfiguration.hasExternalFrequency,externalFrequency:this.checkoutConfiguration.externalFrequency,userCountry:this.checkoutConfiguration.user.address.countryCode,checkoutType:this.checkoutConfiguration.checkoutType}}shouldUseAdaptiveLogic(){return!this.checkoutConfiguration.infrastructureParams.showcase}get allowedFrequencies(){return[se.ONCE,se.MONTHLY]}get isSuggestionRequestedAtLeastOnce(){return this.defaultFrequencyFetcher.getMeta().fetchCallsCount>0}canApply(){return!!this.params.isFrequenciesAIEnabled&&(!!this.shouldUseAdaptiveLogic()&&(!(this.params.hasExternalFrequency&&this.params.externalFrequency&&this.allowedFrequencies.includes(this.params.externalFrequency))&&!(this.allowedFrequencies.length!==this.params.enabledFrequencies.length||!this.params.enabledFrequencies.every((e=>this.allowedFrequencies.includes(e))))))}}class dP{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:()=>!0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:JSON.stringify,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:e=>e;this.defaultValue=e,this.makeRequest=t,this.shouldCacheResponse=n,this.getCacheKey=i,this.getResult=s,this._cachedValues=new Map,this.pendingObject=null}getCachedOrFetchValue(e){return(0,l.sH)(this,void 0,void 0,(function*(){var t;const n=this.getCacheKey(e);if(null===(t=this.pendingObject)||void 0===t?void 0:t.promise){if(this.pendingObject.cacheKey===n){const e=yield this.pendingObject.promise;return this.getResult(e,!1)}this.pendingObject.reject("Aborted"),this.pendingObject=null}const i=this._cachedValues.get(n);return i?Promise.resolve(this.getResult(i,!0)):this.makeRequestAndCacheValue(e)}))}makeRequestAndCacheValue(e){return(0,l.sH)(this,void 0,void 0,(function*(){const t=this.getCacheKey(e);this.pendingObject=this.initPendingObject(e,t);try{const n=yield this.pendingObject.promise;return this.shouldCacheResponse(e,n)&&this._cachedValues.set(t,n),this.getResult(n,!1)}catch(e){return this._cachedValues.delete(t),this.getResult(this.defaultValue,!1)}finally{this.pendingObject=null}}))}initPendingObject(e,t){let n=e=>{};return{promise:new Promise(((t,i)=>{n=i,this.makeRequest(e).then((e=>{Yt.isSuccess(e)?t(e.successResult):t(this.defaultValue)})).catch(i)})),cacheKey:t,reject:n}}}const hP={isFallback:!0};class mP{constructor(e){this.sessionApi=e,this._suggestion=this.getResult(hP,!1),this._fetchSuggestion=e=>Promise.race([this.requestCacheService.getCachedOrFetchValue(e),new Promise((e=>setTimeout((()=>{e(this.getResult(hP,!1))}),1500)))]),this.requestCacheService=new dP(hP,e.getFeeCovering.bind(e),this.shouldCacheResponse,this.getCacheKey,this.getResult)}fetchSuggestion(e){return(0,l.sH)(this,void 0,void 0,(function*(){return this._suggestion=yield this._fetchSuggestion(e),this._suggestion}))}getSuggestion(){return this._suggestion}getCacheKey(e){return JSON.stringify(e)}shouldCacheResponse(e,t){return!t.isFallback}getResult(e,t){return{response:e,fromCache:t}}}function pP(){return(0,l.sH)(this,void 0,void 0,(function*(){let e=0;return window.Navigator&&window.navigator instanceof window.Navigator&&"function"==typeof navigator.getBattery&&(e=(yield navigator.getBattery()).level),e}))}class gP{constructor(e,t,n,i,s,a,r){this.checkoutConfiguration=e,this.checkoutState=t,this.donationDataPoint=n,this.tracker=i,this.feeCoveringSuggestionsFetcher=s,this.currencyService=a,this.intl=r}tryFetchSuggestion(){return(0,l.sH)(this,void 0,void 0,(function*(){if(!this.canApply())return!1;const e=yield this.createGetSmartCoveringFeePayload();return null!==e&&(yield this.feeCoveringSuggestionsFetcher.fetchSuggestion(e),!0)}))}tryApplySuggestion(){if(!this.canApply())return;const e=this.feeCoveringSuggestionsFetcher.getSuggestion();e.response.isFallback||this.checkoutState.donation.setFeeCovered(e.response.feeCoveringSuggestion===u.XN.DEFAULT_YES)}tryTrackSuggestion(){if(!this.canApply())return;const e=this.feeCoveringSuggestionsFetcher.getSuggestion();e.fromCache||this.tracker.customTrack({type:"smartCoveringFeeV2Response",data:e.response})}setFeeCoveredToState(e){this.checkoutState.donation.setFeeCovered(e===u.XN.DEFAULT_YES)}canApply(){return this.checkoutConfiguration.checkoutType!==Se.PAGE&&this.checkoutConfiguration.campaign.config.includeFees===u.XN.SMART_COVERING&&!this.donationDataPoint.isCustomFeeCoveredValue}createGetSmartCoveringFeePayload(){return(0,l.sH)(this,void 0,void 0,(function*(){if(null===this.donationDataPoint.amountInUSD||null===this.donationDataPoint.defaultAmount)return null;const e=this.currencyService.convert(this.checkoutConfiguration.defaultAmounts[this.donationDataPoint.frequency]||0,this.donationDataPoint.defaultCurrency,"USD"),t=yield pP();return{amountInUSD:this.donationDataPoint.amountInUSD,defaultAmountInUSD:e,currency:this.donationDataPoint.currency,companyKey:this.checkoutConfiguration.company.key,campaignKey:this.checkoutConfiguration.campaign.key,clientLocale:this.intl.locale,history:window.history.length,trackerClientId:this.tracker.clientId,elementLocale:this.checkoutConfiguration.element.locale,clientTimeZone:_i(),battery:t}}))}}class yP{constructor(e,t,n){this.adaptiveDefaultFrequencyService=e,this.adaptiveAmountPresetsService=t,this.adaptivePreDonationUpsellSuggestionsService=n}tryFetchSuggestion(){return(0,l.sH)(this,void 0,void 0,(function*(){yield Promise.all([this.adaptiveDefaultFrequencyService.tryFetchSuggestion(),this.adaptiveAmountPresetsService.tryFetchSuggestion()])}))}tryApplySuggestion(){this.adaptiveDefaultFrequencyService.tryApplySuggestion(),this.adaptiveAmountPresetsService.tryApplySuggestion()}tryTrackSuggestion(){var e;this.adaptiveDefaultFrequencyService.tryTrackSuggestion(),this.adaptiveAmountPresetsService.tryTrackSuggestion(),null===(e=this.adaptivePreDonationUpsellSuggestionsService)||void 0===e||e.tryTrackSuggestion()}}var fP;!function(e){e.YES="yes",e.NO="no",e.UNKNOWN="unknown"}(fP||(fP={}));const SP={showUpsell:fP.UNKNOWN};function AP(e,t){let n=null;return function(){for(var i=arguments.length,s=new Array(i),a=0;a<i;a++)s[a]=arguments[a];return new Promise(((i,a)=>{null!==n&&(clearTimeout(n),n=null),n=setTimeout((()=>{e(...s).then(i).catch(a)}),t)}))}}class EP{constructor(e){this.suggestion=SP,this.requestCacheService=new dP(SP,(t=>e.getNextScreen(t)),((e,t)=>this.shouldCacheResponse(e,t)),(e=>this.getCacheKey(e))),this.fetchSuggestionWithDebounce=AP((e=>this.getCachedOrFetchValue(e)),300)}fetchSuggestion(e){return this.fetchSuggestionWithDebounce(e)}getSuggestion(){return this.suggestion}shouldCacheResponse(e,t){return t.showUpsell!==fP.UNKNOWN&&null!==t.primaryAmount&&null!==t.secondaryAmount}getCacheKey(e){return JSON.stringify({eventTime:new Date(e.eventTime).toLocaleTimeString(e.clientLocale,{hour:"2-digit",weekday:"long"}),clientTimeZone:e.clientTimeZone,clientLocale:e.clientLocale,checkoutCurrency:e.checkoutCurrency,checkoutAmount:e.checkoutAmount,checkoutInUsdAmount:e.checkoutInUsdAmount,checkoutDefaultAmount:e.checkoutDefaultAmount})}getCachedOrFetchValue(e){return(0,l.sH)(this,void 0,void 0,(function*(){return this.suggestion=yield this.requestCacheService.getCachedOrFetchValue(e),this.suggestion}))}}class CP{constructor(e){this.isAdaptiveSuggestionFetched=!1,this.adaptivePreDonationUpsellSuggestionsFetcher=e.adaptivePreDonationUpsellSuggestionsFetcher,this.checkoutConfiguration=e.checkoutConfiguration,this.checkoutState=e.checkoutState,this.currencyService=e.currencyService,this.suggestionsService=e.suggestionsService,this.donationDataPoint=e.donationDataPoint,this.preDonationUpsellDataPoint=e.preDonationUpsellDataPoint,this.intl=e.intl,this.tracker=e.tracker,this.shouldRequestUpsellAmounts=e.shouldRequestUpsellAmounts}tryFetchSuggestion(){return(0,l.sH)(this,void 0,void 0,(function*(){var e;return!!this.shouldFetchSuggestion&&null!==this.donationDataPoint.amount&&null!==this.donationDataPoint.amountInUSD&&(yield this.adaptivePreDonationUpsellSuggestionsFetcher.fetchSuggestion(Object.assign(Object.assign({},function(){const e=new Date;return{eventTime:e.toISOString().split(".")[0]+"Z",clientWeekday:e.getDay(),clientHour:e.getHours(),clientTimeZone:_i()}}()),{companyName:this.checkoutConfiguration.company.name,clientLocale:this.intl.locale,checkoutCampaignKey:this.checkoutConfiguration.campaign.key,checkoutCurrency:this.donationDataPoint.currency,checkoutAmount:this.donationDataPoint.amount,checkoutInUsdAmount:this.donationDataPoint.amountInUSD,checkoutCurrencyRate:this.currencyService.getRate(this.donationDataPoint.currency),checkoutDefaultAmount:null!==(e=this.donationDataPoint.defaultAmount)&&void 0!==e?e:0,shouldRequestUpsellAmounts:this.shouldRequestUpsellAmounts})),this.isAdaptiveSuggestionFetched=!0,!0)}))}tryApplySuggestion(){this.adaptivePreDonationUpsellSuggestionsFetcher.getSuggestion().showUpsell===fP.NO&&this.checkoutState.preDonationUpsell.setSuggestedAvailability(!1);const e=this.getAdjustedAmounts();e&&this.checkoutState.preDonationUpsell.setSuggestedAmounts(...e)}tryTrackSuggestion(){if(!this.isAdaptiveSuggestionFetched)return;const e=this.adaptivePreDonationUpsellSuggestionsFetcher.getSuggestion();this.tracker.customTrack({type:"preDonationUpsellMlResponse",data:{showUpsell:e.showUpsell}}),this.shouldRequestUpsellAmounts&&this.tracker.customTrack({type:"UpsellAmountSuggestion",data:{isFallback:"number"!=typeof e.primaryAmount||"number"!=typeof e.secondaryAmount,primaryAmount:e.primaryAmount,secondaryAmount:e.secondaryAmount}})}resetSuggestionApplication(){this.checkoutState.preDonationUpsell.resetSuggestedAvailability(),this.checkoutState.preDonationUpsell.resetSuggestedAmounts()}get shouldFetchSuggestion(){return!(!this.checkoutConfiguration.preDonationUpsellSettings.isAdaptiveSuggestionEnabled||!this.preDonationUpsellDataPoint.isEnabled||this.preDonationUpsellDataPoint.upsellFrequency!==se.MONTHLY&&this.preDonationUpsellDataPoint.upsellFrequency!==se.EVERY_4_WEEKS)}getAdjustedAmounts(){const e=this.adaptivePreDonationUpsellSuggestionsFetcher.getSuggestion(),t=e.primaryAmount,n=e.secondaryAmount;if("number"!=typeof t||"number"!=typeof n)return;const i=this.preDonationUpsellDataPoint.upsellCurrency,s=this.donationDataPoint.getMinAmount(this.preDonationUpsellDataPoint.upsellFrequency),[a,r]=[t,n].map((e=>this.suggestionsService.beautify(this.currencyService.convert(this.currencyService.fromFloat(e,"USD"),"USD",i),i)));return a<s||r<s?void 0:[a,r]}}class vP extends sn{constructor(e){super(),this.merge({customEventType:e.customEventType,customEventData:JSON.stringify(e.customEventData)})}get eventType(){return nn}}class NP extends js{constructor(e,t,n,i,s,a){super(e,t),this.merge({checkoutScreen:n,checkoutError:i,chargePaymentMethod:s,duration:a})}get eventType(){return"checkoutError"}}class bP extends ui{get isTestGroup(){return this.isActive&&this.isVariant(bn.TEST)}tryStart(e){this.isActive||this.canBeStarted(e)&&super.start()}canBeStarted(e){return!!e.isPostDonationUpsellEnabled&&!!e.isPaid&&!!bP.ALLOWED_CURRENCIES.includes(e.currency)}isEnabled(e){return this.canBeStarted(e)&&this.isTestGroup}trackAmountSuggestion(e){this.tracker.customTrack({type:"postDonationUpsellAmountSuggestion",data:e})}}bP.ALLOWED_CURRENCIES=["USD"];class PP extends ui{get isTestGroup(){return this.isActive&&this.isVariant(bn.TEST)}tryStart(e){this.isActive||this.canBeStarted(e)&&super.start()}canBeStarted(e){return!!e.isPostDonationUpsellEnabled&&!!e.isPaid&&!!PP.ALLOWED_CURRENCIES.includes(e.currency)}isEnabled(e){return this.canBeStarted(e)&&this.isTestGroup}trackAmountSuggestion(e){this.tracker.customTrack({type:"postDonationUpsellAmountSuggestion",data:e})}}PP.ALLOWED_CURRENCIES=["USD"];class DP extends ui{constructor(){super(...arguments),this.isFallback=!1,this.exposed=!1}get isTestGroup(){return this.isActive&&(this.isVariant(On.TEST_1)||this.isVariant(On.TEST_2))}tryStart(e){this.isActive||this.canBeStarted(e)&&super.start()}canBeStarted(e){return e.includeFees===u.XN.SMART_COVERING&&!e.isCustomFeeCoveredValue}isEnabled(e){return this.canBeStarted(e)&&this.isTestGroup}trackSmartCoveringFeeResponse(e){this.isActive&&this.tracker.customTrack({type:"smartCoveringFeeV2Response",data:e})}exposure(){this.exposed||(this.exposed=!0,super.exposure())}}class _P extends ui{constructor(){super(...arguments),this.isFallback=!1,this.exposed=!1}get isTestGroup(){return this.isActive&&this.isVariant(xn.TEST)}tryStart(e){this.isActive||this.canBeStarted(e)&&super.start()}canBeStarted(e){return e.includeFees===u.XN.SMART_COVERING&&!e.isCustomFeeCoveredValue}isEnabled(e){return this.canBeStarted(e)&&this.isTestGroup}trackSmartCoveringFeeResponse(e){this.isActive&&this.tracker.customTrack({type:"smartCoveringFeeV2Response",data:e})}exposure(){this.exposed||(this.exposed=!0,super.exposure())}}class TP extends ui{constructor(){super(...arguments),this._allowedFrequencies=[se.ONCE,se.MONTHLY]}get isTestGroup(){return[In.TEST].some((e=>this.isVariantTestGroup(e)))}get allowedFrequencies(){return this._allowedFrequencies}isVariantTestGroup(e){return this.isActive&&this.isVariant(e)}tryStart(e){this.isActive||this.canBeStarted(e)&&super.start()}canBeStarted(e){return!(e.currencies.length>1)&&(!!this.isAllowedByDonationForm(e)&&(!!e.isEnabledCampaignAi&&(!e.isEnabledCampaignHints&&(!e.p2pUsed&&!!e.enabledFrequencies.every((e=>this.allowedFrequencies.includes(e)))))))}isDonationFormExperimentEnabled(){const e=mn[cn.PRESETS_IN_DONATION_FORM_V_3_EXPERIMENT];return this.tracker.getTags().includes(e)}isAllowedByDonationForm(e){return!e.fromDonationForm||!!this.isDonationFormExperimentEnabled()}}class OP extends ui{get isTestGroup(){return this.isActive&&this.isVariant(wn.TEST)}tryStart(e){this.isActive||this.canBeStarted(e)&&super.start()}canBeStarted(e){return!!e.isPostDonationUpsellEnabled&&!!e.isPaid&&!!OP.ALLOWED_CURRENCIES.includes(e.currency)}isEnabled(e){return this.canBeStarted(e)&&this.isTestGroup}trackAmountSuggestion(e){this.tracker.customTrack({type:"postDonationUpsellAmountSuggestion",data:e})}}OP.ALLOWED_CURRENCIES=["USD"];class xP extends ui{get isTestGroup(){return this.isActive&&this.isVariant(Rn.TEST)}tryStart(e){this.isActive||this.canBeStarted(e)&&super.start()}canBeStarted(e){return!!e.isPostDonationUpsellEnabled&&!!e.isPaid&&!!xP.ALLOWED_CURRENCIES.includes(e.currency)}isEnabled(e){return this.canBeStarted(e)&&this.isTestGroup}trackAmountSuggestion(e){this.tracker.customTrack({type:"postDonationUpsellAmountSuggestion",data:e})}}var kP,IP;xP.ALLOWED_CURRENCIES=["USD"],function(e){e[e.STRATEGY_10=10]="STRATEGY_10",e[e.STRATEGY_15=15]="STRATEGY_15",e[e.STRATEGY_20=20]="STRATEGY_20",e[e.STRATEGY_25=25]="STRATEGY_25"}(kP||(kP={}));class wP extends ui{constructor(e){super(e),this.customEventType="PDUAmountStrategy",this._strategy=this.getRandomStrategy()}get strategy(){return this._strategy}tryStart(){this.isActive||this.start()}isEnabled(){return this.isTestGroup}getCustomAmount(e){let{amount:t,minAmount:n,currency:i,suggestionsService:s}=e;const a=this.calculateCustomAmount(t,n);return s.beautify(a,i)}sendPDUAmountStrategyEvent(){this.tracker.customTrack({type:this.customEventType,data:{amountStrategy:this.strategy}})}get isTestGroup(){return this.isActive&&this.isVariant(Gn.TEST)}calculateCustomAmount(e,t){return Math.max(t,e*this.strategy/100)}getRandomStrategy(){const e=[kP.STRATEGY_10,kP.STRATEGY_15,kP.STRATEGY_20,kP.STRATEGY_25];return e[Math.floor(Math.random()*e.length)]}}!function(e){e[e.STRATEGY_10=10]="STRATEGY_10",e[e.STRATEGY_15=15]="STRATEGY_15",e[e.STRATEGY_20=20]="STRATEGY_20",e[e.STRATEGY_25=25]="STRATEGY_25"}(IP||(IP={}));class RP extends ui{constructor(e){super(e),this.customEventType="PDUAmountStrategy",this._strategy=this.getRandomStrategy()}get strategy(){return this._strategy}tryStart(){this.isActive||this.start()}isEnabled(){return this.isTestGroup}getCustomAmount(e){let{amount:t,minAmount:n,currency:i,suggestionsService:s}=e;const a=this.calculateCustomAmount(t,n);return s.beautify(a,i)}sendPDUAmountStrategyEvent(){this.tracker.customTrack({type:this.customEventType,data:{amountStrategy:this.strategy}})}get isTestGroup(){return this.isActive&&this.isVariant(Vn.TEST)}calculateCustomAmount(e,t){return Math.max(t,e*this.strategy/100)}getRandomStrategy(){const e=[IP.STRATEGY_10,IP.STRATEGY_15,IP.STRATEGY_20,IP.STRATEGY_25];return e[Math.floor(Math.random()*e.length)]}}class MP extends ui{get isTestGroup(){return this.isActive&&this.isVariant(Jn.TEST)}isEnabled(e){return this.isTestGroup&&this.canBeStarted(e)}tryStart(e){this.active||this.canBeStarted(e)&&this.start()}canBeStarted(e){return"USD"===e.donationCurrency&&(e.locale===w.D.EN_US||e.locale===w.D.EN_GB||e.locale===w.D.EN_CA)}}class LP extends ui{constructor(){super(...arguments),this.amazonPayChoosen=!1}get isTestGroup(){return this.isActive&&this.isVariant(Zn.TEST)}isEnabled(e){return this.isTestGroup&&this.canBeStarted(e)}tryStart(e){this.active||this.canBeStarted(e)&&this.start()}canBeStarted(e){return"USD"===e.donationCurrency&&(e.locale===w.D.EN_US||e.locale===w.D.EN_GB||e.locale===w.D.EN_CA)}}class UP extends ui{constructor(){super(...arguments),this._allowedFrequencies=[se.ONCE,se.MONTHLY]}get isTestGroup(){return[$n.TEST].some((e=>this.isVariantTestGroup(e)))}get allowedFrequencies(){return this._allowedFrequencies}isVariantTestGroup(e){return this.isActive&&this.isVariant(e)}tryStart(e){this.isActive||this.canBeStarted(e)&&super.start()}canBeStarted(e){return!(e.currencies.length>1)&&(!!this.isAllowedByDonationForm(e)&&(!!e.isEnabledCampaignAi&&(!e.isEnabledCampaignHints&&(!e.p2pUsed&&!!e.enabledFrequencies.every((e=>this.allowedFrequencies.includes(e)))))))}isDonationFormExperimentEnabled(){const e=mn[cn.PRESETS_IN_DONATION_FORM_V_3_EXPERIMENT];return this.tracker.getTags().includes(e)}isAllowedByDonationForm(e){return!e.fromDonationForm||!!this.isDonationFormExperimentEnabled()}}class FP extends ZE{constructor(e,t,n,i,s,a,r,o,c,l,u,d,h,m,p,g,y,f,S,A,E,C,v,N,b,P){super(e,t,n,r,i,s,o,c,l,u,d,m,p,g,y,f,S,E,C,P),this.dataPointRegistry=e,this._checkoutConfiguration=t,this.checkoutState=n,this.sessionService=i,this.sessionAPI=s,this.paymentService=a,this._checkoutUIState=r,this.tracker=o,this.currencyService=c,this.intl=l,this.iframeWindow=u,this.sentry=d,this.paymentFlowManager=h,this.paymentScreen=m,this.eventEmitter=p,this.checkoutAPIBridge=g,this.debug=y,this.experiments=f,this.paymentAPI=S,this.postDonationUpsellAPI=A,this.logger=E,this._redirectApi=C,this.postDonationUpsellMlSuggestion=v,this.smartCoveringFeeDecider=N,this.suggestionsService=b,this.params=P,this.shouldFindMandatoryScreen=!1,this.experiments.register(cn.ML_POST_DONATION_UPSELL_CHECKOUT_EXPERIMENT,bP),this.experiments.register(cn.ML_POST_DONATION_UPSELL_CAMPAIGN_PAGES_EXPERIMENT,PP),this.experiments.register(cn.SMART_POST_DONATION_UPSELL_CHECKOUT_V_2_EXPERIMENT,OP),this.experiments.register(cn.SMART_POST_DONATION_UPSELL_CAMPAIGN_PAGES_V_2_EXPERIMENT,xP),this.experiments.register(cn.AMOUNT_PRESETS_CHECKOUT_EXPERIMENT,TP),this.experiments.register(cn.AMOUNT_PRESETS_PAGES_V_3_EXPERIMENT,UP),this.experiments.register(cn.COLLECT_DATASET_POST_DONATION_UPSELL_AMOUNT_CHECKOUT_V_3_EXPERIMENT,wP),this.experiments.register(cn.COLLECT_DATASET_POST_DONATION_UPSELL_AMOUNT_CAMPAIGN_PAGES_V_3_EXPERIMENT,RP),this.experiments.register(cn.AMAZON_PAY_CHECKOUT_EXPERIMENT,MP),this.experiments.register(cn.AMAZON_PAY_CAMPAIGN_PAGES_EXPERIMENT,LP)}get isReadyToRetryPay(){return this.getState().isReadyToRetryPay}get type(){return this.checkoutState.flowType}get checkoutUIState(){return this._checkoutUIState}get goalMeterTrackerData(){const e=this.checkoutConfiguration.goalMeterData.raisedAmount,t=this.checkoutConfiguration.goalMeterData.currency,n=this.checkoutConfiguration.goalMeterData.totalAmount,i=e&&t?this.currencyService.convert(e,t,"USD"):null,s=n&&t?this.currencyService.convert(n,t,"USD"):null;return{shown:this.checkoutConfiguration.goalMeterData.shown,isFundraisingPageGoalMeter:this.checkoutConfiguration.goalMeterData.isFundraisingPageGoalMeter,raisedInUSD:i,goalAmountInUSD:s}}get isPaymentStarted(){return this.paymentService.isIDEALPaymentStarted()}getPaymentScreen(e,t){return this.paymentScreen.get(e,t)}getState(){return this.checkoutState.get()}hasPaymentError(e){return this.getState().paymentErrors[e]}dispose(){return this.paymentFlowManager.destroy()}hold(){return(0,l.sH)(this,void 0,void 0,(function*(){if(this.checkoutConfiguration.infrastructureParams.showcase)return Yt.fail({});const e=this.getDataPoint(KE.PAYMENT_OPTIONS).clientPaymentMethod,t=yield this.resolvePaymentFlow(e);let n;try{yield this.sessionService.updateSession(),n=yield t.hold()}catch(e){return Yt.fail({shouldLeave:!1})}return Yt.isFailure(n)?(this.payErrorMessage=n.failureResult.message,Yt.fail({shouldLeave:!1})):Yt.success(void 0)}))}pay(e){return(0,l.sH)(this,arguments,void 0,(function*(e){let{screen:t,predictedNextScreen:n}=e;if(this.checkoutConfiguration.infrastructureParams.showcase)return Yt.fail({});this.setPaymentError(Qv._h.CARD,!1),this.setPaymentError(Qv._h.UK_BACS,!1),this.setPaymentError(Qv._h.US_BANK_ACCOUNT,!1),this.setPaymentError(Qv._h.PAYPAL,!1),this.setMailingAddressError(!1),this.payErrorTitle=void 0,this.payErrorMessage=void 0,this.additionalPayErrorMessage=void 0,this.checkoutState.setPaymentAttempt();const i=this.getDataPoint(KE.PAYMENT_OPTIONS).clientPaymentMethod,s=yield this.resolvePaymentFlow(i),a=Date.now(),r=yield this.sessionService.updateSession();if(Yt.isFailure(r))return this.payErrorMessage=this.intl.translate("common.errorOccurredText"),Yt.fail({});let o;try{o=yield s.pay()}catch(e){return this.shouldFindMandatoryScreen=!0,this.payErrorMessage=this.intl.translate("common.errorOccurredText"),this.capturePayErrorToSentry(e),yield this.trackError(this.payErrorMessage,a-Date.now(),t),Yt.fail({shouldLeave:this.hasPaymentError(Qv._h.CARD)})}if(Yt.isFailure(o)){this.shouldFindMandatoryScreen=!0,this.payErrorTitle=o.failureResult.title,this.payErrorMessage=o.failureResult.message,this.additionalPayErrorMessage=o.failureResult.additionalMessage;const e=this.payErrorMessage||(i===Qv._h.CARD?this.intl.translate("creditCardScreen.cardError.title"):this.intl.translate("common.errorOccurredText"));return yield this.trackError(e,a-Date.now(),t),Yt.fail({shouldLeave:o.failureResult.shouldLeave})}return o.successResult.data?(this.checkoutState.setDonationResultState({donationId:o.successResult.data.donationId,customerId:o.successResult.data.customerId,tributeId:o.successResult.data.tributeId,tributeDonorPortalLink:o.successResult.data.tributeDonorPortalLink,recurringId:o.successResult.data.recurringId}),this.handleDonationCompleted({donationId:o.successResult.data.donationId,clientPaymentMethod:i||Qv._h.CARD,duration:a-Date.now(),screen:t}),yield this.handlePaymentRedirect(n),yield this.fetchPostDonationUpsellScreenDecision(),Yt.success(void 0)):Yt.fail({shouldLeave:!1})}))}saveCheckoutClosePublicParams(){return(0,l.sH)(this,void 0,void 0,(function*(){const e=this.getDataPoint(Ra.DESIGNATION),t=this.getDataPoint(Ra.REMIND_ME_LATER),n=e.toObject(),i=t.toObject(),s=yield this.getPublicCheckoutDonationParams(),a=yield this.getCommonPublicCheckoutIntentParams();a&&(a.checkoutSettings.modifyDesignation=e.modifyDesignation,a.checkoutSettings.designation=n.goalKey,a.isSavedEmailOnExit=i.used),this.checkoutAPIBridge.setDonationParams(s),this.checkoutAPIBridge.setIntentParams(a)}))}trackCurrencyChange(e){this.tracker.track(new vP({customEventType:"selectCurrency",customEventData:{currency:e}}))}trackCheckoutCharge(e){const t=this.getDataPoint(KE.DONATION),n=t.toObject(),i=this.getDataPoint(Ra.TRIBUTE),s=this.getDataPoint(Ra.COMMENT),a=this.getDataPoint(Ra.DESIGNATION),r=this.checkoutConfiguration.campaign,o=this.checkoutConfiguration.element,c={[n.frequency]:n.amountOptions},l=n.hintAmounts[n.frequency].length?n.hintAmounts:c,u={};t.currentHint&&(u.hintAmount=t.currentHint.amount,u.hintDescription=t.currentHint.description,u.default=t.currentHint.default,u.amountUsd=t.currentHint.amountUsd,u.hintVariantName=t.hintsVariantName),this.tracker.track(new JE({frequency:n.frequency,currency:n.currency,amount:n.amount||0,amountOptions:l},{elementType:o.type,elementKey:o.key,elementReminderKey:o.reminderKey},e.screen,{chargeKey:e.donationId,chargeInUSDAmount:t.totalInUSD||0,chargeInDefaultCurrencyAmount:t.totalInDefaultCurrency,chargeAmount:t.total,chargeCurrency:t.currency,chargeFeeCovered:t.isFeeCovered,chargePaymentMethod:e.clientPaymentMethod,chargeIsRecurring:t.frequency!==se.ONCE,chargeHasComment:s.isActive&&!!s.comment,chargeHasTribute:i.isFilled,chargeGoal:a.goalKey||void 0,chargeCampaignKey:r.key},e.duration,u))}trackCheckoutView(){var e,t;const n=this.getDataPoint(KE.DONATION).toObject(),i=this.checkoutConfiguration.element,s={[n.frequency]:n.amountOptions},a=n.hintAmounts[n.frequency].length?n.hintAmounts:s,r=this.checkoutConfiguration.externalConfig,o=Boolean((null===(e=r.launcher)||void 0===e?void 0:e.elementKey)&&(null===(t=r.checkoutData)||void 0===t?void 0:t.amount)),c=this.getOpeningTime();this.debug.log("checkout opening time:eventCheckoutView",`${c} ms`),this.tracker.track(new nC({frequency:n.frequency,currency:n.currency,amount:n.amount,amountOptions:a},{elementType:i.type,elementKey:i.key,elementReminderKey:i.reminderKey},c,{isAmountFromElement:o}))}trackCheckoutClose(e){const t=this.getDataPoint(KE.DONATION).toObject(),n=this.checkoutConfiguration.element,i={[t.frequency]:t.amountOptions},s=t.hintAmounts[t.frequency].length?t.hintAmounts:i;this.tracker.track(new eC({frequency:t.frequency,currency:t.currency,amount:t.amount,amountOptions:s},{elementType:n.type,elementKey:n.key,elementReminderKey:n.reminderKey},e))}trackCheckoutScreenView(e,t,n,i){const s=this.getDataPoint(KE.DONATION).toObject(),a=this.getDataPoint(KE.PAYMENT_OPTIONS),r=Object.keys(a.allowedPaymentMethods).filter((e=>![Qv._h.CRYPTO].includes(e)&&a.allowedPaymentMethods[e].available&&a.allowedPaymentMethods[e].visible)),o=this.checkoutConfiguration.element,c={[s.frequency]:s.amountOptions},l=s.hintAmounts[s.frequency].length?s.hintAmounts:c,u={paymentMethods:r,renderDuration:null};t&&n&&(u.transitionDuration=n.getTime()-t.getTime()),i&&n&&(u.renderDuration=i.getTime()-n.getTime()),this.tracker.track(new tC({frequency:s.frequency,currency:s.currency,amount:s.amount,amountOptions:l},{elementType:o.type,elementKey:o.key,elementReminderKey:o.reminderKey},e,u))}trackCustomEvent(e){this.tracker.customTrack(e)}getCheckoutTrackerData(){const e=this.getDataPoint(KE.DONATION),t=this.getDataPoint(Ra.TRIBUTE);return{donation:{amount:e.amount,currency:e.currency,frequency:e.frequency,defaultAmount:e.defaultAmount,amountOptions:e.amountOptions,currentHint:e.currentHint,hintOptions:e.hintOptions,hintVariantName:e.hintsVariantName===dC.NONE?null:e.hintsVariantName},tribute:{isActive:t.isActive},goalMeter:this.goalMeterTrackerData}}setPaymentError(e,t){return this.checkoutState.setPaymentError(e,t)}acceptPostDonationUpsell(){var e;const t=this.getDataPoint(KE.POST_DONATION_UPSELL).toObject(),n=this.getDataPoint(Ra.DESIGNATION).toObject();return this.postDonationUpsellAPI.update({donation:{total:t.upsellTotal,tip:t.upsellTip,amount:t.upsellAmount,currency:t.upsellCurrency},goalKey:null!==(e=n.goalKey)&&void 0!==e?e:"",firstChargeAt:t.upsellStartDate,period:t.upsellFrequency})}ensureFrequencyEnabled(e){const t=this.dataPointRegistry.getDataPoint(KE.DONATION),n=this.dataPointRegistry.getDataPoint(KE.PRE_DONATION_UPSELL);if(t.isFrequencyEnabled(e))return;let i,s;n.isAccepted?(i=se.ONCE,s=n.upsellInitialAmount):(i=t.defaultFrequency,s=t.getDefaultAmountsInCurrency(i)),this.checkoutState.donation.setFrequency(i),this.checkoutState.donation.setAmount(s)}isSmartCoveringFeeExperimentEnabled(){const e={includeFees:this.checkoutConfiguration.campaign.config.includeFees,isCustomFeeCoveredValue:this.donationDataPoint.isCustomFeeCoveredValue};return!!this.smartCoveringFeeCampaignPagesExperimentV2.isEnabled(e)}exposeSmartCoveringFeeExperimentV2(){const e={includeFees:this.checkoutConfiguration.campaign.config.includeFees,isCustomFeeCoveredValue:this.donationDataPoint.isCustomFeeCoveredValue};this.smartCoveringFeeCampaignPagesExperimentV2.canBeStarted(e)&&this.smartCoveringFeeCampaignPagesExperimentV2.exposure()}fetchFeeCoveringSuggestion(e){return(0,l.sH)(this,void 0,void 0,(function*(){if(this.checkoutConfiguration.checkoutType===Se.MODAL)return;if(!this.isSmartCoveringFeeExperimentEnabled())return;const t=yield this.createGetSmartCoveringFeePayload();if(null===t)return;let n;n=(null==e?void 0:e.debounced)?yield this.smartCoveringFeeDecider.debouncedFetchDecision(t):yield this.smartCoveringFeeDecider.fetchDecision(t);const i=n.response;n.fromCache||this.smartCoveringFeeCampaignPagesExperimentV2.trackSmartCoveringFeeResponse(i),i.isFallback?this.smartCoveringFeeCampaignPagesExperimentV2.isFallback=!0:(this.smartCoveringFeeCampaignPagesExperimentV2.isFallback=!1,this.checkoutState.donation.setFeeCovered(i.feeCoveringSuggestion===u.XN.DEFAULT_YES))}))}initialize(e){this.checkoutState.initialize(),super.initialize(e),this.initializeSmartCoveringFeeExperiments();const t=this.checkoutConfiguration.externalConfig.checkoutIntent;t&&!e.shouldRestoreFromIntent&&this.applyCheckoutIntent(t),this.paymentService.ensurePaymentMethodsInitialized()}exposeAmountPresetsExperiment(){this.amountPresetsCheckoutExperiment.exposure()}tryStartMlAmountPresetsExperiment(e){this.amountPresetsCheckoutExperiment.tryStart(e)}isMlAmountPresetsExperimentEnabled(){return this.amountPresetsCheckoutExperiment.isTestGroup}tryStartMlAmountPresetsPagesExperiment(e){this.amountPresetsPagesV3Experiment.tryStart(e)}isMlAmountPresetsPagesExperimentEnabled(){return this.amountPresetsPagesV3Experiment.isTestGroup}exposeAmountPresetsPagesExperiment(){this.amountPresetsPagesV3Experiment.exposure()}getMlAmountPresetsExperimentAllowedFrequencies(){return this.amountPresetsCheckoutExperiment.isTestGroup?this.amountPresetsCheckoutExperiment.allowedFrequencies:null}getDonationParams(){var e;const t=this.getDataPoint(KE.DONATION),n=t.toObject();return{amount:n.amount,total:n.total,currency:n.currency,frequency:n.frequency,publicFee:n.publicFee,canModifyAmount:t.canModifyAmount,feeCovered:t.isFeeCovered,selectedHintId:null===(e=t.currentHint)||void 0===e?void 0:e.id}}getPublicCheckoutDonationParams(){return this.getCommonPublicCheckoutDonationParams({clientPaymentMethod:this.getDataPoint(KE.PAYMENT_OPTIONS).clientPaymentMethod,payResult:this.checkoutState.get().donationResultState})}applyCheckoutIntent(e){var t,n,i,s;const a=this.getDataPoint(KE.DONATION);if(e.donation){if(e.donation.currency&&this.checkoutState.donation.setCurrency(e.donation.currency),e.donation.frequency){const{enabled:t}=this._checkoutConfiguration.campaign.config.frequencies[e.donation.frequency];t&&this.checkoutState.donation.setFrequency(e.donation.frequency)}if(e.donation.amount&&this.checkoutState.donation.setAmount(e.donation.amount),e.donation.selectedHintId){const n=null===(t=a.hintOptions)||void 0===t?void 0:t.find((t=>{var n;return t.id===(null===(n=e.donation)||void 0===n?void 0:n.selectedHintId)}));n&&this.checkoutState.donation.setHint(n)}}"boolean"==typeof e.feeCovered&&this.checkoutState.donation.setFeeCovered(e.feeCovered,{isCustomFeeCoveredValue:!0}),e.supporter&&(e.supporter.firstName&&this.checkoutState.privacy.setDonorFirstName(e.supporter.firstName),e.supporter.lastName&&this.checkoutState.privacy.setDonorLastName(e.supporter.lastName),e.supporter.email&&this.checkoutState.privacy.setDonorEmail(e.supporter.email)),e.comment&&this.checkoutState.comment.saveComment(e.comment),e.tribute&&(e.tribute.inHonorOf&&this.checkoutState.tribute.setTributeeName(null===(n=e.tribute)||void 0===n?void 0:n.inHonorOf),this.checkoutState.tribute.setActive(!0)),(null===(i=e.checkoutSettings)||void 0===i?void 0:i.designation)&&this.checkoutState.designation.setGoal(null===(s=e.checkoutSettings)||void 0===s?void 0:s.designation),this.checkoutState.filledFromIntent=!0}get donationDataPoint(){return this.getDataPoint(KE.DONATION)}get mlPostDonationUpsellCheckoutExperiment(){return this.experiments.get(cn.ML_POST_DONATION_UPSELL_CHECKOUT_EXPERIMENT)}get mlPostDonationUpsellCampaignPagesExperiment(){return this.experiments.get(cn.ML_POST_DONATION_UPSELL_CAMPAIGN_PAGES_EXPERIMENT)}get smartPostDonationUpsellCheckoutExperiment(){return this.experiments.get(cn.SMART_POST_DONATION_UPSELL_CHECKOUT_V_2_EXPERIMENT)}get smartPostDonationUpsellCampaignPagesExperiment(){return this.experiments.get(cn.SMART_POST_DONATION_UPSELL_CAMPAIGN_PAGES_V_2_EXPERIMENT)}get amountPresetsCheckoutExperiment(){return this.experiments.get(cn.AMOUNT_PRESETS_CHECKOUT_EXPERIMENT)}get amountPresetsPagesV3Experiment(){return this.experiments.get(cn.AMOUNT_PRESETS_PAGES_V_3_EXPERIMENT)}get mlPostDonationUpsellExperimentParams(){const e=this.getState();return{isPostDonationUpsellEnabled:e.postDonationUpsell.isEnabled,isPaid:e.isPaid,currency:e.donation.currency}}get isMlPostDonationUpsellExperimentEnabled(){return!!this.mlPostDonationUpsellCheckoutExperiment.isEnabled(this.mlPostDonationUpsellExperimentParams)||!!this.mlPostDonationUpsellCampaignPagesExperiment.isEnabled(this.mlPostDonationUpsellExperimentParams)}get smartPostDonationUpsellExperimentParams(){const e=this.getState();return{isPostDonationUpsellEnabled:e.postDonationUpsell.isEnabled,isPaid:e.isPaid,currency:e.donation.currency}}get isSmartPostDonationUpsellEnabled(){return!!this.smartPostDonationUpsellCheckoutExperiment.isEnabled(this.smartPostDonationUpsellExperimentParams)||!!this.smartPostDonationUpsellCampaignPagesExperiment.isEnabled(this.smartPostDonationUpsellExperimentParams)}get smartCoveringFeeCampaignPagesExperimentV2(){return this.experiments.get(cn.SMART_COVERING_FEE_CAMPAIGN_PAGES_V_2_EXPERIMENT)}tryStartMlPostDonationUpsellExperiment(){this.mlPostDonationUpsellCheckoutExperiment.tryStart(this.mlPostDonationUpsellExperimentParams),this.mlPostDonationUpsellCampaignPagesExperiment.tryStart(this.mlPostDonationUpsellExperimentParams)}trackPostDonationUpsellAmountSuggestion(e){this.mlPostDonationUpsellCheckoutExperiment.isEnabled(this.mlPostDonationUpsellExperimentParams)&&this.mlPostDonationUpsellCheckoutExperiment.trackAmountSuggestion(e),this.mlPostDonationUpsellCampaignPagesExperiment.isEnabled(this.mlPostDonationUpsellExperimentParams)&&this.mlPostDonationUpsellCampaignPagesExperiment.trackAmountSuggestion(e),this.smartPostDonationUpsellCheckoutExperiment.isEnabled(this.smartPostDonationUpsellExperimentParams)&&this.smartPostDonationUpsellCheckoutExperiment.trackAmountSuggestion(e),this.smartPostDonationUpsellCampaignPagesExperiment.isEnabled(this.smartPostDonationUpsellExperimentParams)&&this.smartPostDonationUpsellCampaignPagesExperiment.trackAmountSuggestion(e)}tryStartSmartPostDonationUpsellExperiment(){this.smartPostDonationUpsellCheckoutExperiment.tryStart(this.smartPostDonationUpsellExperimentParams),this.smartPostDonationUpsellCampaignPagesExperiment.tryStart(this.smartPostDonationUpsellExperimentParams)}fetchPostDonationUpsellScreenDecision(){return(0,l.sH)(this,void 0,void 0,(function*(){var e,t;if(this.tryStartMlPostDonationUpsellExperiment(),this.tryStartSmartPostDonationUpsellExperiment(),!this.isMlPostDonationUpsellExperimentEnabled&&!this.isSmartPostDonationUpsellEnabled)return;const n=this.getDataPoint(KE.DONATION),i=this.getDataPoint(KE.POST_DONATION_UPSELL),s=new Date;yield this.postDonationUpsellMlSuggestion.fetchAmountSuggestion({eventTime:(new Date).toISOString(),checkoutCurrency:n.currency,checkoutAmount:null!==(e=n.amount)&&void 0!==e?e:0,checkoutInUsdAmount:null!==(t=n.amountInUSD)&&void 0!==t?t:0,clientTimeZone:_i(),clientHour:s.getHours(),clientWeekday:s.getDay(),clientLocale:this.intl.locale,minRecurringAmount:i.upsellMinAmount,campaignKey:this.checkoutConfiguration.campaign.key});const a=this.postDonationUpsellMlSuggestion.getOriginalAmountSuggestion();a.isFallback||this.trackPostDonationUpsellAmountSuggestion(a)}))}initializeSmartCoveringFeeExperiments(){this.experiments.register(cn.SMART_COVERING_FEE_CAMPAIGN_PAGES_V_2_EXPERIMENT,_P),this.experiments.get(cn.SMART_COVERING_FEE_CAMPAIGN_PAGES_V_2_EXPERIMENT).tryStart({includeFees:this.checkoutConfiguration.campaign.config.includeFees,isCustomFeeCoveredValue:this.donationDataPoint.isCustomFeeCoveredValue}),this.experiments.register(cn.SMART_COVERING_FEE_CHECKOUT_V_2_EXPERIMENT,DP)}setMailingAddressError(e){this.checkoutState.hasMailingAddressError=e}trackError(e,t,n){const i=this.getDataPoint(KE.PAYMENT_OPTIONS),s=this.getDataPoint(KE.DONATION),a=s.toObject(),r=this.checkoutConfiguration.element,o={[a.frequency]:a.amountOptions},c=a.hintAmounts[a.frequency].length?a.hintAmounts:o;this.tracker.track(new NP({frequency:s.frequency,currency:s.currency,amount:s.amount||0,amountOptions:c},{elementType:r.type,elementKey:r.key,elementReminderKey:r.reminderKey},n,e,i.clientPaymentMethod||Qv._h.CARD,t))}resolvePaymentFlow(e){return(0,l.sH)(this,void 0,void 0,(function*(){return this.paymentService.resolvePaymentFlow(e)}))}createGetSmartCoveringFeePayload(){return(0,l.sH)(this,void 0,void 0,(function*(){const e=this.getDataPoint(KE.DONATION);if(null===e.amountInUSD||null===e.defaultAmount)return null;const t=this.currencyService.convert(this.checkoutConfiguration.defaultAmounts[e.frequency]||0,e.defaultCurrency,"USD"),n=yield pP();return{amountInUSD:e.amountInUSD,defaultAmountInUSD:t,currency:e.currency,companyKey:this.checkoutConfiguration.company.key,campaignKey:this.checkoutConfiguration.campaign.key,clientLocale:this.intl.locale,history:window.history.length,trackerClientId:this.tracker.clientId,elementLocale:this.checkoutConfiguration.element.locale,clientTimeZone:_i(),battery:n}}))}}class jP{constructor(e){this.dataPointRegistry=e}}function BP(e){return e===se.ONCE?je.ONE_TIME:je.RECURRING}class HP extends jP{constructor(e){super(e),this.dataPointRegistry=e}synchronize(){const e=BP(this.dataPointRegistry.getDataPoint(KE.DONATION).frequency);this.designationDataPoint.hasSelectedGoalWithRepeat(e)||this.designationDataPoint.setComputedGoalKeyByGoalRepeat(e)}get designationDataPoint(){return this.dataPointRegistry.getDataPoint(Ra.DESIGNATION)}}const qP=[u.tg.UNITED_STATES,u.tg.UNITED_KINGDOM,u.tg.AUSTRIA,u.tg.BELGIUM,u.tg.BULGARIA,u.tg.CROATIA,u.tg.CYPRUS,u.tg.CZECH_REPUBLIC,u.tg.DENMARK,u.tg.ESTONIA,u.tg.FINLAND,u.tg.FRANCE,u.tg.GERMANY,u.tg.GREECE,u.tg.HUNGARY,u.tg.IRELAND,u.tg.ITALY,u.tg.LATVIA,u.tg.LITHUANIA,u.tg.LUXEMBOURG,u.tg.MALTA,u.tg.NETHERLANDS,u.tg.POLAND,u.tg.PORTUGAL,u.tg.ROMANIA,u.tg.SLOVAKIA,u.tg.SLOVENIA,u.tg.SPAIN,u.tg.SWEDEN];class GP{constructor(e,t,n){this.checkoutConfiguration=e,this.currencyService=t,this.dataPointRegistry=n}isAvailable(e){switch(e){case se.ANNUAL:return this.isAnnualUpsellAvailable();case se.EVERY_4_WEEKS:return this.isEvery4WeeksUpsellAvailable();case se.MONTHLY:return this.isMonthlyUpsellAvailable();default:throw new Error(`Unsupported target frequency: ${e}`)}}isAnnualUpsellAvailable(){return this.checkConfigurationCampaignEnabledFrequencies()&&this.checkConfigurationCampaignRecurringFrequency()&&this.checkConfigurationCompanyRecurringPlan(se.ANNUAL)&&this.checkDesignation()&&this.checkTribute()&&this.checkDonationFrequency()}isEvery4WeeksUpsellAvailable(){return this.checkConfigurationCampaignUpsell()&&this.checkConfigurationCampaignEnabledFrequencies()&&this.checkConfigurationCampaignRecurringFrequency()&&this.checkConfigurationCompanyRecurringPlan(se.EVERY_4_WEEKS)&&this.checkConfigurationUserCountryCode(qP)&&this.checkDesignation()&&!this.checkTribute()&&this.checkDonationFrequency()&&this.checkDonationCurrency()&&this.checkDonationAmount(se.EVERY_4_WEEKS)}isMonthlyUpsellAvailable(){return!!this.checkoutConfiguration.infrastructureParams.showcase||this.checkConfigurationCampaignUpsell()&&this.checkConfigurationCampaignEnabledFrequencies()&&this.checkConfigurationCampaignRecurringFrequency()&&this.checkDesignation()&&!this.checkTribute()&&this.checkDonationFrequency()&&this.checkDonationCurrency()&&this.checkDonationAmount(se.MONTHLY)}checkConfigurationCampaignUpsell(){return this.checkoutConfiguration.campaign.config.showUpsell}checkConfigurationCampaignEnabledFrequencies(){return this.checkoutConfiguration.enabledFrequencies.every((e=>this.checkoutConfiguration.preDonationUpsellSettings.enabledForDonationFrequencies.includes(e)))}checkConfigurationCampaignRecurringFrequency(){return this.checkoutConfiguration.enabledFrequencies.some((e=>e!==se.ONCE))}checkConfigurationCompanyRecurringPlan(e){return this.checkoutConfiguration.company.recurringPlans[e]}checkConfigurationUserCountryCode(e){return e.includes(this.checkoutConfiguration.user.address.countryCode)}checkDesignation(){return this.dataPointRegistry.getDataPoint(Ra.DESIGNATION).allowRecurring}checkTribute(){return this.dataPointRegistry.getDataPoint(Ra.TRIBUTE).isFilled}checkDonationFrequency(){return this.dataPointRegistry.getDataPoint(KE.DONATION).frequency===se.ONCE}checkDonationCurrency(){const e=this.dataPointRegistry.getDataPoint(KE.DONATION);return this.checkoutConfiguration.campaign.config.currencyEnabledRecurrings||e.currency===this.checkoutConfiguration.campaign.config.defaultCurrency}checkDonationAmount(e){var t;const n=this.dataPointRegistry.getDataPoint(KE.DONATION),i=null!==(t=n.amount)&&void 0!==t?t:0,s=n.currency;let a,r;switch(e){case se.EVERY_4_WEEKS:a=Math.max(n.getMinAmount(e),this.currencyService.convert(7e3,"USD",s)),r=this.currencyService.convert(2e4,"USD",s);break;case se.MONTHLY:a=n.getMinAmount(e),r=this.currencyService.convert(2e4,"USD",s);break;default:throw new Error(`Unsupported target frequency: ${e}`)}return i>=a&&i<=r}}class VP extends jP{constructor(e,t,n,i){super(t),this.checkoutConfiguration=e,this.dataPointRegistry=t,this.preDonationUpsellAvailabilityService=n,this.preDonationUpsellParamsService=i}synchronize(){const e=this.checkoutConfiguration.preDonationUpsellSettings.enabledTargetFrequencies.find((e=>this.preDonationUpsellAvailabilityService.isAvailable(e)));if(this.preDonationUpsellDataPoint.setComputedAvailability(!!e),e){const t=this.preDonationUpsellParamsService.getUpsellAmounts(e);this.preDonationUpsellDataPoint.setComputedParams({upsellFrequency:e,upsellCurrency:this.preDonationUpsellParamsService.getUpsellCurrency(),upsellHighAmount:t.high,upsellLowAmount:t.low,upsellInitialAmount:t.initial})}}get preDonationUpsellDataPoint(){return this.dataPointRegistry.getDataPoint(KE.PRE_DONATION_UPSELL)}}class YP{constructor(e,t,n,i){this.checkoutConfiguration=e,this.currencyService=t,this.suggestionsService=n,this.dataPointRegistry=i}getUpsellCurrency(){return this.dataPointRegistry.getDataPoint(KE.DONATION).currency}getUpsellAmounts(e){switch(e){case se.ANNUAL:return this.getAnnualAmounts();case se.EVERY_4_WEEKS:case se.MONTHLY:return this.getEvery4WeeksAndMonthlyAmounts(e);default:throw new Error(`Unsupported target frequency: ${e}`)}}getAnnualAmounts(){const e=this.dataPointRegistry.getDataPoint(KE.DONATION).amount;return{high:e,low:null,initial:e}}getEvery4WeeksAndMonthlyAmounts(e){const t=this.dataPointRegistry.getDataPoint(KE.DONATION).amount,[n,i]=this.calculateEvery4WeeksAndMonthlyAmountsInUsd(),[s,a]=this.adjustEvery4WeeksAndMonthlyAmounts(e,n,i);return{high:a,low:s,initial:t}}calculateEvery4WeeksAndMonthlyAmountsInUsd(){var e;const t=null!==(e=this.dataPointRegistry.getDataPoint(KE.DONATION).amountInUSD)&&void 0!==e?e:0,n=this.checkoutConfiguration.preDonationUpsellSettings.amountsMap;switch(!0){case t<=1e3:return[null,t];case t<=2500:return n[we.UP_TO_25];case t<=3500:return n[we.UP_TO_35];case t<=5500:return n[we.UP_TO_55];case t<=1e4:return n[we.UP_TO_100];case t<=15e3:return n[we.UP_TO_150];case t<=2e4:return n[we.UP_TO_200];default:return[null,t]}}adjustEvery4WeeksAndMonthlyAmounts(e,t,n){const i=this.dataPointRegistry.getDataPoint(KE.DONATION),s=this.getUpsellCurrency(),a=i.getMinAmount(e);let r=null,o=null;return null!==n&&(r=this.suggestionsService.beautify(this.currencyService.convert(n,"USD",s),s),r<a&&(r=a)),null!==t&&(o=this.suggestionsService.beautify(this.currencyService.convert(t,"USD",s),s),(o<a||o===r)&&(o=null)),[o,r]}}class KP{constructor(e,t){this.checkoutConfiguration=e,this.dataPointRegistry=t}isAvailable(){return this.checkConfiguration()&&this.checkOnBehalfOf()}checkConfiguration(){return this.checkoutConfiguration.campaign.config.showDouble}checkOnBehalfOf(){return!this.dataPointRegistry.getDataPoint(Ra.ON_BEHALF_OF).isOnBehalfOf}}class zP{constructor(e){this.dataPointRegistry=e}getDtdFrequency(){return this.dataPointRegistry.getDataPoint(KE.DONATION).frequency}getDtdCurrency(){return this.dataPointRegistry.getDataPoint(KE.DONATION).currency}getDtdInitialAmount(){return this.dataPointRegistry.getDataPoint(KE.DONATION).amount}}class $P extends jP{constructor(e,t,n){super(e),this.dataPointRegistry=e,this.doubleTheDonationAvailabilityService=t,this.doubleTheDonationParamsService=n}synchronize(){const e=this.dataPointRegistry.getDataPoint(KE.DTD);e.setComputedAvailability(this.doubleTheDonationAvailabilityService.isAvailable()),e.setComputedParams({dtdFrequency:this.doubleTheDonationParamsService.getDtdFrequency(),dtdCurrency:this.doubleTheDonationParamsService.getDtdCurrency(),dtdInitialAmount:this.doubleTheDonationParamsService.getDtdInitialAmount()})}}class WP{constructor(e,t){this.checkoutConfiguration=e,this.dataPointRegistry=t}isAvailable(){return this.checkConfigurationCampaign()&&this.checkConfigurationFeatureConfig()&&this.checkOnBehalfOf()}checkConfigurationCampaign(){return this.checkoutConfiguration.campaign.config.giftAid.show}checkConfigurationFeatureConfig(){return this.checkoutConfiguration.featureConfig.giftAid}checkOnBehalfOf(){return!this.dataPointRegistry.getDataPoint(Ra.ON_BEHALF_OF).isOnBehalfOf}}class XP extends jP{constructor(e,t){super(e),this.dataPointRegistry=e,this.giftAidAvailabilityService=t}synchronize(){this.giftAidDataPoint.setComputedAvailability(this.giftAidAvailabilityService.isAvailable())}get giftAidDataPoint(){return this.dataPointRegistry.getDataPoint(KE.GIFT_AID)}}class QP{constructor(e,t,n,i,s){this.checkoutConfiguration=e,this.currencyService=t,this.mailingAddressModule=n,this.paymentMethodAvailabilityManagerRepository=i,this.dataPointRegistry=s}isEnabled(){return this.mailingAddressModuleCheckoutScreenLogic.isEnabled(this.mailingAddressModuleCheckoutScreenAmount,this.mailingAddressModuleCheckoutScreenParams)}isRequired(){return this.mailingAddressModuleCheckoutScreenLogic.isRequired(this.mailingAddressModuleCheckoutScreenAmount,this.mailingAddressModuleCheckoutScreenParams)}get mailingAddressModuleCheckoutScreenLogic(){return this.mailingAddressModule.getCheckoutScreenLogic()}get mailingAddressModuleCheckoutScreenAmount(){const e=this.dataPointRegistry.getDataPoint(KE.DONATION),t=this.mailingAddressModule.getCurrencyLogic({widget:this.checkoutConfiguration.campaign.config});return this.currencyService.convert(e.amount||0,e.currency,t.currency)}get mailingAddressModuleCheckoutScreenParams(){const e=this.dataPointRegistry.getDataPoint(KE.PAYMENT_OPTIONS),t=this.dataPointRegistry.getDataPoint(KE.GIFT_AID);return{showMailing:this.checkoutConfiguration.campaign.config.showMailing,showMailingFromAmount:this.checkoutConfiguration.campaign.config.showMailingFromAmount,mailingRequired:this.checkoutConfiguration.campaign.config.mailingRequired,mailingRequiredFromAmount:this.checkoutConfiguration.campaign.config.mailingRequiredFromAmount,paymentMethodAvailabilityManagerRepository:this.paymentMethodAvailabilityManagerRepository,paymentMethod:e.clientPaymentMethod,paymentMethodCountry:e.paymentMethodCountry,isGiftAidAccepted:t.isAccepted}}}class ZP extends jP{constructor(e,t){super(e),this.dataPointRegistry=e,this.mailingAddressAvailabilityService=t}synchronize(){this.mailingAddressDataPoint.setComputedAvailability({isEnabled:this.mailingAddressAvailabilityService.isEnabled(),isRequired:this.mailingAddressAvailabilityService.isRequired()})}get mailingAddressDataPoint(){return this.dataPointRegistry.getDataPoint(Ra.MAILING_ADDRESS)}}const JP=[u.tg.INDIA];class eD{constructor(e,t){this.checkoutConfiguration=e,this.dataPointRegistry=t}isAvailable(){return this.checkConfiguration()&&this.checkDonation()&&this.checkDesignation()&&this.checkTribute()&&this.checkPaymentOptions()}checkConfiguration(){return this.checkoutConfiguration.campaign.config.showPostDonationUpsell}checkDonation(){return this.dataPointRegistry.getDataPoint(KE.DONATION).frequency===se.ONCE}checkDesignation(){return this.dataPointRegistry.getDataPoint(Ra.DESIGNATION).allowRecurring}checkTribute(){return!this.dataPointRegistry.getDataPoint(Ra.TRIBUTE).tributeeName}checkPaymentOptions(){switch(this.dataPointRegistry.getDataPoint(KE.PAYMENT_OPTIONS).clientPaymentMethod){case Qv._h.PAYPAL:return this.checkoutConfiguration.company.paypal.subscriptionsEnabled;case Qv._h.VENMO:case Qv._h.IDEAL:return!1;case Qv._h.CARD:return this.checkPaymentMethodCountry();default:return!0}}checkPaymentMethodCountry(){if(!en())return!0;const e=this.dataPointRegistry.getDataPoint(KE.PAYMENT_OPTIONS);return null===e.paymentMethodCountry||!JP.includes(e.paymentMethodCountry)}}n(2950);class tD{constructor(e,t){this.suggestionsService=e,this.dataPointRegistry=t,this.timestamp=Date.now()}getUpsellStartDate(){return function(e,t){const n=new Date(e),i=n.getDate();return n.setMonth(n.getMonth()+1),n.getDate()!==i&&n.setDate(0),n.toISOString()}(this.timestamp)}getUpsellFrequency(){return se.MONTHLY}getUpsellCurrency(){return this.dataPointRegistry.getDataPoint(KE.DONATION).currency}getUpsellMinAmount(){const e=this.dataPointRegistry.getDataPoint(KE.DONATION);return e.getMinAmount(e.highFrequency)}getUpsellAmount(){var e,t;const n=this.dataPointRegistry.getDataPoint(KE.DONATION),i=null!==(e=n.amount)&&void 0!==e?e:0,s=null!==(t=n.amountInUSD)&&void 0!==t?t:0;return Math.max(this.suggestionsService.beautify(i*this.getUpsellSuggestedAmountPercent(s),this.getUpsellCurrency()),this.getUpsellMinAmount())}getUpsellSuggestedAmountPercent(e){switch(!0){case e>1e5:return.1;case e>=5e4:return.15;default:return.2}}}class nD extends jP{constructor(e,t,n){super(e),this.dataPointRegistry=e,this.postDonationUpsellAvailabilityService=t,this.postDonationUpsellParamsService=n}synchronize(){this.postDonationUpsellDataPoint.setComputedAvailability(this.postDonationUpsellAvailabilityService.isAvailable()),this.postDonationUpsellDataPoint.setComputedParams({upsellStartDate:this.postDonationUpsellParamsService.getUpsellStartDate(),upsellFrequency:this.postDonationUpsellParamsService.getUpsellFrequency(),upsellCurrency:this.postDonationUpsellParamsService.getUpsellCurrency(),upsellMinAmount:this.postDonationUpsellParamsService.getUpsellMinAmount(),upsellAmount:this.postDonationUpsellParamsService.getUpsellAmount()})}get postDonationUpsellDataPoint(){return this.dataPointRegistry.getDataPoint(KE.POST_DONATION_UPSELL)}}class iD{constructor(e,t,n,i,s,a,r,o){this.designationStateService=e,this.preDonationUpsellStateService=t,this.doubleTheDonationStateService=n,this.giftAidStateService=i,this.mailingAddressStateService=s,this.postDonationUpsellStateService=a,this.paymentOptionsStateService=r,this.communicationConsentStateService=o}onInit(){this.syncDesignation(),this.syncPreDonationUpsell(),this.syncDoubleTheDonation(),this.syncGiftAid(),this.syncMailingAddress(),this.syncPostDonationUpsell(),this.syncPaymentOptions(),this.syncCommunicationConsent()}onDonationChange(){this.syncDesignation(),this.syncPreDonationUpsell(),this.syncDoubleTheDonation(),this.syncMailingAddress(),this.syncPostDonationUpsell(),this.syncPaymentOptions()}onDesignationChange(){this.syncPreDonationUpsell(),this.syncPostDonationUpsell()}onTributeChange(){this.syncPreDonationUpsell(),this.syncPostDonationUpsell()}onPrivacyChange(){this.syncDoubleTheDonation(),this.syncGiftAid(),this.syncCommunicationConsent()}onGiftAidChange(){this.syncMailingAddress()}onPaymentOptionsChange(){this.syncMailingAddress(),this.syncPostDonationUpsell()}onMailingAddressChange(){this.syncCommunicationConsent()}syncDesignation(){this.designationStateService.synchronize(),this.onDesignationChange()}syncPreDonationUpsell(){this.preDonationUpsellStateService.synchronize()}syncDoubleTheDonation(){this.doubleTheDonationStateService.synchronize()}syncGiftAid(){this.giftAidStateService.synchronize(),this.onGiftAidChange()}syncMailingAddress(){this.mailingAddressStateService.synchronize(),this.onMailingAddressChange()}syncPostDonationUpsell(){this.postDonationUpsellStateService.synchronize()}syncPaymentOptions(){this.paymentOptionsStateService.synchronize(),this.onPaymentOptionsChange()}syncCommunicationConsent(){this.communicationConsentStateService.synchronize()}}class sD extends jP{constructor(e,t){super(e),this.dataPointRegistry=e,this.paymentOptionsParamsService=t}synchronize(){const e=this.paymentOptionsParamsService.getAvailablePaymentOptions();this.paymentOptionsDataPoint.setComputedAllowedPaymentMethods(e)}get paymentOptionsDataPoint(){return this.dataPointRegistry.getDataPoint(KE.PAYMENT_OPTIONS)}}class aD{constructor(e,t,n){this.checkoutConfiguration=e,this.paymentMethodAvailabilityManagerRepository=t,this.dataPointRegistry=n}getAvailablePaymentOptions(){return{[u._h.PAYPAL]:this.checkPaypal(),[u._h.VENMO]:this.checkVenmo(),[u._h.CARD]:this.checkCard(),[u._h.APPLE_PAY]:this.checkApplePay(),[u._h.GOOGLE_PAY]:this.checkGooglePay(),[u._h.AU_BECS]:this.checkAuBecs(),[u._h.US_BANK_ACCOUNT]:this.checkUSBankAccount(),[u._h.UK_BACS]:this.checkUkBacs(),[u._h.SEPA]:this.checkSepa(),[u._h.ACSS]:this.checkAcss(),[u._h.IDEAL]:this.checkIDEAL(),[u._h.CRYPTO]:{available:!0,visible:!0},[u._h.STOCK]:{available:!1,visible:!1}}}get donationDataPoint(){return this.dataPointRegistry.getDataPoint(KE.DONATION)}checkPaypal(){const e=this.paymentMethodAvailabilityManagerRepository.getManager(u._h.PAYPAL,ot.WIDGET),t=this.isPaymentMethodAvailableByConfiguration(u._h.PAYPAL)&&this.checkoutConfiguration.company.paymentOptions.paypal&&e.allowed("currency",this.donationDataPoint.currency)&&this.checkoutConfiguration.company.paypalCurrencies.includes(this.donationDataPoint.currency)&&(n=this.checkoutConfiguration.checkoutType,i=this.checkoutConfiguration.isIOSFirefox,s=this.checkoutConfiguration.infrastructureParams.isInAppBrowser,!(n===Se.MODAL&&(i||s)));var n,i,s;return{available:t,visible:t&&e.allowed("repeat",this.donationDataPoint.frequency)&&(this.donationDataPoint.frequency===se.ONCE||this.checkoutConfiguration.company.paypal.subscriptionsEnabled)}}checkVenmo(){const e=this.paymentMethodAvailabilityManagerRepository.getManager(u._h.VENMO,ot.WIDGET),t=this.isPaymentMethodAvailableByConfiguration(u._h.VENMO)&&this.checkoutConfiguration.infrastructureParams.livemode&&!this.checkoutConfiguration.infrastructureParams.showcase&&(this.checkoutConfiguration.user.address.countryCode===u.tg.UNITED_STATES||en())&&!!this.checkoutConfiguration.company.paypal.merchantId&&this.checkoutConfiguration.company.paymentOptions.venmo&&!this.checkoutConfiguration.infrastructureParams.isInAppBrowser;return{available:t,visible:t&&e.allowed("repeat",this.donationDataPoint.frequency)&&e.allowed("currency",this.donationDataPoint.currency)}}checkCard(){const e=this.isPaymentMethodAvailableByConfiguration(u._h.CARD)&&this.checkoutConfiguration.company.paymentOptions.creditCard;return{available:e,visible:e}}checkApplePay(){const e=this.isPaymentMethodAvailableByConfiguration(u._h.APPLE_PAY)&&this.checkoutConfiguration.company.paymentOptions.applePay;return{available:e,visible:e}}checkGooglePay(){const e=this.isPaymentMethodAvailableByConfiguration(u._h.GOOGLE_PAY)&&this.checkoutConfiguration.company.paymentOptions.googlePay&&!this.checkoutConfiguration.infrastructureParams.isInAppBrowser&&window.isSecureContext;return{available:e,visible:e}}checkAuBecs(){const e=this.paymentMethodAvailabilityManagerRepository.getManager(u._h.AU_BECS,ot.WIDGET),t=this.isPaymentMethodAvailableByConfiguration(u._h.AU_BECS)&&this.checkoutConfiguration.company.paymentOptions.auBecsDebit&&e.allowed("repeat",this.donationDataPoint.frequency)&&e.allowed("currency",this.donationDataPoint.currency)&&e.allowed("amount",this.donationDataPoint.total);return{available:t,visible:t}}checkUSBankAccount(){const e=function(e,t,n){if("USD"!==n)return t;const i=function(e){switch(e){case tv.ONE_FOR_ISRAEL:return 150;case tv.FCA:return 200;default:return null}}(e);return null===i?t:t<9500&&t>=i?9500:t}(this.checkoutConfiguration.company.key,this.donationDataPoint.total,this.donationDataPoint.currency),t=this.paymentMethodAvailabilityManagerRepository.getManager(u._h.US_BANK_ACCOUNT,ot.WIDGET),n=t.allowed("amount",e)&&_v(this.checkoutConfiguration.company.stripe.usBankAccount.verification)?xv(e):t.allowed("amount",e),i=this.isPaymentMethodAvailableByConfiguration(u._h.US_BANK_ACCOUNT)&&this.checkoutConfiguration.company.paymentOptions.usBankAccount&&t.allowed("repeat",this.donationDataPoint.frequency)&&t.allowed("currency",this.donationDataPoint.currency)&&n&&"USD"===this.checkoutConfiguration.company.stripeCurrencies.default;return{available:i,visible:i}}checkUkBacs(){const e=this.paymentMethodAvailabilityManagerRepository.getManager(u._h.UK_BACS,ot.WIDGET),t=this.isPaymentMethodAvailableByConfiguration(u._h.UK_BACS)&&this.checkoutConfiguration.company.paymentOptions.ukBacs&&e.allowed("repeat",this.donationDataPoint.frequency)&&e.allowed("currency",this.donationDataPoint.currency)&&e.allowed("amount",this.donationDataPoint.total);return{available:t,visible:t}}checkSepa(){const e=this.paymentMethodAvailabilityManagerRepository.getManager(u._h.SEPA,ot.WIDGET),t=this.isPaymentMethodAvailableByConfiguration(u._h.SEPA)&&this.checkoutConfiguration.company.paymentOptions.sepa&&e.allowed("repeat",this.donationDataPoint.frequency)&&e.allowed("currency",this.donationDataPoint.currency)&&e.allowed("amount",this.donationDataPoint.total);return{available:t,visible:t}}checkAcss(){const e=this.paymentMethodAvailabilityManagerRepository.getManager(u._h.ACSS,ot.WIDGET),t=this.isPaymentMethodAvailableByConfiguration(u._h.ACSS)&&this.checkoutConfiguration.company.paymentOptions.acss&&e.allowed("repeat",this.donationDataPoint.frequency)&&e.allowed("currency",this.donationDataPoint.currency)&&e.allowed("amount",this.donationDataPoint.total);return{available:t,visible:t}}checkIDEAL(){const e=this.paymentMethodAvailabilityManagerRepository.getManager(u._h.IDEAL,ot.WIDGET),t=this.checkoutConfiguration.company.country===u.tg.NETHERLANDS||e.allowed("customerCountry",this.checkoutConfiguration.user.address.countryCode),n=this.isPaymentMethodAvailableByConfiguration(u._h.IDEAL)&&!this.checkoutConfiguration.infrastructureParams.isInAppBrowser&&this.checkoutConfiguration.company.paymentOptions.ideal&&(this.donationDataPoint.frequency===se.ONCE||this.checkoutConfiguration.company.paymentOptions.sepa)&&(t||en())&&e.allowed("repeat",this.donationDataPoint.frequency)&&e.allowed("currency",this.donationDataPoint.currency)&&e.allowed("amount",this.donationDataPoint.total);return{available:n,visible:n}}isPaymentMethodAvailableByConfiguration(e){return!this.checkoutConfiguration.paymentOptionsSettings.disabledPaymentMethods.includes(e)}}class rD extends jP{constructor(e,t){super(t),this.checkoutConfiguration=e,this.dataPointRegistry=t}synchronize(){this.checkoutConfiguration.infrastructureParams.showcase||(this.setComputedPhoneAndSMSConsentEnable(),this.setComputedPostalMailConsentEnable())}get communicationConsentDataPoint(){return this.dataPointRegistry.getDataPoint(Ra.COMMUNICATION_CONSENT)}setComputedPhoneAndSMSConsentEnable(){const e=this.dataPointRegistry.getDataPoint(Ra.PHONE_NUMBER).isFullPhoneNumberFilled();this.communicationConsentDataPoint.setComputedPhoneCallsConsentEnabled(e),this.communicationConsentDataPoint.setComputedSMSConsentEnabled(e)}setComputedPostalMailConsentEnable(){const e=this.dataPointRegistry.getDataPoint(Ra.MAILING_ADDRESS),t=e.checkShouldValidateOnServer()&&!e.isSkipped;this.communicationConsentDataPoint.setComputedPostalMailConsentEnabled(t)}}class oD{constructor(e,t){this.dataPointRegistry=e,this.checkoutStateSynchronizer=t}perform(e){e(),this.triggerSynchronization()}}class cD extends oD{setFrequency(e){this.perform((()=>{this.donationDataPoint.frequency=e,this.donationDataPoint.synchronizeHintsAmounts(),this.donationDataPoint.synchronizeFee()}))}setCurrency(e){this.perform((()=>{this.donationDataPoint.currency=e,this.donationDataPoint.synchronizeHintsAmounts(),this.donationDataPoint.synchronizeFee()}))}setAmount(e){this.perform((()=>{this.donationDataPoint.amount=e,this.donationDataPoint.resetHintsByDefault(),this.donationDataPoint.synchronizeFee()}))}setHint(e){this.perform((()=>{this.donationDataPoint.amount=e.amount,this.donationDataPoint.updateHintsByDefault(e),this.donationDataPoint.setDefaultAmounts(),this.donationDataPoint.synchronizeFee()}))}setFeeCovered(e,t){this.perform((()=>{this.donationDataPoint.isFeeCovered=e,void 0!==(null==t?void 0:t.isCustomFeeCoveredValue)&&(this.donationDataPoint.isCustomFeeCoveredValue=t.isCustomFeeCoveredValue),this.donationDataPoint.snapshotFeeCoveringSuggestion()}))}setDefaultAmountForFrequency(e,t){this.perform((()=>{this.donationDataPoint.changeDefaultAmountForFrequency(e,t),this.donationDataPoint.synchronizeFee()}))}setDonationEndDateActive(e){this.perform((()=>{this.donationDataPoint.setDonationEndDateActive(e)}))}setSuggestionsAndDisableAI(e,t,n){this.perform((()=>{this.donationDataPoint.setSuggestionsAndDisableAi(e,t,n)}))}triggerSynchronization(){this.checkoutStateSynchronizer.onDonationChange()}get donationDataPoint(){return this.dataPointRegistry.getDataPoint(KE.DONATION)}}class lD extends oD{setGoal(e){this.perform((()=>{const t=this.dataPointRegistry.getDataPoint(KE.DONATION);this.designationDataPoint.setGoalKey(e,BP(t.frequency))}))}triggerSynchronization(){this.checkoutStateSynchronizer.onDesignationChange()}get designationDataPoint(){return this.dataPointRegistry.getDataPoint(Ra.DESIGNATION)}}class uD extends oD{setActive(e){this.perform((()=>{this.dataPointRegistry.getDataPoint(Ra.TRIBUTE).isActive=e}))}setTributeeName(e){this.perform((()=>{this.dataPointRegistry.getDataPoint(Ra.TRIBUTE).tributeeName=e}))}triggerSynchronization(){this.checkoutStateSynchronizer.onTributeChange()}}class dD extends oD{setDonorFirstName(e){this.perform((()=>{this.donorNameDataPoint.setFirstName(e)}))}setDonorFirstNameIfEmpty(e){this.perform((()=>{this.donorNameDataPoint.setFirstNameIfEmpty(e)}))}setDonorLastName(e){this.perform((()=>{this.donorNameDataPoint.setLastName(e)}))}setDonorLastNameIfEmpty(e){this.perform((()=>{this.donorNameDataPoint.setLastNameIfEmpty(e)}))}setDonorFullName(e){this.perform((()=>{this.donorNameDataPoint.setFullName(e)}))}setDonorFullNameIfEmpty(e){this.perform((()=>{this.donorNameDataPoint.setFullNameIfEmpty(e)}))}setDonorTitle(e){this.perform((()=>{this.customerTitleDataPoint.setTitle(e)}))}setDonorEmail(e){this.perform((()=>{this.donorEmailDataPoint.setEmail(e)}))}setDonorEmailIfEmpty(e){this.perform((()=>{this.donorEmailDataPoint.setEmailIfEmpty(e)}))}setOnBehalfOfActive(e){this.perform((()=>{this.onBehalfOfDataPoint.setIsActive(e)}))}setOnBehalfOfCompanyName(e){this.perform((()=>{this.onBehalfOfDataPoint.setCompanyName(e)}))}setPhoneNumber(e){this.perform((()=>{this.phoneNumberDataPoint.setPhone(e)}))}setPhoneNumberIfEmpty(e){this.perform((()=>{this.phoneNumberDataPoint.setPhoneIfEmpty(e)}))}setPhoneCountryCode(e){this.perform((()=>{this.phoneNumberDataPoint.setCountryCode(e)}))}setPhoneCountryCodeIfEmptyPhone(e){this.perform((()=>{this.phoneNumberDataPoint.setCountryCodeIfEmptyPhone(e)}))}setPhoneCleanNumber(e){this.perform((()=>{this.phoneNumberDataPoint.setCleanPhone(e)}))}setBirthday(e){this.perform((()=>{this.birthdayDataPoint.setValue(e)}))}setBirthdayEnabled(){this.perform((()=>{this.birthdayDataPoint.setIsEnabled()}))}setDonateAnonymousChecked(e){this.perform((()=>{this.donateAnonymousDataPoint.setAnonymousChecked(e)}))}setTermsAndConditionsAccepted(e){this.perform((()=>{this.termsAndConditionsDataPoint.setIsAccepted(e)}))}triggerSynchronization(){this.checkoutStateSynchronizer.onPrivacyChange()}get donorNameDataPoint(){return this.dataPointRegistry.getDataPoint(Ra.DONOR_NAME)}get customerTitleDataPoint(){return this.dataPointRegistry.getDataPoint(Ra.CUSTOMER_TITLE)}get donorEmailDataPoint(){return this.dataPointRegistry.getDataPoint(Ra.DONOR_EMAIL)}get phoneNumberDataPoint(){return this.dataPointRegistry.getDataPoint(Ra.PHONE_NUMBER)}get birthdayDataPoint(){return this.dataPointRegistry.getDataPoint(Ra.BIRTHDAY_DATE)}get onBehalfOfDataPoint(){return this.dataPointRegistry.getDataPoint(Ra.ON_BEHALF_OF)}get donateAnonymousDataPoint(){return this.dataPointRegistry.getDataPoint(Ra.DONATE_ANONYMOUS)}get termsAndConditionsDataPoint(){return this.dataPointRegistry.getDataPoint(Ra.TERMS_AND_CONDITIONS)}}class hD extends oD{setPaymentMethod(e){this.perform((()=>{this.paymentOptionsDataPoint.setPaymentMethod(e)}))}setPaymentOption(e){this.perform((()=>{this.paymentOptionsDataPoint.setPaymentOption(e)}))}setPreSelectedPaymentOption(e){this.perform((()=>{this.paymentOptionsDataPoint.setPreSelectedPaymentOption(e)}))}setPaymentMethodCountry(e){this.perform((()=>{this.paymentOptionsDataPoint.setPaymentMethodCountry(e)}))}setPaymentMethodChecked(e){this.perform((()=>{this.paymentOptionsDataPoint.setPaymentMethodChecked(e)}))}setUkBacsSortCode(e){this.perform((()=>{this.ukBacsDataPoint.setSortCode(e)}))}setUkBacsAccountNumber(e){this.perform((()=>{this.ukBacsDataPoint.setAccountNumber(e)}))}setUkBacsAccountHolderName(e){this.perform((()=>{this.ukBacsDataPoint.setAccountHolderName(e)}))}setUkBacsTermsAccepted(e){this.perform((()=>{this.ukBacsDataPoint.setTermsAccepted(e)}))}setUsBankAccountRoutingNumber(e){this.perform((()=>{this.usBankAccountDataPoint.setRoutingNumber(e)}))}setUsBankAccountNumber(e){this.perform((()=>{this.usBankAccountDataPoint.setAccountNumber(e)}))}setUsBankAccountHolderName(e){this.perform((()=>{this.usBankAccountDataPoint.setAccountHolderName(e)}))}setUsBankAccountVerificationType(e){this.perform((()=>{this.usBankAccountDataPoint.setVerificationType(e)}))}setUsBankAccountFinancialInstitution(e){this.perform((()=>{this.usBankAccountDataPoint.setFinancialInstitution(e)}))}setUsBankAccountType(e){this.perform((()=>{this.usBankAccountDataPoint.setAccountType(e)}))}triggerSynchronization(){this.checkoutStateSynchronizer.onPaymentOptionsChange()}get paymentOptionsDataPoint(){return this.dataPointRegistry.getDataPoint(KE.PAYMENT_OPTIONS)}get ukBacsDataPoint(){return this.dataPointRegistry.getDataPoint(KE.UK_BACS)}get usBankAccountDataPoint(){return this.dataPointRegistry.getDataPoint(KE.US_BANK_ACCOUNT)}}class mD extends oD{setShowed(){this.perform((()=>{this.giftAidDataPoint.setShowed()}))}accept(){this.perform((()=>{this.giftAidDataPoint.accept()}))}reject(){this.perform((()=>{this.giftAidDataPoint.reject()}))}triggerSynchronization(){this.checkoutStateSynchronizer.onGiftAidChange()}get giftAidDataPoint(){return this.dataPointRegistry.getDataPoint(KE.GIFT_AID)}}class pD extends oD{setCustomizedChannelState(e,t){this.perform((()=>{t?this.communicationConsentDataPoint.acceptCustomizedConsent(e):this.communicationConsentDataPoint.rejectCustomizedConsent(e)}))}setGeneralConsentState(e){this.perform((()=>{e?this.communicationConsentDataPoint.acceptGeneralConsent():this.communicationConsentDataPoint.rejectGeneralConsent()}))}resetCustomizedConsent(){this.perform((()=>{this.communicationConsentDataPoint.rejectAll()}))}setGeneralConsentShown(){this.perform((()=>{this.communicationConsentDataPoint.setGeneralConsentShown()}))}setCustomizedConsentShown(){this.perform((()=>{this.communicationConsentDataPoint.setCustomizedConsentShown()}))}triggerSynchronization(){}get communicationConsentDataPoint(){return this.dataPointRegistry.getDataPoint(Ra.COMMUNICATION_CONSENT)}}class gD extends oD{setLine1(e){this.perform((()=>{this.mailingAddressDataPoint.setLine1(e)}))}setLine2(e){this.perform((()=>{this.mailingAddressDataPoint.setLine2(e)}))}setCity(e){this.perform((()=>{this.mailingAddressDataPoint.setCity(e)}))}setRegion(e){this.perform((()=>{this.mailingAddressDataPoint.setRegion(e)}))}setPostal(e){this.perform((()=>{this.mailingAddressDataPoint.setPostal(e)}))}setCountryCode(e){this.perform((()=>{this.mailingAddressDataPoint.setCountryCode(e)}))}setCountryCodeIfEmptyAddress(e){this.perform((()=>{this.mailingAddressDataPoint.setCountryCodeIfEmptyAddress(e)}))}setCityIfEmpty(e){this.perform((()=>{this.mailingAddressDataPoint.setCityIfEmpty(e)}))}setLine1IfEmpty(e){this.perform((()=>{this.mailingAddressDataPoint.setLine1IfEmpty(e)}))}setLine2IfEmpty(e){this.perform((()=>{this.mailingAddressDataPoint.setLine2IfEmpty(e)}))}setRegionIfEmpty(e){this.perform((()=>{this.mailingAddressDataPoint.setRegionIfEmpty(e)}))}setPostalIfEmpty(e){this.perform((()=>{this.mailingAddressDataPoint.setPostalIfEmpty(e)}))}setSkipped(e){this.perform((()=>{this.mailingAddressDataPoint.setSkipped(e)}))}triggerSynchronization(){this.checkoutStateSynchronizer.onMailingAddressChange()}get mailingAddressDataPoint(){return this.dataPointRegistry.getDataPoint(Ra.MAILING_ADDRESS)}}class yD extends oD{setShowed(){this.perform((()=>{this.preDonationUpsellDataPoint.setShowed()}))}confirm(e){this.perform((()=>{e?this.preDonationUpsellDataPoint.accept():this.preDonationUpsellDataPoint.reject()}))}setSuggestedAvailability(e){this.perform((()=>{this.preDonationUpsellDataPoint.setSuggestedAvailability(e)}))}resetSuggestedAvailability(){this.perform((()=>{this.preDonationUpsellDataPoint.resetSuggestedAvailability()}))}setSuggestedAmounts(e,t){this.perform((()=>{this.preDonationUpsellDataPoint.setSuggestedAmounts(e,t)}))}resetSuggestedAmounts(){this.perform((()=>{this.preDonationUpsellDataPoint.resetSuggestedAmounts()}))}triggerSynchronization(){}get preDonationUpsellDataPoint(){return this.dataPointRegistry.getDataPoint(KE.PRE_DONATION_UPSELL)}}class fD extends oD{setIsActive(e){this.perform((()=>{this.commentDataPoint.setIsActive(e)}))}saveComment(e){this.perform((()=>{this.commentDataPoint.saveComment(e)}))}savePrevComment(){this.perform((()=>{this.commentDataPoint.savePrevComment()}))}triggerSynchronization(){}get commentDataPoint(){return this.dataPointRegistry.getDataPoint(Ra.COMMENT)}}class SD extends oD{setUpsellCustomAmount(e){this.perform((()=>{this.postDonationUpsellDataPoint.setUpsellCustomAmount(e)}))}setShowed(){this.perform((()=>{this.postDonationUpsellDataPoint.setShowed()}))}accept(){this.perform((()=>{this.postDonationUpsellDataPoint.accept()}))}triggerSynchronization(){}get postDonationUpsellDataPoint(){return this.dataPointRegistry.getDataPoint(KE.POST_DONATION_UPSELL)}}class AD extends oD{setEmployerName(e){this.perform((()=>{this.dtdDataPoint.setEmployerName(e)}))}setEmployerData(e){this.perform((()=>{this.dtdDataPoint.setEmployerData(e)}))}resetEmployerData(){this.perform((()=>{this.dtdDataPoint.resetEmployerData()}))}setUpsellShowed(e){this.perform((()=>{this.dtdDataPoint.setUpsellShowed(e)}))}setUpsellAccepted(){this.perform((()=>{this.dtdDataPoint.setUpsellAccepted()}))}setSkipped(){this.perform((()=>{this.dtdDataPoint.setSkipped()}))}resetState(){this.perform((()=>{this.dtdDataPoint.resetState()}))}triggerSynchronization(){}get dtdDataPoint(){return this.dataPointRegistry.getDataPoint(KE.DTD)}}class ED extends oD{setAnswer(e,t){this.perform((()=>{this.questionsDataPoint.setAnswer(e,t)}))}triggerSynchronization(){}get questionsDataPoint(){return this.dataPointRegistry.getDataPoint(Ra.QUESTIONS)}}class CD extends oD{setState(e){this.perform((()=>{this.remindMeLaterDataPoint.setState(e)}))}triggerSynchronization(){}get remindMeLaterDataPoint(){return this.dataPointRegistry.getDataPoint(Ra.REMIND_ME_LATER)}}class vD extends cC{}function ND(e){if(!e.isSkipped&&e.employerName)return{name:e.employerName}}function bD(e){if(!e.isSkipped&&e.employerId)return{id:e.employerId,company_name:e.employerName,minimumMatchedAmount:e.employerRawMinAmount,ratio:e.employerRatio}}function PD(e){return{currency:e.snapshot.dtdCurrency,fromAmount:e.snapshot.dtdInitialTotal,matchingFromAmount:e.snapshot.employerMinAmount,matchingPromisedAmount:e.snapshot.employerUpsellTotalDoubled,matchingRatio:e.snapshot.employerRatio,minimumMatchedAmount:e.snapshot.employerMinAmount,proposedAmount:e.snapshot.employerUpsellTotal,proposedAmountBeforeFeeCovered:e.snapshot.employerRawMinAmount,visible:!!e.employerMinAmount,showed:e.isUpsellShowed,used:e.isUpsellAccepted}}const DD=(e,t,n)=>e&&t?n?u.Bg.OPTED_IN:u.Bg.OPTED_OUT:u.Bg.NOT_SUBMITTED,_D=e=>{const{type:t,customizedConsent:n,generalConsent:i,isCustomizedConsentShown:s,isGeneralConsentShown:a}=e;return t===u.kt.GENERAL?{type:u.Au.GENERAL,general:DD(a,!0,i.isAccepted),customized:{email:u.Bg.NOT_SUBMITTED,phoneCalls:u.Bg.NOT_SUBMITTED,postalMail:u.Bg.NOT_SUBMITTED,sms:u.Bg.NOT_SUBMITTED,socialMedia:u.Bg.NOT_SUBMITTED}}:t===u.kt.CUSTOMIZED?{type:u.Au.CUSTOMIZED,general:u.Bg.NOT_SUBMITTED,customized:{email:DD(s,n.email.isEnabled,n.email.isAccepted),phoneCalls:DD(s,n.phoneCalls.isEnabled,n.phoneCalls.isAccepted),postalMail:DD(s,n.postalMail.isEnabled,n.postalMail.isAccepted),sms:DD(s,n.sms.isEnabled,n.sms.isAccepted),socialMedia:DD(s,n.socialMedia.isEnabled,n.socialMedia.isAccepted)}}:{type:u.Au.GENERAL,general:u.Bg.NOT_SUBMITTED,customized:{email:u.Bg.NOT_SUBMITTED,phoneCalls:u.Bg.NOT_SUBMITTED,postalMail:u.Bg.NOT_SUBMITTED,sms:u.Bg.NOT_SUBMITTED,socialMedia:u.Bg.NOT_SUBMITTED}}};function TD(e){return{defaultAmount:e.defaultAmount||0,frequencyAmountOptions:e.amountOptions,amountOptions:e.allAmountOptions,frequency:e.frequency,currency:e.currency,defaultAmounts:e.defaultAmounts}}class OD extends uC{updateSession(e){return(0,l.sH)(this,void 0,void 0,(function*(){var t,n,i;if(this.checkoutConfiguration.infrastructureParams.showcase)return Yt.success({});const s=this.getDataPoint(KE.DONATION),a=s.toObject(),r=function(e,t){if((null==t?void 0:t.canUseAmountDefaults)&&!e.amount)return e.defaultAmount?{amount:e.defaultAmount,total:e.defaultTotal}:{amount:e.minAmount,total:e.minTotal};const n=e.toObject();return{amount:n.amount,total:n.total}}(s,e),o=this.getDataPoint(Ra.TRIBUTE).toObject(),c=this.getDataPoint(Ra.COMMENT),l=this.getDataPoint(Ra.QUESTIONS).toObject(),u=this.getDataPoint(Ra.DONOR_NAME).toObject(),d=this.getDataPoint(Ra.DONOR_EMAIL).toObject(),h=this.getDataPoint(KE.GIFT_AID),m=this.getDataPoint(KE.PRE_DONATION_UPSELL),p=this.getDataPoint(Ra.DONATE_ANONYMOUS).toObject(),g=this.getDataPoint(Ra.PHONE_NUMBER).toObject(),y=this.getDataPoint(KE.POST_DONATION_UPSELL).toObject(),f=this.getDataPoint(Ra.TERMS_AND_CONDITIONS).toObject(),S=this.getDataPoint(Ra.ON_BEHALF_OF).toObject(),A=this.getDataPoint(KE.DTD),E=this.getDataPoint(Ra.CUSTOMER_TITLE).toObject(),C=this.getDataPoint(Ra.DESIGNATION).toObject(),v=this.getDataPoint(Ra.COMMUNICATION_CONSENT).toObject();return this.sessionAPI.update({donationType:fe.MONEY,comment:c.isActive?c.comment:"",tribute:o.inHonorOf&&o.isActive?{labelType:o.labelType,type:o.type,inHonorOf:o.inHonorOf}:null,questions:l.questions,customer:{firstName:u.firstName,lastName:u.lastName,title:E.title,email:d.email,phone:g.phone,onBehalfOf:S.companyName,anonymousChecked:p.anonymousChecked,termsChecked:f.isAccepted,consent:_D(v)},donation:{amount:r.amount,total:r.total,publicFee:a.publicFee,currency:a.currency,frequency:a.frequency,goalKey:C.goalKey,goalName:C.goalName,giftAid:{shown:h.isShowed,claimed:h.isAccepted},upsell:{currency:m.upsellShowedFromCurrency,fromAmount:null!==(t=m.upsellShowedFromAmount)&&void 0!==t?t:0,showed:m.isShowed,used:m.isAccepted},employerUpsell:PD(A),feeCoveringSuggestion:a.feeCoveringSuggestion,hintsVariantName:a.hintsVariantName,hintDescription:(null===(n=a.currentHint)||void 0===n?void 0:n.description)||"",_suggestedAmountHint:(null===(i=a.currentHint)||void 0===i?void 0:i.id)||null,limit:{maxDate:a.maxDate}},employer:ND(A),employerDTD:bD(A),postDonationUpsell:{period:y.upsellFrequency,firstChargeAt:y.upsellStartDate,fromAmount:r.amount,showed:y.isShowed,currency:y.upsellCurrency,recurringAmount:y.upsellAmount,recurringTip:y.upsellTip,recurringTotal:y.upsellTotal,used:y.isAccepted},checkoutDefaults:TD(s)})}))}updateSessionWidgetDefaults(){const e=this.getDataPoint(KE.DONATION),t=e.toObject();this.sessionAPI.updateSessionWidgetDefaults(t.amount,TD(e))}}class xD extends Error{constructor(e){super(`${e} payment flow is not initialized`)}}class kD{constructor(e,t,n,i,s,a,r,o,c,l,u,d,h){this.checkoutConfiguration=e,this.checkoutState=t,this.paymentFlowManager=n,this.dataPointRegistry=i,this.sessionAPI=s,this.sessionService=a,this.currencyService=r,this.intl=o,this.paymentMethods=c,this.iframeWindow=l,this.stripeLoadingPromise=u,this.applePayStripeLoadingPromise=d,this.params=h,this._stripeElementsPromise=null,this.googlePayChecked=!1,this.applePayChecked=!1,this.initializePaymentMethodsPromise=null}initiateCreditCard(e){return(0,l.sH)(this,void 0,void 0,(function*(){const t=yield this.resolvePaymentFlow(u._h.CARD);return yield t.initiateFlow(e),{stripeElements:yield this.stripeElementsPromise}}))}startCreditCardFlow(){return(0,l.sH)(this,void 0,void 0,(function*(){const e=yield this.resolvePaymentFlow(u._h.CARD),t=yield e.startFlow();return Yt.isSuccess(t)}))}initiatePaypal(e){return(0,l.sH)(this,void 0,void 0,(function*(){const t=yield this.resolvePaymentFlow(u._h.PAYPAL);return yield this.sessionService.updateSession(),t.initiateFlow(e)}))}preloadVenmoScript(){return(0,l.sH)(this,void 0,void 0,(function*(){if(this.checkoutConfiguration.isLighthouse)return;const e=yield this.resolvePaymentFlow(u._h.VENMO);yield e.loadPayPalScriptIfNeeded()}))}preloadPayPalScript(){return(0,l.sH)(this,void 0,void 0,(function*(){if(this.checkoutConfiguration.isLighthouse)return;const e=yield this.resolvePaymentFlow(u._h.PAYPAL);yield e.loadPayPalScriptIfNeeded()}))}closePaypalButton(){if(this.isShowcase)return;const e=this.paymentFlowManager.getPaymentFlow(u._h.PAYPAL);if(!e)throw new xD(u._h.PAYPAL);e.closePaypal()}togglePaypalActions(e){const t=this.paymentFlowManager.getPaymentFlow(u._h.PAYPAL);t&&t.togglePaypalActions(e)}initiateGooglePay(){return(0,l.sH)(this,void 0,void 0,(function*(){const e=yield this.resolvePaymentFlow(u._h.GOOGLE_PAY);yield e.initiateFlow(),yield this.checkGooglePay()}))}startGooglePay(){return(0,l.sH)(this,void 0,void 0,(function*(){return(yield this.resolvePaymentFlow(u._h.GOOGLE_PAY)).startFlow()}))}initiateApplePay(){return(0,l.sH)(this,void 0,void 0,(function*(){yield this.checkApplePay()}))}startApplePay(){return(0,l.sH)(this,void 0,void 0,(function*(){return(yield this.resolvePaymentFlow(u._h.APPLE_PAY)).startFlow()}))}initiateUSBankAccount(e){return(0,l.sH)(this,void 0,void 0,(function*(){const t=yield this.resolvePaymentFlow(u._h.US_BANK_ACCOUNT);yield t.initiateFlow(e)}))}startUSBankAccount(){return(0,l.sH)(this,void 0,void 0,(function*(){return yield this.sessionService.updateSession(),(yield this.resolvePaymentFlow(u._h.US_BANK_ACCOUNT)).startFlow()}))}initiateACSS(e){return(0,l.sH)(this,void 0,void 0,(function*(){const t=yield this.resolvePaymentFlow(u._h.ACSS);yield t.initiateFlow(e)}))}startACSS(){return(0,l.sH)(this,void 0,void 0,(function*(){return yield this.sessionService.updateSession(),(yield this.resolvePaymentFlow(u._h.ACSS)).startFlow()}))}initiateSepa(e,t){return(0,l.sH)(this,void 0,void 0,(function*(){const n=yield this.resolvePaymentFlow(u._h.SEPA);return yield n.initiateFlow(e,t),{stripeElements:yield this.stripeElementsPromise}}))}startSepaFlow(){return(0,l.sH)(this,void 0,void 0,(function*(){const e=yield this.resolvePaymentFlow(u._h.SEPA),t=yield e.startFlow();return Yt.isSuccess(t)}))}initiateVenmo(e){return(0,l.sH)(this,void 0,void 0,(function*(){const t=yield this.resolvePaymentFlow(u._h.VENMO);yield t.initiateFlow(e),yield this.checkVenmo()}))}closeVenmoButton(){const e=this.paymentFlowManager.getPaymentFlow(u._h.VENMO);if(!e)throw new xD(u._h.VENMO);e.closeButton()}toggleVenmoActions(e){const t=this.paymentFlowManager.getPaymentFlow(u._h.VENMO);t&&t.toggleVenmoActions(e)}initiateIDEAL(){return(0,l.sH)(this,void 0,void 0,(function*(){const e=yield this.resolvePaymentFlow(u._h.IDEAL);yield e.initiateFlow()}))}openIDEALConfirmationWindow(e){const t=this.paymentFlowManager.getPaymentFlow(u._h.IDEAL);if(!t)throw new xD(u._h.IDEAL);return t.openConfirmationWindow(e)}isIDEALPaid(){const e=this.paymentFlowManager.getPaymentFlow(u._h.IDEAL);if(!e)throw new xD(u._h.IDEAL);return e.isPaid()}isIDEALPaymentStarted(){const e=this.paymentFlowManager.getPaymentFlow(u._h.IDEAL);return!!e&&e.isPaymentStarted()}focusIDEALConfirmationWindow(){const e=this.paymentFlowManager.getPaymentFlow(u._h.IDEAL);if(!e)throw new xD(u._h.IDEAL);e.focusConfirmationWindow()}initiateAuBECS(e,t){return(0,l.sH)(this,void 0,void 0,(function*(){const n=yield this.resolvePaymentFlow(u._h.AU_BECS);return yield n.initiateFlow(e,t),{stripeElements:yield this.stripeElementsPromise}}))}startAuBECSFlow(){return(0,l.sH)(this,void 0,void 0,(function*(){const e=yield this.resolvePaymentFlow(u._h.AU_BECS),t=yield e.startFlow();return Yt.isSuccess(t)}))}ensurePaymentMethodsInitialized(){return(0,l.sH)(this,void 0,void 0,(function*(){if(!this.isShowcase){if(this.initializePaymentMethodsPromise)return this.initializePaymentMethodsPromise;this.initializePaymentMethodsPromise=this.initiatePaymentMethods(this.getDataPoint(KE.PAYMENT_OPTIONS)),yield this.initializePaymentMethodsPromise,this.initializePaymentMethodsPromise=null}}))}resolvePaymentFlow(e){return(0,l.sH)(this,void 0,void 0,(function*(){var t,n;if(!e)throw new Error("Client payment method is not specified");const i=this.checkoutConfiguration.company,s=this.checkoutConfiguration.user,a=this.getDataPoint(KE.PAYMENT_OPTIONS),r=this.getDataPoint(Ra.DONOR_NAME),o=this.getDataPoint(Ra.DONOR_EMAIL),c=this.getDataPoint(KE.DONATION),l=this.getDataPoint(Ra.MAILING_ADDRESS),d=this.getDataPoint(KE.UK_BACS),h=this.getDataPoint(KE.US_BANK_ACCOUNT);switch(e){case u._h.CARD:return this.paymentFlowManager.resolveCard({sessionAPI:this.sessionAPI,stripe:yield this.stripeLoadingPromise(),stripeElements:yield this.stripeElementsPromise,failureHandler:()=>{this.setPaymentError(u._h.CARD,!0)},setPaymentMethodCountry:e=>this.setPaymentMethodCountry(e),donationDataPoint:c});case u._h.PAYPAL:return this.paymentFlowManager.resolvePaypal({sessionAPI:this.sessionAPI,locale:null===(t=this.intl)||void 0===t?void 0:t.locale,iframeWindow:this.iframeWindow,paypalClientId:this.paymentMethods.paypalClientId,paypalMerchantId:i.paypal.merchantId,paypalCurrencies:[...i.paypalCurrencies],subscriptionsEnabled:i.paypal.subscriptionsEnabled,donationDataPoint:c,updateSession:()=>this.sessionService.updateSession(),setPaymentMethod:e=>this.setPaymentMethod(e),setDonorFirstNameIfEmpty:e=>this.setDonorFirstNameIfEmpty(e),setDonorLastNameIfEmpty:e=>this.setDonorLastNameIfEmpty(e),setDonorEmailIfEmpty:e=>this.setDonorEmailIfEmpty(e),setPhoneCountryCodeIfEmptyPhone:e=>this.setPhoneCountryCodeIfEmptyPhone(e),setPhoneNumberIfEmpty:e=>this.setPhoneNumberIfEmpty(e),setCountryCodeIfEmptyAddress:e=>this.setCountryCodeIfEmptyAddress(e),setCityIfEmpty:e=>this.setCityIfEmpty(e),setLine1IfEmpty:e=>this.setLine1IfEmpty(e),setLine2IfEmpty:e=>this.setLine2IfEmpty(e),setPostalIfEmpty:e=>this.setPostalIfEmpty(e),setRegionIfEmpty:e=>this.setRegionIfEmpty(e),paymentFailureHandler:()=>{this.setPaymentError(u._h.PAYPAL,!0)}});case u._h.GOOGLE_PAY:return this.paymentFlowManager.resolveGooglePay({sessionAPI:this.sessionAPI,livemode:this.livemode,stripePublicKey:this.paymentMethods.stripePublicKey,countryCode:s.address.countryCode,googlePayInfo:this.paymentMethods.googlePayInfo,stripeAccount:i.stripeAccount,companyName:i.name,env:this.checkoutConfiguration.infrastructureParams.env,stripe:yield this.stripeLoadingPromise(),currencyService:this.currencyService,donationDataPoint:c,setPaymentMethod:e=>this.setPaymentMethod(e),setDonorFullNameIfEmpty:e=>this.setDonorFullNameIfEmpty(e),setDonorEmailIfEmpty:e=>this.setDonorEmailIfEmpty(e)});case u._h.APPLE_PAY:return this.paymentFlowManager.resolveApplePay({sessionAPI:this.sessionAPI,companyName:i.name,applePayStripeLoadingPromise:this.applePayStripeLoadingPromise,donationDataPoint:c,setPaymentMethod:e=>this.setPaymentMethod(e),setDonorFullNameIfEmpty:e=>this.setDonorFullNameIfEmpty(e),setDonorEmailIfEmpty:e=>this.setDonorEmailIfEmpty(e),setCountryCodeIfEmptyAddress:e=>this.setCountryCodeIfEmptyAddress(e),setCityIfEmpty:e=>this.setCityIfEmpty(e),setLine1IfEmpty:e=>this.setLine1IfEmpty(e),setLine2IfEmpty:e=>this.setLine2IfEmpty(e),setPostalIfEmpty:e=>this.setPostalIfEmpty(e),setRegionIfEmpty:e=>this.setRegionIfEmpty(e)});case u._h.UK_BACS:return this.paymentFlowManager.resolveUkBacs({sessionAPI:this.sessionAPI,stripe:yield this.stripeLoadingPromise(),donorEmailDataPoint:o,mailingAddressDataPoint:l,ukBacsDataPoint:d,mailingAddressFailureHandler:()=>{this.setMailingAddressError(!0)},ukBacsFailureHandler:()=>{this.setPaymentError(u._h.UK_BACS,!0)}});case u._h.ACSS:return this.paymentFlowManager.resolveACSS({sessionAPI:this.sessionAPI,stripe:yield this.stripeLoadingPromise(),setPaymentMethod:e=>this.setPaymentMethod(e)});case u._h.AU_BECS:return this.paymentFlowManager.resolveAuBECS({sessionAPI:this.sessionAPI,stripe:yield this.stripeLoadingPromise(),stripeElements:yield this.stripeElementsPromise,donorNameDataPoint:r,donorEmailDataPoint:o});case u._h.SEPA:return this.paymentFlowManager.resolveSepa({sessionAPI:this.sessionAPI,stripe:yield this.stripeLoadingPromise(),stripeElements:yield this.stripeElementsPromise,donorNameDataPoint:r,donorEmailDataPoint:o,mailingAddressDataPoint:l,paymentOptionsDataPoint:a,checkoutConfiguration:this.checkoutConfiguration,setPaymentMethodCountry:e=>this.setPaymentMethodCountry(e),mailingAddressFailureHandler:()=>{this.setMailingAddressError(!0)}});case u._h.IDEAL:return this.paymentFlowManager.resolveIDEAL({sessionAPI:this.sessionAPI,stripe:yield this.stripeLoadingPromise(),env:this.checkoutConfiguration.infrastructureParams.env,stripeElements:yield this.stripeElementsPromise,donorNameDataPoint:r,donorEmailDataPoint:o,donationDataPoint:c});case u._h.VENMO:return this.paymentFlowManager.resolveVenmo({sessionAPI:this.sessionAPI,livemode:this.livemode,showcase:this.isShowcase,locale:null===(n=this.intl)||void 0===n?void 0:n.locale,iframeWindow:this.iframeWindow,paypalClientId:this.paymentMethods.paypalClientId,paypalMerchantId:i.paypal.merchantId,updateSession:()=>this.sessionService.updateSession(),setPaymentMethod:e=>this.setPaymentMethod(e),setDonorFirstNameIfEmpty:e=>this.setDonorFirstNameIfEmpty(e),setDonorLastNameIfEmpty:e=>this.setDonorLastNameIfEmpty(e),setDonorEmailIfEmpty:e=>this.setDonorEmailIfEmpty(e),setPhoneCountryCodeIfEmptyPhone:e=>this.setPhoneCountryCodeIfEmptyPhone(e),setPhoneNumberIfEmpty:e=>this.setPhoneNumberIfEmpty(e),setCountryCodeIfEmptyAddress:e=>this.setCountryCodeIfEmptyAddress(e),setCityIfEmpty:e=>this.setCityIfEmpty(e),setLine1IfEmpty:e=>this.setLine1IfEmpty(e),setLine2IfEmpty:e=>this.setLine2IfEmpty(e),setPostalIfEmpty:e=>this.setPostalIfEmpty(e),setRegionIfEmpty:e=>this.setRegionIfEmpty(e)});case u._h.US_BANK_ACCOUNT:return this.paymentFlowManager.resolveUSBankAccount({stripe:yield this.stripeLoadingPromise(),usBankAccountDataPoint:h,donationDataPoint:c,sessionAPI:this.sessionAPI,checkoutConfiguration:this.checkoutConfiguration,paymentFailureHandler:()=>{this.setPaymentError(u._h.US_BANK_ACCOUNT,!0)},setFinancialInstitution:e=>this.setUsBankAccountFinancialInstitution(e),setVerificationType:e=>this.setUsBankAccountVerificationType(e),setAccountNumber:e=>this.setUsBankAccountNumber(e),setRoutingNumber:e=>this.setUsBankAccountRoutingNumber(e),setAccountType:e=>this.setUsBankAccountType(e)});default:throw new Error(`Payment flow for ${e} is not implemented`)}}))}get livemode(){return this.checkoutConfiguration.infrastructureParams.livemode}get isShowcase(){return this.checkoutConfiguration.infrastructureParams.showcase}get stripeElementsPromise(){return this._stripeElementsPromise||(this._stripeElementsPromise=this.getStripeElements()),this._stripeElementsPromise}initiatePaymentMethods(e){return(0,l.sH)(this,void 0,void 0,(function*(){const t=[];e.allowedPaymentMethods.googlePay.available&&t.push(this.initiateGooglePay()),e.allowedPaymentMethods.applePay.available&&t.push(this.initiateApplePay()),e.allowedPaymentMethods.paypal.available&&t.push(this.preloadPayPalScript()),e.allowedPaymentMethods.venmo.available&&t.push(this.preloadVenmoScript()),yield Promise.all(t)}))}getStripeElements(){return(0,l.sH)(this,void 0,void 0,(function*(){const e=yield this.stripeLoadingPromise();if(!e)throw new Error("Stripe is not provided");return e.elements(this.params.stripe.elementsOptions)}))}checkGooglePay(){return(0,l.sH)(this,void 0,void 0,(function*(){if(this.googlePayChecked)return;const e=yield this.resolvePaymentFlow(u._h.GOOGLE_PAY);(yield e.checkAvailability())&&this.setPaymentMethodChecked(u._h.GOOGLE_PAY),this.googlePayChecked=!0}))}checkApplePay(){return(0,l.sH)(this,void 0,void 0,(function*(){if(this.applePayChecked)return;const e=yield this.resolvePaymentFlow(u._h.APPLE_PAY);(yield e.checkAvailability())&&this.setPaymentMethodChecked(u._h.APPLE_PAY),this.applePayChecked=!0}))}checkVenmo(){return(0,l.sH)(this,void 0,void 0,(function*(){const e=(yield this.resolvePaymentFlow(u._h.VENMO)).checkAvailability();return e&&this.setPaymentMethodChecked(u._h.VENMO),e}))}setPaymentError(e,t){return this.checkoutState.setPaymentError(e,t)}setPaymentMethod(e){this.checkoutState.paymentOptions.setPaymentMethod(e)}setPaymentMethodCountry(e){this.checkoutState.paymentOptions.setPaymentMethodCountry(e)}setPaymentMethodChecked(e){this.checkoutState.paymentOptions.setPaymentMethodChecked(e)}setUsBankAccountFinancialInstitution(e){this.checkoutState.paymentOptions.setUsBankAccountFinancialInstitution(e)}setUsBankAccountVerificationType(e){this.checkoutState.paymentOptions.setUsBankAccountVerificationType(e)}setUsBankAccountNumber(e){this.checkoutState.paymentOptions.setUsBankAccountNumber(e)}setUsBankAccountRoutingNumber(e){this.checkoutState.paymentOptions.setUsBankAccountRoutingNumber(e)}setUsBankAccountType(e){this.checkoutState.paymentOptions.setUsBankAccountType(e)}setMailingAddressError(e){this.checkoutState.hasMailingAddressError=e}getDataPoint(e){return this.dataPointRegistry.getDataPoint(e)}setDonorFirstNameIfEmpty(e){this.checkoutState.privacy.setDonorFirstNameIfEmpty(e)}setDonorLastNameIfEmpty(e){this.checkoutState.privacy.setDonorLastNameIfEmpty(e)}setDonorFullNameIfEmpty(e){this.checkoutState.privacy.setDonorFullNameIfEmpty(e)}setDonorEmailIfEmpty(e){this.checkoutState.privacy.setDonorEmailIfEmpty(e)}setPhoneCountryCodeIfEmptyPhone(e){this.checkoutState.privacy.setPhoneCountryCodeIfEmptyPhone(e)}setPhoneNumberIfEmpty(e){this.checkoutState.privacy.setPhoneNumberIfEmpty(e)}setCountryCodeIfEmptyAddress(e){this.checkoutState.mailingAddress.setCountryCodeIfEmptyAddress(e)}setCityIfEmpty(e){this.checkoutState.mailingAddress.setCityIfEmpty(e)}setLine1IfEmpty(e){this.checkoutState.mailingAddress.setLine1IfEmpty(e)}setLine2IfEmpty(e){this.checkoutState.mailingAddress.setLine2IfEmpty(e)}setRegionIfEmpty(e){this.checkoutState.mailingAddress.setRegionIfEmpty(e)}setPostalIfEmpty(e){this.checkoutState.mailingAddress.setPostalIfEmpty(e)}}class ID{constructor(e){this.sessionAPI=e}update(e){return(0,l.sH)(this,void 0,void 0,(function*(){const t=yield this.sessionAPI.post("postDonationUpsell",{postDonationUpsell:e},{rejectsOnInvalid:!0});return!!Yt.isSuccess(t)}))}}class wD{constructor(e){this.sessionApi=e,this._fetchDecision=e=>Promise.race([this.requestCacheService.getCachedOrFetchValue(e),new Promise((e=>setTimeout((()=>{e(this.getResult(hP,!1))}),1500)))]),this.requestCacheService=new dP(hP,e.getFeeCovering.bind(e),this.shouldCacheResponse,this.getCacheKey,this.getResult),this._debouncedGetDecision=AP(this._fetchDecision,300)}fetchDecision(e){return this._fetchDecision(e)}debouncedFetchDecision(e){return this._debouncedGetDecision(e)}getCacheKey(e){return JSON.stringify(e)}shouldCacheResponse(e,t){return!t.isFallback}getResult(e,t){return{response:e,fromCache:t}}}class RD extends NN{}const MD=tn.DONATE,LD=[..._N,tn.DONATE,tn.POST_DONATION_UPSELL],UD=[tn.PAYMENT_OPTIONS,tn.AU_BECS,tn.SEPA],FD=[...TN,tn.DONATE,ka.REMIND_ME],jD=[...xN,tn.DONATE],BD=[...wN,tn.DONATE],HD=[tn.DONATE,ka.THANK_YOU,ka.BLOCKED],qD=[tn.UPSELL,tn.PAYMENT_OPTIONS,ka.COMMENT],GD=[...PN,ka.REMIND_ME,tn.DONATE],VD=[...DN,tn.DONATE],YD=[ka.THANK_YOU,ka.REMIND_ME],KD=[...ON],zD=[...kN,ka.REMIND_ME],$D=[...IN,ka.REMIND_ME],WD={[se.ANNUAL]:"upsellScreen.button.donateAnnual",[se.MONTHLY]:"upsellScreen.button.donateMonthly",[se.EVERY_4_WEEKS]:"upsellScreen.button.donate4Weeks"},XD={[se.ANNUAL]:"upsellScreen.button.donateAnnual",[se.MONTHLY]:"upsellScreen.button.donateMonthly",[se.EVERY_4_WEEKS]:"upsellScreen.button.donate4Weeks"},QD={[se.ANNUAL]:"upsellScreen.titleAnnual",[se.MONTHLY]:"upsellScreen.title",[se.EVERY_4_WEEKS]:"upsellScreen.titleEvery4Weeks"},ZD={[se.ANNUAL]:"upsellScreen.questionAnnual",[se.MONTHLY]:"upsellScreen.question",[se.EVERY_4_WEEKS]:"upsellScreen.questionEvery4Weeks"},JD={[se.ANNUAL]:"upsellScreen.questionAnnual",[se.MONTHLY]:"upsellScreen.questionShort",[se.EVERY_4_WEEKS]:"upsellScreen.questionShortEvery4Weeks"},e_={[se.ANNUAL]:"upsellScreen.descriptionAnnual",[se.MONTHLY]:"upsellScreen.description",[se.EVERY_4_WEEKS]:"upsellScreen.descriptionEvery4Weeks"};class t_{constructor(e,t,n,i){this.checkoutState=e,this.intl=t,this.donationDataPoint=n,this.preDonationUpsellDataPoint=i}getBeforeEnterViewState(){var e,t;const n=this.getViewTexts();return{currency:this.preDonationUpsellDataPoint.upsellCurrency,targetFrequency:this.preDonationUpsellDataPoint.upsellFrequency,lowAmount:this.preDonationUpsellDataPoint.upsellLowAmount,lowAmountInUSD:this.preDonationUpsellDataPoint.upsellLowAmountInUsd,highAmount:this.preDonationUpsellDataPoint.upsellHighAmount,highAmountInUSD:this.preDonationUpsellDataPoint.upsellHighAmountInUsd,isAnnualTribute:this.preDonationUpsellDataPoint.upsellFrequency===se.ANNUAL,highButtonText:n.highButtonText,lowButtonText:n.lowButtonText,screenTitle:n.screenTitle,questionText:n.questionText,questionShortText:n.questionShortText,descriptionText:n.descriptionText,upsell:{fromAmount:null!==(e=this.preDonationUpsellDataPoint.upsellInitialAmount)&&void 0!==e?e:0,fromAmountInUSD:null!==(t=this.preDonationUpsellDataPoint.upsellInitialAmountInUsd)&&void 0!==t?t:0},processingState:{lowMonthly:La.IDLE,highMonthly:La.IDLE}}}confirmUpsell(e){e?this.acceptUpsell(e):this.rejectUpsell()}acceptUpsell(e){this.checkoutState.preDonationUpsell.confirm(!0),this.setDonationParams({frequency:this.preDonationUpsellDataPoint.upsellFrequency,amount:e===xm.HIGH?this.preDonationUpsellDataPoint.upsellHighAmount:this.preDonationUpsellDataPoint.upsellLowAmount})}rejectUpsell(){this.checkoutState.preDonationUpsell.confirm(!1),this.setDonationParams({frequency:se.ONCE,amount:this.preDonationUpsellDataPoint.upsellInitialAmount})}setDonationParams(e){this.donationDataPoint.frequency===e.frequency&&this.donationDataPoint.amount===e.amount||(this.checkoutState.donation.setFrequency(e.frequency),this.checkoutState.donation.setAmount(e.amount))}getViewTexts(){var e,t,n;const i=this.preDonationUpsellDataPoint.upsellFrequency,s=this.preDonationUpsellDataPoint.upsellCurrency,a=null!==(e=this.preDonationUpsellDataPoint.upsellHighAmount)&&void 0!==e?e:0,r=null!==(t=this.preDonationUpsellDataPoint.upsellLowAmount)&&void 0!==t?t:0,o=null!==(n=this.preDonationUpsellDataPoint.upsellInitialAmount)&&void 0!==n?n:0;return{highButtonText:this.intl.translate(WD[i],{amount:this.intl.formatCurrency(a,{currency:s,display:"floatcents"})}),lowButtonText:this.intl.translate(XD[i],{amount:this.intl.formatCurrency(r,{currency:s,display:"floatcents"})}),screenTitle:this.intl.translate(QD[i]),questionText:this.intl.translate(ZD[i],{amount:this.intl.formatCurrency(o,{currency:s,display:"floatcents"})}),questionShortText:this.intl.translate(JD[i],{amount:this.intl.formatCurrency(o,{currency:s,display:"floatcents"})}),descriptionText:this.intl.translate(e_[i])}}}class n_ extends sb{constructor(e){super(e),this.paymentService=e.paymentService,this.donationDataPoint=e.donationDataPoint}beforeEnter(){return(0,l.sH)(this,void 0,void 0,(function*(){this.produceViewState((e=>{var t;e.isPaymentScreen=this.isPaymentScreen,e.formattedAmount=this.intl.formatCurrency(null!==(t=this.donationDataPoint.total)&&void 0!==t?t:0,{currency:this.donationDataPoint.currency,display:"floatcents"}),e.frequency=this.donationDataPoint.frequency}))}))}beforeLeave(e){return(0,l.sH)(this,void 0,void 0,(function*(){if(this.pending)return!1;if(this.pending=!0,this.setProcessingState(La.PENDING),this.produceViewState((e=>{e.payErrorMessage=""})),!(yield this.paymentService.startAuBECSFlow()))return this.produceViewState((e=>{e.shakeKey+=1,e.processingState=La.IDLE})),this.pending=!1,!1;const e=yield this.checkoutService.hold();return Yt.isFailure(e)?(this.pending=!1,yield this.showError(),!1):this.isPaymentScreen?this.pay():(this.pending=!1,!0)}))}initiateAuBECS(e,t){return(0,l.sH)(this,void 0,void 0,(function*(){return this.paymentService.initiateAuBECS(e,t)}))}getInitialViewState(){return{locked:!1,accountNumber:null,bsbNumber:null,shakeKey:0,accountHolderName:"",termsChecked:!0,errors:{},processingState:La.IDLE,isPaymentScreen:!1,formattedAmount:"",frequency:se.ONCE}}get isPaymentScreen(){return this.name===this.checkoutService.getPaymentScreen(this.name,this.flow.getHistoricalScreens())}pay(){return(0,l.sH)(this,void 0,void 0,(function*(){const e=yield this.checkoutService.pay({screen:this.name,predictedNextScreen:this.flow.predictNextScreen()});return Yt.isFailure(e)?e.failureResult.shouldLeave?(this.pending=!1,!0):(this.pending=!1,yield this.showError(),!1):(this.setProcessingState(La.SUCCESS),yield Da(this.checkoutService.checkoutConfiguration.successPaymentDelayBeforeLeave),this.pending=!1,!0)}))}showError(){return(0,l.sH)(this,void 0,void 0,(function*(){this.produceViewState((e=>{e.processingState=La.ERROR,e.payErrorMessage=this.checkoutService.payErrorMessage||this.intl.translate("common.errorOccurredText")}))}))}setProcessingState(e){this.produceViewState((t=>{t.processingState=e}))}}const i_=[u.ax.EMAIL,u.ax.SMS,u.ax.PHONE_CALLS,u.ax.POSTAL_MAIL,u.ax.SOCIAL_MEDIA];class s_ extends sb{constructor(e,t){super(t),this.communicationConsentDataPoint=e}beforeEnter(){return(0,l.sH)(this,void 0,void 0,(function*(){this.produceViewState((e=>{e.channels=this.prepareChannels()}))}))}changeChannel(e,t){this.checkoutState.communicationConsent.setCustomizedChannelState(e,t),this.produceViewState((e=>{e.channels=this.prepareChannels()}))}resetChannels(){this.checkoutState.communicationConsent.resetCustomizedConsent()}setCustomizedConsentShown(){this.checkoutState.communicationConsent.setCustomizedConsentShown()}beforeLeave(){return(0,l.sH)(this,void 0,void 0,(function*(){return this.checkoutService.updateSession(),!0}))}getInitialViewState(){return{locked:!1,channels:[]}}prepareChannels(){return i_.filter((e=>this.communicationConsentDataPoint.customizedConsent[e].isEnabled)).map((e=>({type:e,isAccepted:this.communicationConsentDataPoint.customizedConsent[e].isAccepted})))}}class a_ extends ui{tryStart(e){this.isActive||this.canBeStarted(e)&&super.start()}isEnabled(e){return this.canBeStarted(e)&&this.isTestGroup}get isTestGroup(){return this.isActive&&this.isVariant(Dn.TEST)}canBeStarted(e){return!!e.canShowUpsellScreen&&!!a_.ALLOWED_TARGET_FREQUENCIES.includes(e.targetFrequency)}}a_.ALLOWED_TARGET_FREQUENCIES=[se.MONTHLY,se.EVERY_4_WEEKS];class r_ extends ui{tryStart(e){this.isActive||this.canBeStarted(e)&&super.start()}isEnabled(e){return this.canBeStarted(e)&&this.isTestGroup}get isTestGroup(){return this.isActive&&this.isVariant(Pn.TEST)}canBeStarted(e){return!!e.canShowUpsellScreen&&!!r_.ALLOWED_TARGET_FREQUENCIES.includes(e.targetFrequency)}}r_.ALLOWED_TARGET_FREQUENCIES=[se.MONTHLY,se.EVERY_4_WEEKS];class o_ extends sb{constructor(e,t,n){super(e),this.upsellAggregate=t,this.adaptiveFeeCoveringService=n,this.donationDataPoint=e.donationDataPoint,this.tributeDataPoint=e.tributeDataPoint,this.commentDataPoint=e.commentDataPoint,this.designationDataPoint=e.designationDataPoint,this.preDonationUpsellDataPoint=e.preDonationUpsellDataPoint,this.adaptivePreDonationUpsellSuggestionsService=e.adaptivePreDonationUpsellSuggestionsService,this.experiments.register(cn.CHECKOUT_WITHOUT_PRE_DONATION_UPSELL_EXPERIMENT,r_),this.experiments.register(cn.CAMPAIGN_PAGES_WITHOUT_PRE_DONATION_UPSELL_EXPERIMENT,a_)}get upsellCurtainExperiment(){return this.experiments.get(cn.UPSELL_CURTAIN_EXPERIMENT)}get donateButtonLabel(){return function(e,t){switch(t){case se.DAILY:return e.translate("donateForm.donateButton.daily");case se.WEEKLY:return e.translate("donateForm.donateButton.weekly");case se.BIWEEKLY:return e.translate("donateForm.donateButton.biweekly");case se.EVERY_4_WEEKS:return e.translate("donateForm.donateButton.every4weeks");case se.MONTHLY:return e.translate("donateForm.donateButton.monthly");case se.BIMONTHLY:return e.translate("donateForm.donateButton.bimonthly");case se.QUARTERLY:return e.translate("donateForm.donateButton.quarterly");case se.SEMIANNUAL:return e.translate("donateForm.donateButton.semiannual");case se.ANNUAL:return e.translate("donateForm.donateButton.annual");default:return e.translate("donateForm.donateButton.once")}}(this.intl,this.donationDataPoint.frequency)}get shouldShowAverageDonationHint(){return(this.checkoutService.checkoutConfiguration.infrastructureParams.showcase||this.viewState.donation.frequency===se.ONCE)&&!1}get shouldShowAverageDonationHintTooltip(){const e=this.viewState.tribute.sharingEnabled&&this.viewState.tribute.isActive&&this.viewState.isTributeInputFocused;return this.shouldShowAverageDonationHint&&!this.viewState.errors.amount.min&&!e&&!this.viewState.forceHideAverageDonationHintTooltip}get amountAverageDonationHint(){return this.currencyService.convert(1e4,"USD",this.viewState.donation.currency)}get isRateMatchingCountdownEnabled(){if(!this.viewState.rateMatching.show)return!1;if(!this.viewState.rateMatching.endDate)return!1;const e=BC(this.viewState.rateMatching.endDate),t=new Date,n=new Date(t);return n.setDate(t.getDate()+14),e>t&&e<=n}get rateMatchingTotalAmountLimitInDonationCurrency(){return this.viewState.rateMatching.totalAmountLimit?this.currencyService.convert(this.viewState.rateMatching.totalAmountLimit,this.checkoutService.campaignConfig.defaultCurrency,this.viewState.donation.currency):null}get matchingImpact(){return this.donationDataPoint.amount?this.rateMatchingTotalAmountLimitInDonationCurrency&&this.isDonationOverMaxLimit?this.donationDataPoint.amount+this.rateMatchingTotalAmountLimitInDonationCurrency:this.calculateMatchingImpactWithoutLimit():null}get isDonationOverMaxLimit(){if(!this.donationDataPoint.amount)return!1;if(!this.rateMatchingTotalAmountLimitInDonationCurrency)return!1;const e=this.calculateMatchingImpactWithoutLimit();return!!e&&e-this.donationDataPoint.amount>this.rateMatchingTotalAmountLimitInDonationCurrency}get isDonationMatched(){return!!this.donationDataPoint.amount&&(!this.viewState.rateMatching.minAmount||this.donationDataPoint.amount>=this.minRateMatchingAmount)}get isLocked(){return!!this.getScreenData().locked||this.upsellCurtainExperiment.isTestGroup&&this.viewState.upsellCurtainShown}get minRateMatchingAmount(){const e=this.currencyService.convert(this.viewState.rateMatching.minAmount||0,this.checkoutService.campaignConfig.defaultCurrency,this.viewState.donation.currency);return this.currencyService.ceil(e,this.viewState.donation.currency)}get rateMatchingUpsellAmountToAdd(){return this.viewState.rateMatching.minAmount&&this.donationDataPoint.amount?this.donationDataPoint.amount>this.minRateMatchingAmount?null:this.minRateMatchingAmount-this.donationDataPoint.amount:null}get rateMatchingAmountAfterUpsell(){return this.viewState.rateMatching.minAmount?this.minRateMatchingAmount*this.viewState.rateMatching.rate:null}beforeEnter(e){return(0,l.sH)(this,void 0,void 0,(function*(){(null==e?void 0:e.isSynthetic)||(this.checkoutService.exposeAmountPresetsExperiment(),this.checkoutService.exposeAmountPresetsPagesExperiment()),this.checkoutService.ensureFrequencyEnabled(this.donationDataPoint.frequency),this.exposeDefaultFrequencyV2Experiment(),this.produceViewState((e=>{e.tribute.show=this.tributeDataPoint.isEnabled,e.tribute.isActive=this.tributeDataPoint.isActive,e.tribute.labelType=this.tributeDataPoint.labelType,e.tribute.sharingEnabled=this.tributeDataPoint.isSharingEnabled,e.tribute.isOptional=this.tributeDataPoint.isOptional,e.tribute.name=this.tributeDataPoint.tributeeName,e.tribute.isFilled=this.tributeDataPoint.isFilled,e.tribute.isTributeOriented=this.tributeDataPoint.isTributeOriented,e.comment.isEnabled=this.commentDataPoint.isEnabled,e.comment.content=this.commentDataPoint.comment,e.comment.prevContent=this.commentDataPoint.prevComment,e.donation.amount=this.donationDataPoint.amount,e.donation.minAmount=this.donationDataPoint.minAmount,e.donation.maxAmount=this.donationDataPoint.maxAmount,e.donation.amountOptions=[...this.donationDataPoint.amountOptions],e.donation.frequency=this.donationDataPoint.frequency,e.donation.canModifyAmount=this.donationDataPoint.canModifyAmount,e.donation.canSelectCurrency=this.donationDataPoint.canSelectCurrency,e.donation.currency=this.donationDataPoint.currency,e.donation.hintOptions=this.donationDataPoint.hintOptions,e.donation.canModifyFrequency=this.donationDataPoint.canModifyFrequency,e.donation.showDonationEndDate=this.donationDataPoint.showDonationEndDate,e.donation.donationEndDate=this.donationDataPoint.donationEndDate,e.donation.isDonationEndDateActive=this.donationDataPoint.isDonationEndDateActive,e.designation.show=this.designationDataPoint.isEnabled,e.designation.goalKey=this.designationDataPoint.goalKey,e.designation.goals=this.designationDataPoint.getAllowedGoalsByFrequency(this.getGoalRepeat(e.donation.frequency)),e.designation.goal=this.designationDataPoint.selectedGoal,e.designation.shouldShowDesignation=this.designationDataPoint.shouldShowDesignation(this.getGoalRepeat(e.donation.frequency)),e.designation.isEditable=this.designationDataPoint.isEditable(this.getGoalRepeat(e.donation.frequency)),e.allCurrenciesList=this.donationDataPoint.currencyList,e.guessedCurrenciesList=this.donationDataPoint.guessedCurrencyList,e.donateButtonLabel=this.donateButtonLabel,e.leftButtonLabel=this.leftButtonLabel,e.leftButtonFrequency=this.donationDataPoint.lowFrequency,e.rightButtonLabel=this.rightButtonLabel,e.rightButtonFrequency=this.donationDataPoint.highFrequency,e.rateMatching=this.rateMatching,e.isRateMatchingEnabled=this.isRateMatchingEnabled(e.rateMatching),e.showFrequencyCustomAmountInput=!this.donationDataPoint.currentHint})),this.validateAmount()}))}setIsTributeInputFocused(e){return(0,l.sH)(this,void 0,void 0,(function*(){yield Da(200),this.produceViewState((t=>{t.isTributeInputFocused=e}))}))}changeFrequency(e){this.checkoutState.donation.setFrequency(e),this.checkoutService.syncUpdateCheckoutState(),this.produceViewState((t=>{t.donation.frequency=this.donationDataPoint.frequency,t.donation.amount=this.donationDataPoint.amount,t.donation.currency=this.donationDataPoint.currency,t.donation.amountOptions=[...this.donationDataPoint.amountOptions],t.donation.hintOptions=this.donationDataPoint.hintOptions,t.donation.canSelectCurrency=this.donationDataPoint.canSelectCurrency,t.donation.showDonationEndDate=this.donationDataPoint.showDonationEndDate,t.donation.donationEndDate=this.donationDataPoint.donationEndDate,t.donation.isDonationEndDateActive=this.donationDataPoint.isDonationEndDateActive,t.designation.goalKey=this.designationDataPoint.goalKey,t.designation.goal=this.designationDataPoint.selectedGoal,t.designation.goals=this.designationDataPoint.getAllowedGoalsByFrequency(this.getGoalRepeat(e)),t.designation.shouldShowDesignation=this.designationDataPoint.shouldShowDesignation(this.getGoalRepeat(e)),t.designation.isEditable=this.designationDataPoint.isEditable(this.getGoalRepeat(e)),t.donation.minAmount=this.donationDataPoint.minAmount,t.donateButtonLabel=this.donateButtonLabel,t.showFrequencyCustomAmountInput=!this.donationDataPoint.currentHint})),this.validateAmount(),this.resetDesignationValidation(),this.fetchUpsellScreenDecision()}validateAmount(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(this.checkoutService.checkoutConfiguration.infrastructureParams.showcase)return;const t=this.donationDataPoint.validate(),n=null===this.donationDataPoint.amount,i=e&&t.fields.amount.errors.required;this.produceViewState((e=>{e.donation.isAmountValid=t.fields.amount.isValid,e.errors.amount.required=i,e.errors.amount.min=!n&&t.fields.amount.errors.min,e.errors.amount.max=!n&&t.fields.amount.errors.max,e.showError=t.fields.amount.errors.min||t.fields.amount.errors.max||i}))}validateDesignation(){const e=this.designationDataPoint.validateDesignation(this.getGoalRepeat(this.viewState.donation.frequency));this.produceViewState((t=>{t.designation.isValid=e.isValid,t.errors.designation.required=e.fields.goal.errors.required}))}resetDesignationValidation(){this.produceViewState((e=>{e.designation.isValid=!0,e.errors.designation.required=!1}))}changeAmount(e){this.resetAmountValidationError(),this.checkoutState.donation.setAmount(e),this.checkoutService.syncUpdateCheckoutState(),this.produceViewState((e=>{e.donation.amount=this.donationDataPoint.amount,e.donation.hintOptions=this.donationDataPoint.hintOptions,e.showFrequencyCustomAmountInput=!this.donationDataPoint.currentHint})),this.fetchUpsellScreenDecision()}addUpsellAmount(){this.rateMatchingUpsellAmountToAdd&&this.donationDataPoint.amount&&this.changeAmount(this.donationDataPoint.amount+this.rateMatchingUpsellAmountToAdd)}changeCurrentHint(e){this.resetAmountValidationError(),this.checkoutState.donation.setHint(e),this.checkoutService.syncUpdateCheckoutState(),this.produceViewState((e=>{e.donation.amount=this.donationDataPoint.amount,e.donation.hintOptions=this.donationDataPoint.hintOptions,e.showFrequencyCustomAmountInput=!this.donationDataPoint.currentHint})),this.validateAmount(),this.fetchUpsellScreenDecision()}changeGoal(e){this.checkoutState.designation.setGoal(e),this.produceViewState((e=>{e.designation.goalKey=this.designationDataPoint.goalKey,e.designation.goal=this.designationDataPoint.selectedGoal})),this.validateDesignation(),this.fetchUpsellScreenDecision()}changeCurrency(e){this.checkoutState.donation.setCurrency(e),this.checkoutService.syncUpdateCheckoutState(),this.produceViewState((e=>{e.donation.currency=this.donationDataPoint.currency,e.donation.amountOptions=[...this.donationDataPoint.amountOptions],e.donation.amount=this.donationDataPoint.amount,e.donation.minAmount=this.donationDataPoint.minAmount,e.donation.maxAmount=this.donationDataPoint.maxAmount,e.donation.hintOptions=this.donationDataPoint.hintOptions})),this.checkoutService.trackCurrencyChange(e),this.fetchUpsellScreenDecision(),this.performFeeCoveringSuggestion(),this.checkoutService.fetchFeeCoveringSuggestion()}toggleTribute(){this.checkoutState.tribute.setActive(!this.tributeDataPoint.isActive),this.checkoutService.syncUpdateCheckoutState(),this.produceViewState((e=>{e.tribute.isActive=this.tributeDataPoint.isActive,e.tribute.isFilled=this.tributeDataPoint.isFilled}))}changeTributeName(e){this.checkoutState.tribute.setTributeeName(e),this.checkoutService.syncUpdateCheckoutState(),this.produceViewState((e=>{e.tribute.name=this.tributeDataPoint.tributeeName,e.tribute.isFilled=this.tributeDataPoint.isFilled}))}addComment(){return(0,l.sH)(this,void 0,void 0,(function*(){return this.checkoutService.makeDataPointRequired(Ra.COMMENT),this.leave({omitBeforeLeave:!0})}))}savePrevComment(){this.checkoutService.checkoutConfiguration.infrastructureParams.showcase||this.checkoutState.comment.savePrevComment()}beforeLeave(e){return(0,l.sH)(this,void 0,void 0,(function*(){return this.tryStartCheckoutWithoutPreDonationUpsellExperiment(),this.produceViewState((e=>{e.forceHideAverageDonationHintTooltip=!0})),this.validateAmount(!0),this.validateDesignation(),this.viewState.donation.isAmountValid?this.viewState.designation.isValid?(this.checkoutService.updateSessionWidgetDefaults(),this.performFeeCoveringSuggestion(),this.checkoutService.fetchFeeCoveringSuggestion(),(null==e?void 0:e.isSynthetic)?(this.checkoutService.updateSession(),!0):(yield this.performMlRequests(),this.checkoutService.updateSession(),!this.openUpsellCurtain())):(this.produceViewState((e=>{e.designationShakeKey+=1})),!1):(this.produceViewState((e=>{e.amountShakeKey+=1,e.showError=!0})),!1)}))}isRateMatchingEnabled(e){if(!e.show)return!1;const t=Date.now();return null===e.endDate||new Date(e.endDate).getTime()>t}openUpsellCurtain(){const e={tributeIsFilled:this.tributeDataPoint.isFilled,targetFrequency:this.preDonationUpsellDataPoint.upsellFrequency,preDonationUpsellIsEnabled:this.preDonationUpsellDataPoint.isEnabled,locale:this.intl.locale,currentFrequency:this.donationDataPoint.frequency};return!!this.upsellCurtainExperiment.canBeStarted(e)&&(this.upsellCurtainExperiment.tryStart(e),!!this.upsellCurtainExperiment.canOpenUpsellCurtain(e)&&(this.produceViewState((e=>{e.preDonationUpsell=this.upsellAggregate.getBeforeEnterViewState(),e.upsellCurtainShown=!0})),this.checkoutState.preDonationUpsell.setShowed(),this.upsellCurtainExperiment.openCurtain(),!0))}closeUpsellCurtain(){this.produceViewState((e=>{e.upsellCurtainShown=!1})),this.upsellCurtainExperiment.closeCurtain()}confirmUpsell(e){return this.upsellAggregate.confirmUpsell(e),this.checkoutService.updateSession(),this.checkoutService.syncUpdateCheckoutState(),this.leave({omitBeforeLeave:!0})}toggleDonationEndDateActive(e){this.checkoutState.donation.setDonationEndDateActive(e),this.produceViewState((t=>{t.donation.isDonationEndDateActive=e}))}getInitialViewState(){return{locked:!1,isShowcase:!1,amountShakeKey:0,designationShakeKey:0,allCurrenciesList:[],guessedCurrenciesList:[],allowCentsForCharges:this.checkoutService.company.allowCentsForCharges,donation:{frequency:se.ONCE,amountOptions:[0,0,0,0,0,0],amount:null,minAmount:0,maxAmount:0,canModifyAmount:!0,canSelectCurrency:!0,currency:"USD",isAmountValid:!0,canModifyFrequency:!0,hintOptions:null,showDonationEndDate:!1,donationEndDate:null,isDonationEndDateActive:!0},errors:{amount:{min:!1,max:!1,required:!1},designation:{required:!1}},showError:!1,comment:{isEnabled:!1,content:"",prevContent:""},tribute:{name:"",isActive:!1,show:!1,isOptional:!1,labelType:u.dR.IN_HONOR_MEMORY,sharingEnabled:!1,isFilled:!1,inHonorOfMaxLength:Nv.getInHonorOfMaxLength(),isTributeOriented:!1},designation:{show:!1,goalKey:null,goals:[],isEditable:!0,isValid:!0,goal:null,shouldShowDesignation:!1},enabledFlows:{crypto:this.checkoutService.checkoutConfiguration.enabledFlows.crypto},companyName:this.checkoutService.company.name,donateButtonLabel:"",leftButtonLabel:"",leftButtonFrequency:se.ONCE,rightButtonLabel:"",rightButtonFrequency:se.MONTHLY,flowType:this.checkoutService.type,isTributeInputFocused:!1,forceHideAverageDonationHintTooltip:!1,isRateMatchingEnabled:!1,rateMatching:{show:!1,rate:2,sponsor:null,minAmount:0,endDate:null,showEndDate:!1,showSponsor:!1,sponsorEnabled:!1,startDate:null,totalAmountLimitEnabled:!1,totalAmountLimit:null,raised:null,remains:null},showFrequencyCustomAmountInput:!1,upsellCurtainShown:!1,preDonationUpsell:{upsell:{fromAmount:0},currency:"USD",highButtonText:"",lowButtonText:"",highAmount:0,lowAmount:0,screenTitle:"",questionText:"",questionShortText:"",descriptionText:"",targetFrequency:se.MONTHLY,isAnnualTribute:!1},processingState:La.IDLE}}get leftButtonLabel(){return Nc(this.intl,this.donationDataPoint.lowFrequency)}get rightButtonLabel(){return Nc(this.intl,this.donationDataPoint.highFrequency)}get rateMatching(){const e=this.checkoutService.checkoutConfiguration.campaignPage.rateMatching;return{show:e.show,rate:e.rate,sponsor:e.sponsor,sponsorLogo:e.sponsorLogo,minAmount:e.minAmount,endDate:e.endDate,showEndDate:e.showEndDate,showSponsor:e.showSponsor,sponsorEnabled:e.sponsorEnabled,startDate:e.startDate,totalAmountLimitEnabled:e.totalAmountLimitEnabled,totalAmountLimit:e.totalAmountLimit,raised:e.raised,remains:e.remains}}get checkoutWithoutPreDonationUpsellExperiment(){return this.experiments.get(cn.CHECKOUT_WITHOUT_PRE_DONATION_UPSELL_EXPERIMENT)}get campaignPagesWithoutPreDonationUpsellExperiment(){return this.experiments.get(cn.CAMPAIGN_PAGES_WITHOUT_PRE_DONATION_UPSELL_EXPERIMENT)}calculateMatchingImpactWithoutLimit(){return this.donationDataPoint.amount?this.donationDataPoint.amount*this.viewState.rateMatching.rate:null}resetAmountValidationError(){this.produceViewState((e=>{e.errors.amount.min=!1,e.errors.amount.max=!1,e.errors.amount.required=!1,e.showError=!1}))}tryStartCheckoutWithoutPreDonationUpsellExperiment(){const e={canShowUpsellScreen:this.preDonationUpsellDataPoint.isEnabled,targetFrequency:this.preDonationUpsellDataPoint.upsellFrequency};this.checkoutWithoutPreDonationUpsellExperiment.tryStart(e),this.checkoutWithoutPreDonationUpsellExperiment.isEnabled(e)?this.checkoutState.preDonationUpsell.setSuggestedAvailability(!1):(this.campaignPagesWithoutPreDonationUpsellExperiment.tryStart(e),this.campaignPagesWithoutPreDonationUpsellExperiment.isEnabled(e)&&this.checkoutState.preDonationUpsell.setSuggestedAvailability(!1))}exposeDefaultFrequencyV2Experiment(){let e;e=this.checkoutService.checkoutConfiguration.checkoutType===Se.PAGE?this.experiments.get(cn.DEFAULT_FREQUENCY_V_2_CAMPAIGN_PAGES_EXPERIMENT):this.experiments.get(cn.DEFAULT_FREQUENCY_V_2_MODAL_EXPERIMENT),e.tryExpose()}fetchUpsellScreenDecision(){return this.adaptivePreDonationUpsellSuggestionsService.resetSuggestionApplication(),this.tryStartCheckoutWithoutPreDonationUpsellExperiment(),this.adaptivePreDonationUpsellSuggestionsService.tryFetchSuggestion()}setProcessingState(e){this.produceViewState((t=>{t.processingState=e}))}performFeeCoveringSuggestion(){return(0,l.sH)(this,void 0,void 0,(function*(){(yield this.adaptiveFeeCoveringService.tryFetchSuggestion())&&(this.adaptiveFeeCoveringService.tryApplySuggestion(),this.adaptiveFeeCoveringService.tryTrackSuggestion())}))}performMlRequests(){return(0,l.sH)(this,void 0,void 0,(function*(){yield this.withPending((()=>(0,l.sH)(this,void 0,void 0,(function*(){this.setProcessingState(La.PENDING),(yield this.fetchUpsellScreenDecision())&&(this.adaptivePreDonationUpsellSuggestionsService.tryApplySuggestion(),this.adaptivePreDonationUpsellSuggestionsService.tryTrackSuggestion()),this.setProcessingState(La.IDLE)}))))}))}getGoalRepeat(e){return e===se.ONCE?je.ONE_TIME:je.RECURRING}}function c_(e,t){switch(e){case se.DAILY:return t.translate("widgetSubscriptionPeriodLabel.daily.noun");case se.WEEKLY:return t.translate("widgetSubscriptionPeriodLabel.weekly.noun");case se.BIWEEKLY:return t.translate("widgetSubscriptionPeriodLabel.biweekly.noun");case se.EVERY_4_WEEKS:return t.translate("widgetSubscriptionPeriodLabel.every4weeks.noun");case se.MONTHLY:return t.translate("widgetSubscriptionPeriodLabel.monthly.noun");case se.BIMONTHLY:return t.translate("widgetSubscriptionPeriodLabel.bimonthly.noun");case se.QUARTERLY:return t.translate("widgetSubscriptionPeriodLabel.quarterly.noun");case se.SEMIANNUAL:return t.translate("widgetSubscriptionPeriodLabel.semiannual.noun");case se.ANNUAL:return t.translate("widgetSubscriptionPeriodLabel.annual.noun");default:throw new F(e)}}function l_(e){return e?xp.UPSELL_PAY_LATER:xp.CONTINUE}class u_ extends sb{constructor(e){super(e),this.dtdDataPoint=e.dtdDataPoint}beforeEnter(){return(0,l.sH)(this,void 0,void 0,(function*(){this.resetDtd();const e=this.intl.formatCurrency(this.dtdDataPoint.dtdInitialTotal,{currency:this.dtdDataPoint.dtdCurrency,display:"floatcents"}),t=this.intl.formatCurrency(this.dtdDataPoint.employerUpsellTotal,{currency:this.dtdDataPoint.dtdCurrency,display:"floatcents"});let n="",i="",s="";const a=this.dtdDataPoint.dtdFrequency;a!==se.ONCE?(n=this.intl.translate("doubleDonationScreen.button.donate.recurring",{amount:e,recurringType:c_(a,this.intl)}),i=this.intl.translate("doubleDonationScreen.button.changeAmount.recurring",{amount:t,recurringType:c_(a,this.intl)}),s=this.intl.translate("doubleDonationScreen.button.doNotChangeAmount.recurring",{amount:e,recurringType:c_(a,this.intl)})):(n=this.intl.translate("doubleDonationScreen.button.donate.once",{amount:e}),i=this.intl.translate("doubleDonationScreen.button.changeAmount.once",{amount:t}),s=this.intl.translate("doubleDonationScreen.button.doNotChangeAmount.once",{amount:e})),this.produceViewState((a=>{a.buttonType=l_(!1),a.total=this.dtdDataPoint.dtdInitialTotal,a.frequency=this.dtdDataPoint.dtdFrequency,a.currency=this.dtdDataPoint.dtdCurrency,a.isFeeCovered=this.dtdDataPoint.dtdInitialTotal!==this.dtdDataPoint.dtdInitialAmount,a.employer.name=this.dtdDataPoint.employerName,a.minimumMatchedAmount=this.dtdDataPoint.employerMinAmount,a.isIntegrationEnabled=this.dtdDataPoint.isIntegrationEnabled,a.showSkipButton=!0,a.matchingPromisedAmount=this.dtdDataPoint.employerUpsellTotalDoubled,a.matchingRatio=this.dtdDataPoint.employerRatio,a.proposedAmount=this.dtdDataPoint.employerUpsellTotal,a.proposedAmountBeforeFeeCovered=this.dtdDataPoint.employerRawMinAmount,a.formattedTotal=e,a.formattedUpsellTotal=t,a.declineButtonLabel=n,a.changeAmountButtonLabel=i,a.noChangeAmountButtonLabel=s,a.isAlreadyPaidAmountNotMatched=this.isAlreadyPaidAmountNotMatched()})),this.dtdDataPoint.employerId&&(this.setEmployerViewState(),this.checkoutState.doubleTheDonation.setUpsellShowed(this.viewState.showDTDUpsell&&this.viewState.showDTDUpsellExperiment))}))}beforeLeave(e){return(0,l.sH)(this,void 0,void 0,(function*(){return this.checkoutService.updateSession(),this.checkoutService.syncUpdateCheckoutState(),!0}))}changeEmployerName(e){e||this.resetEmployerDTD();const t=this.viewState.companies.some((t=>t.company_name.trim().toLocaleLowerCase()===e.trim().toLocaleLowerCase()));this.checkoutState.doubleTheDonation.setEmployerName(e),this.produceViewState((e=>{e.employer.name=this.dtdDataPoint.employerName,e.showEmployerMatchedBlock=t&&this.dtdDataPoint.employerMinAmount<=this.dtdDataPoint.dtdInitialTotal}))}skip(){return(0,l.sH)(this,void 0,void 0,(function*(){return this.checkoutState.doubleTheDonation.setSkipped(),this.leave()}))}getDTDCompanies(e){return(0,l.sH)(this,void 0,void 0,(function*(){const t=yield this.dtdDataPoint.searchEmployerByName(e);Zf()(t,this.viewState.companies)||this.produceViewState((e=>{e.companies=t}))}))}setEmployerDTD(e){const t=this.viewState.companies.find((t=>t.id===e));return!t||(this.checkoutState.doubleTheDonation.setEmployerData(t),this.setEmployerViewState(),this.checkoutState.doubleTheDonation.setUpsellShowed(this.viewState.showDTDUpsell&&this.viewState.showDTDUpsellExperiment),!1)}setEmployerViewState(){const e=this.intl.formatCurrency(this.dtdDataPoint.employerUpsellTotal,{currency:this.dtdDataPoint.dtdCurrency,display:"floatcents"});let t="";const n=this.dtdDataPoint.dtdFrequency;t=n!==se.ONCE?this.intl.translate("doubleDonationScreen.button.changeAmount.recurring",{amount:e,recurringType:c_(n,this.intl)}):this.intl.translate("doubleDonationScreen.button.changeAmount.once",{amount:e}),this.produceViewState((n=>{n.employer.name=this.dtdDataPoint.employerName,n.showDTDDescription=!1,n.showDTDUpsell=this.dtdDataPoint.employerMinAmount>this.dtdDataPoint.dtdInitialTotal,n.showDTDUpsellExperiment=!this.isAlreadyPaidAmountNotMatched(),n.showSkipButton=!n.showDTDUpsell,n.showEmployerMatchedBlock=this.dtdDataPoint.employerMinAmount<=this.dtdDataPoint.dtdInitialTotal,n.DTDDoubledAmount=this.dtdDataPoint.dtdInitialTotalDoubled,n.minimumMatchedAmount=this.dtdDataPoint.employerMinAmount,n.upsellTotal=this.dtdDataPoint.employerUpsellTotal,n.formattedUpsellTotal=e,n.changeAmountButtonLabel=t,n.DTDUpsellDoubledAmount=this.dtdDataPoint.employerUpsellTotalDoubled,n.buttonType=l_(n.showDTDUpsell),n.matchingPromisedAmount=this.dtdDataPoint.employerUpsellTotalDoubled,n.matchingRatio=this.dtdDataPoint.employerRatio,n.proposedAmount=this.dtdDataPoint.employerUpsellTotal,n.proposedAmountBeforeFeeCovered=this.dtdDataPoint.employerRawMinAmount,n.isAlreadyPaidAmountNotMatched=this.isAlreadyPaidAmountNotMatched()}))}acceptUpsell(){return(0,l.sH)(this,void 0,void 0,(function*(){this.checkoutState.doubleTheDonation.setUpsellAccepted(),this.checkoutState.donation.setAmount(this.dtdDataPoint.employerUpsellAmount),yield this.leave()}))}resetEmployerDTD(){this.checkoutState.doubleTheDonation.resetEmployerData(),this.produceViewState((e=>{e.showDTDDescription=!0,e.showDTDUpsell=!1,e.showSkipButton=!0,e.showEmployerMatchedBlock=!1,e.buttonType=l_(e.showDTDUpsell),e.isAlreadyPaidAmountNotMatched=this.isAlreadyPaidAmountNotMatched()}))}isAlreadyPaidAmountNotMatched(){return!this.checkoutService.checkoutConfiguration.infrastructureParams.showcase&&this.checkoutService.isPaid&&this.dtdDataPoint.employerMinAmount>this.dtdDataPoint.dtdInitialTotal}getInitialViewState(){return{locked:!1,showDTDDescription:!0,showEmployerMatchedBlock:!1,employer:{name:""},showDTDUpsell:!1,showDTDUpsellExperiment:!1,minimumMatchedAmount:0,DTDUpsellDoubledAmount:0,DTDDoubledAmount:0,currency:"USD",upsellTotal:0,showSkipButton:!0,total:0,processingState:La.IDLE,companies:[],buttonType:xp.CONTINUE,isFeeCovered:!1,matchingPromisedAmount:0,matchingRatio:[1,1],proposedAmount:0,proposedAmountBeforeFeeCovered:0,isIntegrationEnabled:!1,frequency:se.ONCE,formattedTotal:"",formattedUpsellTotal:"",declineButtonLabel:"",changeAmountButtonLabel:"",noChangeAmountButtonLabel:"",isAlreadyPaidAmountNotMatched:!1,payErrorMessage:"",additionalPayErrorMessage:""}}setProcessingState(e){this.produceViewState((t=>{t.processingState=e}))}resetDtd(){this.dtdDataPoint.isUpsellAccepted&&this.checkoutState.donation.setAmount(this.dtdDataPoint.snapshot.dtdInitialAmount),this.checkoutState.doubleTheDonation.resetState()}}class d_ extends sb{constructor(e){super(e),this.paymentService=e.paymentService,this.donationDataPoint=e.donationDataPoint}beforeEnter(){return(0,l.sH)(this,void 0,void 0,(function*(){this.produceViewState((e=>{var t;e.isPaymentScreen=this.isPaymentScreen,e.formattedAmount=this.intl.formatCurrency(null!==(t=this.donationDataPoint.total)&&void 0!==t?t:0,{currency:this.donationDataPoint.currency,display:"floatcents"}),e.frequency=this.donationDataPoint.frequency}))}))}beforeLeave(e){return(0,l.sH)(this,void 0,void 0,(function*(){if(this.pending)return!1;if(this.pending=!0,this.setProcessingState(La.PENDING),!(yield this.paymentService.startSepaFlow()))return this.produceViewState((e=>{e.shakeKey+=1,e.processingState=La.IDLE})),this.pending=!1,!1;const e=yield this.checkoutService.hold();return Yt.isFailure(e)?(this.pending=!1,yield this.showError(),!1):this.isPaymentScreen?this.pay():(this.pending=!1,!0)}))}initiateSepa(e,t){return(0,l.sH)(this,void 0,void 0,(function*(){return this.paymentService.initiateSepa(e,t)}))}recalculatePaymentScreen(){this.produceViewState((e=>{e.isPaymentScreen=this.isPaymentScreen}))}getInitialViewState(){return{processingState:La.IDLE,shakeKey:0,locked:!1,isPaymentScreen:!1,formattedAmount:"",frequency:se.ONCE}}get isPaymentScreen(){return this.name===this.checkoutService.getPaymentScreen(this.name,this.flow.getHistoricalScreens())}pay(){return(0,l.sH)(this,void 0,void 0,(function*(){const e=yield this.checkoutService.pay({screen:this.name,predictedNextScreen:this.flow.predictNextScreen()});return Yt.isFailure(e)?e.failureResult.shouldLeave?(this.pending=!1,!0):(this.pending=!1,yield this.showError(),!1):(this.setProcessingState(La.SUCCESS),yield Da(this.checkoutService.checkoutConfiguration.successPaymentDelayBeforeLeave),this.pending=!1,!0)}))}showError(){return(0,l.sH)(this,void 0,void 0,(function*(){this.produceViewState((e=>{e.processingState=La.ERROR,e.payErrorMessage=this.checkoutService.payErrorMessage||this.intl.translate("common.errorOccurredText")})),this.produceViewState((e=>{e.payErrorMessage=""}),!0)}))}setProcessingState(e){this.produceViewState((t=>{t.processingState=e}))}}class h_ extends sb{constructor(e){super(e),this.donationDataPoint=e.donationDataPoint,this.giftAidDataPoint=e.giftAidDataPoint}beforeEnter(){return(0,l.sH)(this,void 0,void 0,(function*(){this.checkoutState.giftAid.reject(),this.produceViewState((e=>{var t;e.formattedAmount=this.intl.formatCurrency(null!==(t=this.donationDataPoint.total)&&void 0!==t?t:0,{currency:this.donationDataPoint.currency,display:"floatcents"}),e.frequency=this.donationDataPoint.frequency,e.legalText=this.giftAidDataPoint.legalText}))}))}beforeLeave(e){return(0,l.sH)(this,void 0,void 0,(function*(){if(this.pending)return!1;if(this.pending=!0,this.checkoutService.updateSession(),!this.isPaymentScreen)return this.pending=!1,!0;this.produceViewState((e=>{e.processingState=La.PENDING}));const e=yield this.checkoutService.pay({screen:this.name,predictedNextScreen:this.flow.predictNextScreen()});return Yt.isSuccess(e)||e.failureResult.shouldLeave?(this.pending=!1,!0):(this.produceViewState((e=>{e.payErrorMessage=this.checkoutService.payErrorMessage,e.processingState=La.ERROR})),this.pending=!1,!1)}))}changeGiftAid(e){e?this.checkoutState.giftAid.accept():this.checkoutState.giftAid.reject()}setShown(){this.checkoutState.giftAid.setShowed()}getInitialViewState(){return{locked:!1,showcase:this.checkoutService.checkoutConfiguration.infrastructureParams.showcase,formattedAmount:"",frequency:se.MONTHLY,legalText:"",processingState:La.IDLE}}get isPaymentScreen(){return this.name===this.checkoutService.getPaymentScreen(this.name,this.flow.getHistoricalScreens())}}class m_ extends sb{constructor(e){super(e),this.paymentService=e.paymentService,this.donationDataPoint=e.donationDataPoint,this.donorNameDataPoint=e.donorNameDataPoint,this.donorEmailDataPoint=e.donorEmailDataPoint}get showNextStepOverview(){return this.viewState.processingState!==La.SUCCESS}back(){return(0,l.sH)(this,void 0,void 0,(function*(){const e=this.checkoutService.canGoBack;if(this.flow.canGoBack&&e)return(yield this.withPending((()=>this.paymentService.isIDEALPaid())))?this.leave():this.flow.prev()}))}beforeEnter(){return(0,l.sH)(this,void 0,void 0,(function*(){this.produceViewState((e=>{var t;e.email=this.donorEmailDataPoint.email,e.name=this.donorNameDataPoint.fullName,e.formattedAmount=this.intl.formatCurrency(null!==(t=this.donationDataPoint.total)&&void 0!==t?t:0,{currency:this.donationDataPoint.currency,display:"floatcents"}),e.frequency=this.donationDataPoint.frequency,e.isSubscription=this.donationDataPoint.isRecurring}))}))}beforeLeave(e){return(0,l.sH)(this,void 0,void 0,(function*(){if(this.pending)return!1;this.pending=!0,this.setProcessingState(La.PENDING),this.produceViewState((e=>{e.showReturnBankInfo=!0})),this.paymentService.openIDEALConfirmationWindow({onClose:()=>{this.produceViewState((e=>{e.showReturnBankInfo=!1}))}});const e=yield this.checkoutService.pay({screen:this.name,predictedNextScreen:this.flow.predictNextScreen()});return Yt.isSuccess(e)?(this.setProcessingState(La.SUCCESS),yield Da(this.checkoutService.checkoutConfiguration.successPaymentDelayBeforeLeave),this.pending=!1,!0):e.failureResult.shouldLeave?(this.pending=!1,!0):(this.setProcessingState(La.ERROR),this.pending=!1,!1)}))}returnToBankWindow(){this.paymentService.focusIDEALConfirmationWindow()}getInitialViewState(){return{locked:!1,email:"",name:"",processingState:La.IDLE,formattedAmount:"",frequency:se.ONCE,isSubscription:!1,errorMessage:"",showReturnBankInfo:!1}}setProcessingState(e){return e===La.ERROR&&this.produceViewState((e=>{e.errorMessage=this.checkoutService.payErrorMessage})),this.produceViewState((t=>{t.processingState=e})),this}}var p_;!function(e){e.DEFAULT="default",e.LPO="lpo"}(p_||(p_={}));const g_=[u._h.APPLE_PAY,u._h.CARD,u._h.PAYPAL,u._h.GOOGLE_PAY,u._h.VENMO,u._h.US_BANK_ACCOUNT,u._h.UK_BACS,u._h.AU_BECS,u._h.ACSS,u._h.SEPA,u._h.IDEAL];function y_(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=0,i=0;for(const s of e)if(n++,s.visible&&i++,i===t)return n;return-1}class f_{constructor(e){this.paymentMethodSorterParams=e}sort(e){var t,n;const i=Object.entries(e).map((e=>{let[t,n]=e;return{paymentMethod:t,available:n.available,visible:n.visible}})),s=this.getDefaultSortedPaymentMethods(),a=i.sort(((e,t)=>(s.includes(e.paymentMethod)?s.indexOf(e.paymentMethod):1/0)-(s.includes(t.paymentMethod)?s.indexOf(t.paymentMethod):1/0)));if((null===(t=this.paymentMethodSorterParams)||void 0===t?void 0:t.specificCompanyCountry)===u.tg.NETHERLANDS){const e=y_(a,1),t=a.findIndex((e=>e.paymentMethod===u._h.IDEAL)),n=a[t];a.splice(t,1),a.splice(e,0,n)}if((null===(n=this.paymentMethodSorterParams)||void 0===n?void 0:n.specificCompanyCountry)===u.tg.UNITED_KINGDOM){const e=a.findIndex((e=>e.paymentMethod===u._h.UK_BACS)),t=y_(a,1),n=a[e];a.splice(e,1),a.splice(t,0,n)}return a}getDefaultSortedPaymentMethods(){return g_}}class S_{constructor(e){this.checkoutConfiguration=e,this._paymentMethodSorter=null}get paymentMethodSorter(){return this._paymentMethodSorter||(this._paymentMethodSorter=new f_({specificCompanyCountry:this.checkoutConfiguration.company.country})),this._paymentMethodSorter}getPaymentButtons(e,t,n){const i={available:[],visible:[]};return this.paymentMethodSorter.sort(e).forEach((e=>{let{paymentMethod:t,available:n,visible:s}=e;if(t===u._h.APPLE_PAY&&n&&(i.available.push(jg.APPLE_PAY),s&&i.visible.push(jg.APPLE_PAY)),t===u._h.CARD&&n&&(i.available.push(jg.CARD),s&&i.visible.push(jg.CARD)),t===u._h.PAYPAL&&n&&(i.available.push(jg.PAYPAL),s&&i.visible.push(jg.PAYPAL)),t===u._h.GOOGLE_PAY&&n&&(i.available.push(jg.GOOGLE_PAY),s&&i.visible.push(jg.GOOGLE_PAY)),t===u._h.VENMO&&n&&(i.available.push(jg.VENMO),s&&i.visible.push(jg.VENMO)),t===u._h.US_BANK_ACCOUNT&&n){const e=this.checkoutConfiguration.company.stripe.usBankAccount.verification,t=Tv(e)||Pv(e),n=Ov(e);t?(i.available.push(jg.US_BANK_ACCOUNT_INSTANT),s&&i.visible.push(jg.US_BANK_ACCOUNT_INSTANT)):n?(i.available.push(jg.US_BANK_ACCOUNT),s&&i.visible.push(jg.US_BANK_ACCOUNT)):(i.available.push(jg.US_BANK_ACCOUNT_VERIFICATION),s&&i.visible.push(jg.US_BANK_ACCOUNT_VERIFICATION))}t===u._h.UK_BACS&&n&&(i.available.push(jg.UK_BACS),s&&i.visible.push(jg.UK_BACS)),t===u._h.AU_BECS&&n&&(i.available.push(jg.AU_BECS),s&&i.visible.push(jg.AU_BECS)),t===u._h.ACSS&&n&&(i.available.push(jg.ACSS),s&&i.visible.push(jg.ACSS)),t===u._h.SEPA&&n&&(i.available.push(jg.SEPA),s&&i.visible.push(jg.SEPA)),t===u._h.IDEAL&&n&&(i.available.push(jg.IDEAL),s&&i.visible.push(jg.IDEAL))})),t&&this.addAmazonPayExperimentButton(i,null!=n&&n),i}addAmazonPayExperimentButton(e,t){if(t){const t=e.available.includes(jg.APPLE_PAY)?3:2;e.available.splice(t,0,jg.AMAZON_PAY),e.visible.splice(t,0,jg.AMAZON_PAY)}else{const t=[jg.APPLE_PAY,jg.CARD,jg.PAYPAL,jg.GOOGLE_PAY,jg.VENMO];this.checkoutConfiguration.company.country===u.tg.NETHERLANDS&&t.push(jg.IDEAL),this.checkoutConfiguration.company.country===u.tg.UNITED_KINGDOM&&t.push(jg.UK_BACS);let n=-1;for(let i=0;i<e.available.length;i++)t.includes(e.available[i])&&(n=i);let i=-1;for(let n=0;n<e.visible.length;n++)t.includes(e.visible[n])&&(i=n);-1!==n&&e.available.splice(n+1,0,jg.AMAZON_PAY),-1!==i&&e.visible.splice(i+1,0,jg.AMAZON_PAY)}}}class A_ extends sb{constructor(e){super(e),this.frequency=se.ONCE,this._paymentOptionsViewService=null,this.paymentService=e.paymentService,this.donationDataPoint=e.donationDataPoint,this.paymentOptionsDataPoint=e.paymentOptionsDataPoint,this.mailingAddressDataPoint=e.mailingAddressDataPoint}beforeEnter(){return(0,l.sH)(this,void 0,void 0,(function*(){this.handleErrors(),this.tryStartAmazonPayExperiment(),this.syncPaymentButtons(),this.initializePaymentOptions(),this.checkoutService.exposeSmartCoveringFeeExperimentV2(),this.exposeAmazonPayCheckoutExperiment(),this.checkoutService.updateSession(),this.resetPaymentOptions(),this.produceViewState((e=>{e.isInited=!0,e.currency=this.donationDataPoint.currency,e.currencySymbol=this.donationDataPoint.currencySymbol,e.defaultCurrency=this.donationDataPoint.defaultCurrency,e.amount=this.donationDataPoint.amount||(this.isShowcase?1e4:0),e.frequency=this.donationDataPoint.frequency,e.total=!this.donationDataPoint.amount&&this.isShowcase?10600:this.donationDataPoint.total,e.processingFee=!this.donationDataPoint.amount&&this.isShowcase?600:this.donationDataPoint.fee,e.isFeeCovered=this.donationDataPoint.isFeeCovered,e.includeFees=this.donationDataPoint.includeFees,e.showIncludeFee=this.isIncludeFeesSectionVisible(this.donationDataPoint.includeFees),e.prefixCurrencySymbol=this.intl.formatSymbol(this.donationDataPoint.currencySymbol,Ye.PREFIX),e.postfixCurrencySymbol=this.intl.formatSymbol(this.donationDataPoint.currencySymbol,Ye.POSTFIX),e.isRecurring=this.donationDataPoint.isRecurring,e.recurringLabel=this.recurringLabel,e.isPaymentScreen=this.isPaymentScreen,e.experiments.paymentOptionScreenVersion=this.calcPaymentOptionScreenVersion()}))}))}beforeLeave(){return(0,l.sH)(this,void 0,void 0,(function*(){return this.checkoutService.updateSession(),this.isPaymentScreen?this.pay():(this.unlock(),!0)}))}choosePaymentOption(e,t){return(0,l.sH)(this,void 0,void 0,(function*(){if(!this.pending){switch(this.lock(),this.checkoutState.paymentOptions.setPaymentMethod(null),this.checkoutState.paymentOptions.setPaymentOption(e),e){case jg.CARD:if(this.checkoutState.paymentOptions.setPaymentMethod(u._h.CARD),this.paymentOptionsDataPoint.preSelectedPaymentOption===jg.CARD){if(this.produceViewState((e=>{e.processingCardState=La.PENDING})),yield this.startCreditCard(),this.viewState.processingCardState===La.ERROR)return;return void this.produceViewState((e=>{e.processingCardState=La.IDLE}))}break;case jg.GOOGLE_PAY:return this.isShowcase?void this.unlock():(this.checkoutState.paymentOptions.setPaymentMethod(u._h.GOOGLE_PAY),void(yield this.startGooglePay()));case jg.APPLE_PAY:return this.isShowcase?void this.unlock():(this.checkoutState.paymentOptions.setPaymentMethod(u._h.APPLE_PAY),void(yield this.startApplePay()));case jg.UK_BACS:this.checkoutState.paymentOptions.setPaymentMethod(u._h.UK_BACS);break;case jg.AU_BECS:this.checkoutState.paymentOptions.setPaymentMethod(u._h.AU_BECS);break;case jg.ACSS:return this.isShowcase?void this.unlock():(this.checkoutState.paymentOptions.setPaymentMethod(u._h.ACSS),this.produceViewState((e=>{e.processingACSSState=La.PENDING})),yield this.paymentService.initiateACSS({onPopupOpen:null==t?void 0:t.onModalShow,onPopupClose:null==t?void 0:t.onModalHide}),yield this.startACSS(),void this.produceViewState((e=>{e.processingACSSState=La.IDLE})));case jg.US_BANK_ACCOUNT:return this.checkoutState.paymentOptions.setPaymentMethod(u._h.US_BANK_ACCOUNT),this.checkoutState.paymentOptions.setPaymentOption(jg.US_BANK_ACCOUNT),this.produceViewState((e=>{e.processingUSBankAccountState=La.PENDING})),yield this.paymentService.initiateUSBankAccount({}),this.produceViewState((e=>{e.processingUSBankAccountState=La.IDLE})),this.unlock(),this.leave();case jg.US_BANK_ACCOUNT_VERIFICATION:return this.checkoutState.paymentOptions.setPaymentMethod(u._h.US_BANK_ACCOUNT),this.checkoutState.paymentOptions.setPaymentOption(jg.US_BANK_ACCOUNT_VERIFICATION),this.produceViewState((e=>{e.processingUSBankAccountState=La.PENDING})),yield this.paymentService.initiateUSBankAccount({}),this.produceViewState((e=>{e.processingUSBankAccountState=La.IDLE})),this.unlock(),this.leave();case jg.US_BANK_ACCOUNT_INSTANT:return this.checkoutState.paymentOptions.setPaymentMethod(u._h.US_BANK_ACCOUNT),this.checkoutState.paymentOptions.setPaymentOption(jg.US_BANK_ACCOUNT_INSTANT),this.produceViewState((e=>{e.processingUSBankAccountState=La.PENDING})),yield this.paymentService.initiateUSBankAccount({onPopupOpen:null==t?void 0:t.onModalShow,onPopupClose:null==t?void 0:t.onModalHide}),this.startUSBankAccount(jg.US_BANK_ACCOUNT_INSTANT);case jg.PAYPAL:throw new Error("Paypal method can not be chosen");case jg.VENMO:throw new Error("Venmo method can not be chosen");case jg.SEPA:this.checkoutState.paymentOptions.setPaymentMethod(u._h.SEPA);break;case jg.IDEAL:return this.checkoutState.paymentOptions.setPaymentMethod(u._h.IDEAL),this.produceViewState((e=>{e.processingIdealState=La.PENDING})),this.startIDEAL();case jg.AMAZON_PAY:return this.setAmazonPayChoosen(!0),this.checkoutState.paymentOptions.setPaymentOption(null),void this.unlock();default:throw new F(e)}return this.unlock(),this.leave()}}))}isAmazonPayChoosen(){return this.amazonPayCampaignPagesExperiment.amazonPayChoosen}changePaymentOption(e,t){this.produceViewState((n=>{n.visiblePaymentOptions=e,n.hiddenPaymentOptions=t}),!0)}changeCardFilledFields(e,t){this.produceViewState((n=>{n.cardFilledFields[e]=t}),!0)}initiateCreditCard(e){return this.paymentService.initiateCreditCard(e)}startIDEAL(){return(0,l.sH)(this,void 0,void 0,(function*(){yield this.paymentService.initiateIDEAL();const e=yield this.checkoutService.hold();this.unlock(),Yt.isSuccess(e)?yield this.leave():(this.showError({option:jg.IDEAL,message:this.checkoutService.payErrorMessage||this.intl.translate("common.errorOccurredText")}),this.produceViewState((e=>{e.processingACSSState=La.IDLE})))}))}startCreditCard(){return(0,l.sH)(this,void 0,void 0,(function*(){if(!(yield this.paymentService.startCreditCardFlow()))return this.resetPaymentOptions(),this.unlock(),void this.produceViewState((e=>{e.shakeKey+=1}));const e=yield this.checkoutService.hold();if(Yt.isFailure(e))return this.resetPaymentOptions(),this.unlock(),void this.showError({title:this.intl.translate("creditCardScreen.cardError.title"),message:this.checkoutService.payErrorMessage||this.intl.translate("common.errorOccurredText"),option:jg.CARD});yield this.leave()}))}initiateVenmo(e){return(0,l.sH)(this,arguments,void 0,(function*(e){let{element:t,onClick:n,onHide:i}=e;yield this.paymentService.initiateVenmo({element:t,holdDone:()=>{null==i||i(),this.leave()},onFail:e=>{null==i||i(),this.resetPaymentOptions(),this.unlock(),this.showError({message:e.message||this.intl.translate("common.errorOccurredText"),option:jg.VENMO})},onCancel:()=>{this.resetPaymentOptions(),this.unlock(),null==i||i()},onButtonClick:()=>{this.lock(),this.checkoutState.paymentOptions.setPaymentOption(null),null==n||n()}}),this.syncButtonsAvailability(),this.syncPreSelectedPaymentOption()}))}closePaypalButton(){return this.paymentService.closePaypalButton()}closeVenmoButton(){return this.paymentService.closeVenmoButton()}initiatePaypal(e){let{element:t,buttonColor:n,onClick:i,onHide:s}=e;return this.paymentService.initiatePaypal({element:t,buttonColor:n,holdDone:()=>{null==s||s(),this.leave()},onFail:e=>{null==s||s(),this.resetPaymentOptions(),this.unlock(),this.showError({message:e.message||this.intl.translate("common.errorOccurredText"),option:jg.PAYPAL})},onCancel:()=>{this.resetPaymentOptions(),this.unlock(),null==s||s()},onButtonClick:()=>{this.lock(),this.checkoutState.paymentOptions.setPaymentOption(null),null==i||i()}})}togglePaypalActions(e){return(0,l.sH)(this,void 0,void 0,(function*(){yield this.paymentService.togglePaypalActions(e)}))}startGooglePay(){return(0,l.sH)(this,void 0,void 0,(function*(){const e=yield this.paymentService.startGooglePay();if(this.unlock(),Yt.isSuccess(e))return void(yield this.leave());this.resetPaymentOptions();const t=e.failureResult.message;t&&this.showError({message:t,option:jg.GOOGLE_PAY})}))}startApplePay(){return(0,l.sH)(this,void 0,void 0,(function*(){const e=yield this.paymentService.startApplePay();if(this.unlock(),Yt.isSuccess(e))return void(yield this.leave());this.resetPaymentOptions();const t=e.failureResult.message;t&&this.showError({message:t,option:jg.APPLE_PAY})}))}startACSS(){return(0,l.sH)(this,void 0,void 0,(function*(){const e=yield this.paymentService.startACSS();if(this.unlock(),Yt.isSuccess(e))return void(yield this.leave());this.resetPaymentOptions();const t=e.failureResult.message;t&&this.showError({message:t,option:jg.ACSS})}))}startUSBankAccount(e){return(0,l.sH)(this,void 0,void 0,(function*(){const t=yield this.paymentService.startUSBankAccount();if(this.unlock(),Yt.isSuccess(t))return void(yield this.leave());this.resetPaymentOptions();const n=t.failureResult.message;n?this.showError({message:n,option:e}):this.produceViewState((e=>{e.processingUSBankAccountState=La.IDLE}))}))}toggleFeeCovered(){this.checkoutState.donation.setFeeCovered(!this.donationDataPoint.isFeeCovered,{isCustomFeeCoveredValue:!0}),this.produceViewState((e=>{e.isFeeCovered=this.donationDataPoint.isFeeCovered,e.total=this.donationDataPoint.total})),this.syncButtonsAvailability(),this.syncPreSelectedPaymentOption()}setPreSelectedPaymentOption(e){this.checkoutState.paymentOptions.setPreSelectedPaymentOption(e),this.produceViewState((t=>{t.preSelectedPaymentOption=e}))}syncPaymentButtons(){this.syncButtonsAvailability(),this.tryStartLessPaymentOptionsCampaignPagesExperiment(),this.syncPreSelectedPaymentOption()}getFrequency(){return this.donationDataPoint.frequency}getCurrency(){return this.donationDataPoint.currency}getInitialViewState(){return{isInited:!1,showIncludeFee:!0,livemode:this.isLivemode,showTestModeTooltipInfo:this.showTestModeTooltipInfo,isStripeAccountConnected:this.isStripeAccountConnected,stripeElementsAvailable:this.isStripeElementsAvailable,amount:0,currency:"USD",currencySymbol:"$",prefixCurrencySymbol:"",postfixCurrencySymbol:"",allowCentsForCharges:this.checkoutService.company.allowCentsForCharges,frequency:se.ONCE,includeFees:u.XN.DEFAULT_YES,processingFee:0,total:0,defaultCurrency:"USD",isFeeCovered:!1,availableOptions:[],visiblePaymentOptions:[],hiddenPaymentOptions:[],buttonOptions:Object.fromEntries(Object.values(jg).map((e=>[e,{visible:!1}]))),locked:!1,processingACSSState:La.IDLE,processingUSBankAccountState:La.IDLE,processingCardState:La.IDLE,processingIdealState:La.IDLE,shakeKey:0,cardFilledFields:{[Fa.CARD_NUMBER]:!1,[Fa.CARD_EXPIRY]:!1,[Fa.CARD_CVC]:!1},isRecurring:!0,recurringLabel:"",isPaymentScreen:!1,preSelectedPaymentOption:null,experiments:{paymentOptionScreenVersion:p_.DEFAULT}}}get recurringLabel(){return function(e,t){switch(t){case se.DAILY:return e.translate("paymentMethodScreen.perDay");case se.WEEKLY:return e.translate("paymentMethodScreen.perWeek");case se.BIWEEKLY:return e.translate("paymentMethodScreen.per2Weeks");case se.EVERY_4_WEEKS:return e.translate("paymentMethodScreen.per4Weeks");case se.MONTHLY:return e.translate("paymentMethodScreen.perMonth");case se.BIMONTHLY:return e.translate("paymentMethodScreen.per2Months");case se.QUARTERLY:return e.translate("paymentMethodScreen.perQuarter");case se.SEMIANNUAL:return e.translate("paymentMethodScreen.per6Months");case se.ANNUAL:return e.translate("paymentMethodScreen.perYear");default:return""}}(this.intl,this.donationDataPoint.frequency)}get isShowcase(){return this.checkoutService.checkoutConfiguration.infrastructureParams.showcase}get isLivemode(){return this.checkoutService.checkoutConfiguration.infrastructureParams.livemode}get showTestModeTooltipInfo(){return!this.isShowcase&&!this.isLivemode}get isStripeAccountConnected(){return!!this.checkoutService.checkoutConfiguration.company.stripeAccount}get isStripeElementsAvailable(){return this.checkoutService.checkoutConfiguration.infrastructureParams.env!==u.hY.PRODUCTION||this.checkoutService.checkoutConfiguration.infrastructureParams.isSSLEnabled}get isPaymentScreen(){const e=this.checkoutService.getState().paymentOptions;return this.checkoutService.isReadyToRetryPay&&e.clientPaymentMethod===u._h.CARD&&e.preSelectedPaymentOption===jg.CARD||this.name===this.checkoutService.getPaymentScreen(this.name,this.flow.getHistoricalScreens())}get lessPaymentOptionsCampaignPagesExperiment(){return this.experiments.get(cn.LESS_PAYMENT_OPTIONS_CAMPAIGN_PAGES_EXPERIMENT)}get amazonPayCheckoutExperiment(){return this.experiments.get(cn.AMAZON_PAY_CHECKOUT_EXPERIMENT)}get amazonPayCampaignPagesExperiment(){return this.experiments.get(cn.AMAZON_PAY_CAMPAIGN_PAGES_EXPERIMENT)}get availableVisiblePaymentOptions(){return this.viewState.availableOptions.filter((e=>this.viewState.buttonOptions[e].visible))}get paymentOptionsViewService(){return this._paymentOptionsViewService||(this._paymentOptionsViewService=new S_(this.checkoutService.checkoutConfiguration)),this._paymentOptionsViewService}calcPaymentOptionScreenVersion(){return this.isLessPaymentOptionsCampaignPagesExperimentEnabled()?p_.LPO:p_.DEFAULT}pay(){return(0,l.sH)(this,void 0,void 0,(function*(){this.setPaymentLoader();const e=yield this.checkoutService.pay({screen:this.name,predictedNextScreen:this.flow.predictNextScreen()});if(Yt.isFailure(e)){if(this.removePaymentLoader(),this.unlock(),e.failureResult.shouldLeave)return!0;const t=(()=>{switch(!0){case!!this.paymentOptionsDataPoint.selectedPaymentOption:return this.paymentOptionsDataPoint.selectedPaymentOption;case this.paymentOptionsDataPoint.clientPaymentMethod===u._h.PAYPAL:return jg.PAYPAL;case this.paymentOptionsDataPoint.clientPaymentMethod===u._h.VENMO:return jg.VENMO;default:return null}})();return t&&this.showError({title:this.checkoutService.payErrorTitle,message:this.checkoutService.payErrorMessage||this.intl.translate("common.errorOccurredText"),option:t}),!1}return this.produceViewState((e=>{e.processingCardState=La.SUCCESS})),this.checkoutService.checkoutConfiguration.successPaymentDelayBeforeLeave?yield Da(this.checkoutService.checkoutConfiguration.successPaymentDelayBeforeLeave):this.removePaymentLoader(),this.unlock(),!0}))}resetPaymentOptions(){this.setAmazonPayChoosen(!1),this.checkoutState.paymentOptions.setPaymentMethod(null),this.checkoutState.paymentOptions.setPaymentOption(null)}syncButtonsAvailability(){const e=this.paymentOptionsViewService.getPaymentButtons(this.paymentOptionsDataPoint.allowedPaymentMethods,this.isAmazonPayExperimentEnabled(),this.isAmazonPaySpecialSortingEnabled());this.produceViewState((t=>{const n=e.available;Zf()(t.availableOptions,n)||(t.availableOptions=n);for(const[n,i]of Object.entries(t.buttonOptions))i.visible=e.visible.some((e=>e===n))}))}syncPreSelectedPaymentOption(){var e;if(this.checkoutService.checkoutConfiguration.checkoutType!==Se.MODAL&&!this.isLessPaymentOptionsCampaignPagesExperimentEnabled())return;const t=this.availableVisiblePaymentOptions;null!==this.paymentOptionsDataPoint.preSelectedPaymentOption&&t.includes(this.paymentOptionsDataPoint.preSelectedPaymentOption)?this.setPreSelectedPaymentOption(this.paymentOptionsDataPoint.preSelectedPaymentOption):this.setPreSelectedPaymentOption(null!==(e=t[0])&&void 0!==e?e:null)}isLessPaymentOptionsCampaignPagesExperimentEnabled(){return this.lessPaymentOptionsCampaignPagesExperiment.isTestGroup()}showError(e){let{title:t,message:n,option:i}=e;this.produceViewState((e=>{i!==jg.US_BANK_ACCOUNT_INSTANT&&i!==jg.US_BANK_ACCOUNT_VERIFICATION&&i!==jg.US_BANK_ACCOUNT||(e.processingUSBankAccountState=La.ERROR),i===jg.CARD&&(e.processingCardState=La.ERROR),i===jg.IDEAL&&(e.processingIdealState=La.ERROR),e.buttonOptions[i].errorTitle=t,e.buttonOptions[i].error=n})),window.setTimeout((()=>{this.produceViewState((e=>{i!==jg.US_BANK_ACCOUNT_INSTANT&&i!==jg.US_BANK_ACCOUNT_VERIFICATION&&i!==jg.US_BANK_ACCOUNT||(e.processingUSBankAccountState=La.IDLE),i===jg.CARD&&(e.processingCardState=La.IDLE),i===jg.IDEAL&&(e.processingIdealState=La.IDLE),e.buttonOptions[i].errorTitle=void 0,e.buttonOptions[i].error=void 0}))}),5e3)}isIncludeFeesSectionVisible(e){return[u.XN.DEFAULT_YES,u.XN.DEFAULT_NO,u.XN.SMART_COVERING].includes(e)}lock(){this.togglePaypalActions(!1),this.pending=!0}unlock(){this.togglePaypalActions(!0),this.pending=!1}setPaymentLoader(){this.paymentOptionsDataPoint.selectedPaymentOption!==jg.CARD&&(this.checkoutService.checkoutUIState.showPaymentLoader=!0),this.checkoutService.syncUpdateCheckoutState()}removePaymentLoader(){this.checkoutService.checkoutUIState.showPaymentLoader=!1,this.checkoutService.syncUpdateCheckoutState()}handleErrors(){const e=this.checkoutService.getState().paymentOptions,t=this.checkoutService.getState().paymentErrors;e.clientPaymentMethod===u._h.US_BANK_ACCOUNT&&(t[u._h.US_BANK_ACCOUNT]&&e.selectedPaymentOption&&this.showError({message:this.checkoutService.payErrorMessage||this.intl.translate("common.errorOccurredText"),option:e.selectedPaymentOption}),this.checkoutService.setPaymentError(u._h.US_BANK_ACCOUNT,!1)),t[u._h.PAYPAL]&&e.clientPaymentMethod===u._h.PAYPAL&&(this.showError({message:this.intl.translate("common.errorOccurredText"),option:jg.PAYPAL}),this.checkoutService.setPaymentError(u._h.PAYPAL,!1)),t[u._h.CARD]&&e.clientPaymentMethod===u._h.CARD&&e.preSelectedPaymentOption===jg.CARD&&(this.showError({title:this.intl.translate("creditCardScreen.cardError.title"),message:this.checkoutService.payErrorMessage||this.intl.translate("creditCardScreen.cardError.message"),option:jg.CARD}),this.checkoutService.setPaymentError(u._h.CARD,!1))}tryStartLessPaymentOptionsCampaignPagesExperiment(){this.lessPaymentOptionsCampaignPagesExperiment.tryStart()}setAmazonPayChoosen(e){this.amazonPayCampaignPagesExperiment.amazonPayChoosen=e}tryStartAmazonPayExperiment(){const e=this.amazonPayExperimentParams();this.amazonPayCampaignPagesExperiment.tryStart(e),this.amazonPayCheckoutExperiment.tryStart(e)}exposeAmazonPayCheckoutExperiment(){this.amazonPayCheckoutExperiment.exposure(),this.amazonPayCampaignPagesExperiment.exposure()}isAmazonPayExperimentEnabled(){return this.amazonPayCheckoutExperiment.isEnabled(this.amazonPayExperimentParams())||this.amazonPayCampaignPagesExperiment.isEnabled(this.amazonPayExperimentParams())}amazonPayExperimentParams(){return{donationCurrency:this.donationDataPoint.currency,locale:this.intl.locale}}isAmazonPaySpecialSortingEnabled(){return!!this.amazonPayCheckoutExperiment.isEnabled(this.amazonPayExperimentParams())||!(!this.amazonPayCampaignPagesExperiment.isEnabled(this.amazonPayExperimentParams())||!this.isLessPaymentOptionsCampaignPagesExperimentEnabled())}initializePaymentOptions(){return(0,l.sH)(this,void 0,void 0,(function*(){yield this.paymentService.ensurePaymentMethodsInitialized(),this.syncPaymentButtons(),this.lessPaymentOptionsCampaignPagesExperiment.exposure()}))}}class E_ extends sb{constructor(e){super(e),this.donationDataPoint=e.donationDataPoint,this.donorNameDataPoint=e.donorNameDataPoint,this.postDonationUpsellDataPoint=e.postDonationUpsellDataPoint,this.suggestionsService=e.suggestionsService}get periodLabel(){return this.recurringTypes[this.viewState.period]}get thankYouTitle(){return this.intl.translate("common.thankYouTitle",{name:this.checkoutService.checkoutConfiguration.infrastructureParams.showcase?"John":this.donorNameDataPoint.firstName})}get description(){return this.intl.translate("postDonationUpsellScreen.title",{amount:this.intl.formatCurrency(this.viewState.total,{currency:this.viewState.currency,display:"fulltrimzeroes"})})}beforeEnter(){return(0,l.sH)(this,void 0,void 0,(function*(){this.tryStartCollectDatasetPostDonationUpsellAmountExperimentV3(),this.tryToApplyCollectDatasetPostDonationUpsellAmountExperimentV3(),this.produceViewState((e=>{e.total=this.donationDataPoint.total,e.currency=this.donationDataPoint.currency,e.recurringMinAmount=this.postDonationUpsellDataPoint.upsellMinAmount,e.upsellMaxAmount=this.postDonationUpsellDataPoint.upsellMaxAmount,e.amount=this.postDonationUpsellDataPoint.upsellAmount,e.amountInUSD=this.postDonationUpsellDataPoint.upsellAmountInUSD,e.startDate=this.postDonationUpsellDataPoint.upsellStartDate})),this.exposureSmartPostDonationUpsellExperimentV2()}))}makeAmountInputVisible(){this.produceViewState((e=>{e.showAmountInput=!0}))}changeAmount(e){this.checkoutState.postDonationUpsell.setUpsellCustomAmount(e),this.produceViewState((e=>{e.amount=this.postDonationUpsellDataPoint.upsellAmount,e.amountInUSD=this.postDonationUpsellDataPoint.upsellAmountInUSD})),this.validateAmount()}setShowedInSession(){return(0,l.sH)(this,void 0,void 0,(function*(){this.checkoutService.checkoutConfiguration.infrastructureParams.showcase||(this.checkoutState.postDonationUpsell.setShowed(),yield this.checkoutService.updateSession(),yield this.checkoutService.tryCloseSession())}))}validateAmount(){const e=this.postDonationUpsellDataPoint.validateMinAmount(),t=this.postDonationUpsellDataPoint.validateMaxAmount();this.produceViewState((n=>{n.isAmountValid=e&&t,n.errors.min=!e,n.errors.max=!t}))}isAmountValid(){return(0,l.sH)(this,void 0,void 0,(function*(){return!!this.viewState.isAmountValid||(this.produceViewState((e=>{e.shakeKey+=1})),!1)}))}accept(){return(0,l.sH)(this,void 0,void 0,(function*(){if(this.checkoutService.checkoutConfiguration.infrastructureParams.showcase)return this.leave();if(!this.pending){if(this.pending=!0,yield this.isAmountValid())return(yield this.checkoutService.acceptPostDonationUpsell())?(this.checkoutState.postDonationUpsell.accept(),this.pending=!1,this.leave()):(this.produceViewState((e=>{e.confirmError=!0})),void(this.pending=!1));this.pending=!1}}))}getInitialViewState(){return{locked:!1,total:0,currency:"USD",amount:0,amountInUSD:0,period:se.MONTHLY,showAmountInput:!1,confirmError:!1,recurringMinAmount:0,upsellMaxAmount:0,startDate:(new Date).toString(),isAmountValid:!0,errors:{min:!1,max:!1},shakeKey:0,isShowcase:!1,flowType:this.checkoutService.type}}get recurringTypes(){return{[se.DAILY]:this.intl.translate("widgetSubscriptionPeriodLabel.daily.adverb"),[se.WEEKLY]:this.intl.translate("widgetSubscriptionPeriodLabel.weekly.adverb"),[se.BIWEEKLY]:this.intl.translate("widgetSubscriptionPeriodLabel.biweekly.adverb"),[se.EVERY_4_WEEKS]:this.intl.translate("widgetSubscriptionPeriodLabel.every4weeks.adverb"),[se.MONTHLY]:this.intl.translate("widgetSubscriptionPeriodLabel.monthly.adverb"),[se.BIMONTHLY]:this.intl.translate("widgetSubscriptionPeriodLabel.bimonthly.adverb"),[se.QUARTERLY]:this.intl.translate("widgetSubscriptionPeriodLabel.quarterly.adverb"),[se.SEMIANNUAL]:this.intl.translate("widgetSubscriptionPeriodLabel.semiannual.adverb"),[se.ANNUAL]:this.intl.translate("widgetSubscriptionPeriodLabel.annual.adverb")}}get collectDatasetPostDonationUpsellAmountCheckoutExperimentV3(){return this.experiments.get(cn.COLLECT_DATASET_POST_DONATION_UPSELL_AMOUNT_CHECKOUT_V_3_EXPERIMENT)}get collectDatasetPostDonationUpsellAmountCampaignPagesExperimentV3(){return this.experiments.get(cn.COLLECT_DATASET_POST_DONATION_UPSELL_AMOUNT_CAMPAIGN_PAGES_V_3_EXPERIMENT)}tryStartCollectDatasetPostDonationUpsellAmountExperimentV3(){this.collectDatasetPostDonationUpsellAmountCheckoutExperimentV3.tryStart(),this.collectDatasetPostDonationUpsellAmountCampaignPagesExperimentV3.tryStart()}exposureSmartPostDonationUpsellExperimentV2(){const e=this.experiments.get(cn.SMART_POST_DONATION_UPSELL_CAMPAIGN_PAGES_V_2_EXPERIMENT),t=this.experiments.get(cn.SMART_POST_DONATION_UPSELL_CHECKOUT_V_2_EXPERIMENT);e.exposure(),t.exposure()}tryToApplyCollectDatasetPostDonationUpsellAmountExperimentV3(){let e=null;if(this.collectDatasetPostDonationUpsellAmountCheckoutExperimentV3.active&&(e=this.collectDatasetPostDonationUpsellAmountCheckoutExperimentV3),this.collectDatasetPostDonationUpsellAmountCampaignPagesExperimentV3.active&&(e=this.collectDatasetPostDonationUpsellAmountCampaignPagesExperimentV3),!e||!this.donationDataPoint.amount||!this.suggestionsService)return;e.exposure();const t=e.getCustomAmount({amount:this.donationDataPoint.amount,minAmount:this.postDonationUpsellDataPoint.upsellMinAmount,currency:this.donationDataPoint.currency,suggestionsService:this.suggestionsService});this.checkoutState.postDonationUpsell.setUpsellCustomAmount(t),e.sendPDUAmountStrategyEvent()}}class C_ extends sb{constructor(e){super(e),this.ukBacsDataPoint=e.ukBacsDataPoint}beforeEnter(){return(0,l.sH)(this,void 0,void 0,(function*(){this.produceViewState((e=>{e.accountHolderName=this.ukBacsDataPoint.accountHolderName,e.accountNumber=this.ukBacsDataPoint.accountNumber,e.sortCode=this.ukBacsDataPoint.sortCode,e.termsChecked=this.ukBacsDataPoint.termsAccepted,this.checkoutService.getState().paymentErrors[u._h.UK_BACS]&&(e.shakeKey+=1)})),this.checkoutService.getState().paymentErrors[u._h.UK_BACS]&&this.setProcessingState(La.ERROR),this.checkoutService.setPaymentError(u._h.UK_BACS,!1)}))}beforeLeave(e){return(0,l.sH)(this,void 0,void 0,(function*(){this.pending=!0;const e=this.ukBacsDataPoint.validate();return e.isValid?(this.setProcessingState(La.PENDING),this.produceViewState((e=>{e.payErrorMessage=""})),this.isPaymentScreen?this.pay():this.hold()):(this.produceViewState((t=>{t.errors.sortCode=!e.fields.sortCode.isValid,t.errors.accountNumber=!e.fields.accountNumber.isValid,t.errors.accountHolderName=!e.fields.accountHolderName.isValid,t.errors.termsChecked=!e.fields.termsAccepted.isValid,t.shakeKey+=1})),this.pending=!1,!1)}))}changeSortCode(e){e.length>6||(this.checkoutState.paymentOptions.setUkBacsSortCode(e),this.produceViewState((e=>{e.errors.sortCode=!1,e.sortCode=this.ukBacsDataPoint.sortCode})))}changeAccountNumber(e){e.length>17||(this.checkoutState.paymentOptions.setUkBacsAccountNumber(e),this.produceViewState((e=>{e.errors.accountNumber=!1,e.accountNumber=this.ukBacsDataPoint.accountNumber})))}changeAccountHolderName(e){this.checkoutState.paymentOptions.setUkBacsAccountHolderName(e),this.produceViewState((e=>{e.errors.accountHolderName=!1,e.accountHolderName=this.ukBacsDataPoint.accountHolderName}))}toggleTermsChecked(){this.checkoutState.paymentOptions.setUkBacsTermsAccepted(!this.ukBacsDataPoint.termsAccepted),this.produceViewState((e=>{e.errors.termsChecked=!1,e.termsChecked=this.ukBacsDataPoint.termsAccepted}))}fillDemoData(e){const t=C_.demoData.sortCode.split(""),n=C_.demoData.accountNumber.split(""),i=C_.demoData.accountHolderName.split(""),s=window.setInterval((()=>{var a,r,o;if(t.length)null===(a=e.sortCode.current)||void 0===a||a.focus(),this.changeSortCode(this.viewState.sortCode+t.shift());else if(n.length)null===(r=e.accountNumber.current)||void 0===r||r.focus(),this.changeAccountNumber(this.viewState.accountNumber+n.shift());else{if(!i.length)return clearInterval(s);null===(o=e.accountHolderName.current)||void 0===o||o.focus(),this.changeAccountHolderName(this.viewState.accountHolderName+i.shift())}}),50);return()=>clearInterval(s)}getInitialViewState(){return{locked:!1,accountNumber:"",sortCode:"",shakeKey:0,accountHolderName:"",termsChecked:!0,errors:{},processingState:La.IDLE,livemode:this.checkoutService.checkoutConfiguration.infrastructureParams.livemode,companyName:this.checkoutService.checkoutConfiguration.company.name}}get isPaymentScreen(){var e,t;return this.checkoutService.isReadyToRetryPay&&(null===(t=null===(e=this.checkoutService.getState())||void 0===e?void 0:e.paymentOptions)||void 0===t?void 0:t.clientPaymentMethod)===u._h.UK_BACS}setProcessingState(e){this.produceViewState((t=>{t.payErrorMessage=this.checkoutService.payErrorMessage,t.processingState=e}))}pay(){return(0,l.sH)(this,void 0,void 0,(function*(){this.pending=!0;const e=yield this.checkoutService.hold();if(Yt.isFailure(e))return this.handlePayFailure(e);const t=yield this.checkoutService.pay({screen:this.name,predictedNextScreen:this.flow.predictNextScreen()});return Yt.isFailure(t)?this.handlePayFailure(t):(this.setProcessingState(La.SUCCESS),yield Da(this.checkoutService.checkoutConfiguration.successPaymentDelayBeforeLeave),this.pending=!1,!0)}))}handlePayFailure(e){return(0,l.sH)(this,void 0,void 0,(function*(){return e.failureResult.shouldLeave?(this.pending=!1,!0):(yield this.showError(),this.pending=!1,!1)}))}hold(){return(0,l.sH)(this,void 0,void 0,(function*(){const e=yield this.withPending((()=>this.checkoutService.hold()));return!Yt.isFailure(e)||(yield this.showError(),!1)}))}showError(){return(0,l.sH)(this,void 0,void 0,(function*(){this.produceViewState((e=>{e.processingState=La.ERROR,e.payErrorMessage=this.checkoutService.payErrorMessage||this.intl.translate("common.errorOccurredText")}))}))}}C_.demoData={sortCode:"108800",accountNumber:"00012345",accountHolderName:"Michael Smith"};class v_ extends sb{constructor(e){super(e),this.donationDataPoint=e.donationDataPoint,this.donorEmailDataPoint=e.donorEmailDataPoint,this.ukBacsDataPoint=e.ukBacsDataPoint}beforeEnter(){return(0,l.sH)(this,void 0,void 0,(function*(){this.produceViewState((e=>{var t,n,i;e.ukBacs.accountHolderName=this.ukBacsDataPoint.accountHolderName,e.ukBacs.accountNumber=null!==(t=this.ukBacsDataPoint.accountNumber)&&void 0!==t?t:"",e.ukBacs.sortCode=null!==(n=this.ukBacsDataPoint.sortCode)&&void 0!==n?n:"",e.email=this.donorEmailDataPoint.email,e.company.stripe.ukBacsDisplayName=this.checkoutService.checkoutConfiguration.company.stripe.ukBacsDisplayName,e.formattedAmount=this.intl.formatCurrency(null!==(i=this.donationDataPoint.total)&&void 0!==i?i:0,{currency:this.donationDataPoint.currency,display:"floatcents"}),e.frequency=this.donationDataPoint.frequency}))}))}beforeLeave(e){return(0,l.sH)(this,void 0,void 0,(function*(){if(this.pending)return!1;this.pending=!0,this.setProcessingState(La.PENDING);const e=yield this.checkoutService.pay({screen:this.name,predictedNextScreen:this.flow.predictNextScreen()});return Yt.isSuccess(e)?(this.pending=!1,this.setProcessingState(La.SUCCESS),yield Da(this.checkoutService.checkoutConfiguration.successPaymentDelayBeforeLeave),!0):e.failureResult.shouldLeave?(this.pending=!1,!0):(this.pending=!1,yield this.showError(),!1)}))}getInitialViewState(){return{locked:!1,ukBacs:{sortCode:"",accountHolderName:"",accountNumber:""},email:"",company:{stripe:{ukBacsDisplayName:"Stripe"}},processingState:La.IDLE,formattedAmount:"",frequency:se.MONTHLY}}showError(){return(0,l.sH)(this,void 0,void 0,(function*(){this.produceViewState((e=>{e.processingState=La.ERROR,e.payErrorMessage=this.checkoutService.payErrorMessage||this.intl.translate("common.errorOccurredText")})),this.produceViewState((e=>{e.payErrorMessage=""}),!0)}))}setProcessingState(e){this.produceViewState((t=>{t.processingState=e}))}}class N_ extends ui{tryStart(e){this.isActive||this.canBeStarted(e)&&super.start()}isEnabled(e){return this.canBeStarted(e)&&this.isTestGroup}get isTestGroup(){return this.isActive&&this.isVariant(Sn.TEST)}canBeStarted(e){return!!N_.INCLUDED_LOCALES.includes(e.locale)&&!e.isTributeFilled}}N_.INCLUDED_LOCALES=[w.D.EN_US,w.D.EN_GB,w.D.EN_CA];class b_ extends sb{constructor(e,t,n,i,s,a){super(a),this.donationDataPoint=e,this.preDonationUpsellDataPoint=t,this.tributeDataPoint=n,this.upsellAggregate=i,this.adaptiveFeeCoveringService=s,this.experiments.register(cn.UPSELL_SCREEN_V_3_EXPERIMENT,N_)}get isLocked(){return!!this.getScreenData().locked||this.viewState.processingState.lowMonthly===La.PENDING||this.viewState.processingState.highMonthly===La.PENDING}beforeEnter(){return(0,l.sH)(this,void 0,void 0,(function*(){this.startExperiments();const e=this.upsellAggregate.getBeforeEnterViewState();this.produceViewState((t=>{t.currency=e.currency,t.targetFrequency=e.targetFrequency,t.upsell.fromAmount=e.upsell.fromAmount,t.upsell.fromAmountInUSD=e.upsell.fromAmountInUSD,t.lowAmount=e.lowAmount,t.lowAmountInUSD=e.lowAmountInUSD,t.highAmount=e.highAmount,t.highAmountInUSD=e.highAmountInUSD,t.isAnnualTribute=e.isAnnualTribute,t.highButtonText=e.highButtonText,t.lowButtonText=e.lowButtonText,t.screenTitle=e.screenTitle,t.questionText=e.questionText,t.questionShortText=e.questionShortText,t.descriptionText=e.descriptionText,t.experiments.upsellScreenV3=this.isUpsellScreenV3ExperimentEnabled()}))}))}setShowed(){this.checkoutState.preDonationUpsell.setShowed()}confirm(e){return this.upsellAggregate.confirmUpsell(e),this.checkoutService.updateSession(),this.checkoutService.syncUpdateCheckoutState(),this.performFeeCoveringSuggestion(),this.checkoutService.fetchFeeCoveringSuggestion(),this.leave({omitBeforeLeave:!0})}getInitialViewState(){return{locked:!1,upsell:{fromAmount:0,fromAmountInUSD:0},currency:"USD",highButtonText:"",lowButtonText:"",highAmount:0,highAmountInUSD:0,lowAmount:0,lowAmountInUSD:0,screenTitle:"",questionText:"",questionShortText:"",descriptionText:"",targetFrequency:se.MONTHLY,isAnnualTribute:!1,experiments:{upsellScreenV3:!1},processingState:{lowMonthly:La.IDLE,highMonthly:La.IDLE}}}get upsellScreenV3Experiment(){return this.experiments.get(cn.UPSELL_SCREEN_V_3_EXPERIMENT)}startExperiments(){this.tryStartUpsellScreenV3Experiment()}tryStartUpsellScreenV3Experiment(){this.upsellScreenV3Experiment.tryStart({locale:this.intl.locale,isTributeFilled:this.tributeDataPoint.isFilled})}isUpsellScreenV3ExperimentEnabled(){return this.upsellScreenV3Experiment.isEnabled({locale:this.intl.locale,isTributeFilled:this.tributeDataPoint.isFilled})}performFeeCoveringSuggestion(){return(0,l.sH)(this,void 0,void 0,(function*(){(yield this.adaptiveFeeCoveringService.tryFetchSuggestion())&&(this.adaptiveFeeCoveringService.tryApplySuggestion(),this.adaptiveFeeCoveringService.tryTrackSuggestion())}))}}class P_ extends sb{constructor(e,t){super(t),this.usBankAccountDataPoint=e}beforeEnter(){return(0,l.sH)(this,void 0,void 0,(function*(){this.produceViewState((e=>{e.routingNumber=this.usBankAccountDataPoint.routingNumber,e.accountNumber=this.usBankAccountDataPoint.accountNumber,e.accountHolderName=this.usBankAccountDataPoint.accountHolderName})),this.hasPaymentError&&this.showError(),this.checkoutService.setPaymentError(u._h.US_BANK_ACCOUNT,!1)}))}beforeLeave(e){return(0,l.sH)(this,void 0,void 0,(function*(){if(this.pending)return!1;this.pending=!0,this.setProcessingState(La.PENDING);const e=this.usBankAccountDataPoint.validate();if(!e.isValid)return this.produceViewState((t=>{t.errors.routingNumber=!e.fields.routingNumber.isValid,t.errors.accountNumber=!e.fields.accountNumber.isValid,t.errors.accountHolderName=!e.fields.accountHolderName.isValid,t.shakeKey+=1,t.processingState=La.IDLE})),this.pending=!1,!1;const t=yield this.checkoutService.hold();return Yt.isSuccess(t)?(this.pending=!1,!0):(this.showError(),this.pending=!1,!1)}))}changeAccountNumber(e){e.length>17||(this.checkoutState.paymentOptions.setUsBankAccountNumber(e),this.produceViewState((e=>{e.errors.accountNumber=!1,e.accountNumber=this.usBankAccountDataPoint.accountNumber})))}changeRoutingNumber(e){e.length>9||(this.checkoutState.paymentOptions.setUsBankAccountRoutingNumber(e),this.produceViewState((e=>{e.errors.routingNumber=!1,e.routingNumber=this.usBankAccountDataPoint.routingNumber})))}changeAccountHolderName(e){this.checkoutState.paymentOptions.setUsBankAccountHolderName(e),this.produceViewState((e=>{e.errors.accountHolderName=!1,e.accountHolderName=this.usBankAccountDataPoint.accountHolderName}))}changeAccountType(e){this.checkoutState.paymentOptions.setUsBankAccountType(e),this.produceViewState((e=>{e.accountType=this.usBankAccountDataPoint.accountType}))}fillDemoData(e){const t=P_.demoData.routingNumber.split(""),n=P_.demoData.accountNumber.split(""),i=P_.demoData.accountHolderName.split(""),s=window.setInterval((()=>{var a,r,o;if(t.length)null===(a=e.routingNumber)||void 0===a||a.focus(),this.changeRoutingNumber(this.viewState.routingNumber+t.shift());else if(n.length)null===(r=e.accountNumber)||void 0===r||r.focus(),this.changeAccountNumber(this.viewState.accountNumber+n.shift());else{if(!i.length)return clearInterval(s);null===(o=e.accountHolderName)||void 0===o||o.focus(),this.changeAccountHolderName(this.viewState.accountHolderName+i.shift())}}),P_.demoDataInterval);return()=>clearInterval(s)}getInitialViewState(){return{locked:!1,routingNumber:"",accountNumber:"",accountHolderName:"",accountType:sE.INDIVIDUAL,shakeKey:0,processingState:La.IDLE,errors:{},livemode:this.checkoutService.checkoutConfiguration.infrastructureParams.livemode}}get hasPaymentError(){return this.checkoutService.getState().paymentErrors[u._h.US_BANK_ACCOUNT]}setProcessingState(e){this.produceViewState((t=>{t.processingState=e}))}showError(){this.produceViewState((e=>{e.shakeKey+=1,e.processingState=La.ERROR,e.errorMessage=this.checkoutService.payErrorMessage||this.intl.translate("common.errorOccurredText")}))}}P_.demoData={routingNumber:"110000000",accountNumber:"000123456789",accountHolderName:"Michael Smith"},P_.demoDataInterval=50;class D_ extends sb{constructor(e,t,n,i){super(i),this.usBankAccountDataPoint=e,this.donorNameDataPoint=t,this.donationDataPoint=n}beforeEnter(){return(0,l.sH)(this,void 0,void 0,(function*(){this.produceViewState((e=>{e.usBankAccount.accountHolderName=this.usBankAccountDataPoint.accountHolderName||this.donorNameDataPoint.fullName,e.usBankAccount.accountNumberLast4=this.usBankAccountDataPoint.accountNumberLast4,e.usBankAccount.routingNumber=this.usBankAccountDataPoint.routingNumber,e.usBankAccount.financialInstitution=this.usBankAccountDataPoint.financialInstitution,e.isRecurring=this.donationDataPoint.isRecurring}))}))}beforeLeave(e){return(0,l.sH)(this,void 0,void 0,(function*(){if(this.pending)return!1;this.pending=!0,this.setProcessingState(La.PENDING),this.produceViewState((e=>{e.payErrorMessage=""}));const e=yield this.checkoutService.pay({screen:this.name,predictedNextScreen:this.flow.predictNextScreen()});return Yt.isSuccess(e)?(this.pending=!1,this.setProcessingState(La.SUCCESS),yield Da(this.checkoutService.checkoutConfiguration.successPaymentDelayBeforeLeave),!0):(this.pending=!1,!!e.failureResult.shouldLeave||(yield this.showError(),!1))}))}getInitialViewState(){return{locked:!1,usBankAccount:{accountHolderName:"",accountNumberLast4:"",routingNumber:"",financialInstitution:"",agreementDate:this.intl.formatDate(new Date,{type:Zs.LONG_WITH_YEAR})},companyName:this.checkoutService.company.name,processingState:La.IDLE,isRecurring:!1}}showError(){return(0,l.sH)(this,void 0,void 0,(function*(){this.produceViewState((e=>{e.processingState=La.ERROR,e.payErrorMessage=this.checkoutService.payErrorMessage||this.intl.translate("common.errorOccurredText")}))}))}setProcessingState(e){this.produceViewState((t=>{t.processingState=e}))}}class __ extends sb{constructor(e,t,n){super(n),this.paymentOptionsDataPoint=e,this.paymentService=t}beforeEnter(){return(0,l.sH)(this,void 0,void 0,(function*(){this.hasPaymentError&&this.showError(),this.checkoutService.setPaymentError(u._h.US_BANK_ACCOUNT,!1)}))}authorizeToBank(e){return(0,l.sH)(this,void 0,void 0,(function*(){if(this.pending)return;this.pending=!0,this.setProcessingState(La.PENDING),this.checkoutState.paymentOptions.setPaymentMethod(u._h.US_BANK_ACCOUNT),this.checkoutState.paymentOptions.setPaymentOption(jg.US_BANK_ACCOUNT_INSTANT),yield this.paymentService.initiateUSBankAccount({onPopupOpen:null==e?void 0:e.onModalShow,onPopupClose:null==e?void 0:e.onModalHide,verificationType:"instant"});const t=yield this.paymentService.startUSBankAccount();if(Yt.isSuccess(t))return this.setProcessingState(La.IDLE),this.pending=!1,this.leave();const n=t.failureResult.message;n?this.showError(n):this.setProcessingState(La.IDLE),this.pending=!1}))}fillDetailsManually(){return(0,l.sH)(this,void 0,void 0,(function*(){if(!this.pending)return this.pending=!0,this.setProcessingState(La.PENDING),this.checkoutState.paymentOptions.setPaymentMethod(u._h.US_BANK_ACCOUNT),this.checkoutState.paymentOptions.setPaymentOption(jg.US_BANK_ACCOUNT_VERIFICATION),yield this.paymentService.initiateUSBankAccount({}),this.pending=!1,this.setProcessingState(La.IDLE),this.leave({omitBeforeLeave:!0})}))}getInitialViewState(){return{test:1,processingState:La.IDLE,loginToBankError:"",locked:!1}}get hasPaymentError(){return this.checkoutService.getState().paymentErrors[u._h.US_BANK_ACCOUNT]}setProcessingState(e){this.produceViewState((t=>{t.processingState=e}))}showError(e){this.produceViewState((t=>{t.processingState=La.ERROR,t.loginToBankError=e||this.checkoutService.payErrorMessage||this.intl.translate("common.errorOccurredText")}))}}class T_ extends sb{constructor(e,t){super(t),this.usBankAccountDataPoint=e}get amountExample(){return`+${this.intl.formatCurrency(0,{currency:"USD"}).replace("00","xx")}`}get descriptorCodeExample(){return{prefix:"SM",amount:`+${this.intl.formatCurrency(1,{currency:"USD"})}`}}beforeEnter(){return(0,l.sH)(this,void 0,void 0,(function*(){this.produceViewState((e=>{e.statementDescriptor=this.statementDescriptor,e.verificationType=this.verificationType}))}))}getInitialViewState(){return{locked:!1,statementDescriptor:"",verificationType:"amounts"}}get verificationType(){const e=this.usBankAccountDataPoint.verificationType;if(!e)throw new Error("Verification type is not defined");return e}get statementDescriptor(){switch(this.usBankAccountDataPoint.verificationType){case"descriptor_code":return this.checkoutService.company.name;case"amounts":return"ACCTVERIFY";default:return""}}}const O_={[tn.US_BANK_ACCOUNT]:class extends P_{},[tn.US_BANK_ACCOUNT_DONATE_OPTIONS]:class extends __{},[tn.US_BANK_ACCOUNT_CONFIRMATION]:class extends D_{},[tn.US_BANK_ACCOUNT_VERIFICATION_GUIDE]:class extends T_{},[tn.AU_BECS]:class extends n_{},[tn.DONATE]:class extends o_{},[tn.DOUBLE]:class extends u_{},[tn.GIFT_AID]:class extends h_{},[tn.PAYMENT_OPTIONS]:class extends A_{},[tn.POST_DONATION_UPSELL]:class extends E_{},[tn.SEPA]:class extends d_{},[tn.IDEAL_CONFIRMATION]:class extends m_{},[tn.UK_BACS]:class extends C_{},[tn.UK_BACS_CONFIRMATION]:class extends v_{},[tn.UPSELL]:class extends b_{},[tn.COMMUNICATION_CONSENT]:class extends s_{},[ka.QUESTIONS]:class extends mb{},[ka.COMMENT]:class extends ob{},[ka.MAILING_ADDRESS]:class extends db{},[ka.PRIVACY]:class extends hb{},[ka.THANK_YOU]:class extends gb{},[ka.REMIND_ME]:pb,[ka.BLOCKED]:class extends ab{}};class x_{static isDonateScreenController(e,t){return t===tn.DONATE}static isPaymentOptionScreenController(e,t){return t===tn.PAYMENT_OPTIONS}static isDoubleDonationScreenController(e,t){return t===tn.DOUBLE}static isGiftAidScreenController(e,t){return t===tn.GIFT_AID}static isUSBankAccountScreenController(e,t){return t===tn.US_BANK_ACCOUNT}static isUSBankAccountDonateOptionsScreenController(e,t){return t===tn.US_BANK_ACCOUNT_DONATE_OPTIONS}static isUSBankAccountConfirmationScreenController(e,t){return t===tn.US_BANK_ACCOUNT_CONFIRMATION}static isUSBankAccountVerificationGuideScreenController(e,t){return t===tn.US_BANK_ACCOUNT_VERIFICATION_GUIDE}static isIDEALConfirmationScreenController(e,t){return t===tn.IDEAL_CONFIRMATION}static isSepaConversionScreenController(e,t){return t===tn.SEPA}static isPostDonationUpsellScreenController(e,t){return t===tn.POST_DONATION_UPSELL}static isUKBacsScreenController(e,t){return t===tn.UK_BACS}static isUKBacsConfirmationScreenController(e,t){return t===tn.UK_BACS_CONFIRMATION}static isUpsellScreenController(e,t){return t===tn.UPSELL}static isAUBecsScreenController(e,t){return t===tn.AU_BECS}static isThankYouScreenController(e,t){return t===ka.THANK_YOU}static isMailingAddressScreenController(e,t){return t===ka.MAILING_ADDRESS}static isBlockedScreenController(e,t){return t===ka.BLOCKED}static isCommunicationConsentScreenController(e,t){return t===tn.COMMUNICATION_CONSENT}constructor(e,t,n,i,s,a,r,o,c,l,u,d,h){this.checkoutService=e,this.checkoutState=t,this.paymentService=n,this.intl=i,this.debug=s,this.sentry=a,this.subscriptionPeriodLabelsService=r,this.mailingAddressCustomization=o,this.currencyService=c,this.suggestionsService=l,this.experiments=u,this.adaptivePreDonationUpsellSuggestionsService=d,this.feeCoveringSuggestions=h}create(e,t){const n=O_[e],i={name:e,flow:t,checkoutService:this.checkoutService,checkoutState:this.checkoutState,debug:this.debug,intl:this.intl,subscriptionPeriodLabelsService:this.subscriptionPeriodLabelsService,currencyService:this.currencyService,experiments:this.experiments};return x_.isDonateScreenController(n,e)?new n(Object.assign(Object.assign({},i),{donationDataPoint:this.checkoutService.getDataPoint(KE.DONATION),tributeDataPoint:this.checkoutService.getDataPoint(Ra.TRIBUTE),commentDataPoint:this.checkoutService.getDataPoint(Ra.COMMENT),designationDataPoint:this.checkoutService.getDataPoint(Ra.DESIGNATION),preDonationUpsellDataPoint:this.checkoutService.getDataPoint(KE.PRE_DONATION_UPSELL),adaptivePreDonationUpsellSuggestionsService:this.adaptivePreDonationUpsellSuggestionsService}),this.upsellAggregate,this.feeCoveringSuggestions):x_.isPaymentOptionScreenController(n,e)?new n(Object.assign(Object.assign({},i),{paymentService:this.paymentService,donationDataPoint:this.checkoutService.getDataPoint(KE.DONATION),paymentOptionsDataPoint:this.checkoutService.getDataPoint(KE.PAYMENT_OPTIONS),mailingAddressDataPoint:this.checkoutService.getDataPoint(Ra.MAILING_ADDRESS)})):x_.isAUBecsScreenController(n,e)||x_.isSepaConversionScreenController(n,e)?new n(Object.assign(Object.assign({},i),{paymentService:this.paymentService,donationDataPoint:this.checkoutService.getDataPoint(KE.DONATION)})):x_.isDoubleDonationScreenController(n,e)?new n(Object.assign(Object.assign({},i),{dtdDataPoint:this.checkoutService.getDataPoint(KE.DTD)})):x_.isGiftAidScreenController(n,e)?new n(Object.assign(Object.assign({},i),{donationDataPoint:this.checkoutService.getDataPoint(KE.DONATION),giftAidDataPoint:this.checkoutService.getDataPoint(KE.GIFT_AID)})):x_.isUSBankAccountScreenController(n,e)?new n(this.checkoutService.getDataPoint(KE.US_BANK_ACCOUNT),i):x_.isUSBankAccountDonateOptionsScreenController(n,e)?new n(this.checkoutService.getDataPoint(KE.PAYMENT_OPTIONS),this.paymentService,i):x_.isUSBankAccountConfirmationScreenController(n,e)?new n(this.checkoutService.getDataPoint(KE.US_BANK_ACCOUNT),this.checkoutService.getDataPoint(Ra.DONOR_NAME),this.checkoutService.getDataPoint(KE.DONATION),i):x_.isUSBankAccountVerificationGuideScreenController(n,e)?new n(this.checkoutService.getDataPoint(KE.US_BANK_ACCOUNT),i):x_.isIDEALConfirmationScreenController(n,e)?new n(Object.assign(Object.assign({},i),{paymentService:this.paymentService,donationDataPoint:this.checkoutService.getDataPoint(KE.DONATION),donorNameDataPoint:this.checkoutService.getDataPoint(Ra.DONOR_NAME),donorEmailDataPoint:this.checkoutService.getDataPoint(Ra.DONOR_EMAIL)})):x_.isPostDonationUpsellScreenController(n,e)?new n(Object.assign(Object.assign({},i),{donationDataPoint:this.checkoutService.getDataPoint(KE.DONATION),donorNameDataPoint:this.checkoutService.getDataPoint(Ra.DONOR_NAME),postDonationUpsellDataPoint:this.checkoutService.getDataPoint(KE.POST_DONATION_UPSELL),suggestionsService:this.suggestionsService})):x_.isUKBacsScreenController(n,e)?new n(Object.assign(Object.assign({},i),{ukBacsDataPoint:this.checkoutService.getDataPoint(KE.UK_BACS)})):x_.isUKBacsConfirmationScreenController(n,e)?new n(Object.assign(Object.assign({},i),{donationDataPoint:this.checkoutService.getDataPoint(KE.DONATION),donorEmailDataPoint:this.checkoutService.getDataPoint(Ra.DONOR_EMAIL),ukBacsDataPoint:this.checkoutService.getDataPoint(KE.UK_BACS)})):x_.isUpsellScreenController(n,e)?new n(this.checkoutService.getDataPoint(KE.DONATION),this.checkoutService.getDataPoint(KE.PRE_DONATION_UPSELL),this.checkoutService.getDataPoint(Ra.TRIBUTE),this.upsellAggregate,this.feeCoveringSuggestions,i):x_.isThankYouScreenController(n,e)?new n(this.checkoutService.getDataPoint(KE.DONATION),this.checkoutService.getDataPoint(Ra.TRIBUTE),this.checkoutService.getDataPoint(Ra.DONOR_NAME),this.checkoutService.getDataPoint(KE.POST_DONATION_UPSELL),this.redirectApi,this.sharingApi,i):x_.isMailingAddressScreenController(n,e)?new n(this.checkoutService.getDataPoint(Ra.ON_BEHALF_OF),this.countriesService,this.mailingAddressCustomization,this.sentry,i):x_.isBlockedScreenController(n,e)?new n(i):x_.isCommunicationConsentScreenController(n,e)?new n(this.checkoutService.getDataPoint(Ra.COMMUNICATION_CONSENT),i):new n(i)}get redirectApi(){return this.checkoutService.redirectApi}get sharingApi(){return this._sharingApi||(this._sharingApi=nb({checkoutType:this.checkoutService.checkoutConfiguration.checkoutType,isShowcase:this.checkoutService.checkoutConfiguration.infrastructureParams.showcase,campaignConfig:this.checkoutService.campaignConfig})),this._sharingApi}get countriesService(){return this._countriesService||(this._countriesService=(0,pC.g)({intl:this.intl,excludePalestineFromCountriesList:this.checkoutService.checkoutConfiguration.featureConfig.excludePalestineFromCountriesList})),this._countriesService}get upsellAggregate(){return this._upsellAggregate||(this._upsellAggregate=new t_(this.checkoutState,this.intl,this.checkoutService.getDataPoint(KE.DONATION),this.checkoutService.getDataPoint(KE.PRE_DONATION_UPSELL))),this._upsellAggregate}}function k_(e){return Object.values(e).filter((e=>e.enabled)).length>1}class I_ extends Eb{constructor(e){super({checkoutConfiguration:e.checkoutConfiguration,isValidScreen:e.isValidScreen}),this.options=e}getInitialScreen(){return(0,l.sH)(this,void 0,void 0,(function*(){if(this.isCompanyBlocked())return ka.BLOCKED;const e=this.getCustomExternalConfigScreen();return void 0!==e?e:this.canSkipDefaultScreen()?(yield this.shouldShowPreDonationUpsell())?tn.UPSELL:ka.PRIVACY:tn.DONATE}))}get isAmountsValid(){return function(e,t,n){var i,s,a,r;let o=null===(i=e.checkoutData)||void 0===i?void 0:i.recurring;const c=!k_(t.frequencies);!o&&c&&(o=ge.getDefaultFrequencyWithOverride(t.frequencies,null));const l=it.format({amount:null===(s=e.queryParams)||void 0===s?void 0:s.amount}),u=n.getDigits(t.defaultCurrency),d=Math.ceil((l.amount||0)*Math.pow(10,u)),h=(null===(a=e.checkoutData)||void 0===a?void 0:a.amount)||d,m=(null===(r=e.checkoutData)||void 0===r?void 0:r.currency)||t.defaultCurrency;if(!o||!h||!m)return!1;const p=t.frequencies[o].minAmount,g=FC.convertMinAmount(n,p||0,t.defaultCurrency,m),y=h.toString().length>(0,$d.Bm)(m);return!(h<g||y)}(this.options.checkoutConfiguration.externalConfig,this.options.checkoutConfiguration.campaign.config,this.options.currencyService)}isCompanyBlocked(){return Boolean(this.options.checkoutConfiguration.company.blockedAt)}canSkipDefaultScreen(){return function(e){var t,n,i,s,a,r,o,c,l,u,d;const h=e.campaign.config,m=e.externalConfig,p=null===(t=m.queryParams)||void 0===t?void 0:t.tributeHonoree,g=h.tribute.show,y=(null===(i=null===(n=m.checkoutData)||void 0===n?void 0:n.tribute)||void 0===i?void 0:i.inHonorOf)||p,f=null===(a=null===(s=m.checkoutData)||void 0===s?void 0:s.tribute)||void 0===a?void 0:a.type,S=h.showComment,A=!1!==(null===(r=m.checkoutData)||void 0===r?void 0:r.modifyAmount)&&"no"!==(null===(o=m.queryParams)||void 0===o?void 0:o.modifyAmount),E=!1!==(null===(c=m.checkoutData)||void 0===c?void 0:c.modifyDesignation)&&"no"!==(null===(l=m.queryParams)||void 0===l?void 0:l.modifyDesignation),C=h.frequencies,v=h.displayGoal!==Pe.WITHOUT&&h.goals.length>1,N=!!(null===(u=m.checkoutData)||void 0===u?void 0:u.showEndDate),b=[ie.DONATION_FORM,ie.SIMPLE_FORM,ie.BUTTON_GROUP,ie.IMPACT_SLIDER],P=e.element.type;if(!P)return!1;const D=P===ie.DONATION_FORM,_=A&&!b.includes(P),T=E&&!D,O=k_(C),x=!D&&O,k=!!p||!!y&&f!==WE.NONE,I=!!p||!y&&f===WE.NONE,w=D?k||I:!g,R=(null===(d=m.checkoutData)||void 0===d?void 0:d.recurring)&&C[m.checkoutData.recurring].hasEndDate&&!N;return w&&!S&&!(T&&v)&&!_&&!x&&!R}(this.options.checkoutConfiguration)&&this.isAmountsValid}shouldShowPreDonationUpsell(){return(0,l.sH)(this,void 0,void 0,(function*(){return this.options.adaptivePreDonationUpsellSuggestionsService.resetSuggestionApplication(),(yield this.options.adaptivePreDonationUpsellSuggestionsService.tryFetchSuggestion())&&this.options.adaptivePreDonationUpsellSuggestionsService.tryApplySuggestion(),this.options.preDonationUpsellDataPoint.isEnabled}))}}class w_{constructor(e,t){this.checkoutState=e,this.params=t}get(e,t){const n=this.checkoutState.get();switch(n.paymentOptions.clientPaymentMethod){case Qv._h.UK_BACS:return this.params.screenSet.ukBacsConfirmation;case Qv._h.US_BANK_ACCOUNT:return this.params.screenSet.usBankAccountConfirmation;case Qv._h.IDEAL:return this.params.screenSet.idealConfirmation;case Qv._h.CARD:return this.params.screenSet.paymentOptions;case Qv._h.AU_BECS:return this.params.screenSet.auBecs;case Qv._h.SEPA:return this.getScreenForSepaPaymentMethod(n,e,t);case Qv._h.ACSS:case Qv._h.APPLE_PAY:case Qv._h.GOOGLE_PAY:case Qv._h.VENMO:case Qv._h.PAYPAL:default:return this.params.screenSet.paymentOptions}}getScreenForSepaPaymentMethod(e,t,n){const i=t===this.params.screenSet.sepa,s=t===this.params.screenSet.mailingAddress,a=n.includes(this.params.screenSet.mailingAddress),r=e.mailingAddress;return i&&r.isRequired&&!a||s&&r.isRequired?this.params.screenSet.mailingAddress:this.params.screenSet.sepa}}const R_=(e,t,n)=>{if(e.paymentOptions.clientPaymentMethod!==t)throw new Error(`Can not move to ${n} screen if "clientPaymentMethod" is not "${t}"`);return!1},M_=e=>e.every(Boolean),L_=e=>e.some(Boolean),U_=(e,t)=>M_([!t.has(tn.DOUBLE),e.doubleDonation.isEnabled,L_([e.isPaid,M_([e.doubleDonation.isIntegrationEnabled,e.donation.amountInUsd<2500])])]),F_=(e,t)=>M_([!t.has(tn.GIFT_AID),e.giftAid.isEnabled]),j_=(e,t)=>M_([!t.has(ka.MAILING_ADDRESS),e.mailingAddress.isEnabled,L_([M_([e.isPaid,!e.mailingAddress.isRequired]),M_([!e.isPaid,e.mailingAddress.isRequired])])]),B_=e=>M_([!e.isPaid]),H_=e=>M_([!e.isPaid,e.paymentOptions.clientPaymentMethod===u._h.UK_BACS]),q_=e=>M_([!e.isPaid,e.paymentOptions.clientPaymentMethod===u._h.US_BANK_ACCOUNT,e.paymentOptions.selectedPaymentOption===jg.US_BANK_ACCOUNT_VERIFICATION]),G_=e=>M_([!e.isPaid,e.paymentOptions.clientPaymentMethod===u._h.US_BANK_ACCOUNT]),V_=e=>M_([e.postDonationUpsell.isEnabled]),Y_=tn.DONATE;function K_(e,t){switch(!0){case((e,t)=>M_([!t.has(tn.COMMUNICATION_CONSENT),e.communicationConsent.isCustomizedEnabled,L_([!e.mailingAddress.isEnabled,t.has(ka.MAILING_ADDRESS)])]))(e,t):return tn.COMMUNICATION_CONSENT;case U_(e,t):return tn.DOUBLE;case j_(e,t):return ka.MAILING_ADDRESS;case(e=>M_([e.questions.isEnabled]))(e):return ka.QUESTIONS;case V_(e):return tn.POST_DONATION_UPSELL;default:return ka.THANK_YOU}}const z_=Nb([tn.US_BANK_ACCOUNT,tn.US_BANK_ACCOUNT_DONATE_OPTIONS,tn.US_BANK_ACCOUNT_CONFIRMATION,tn.US_BANK_ACCOUNT_VERIFICATION_GUIDE,tn.AU_BECS,tn.DONATE,tn.DOUBLE,tn.GIFT_AID,tn.PAYMENT_OPTIONS,tn.POST_DONATION_UPSELL,tn.SEPA,tn.IDEAL_CONFIRMATION,tn.UK_BACS,tn.UK_BACS_CONFIRMATION,tn.UPSELL,tn.COMMUNICATION_CONSENT,ka.QUESTIONS,ka.COMMENT,ka.MAILING_ADDRESS,ka.PRIVACY,ka.THANK_YOU,ka.REMIND_ME,ka.BLOCKED]),$_={[fe.MONEY]:function(e){let{checkoutConfiguration:t,intl:n,tracker:i,debug:s,currencyService:a,suggestionsService:r,targetWindow:o,globalWindow:c,sentry:l,paymentMethods:d,stripeLoadingPromise:h,applePayStripeLoadingPromise:m,subscriptionPeriodLabelsService:p,userSession:g,addressService:y,eventEmitter:f,checkoutAPIBridge:S,experiments:A,logger:E,stripe:C,requestService:v,mailingAddressModule:N,paymentMethodAvailabilityManagerRepository:b,mailingAddressCustomization:P,adaptiveDefaultFrequencyFetcher:D,adaptiveAmountPresetsFetcher:_}=e;const T=new YE(cC.SESSION_UPDATE_DEBOUNCE),O=new vD(i,t,l,T,v),x=new pN(O,a,r),k=new wD(O),I=new uN(t,a,y,r,n,g,O,A,i,l,P,{flowType:fe.MONEY},x),w=new dN(I),R=new OD(w,t,O),M=function(e,t,n,i,s,a,r,o){const c=function(e,t,n,i,s,a){const r=function(e){return new HP(e)}(a),o=function(e,t,n,i){const s=new GP(e,t,i),a=new YP(e,t,n,i);return new VP(e,i,s,a)}(e,t,n,a),c=function(e,t){const n=new KP(e,t),i=new zP(t);return new $P(t,n,i)}(e,a),l=function(e,t){const n=new WP(e,t);return new XP(t,n)}(e,a),u=function(e,t,n,i,s){const a=new QP(e,t,n,i,s);return new ZP(s,a)}(e,t,i,s,a),d=function(e,t,n){const i=new eD(e,n),s=new tD(t,n);return new nD(n,i,s)}(e,n,a),h=function(e,t,n){const i=new aD(e,t,n);return new sD(n,i)}(e,s,a),m=function(e,t){return new rD(e,t)}(e,a);return new iD(r,o,c,l,u,d,h,m)}(e,t,n,i,s,r),l=[r,c],u=new cD(...l),d=new lD(...l),h=new uD(...l),m=new yD(...l),p=new dD(...l),g=new mD(...l),y=new hD(...l),f=new pD(...l),S=new gD(...l),A=new fD(...l),E=new SD(...l),C=new AD(...l),v=new ED(...l),N=new CD(...l);return new rb(u,d,h,m,E,p,y,g,f,S,A,C,v,N,c,a,e,r,o)}(t,a,r,N,b,s,w,A),L=new w_(M,{screenSet:{usBankAccountConfirmation:tn.US_BANK_ACCOUNT_CONFIRMATION,ukBacsConfirmation:tn.UK_BACS_CONFIRMATION,idealConfirmation:tn.IDEAL_CONFIRMATION,mailingAddress:ka.MAILING_ADDRESS,auBecs:tn.AU_BECS,sepa:tn.SEPA,paymentOptions:tn.PAYMENT_OPTIONS}}),U=vN(t.campaign.config),F=new hN(O),j=new ID(O),B=function(e,t){return new RD(e,t,{screens:{firstScreen:MD,unrestrictedExitScreens:GD,finalUnavailableScreens:YD,mobileExitScreens:VD,alwaysRenderedScreens:UD,screensWithoutTributeBadge:FD,mobileScreensWithoutAskTitle:KD,mobileScreensWithAskText:jD,mobileScreensWithoutFaqLinks:zD,mobileScreensWithoutAskPage:$D,screensWithoutAskOverlay:BD,canNotGoBackScreens:LD,conditionallyShowCloseButtonScreens:qD,alwaysShowCloseButtonScreens:HD.concat(tn.POST_DONATION_UPSELL)}})}(U,M),H=new rP(l,n,b,{stripe:{elementStyles:C.elementStyles,elementClasses:C.elementClasses}}),q=new kD(t,M,H,w,O,R,a,n,d,o,h,m,{stripe:{elementsOptions:C.elementsOptions}}),G=new gN(c,t,a,w.getDataPoint(KE.DONATION),w.getDataPoint(KE.POST_DONATION_UPSELL),w.getDataPoint(Ra.DONOR_NAME),w.getDataPoint(Ra.DONOR_EMAIL),w.getDataPoint(Ra.DESIGNATION)),V=new FP(w,t,M,R,O,q,B,i,a,n,o,l,H,L,f,S,s,A,F,j,E,G,x,k,r,{screenSet:{thankYou:ka.THANK_YOU}}),Y=new EP(O),K=A.get(cn.UPSELL_AMOUNTS_SUGGESTION_MODAL_EXPERIMENT),z=new CP({adaptivePreDonationUpsellSuggestionsFetcher:Y,checkoutConfiguration:t,checkoutState:M,currencyService:a,suggestionsService:r,donationDataPoint:w.getDataPoint(KE.DONATION),preDonationUpsellDataPoint:w.getDataPoint(KE.PRE_DONATION_UPSELL),intl:n,tracker:i,shouldRequestUpsellAmounts:K.isTestGroup}),$=new mP(O),W=new gP(t,M,w.getDataPoint(KE.DONATION),i,$,a,n);if(!D)throw new Error("adaptiveDefaultFrequencyFetcher is required");const X=qE(new x_(V,M,q,n,s,l,p,P,a,r,A,z,W),{initial:()=>Y_,screens:{[tn.DONATE]:{next:(e,t)=>{const n=e();switch(!0){case(e=>M_([e.comment.isEnabled,e.comment.isRequired]))(n):return ka.COMMENT;case(e=>M_([e.preDonationUpsell.isEnabled,!e.preDonationUpsell.upsellCurtainUsed]))(n):return tn.UPSELL;default:return ka.PRIVACY}}},[ka.COMMENT]:{next:()=>tn.DONATE},[tn.UPSELL]:{next:()=>ka.PRIVACY},[ka.PRIVACY]:{next:(e,t)=>{const n=e();switch(!0){case U_(n,t):return tn.DOUBLE;case F_(n,t):return tn.GIFT_AID;case j_(n,t):return ka.MAILING_ADDRESS;default:return tn.PAYMENT_OPTIONS}}},[tn.DOUBLE]:{next:(e,t)=>{const n=e();switch(!0){case F_(n,t):return tn.GIFT_AID;case j_(n,t):return ka.MAILING_ADDRESS;case B_(n):return tn.PAYMENT_OPTIONS;default:return K_(n,t)}}},[tn.GIFT_AID]:{next:(e,t)=>{const n=e();return!0===j_(n,t)?ka.MAILING_ADDRESS:tn.PAYMENT_OPTIONS}},[ka.MAILING_ADDRESS]:{mandatory:e=>{return t=e(),M_([t.hasPaymentAttempt,t.hasMailingAddressError]);var t},next:(e,t)=>{const n=e();switch(!0){case H_(n):return tn.UK_BACS_CONFIRMATION;case G_(n):return tn.US_BANK_ACCOUNT_CONFIRMATION;case(e=>M_([!e.isPaid,e.paymentOptions.clientPaymentMethod===u._h.IDEAL]))(n):return tn.IDEAL_CONFIRMATION;case B_(n):return tn.PAYMENT_OPTIONS;default:return K_(n,t)}}},[tn.PAYMENT_OPTIONS]:{mandatory:e=>{return t=e(),L_([M_([t.hasPaymentAttempt,t.paymentErrors[u._h.PAYPAL]]),M_([t.hasPaymentAttempt,t.paymentErrors[u._h.CARD],t.paymentOptions.preSelectedPaymentOption===jg.CARD]),M_([t.hasPaymentAttempt,t.paymentErrors[u._h.US_BANK_ACCOUNT],t.paymentOptions.selectedPaymentOption===jg.US_BANK_ACCOUNT_INSTANT,!t.paymentOptions.usBankAccountVerificationSetup.isInstantAndAbav])]);var t},next:(e,t)=>{const n=e();switch((e=>{const t=e.paymentOptions.clientPaymentMethod,n=e.paymentOptions.selectedPaymentOption;if(!t&&!n)throw new Error('"clientPaymentMethod" and "selectedPaymentOption" can not be null at the same time')})(n),!0){case(e=>M_([!e.isPaid,e.paymentOptions.clientPaymentMethod===u._h.AU_BECS]))(n):return tn.AU_BECS;case(e=>M_([!e.isPaid,e.paymentOptions.clientPaymentMethod===u._h.UK_BACS]))(n):return tn.UK_BACS;case(e=>M_([!e.isPaid,e.paymentOptions.clientPaymentMethod===u._h.SEPA]))(n):return tn.SEPA;case(e=>M_([!e.isPaid,e.paymentOptions.clientPaymentMethod===u._h.IDEAL]))(n):return tn.IDEAL_CONFIRMATION;case(e=>M_([!e.isPaid,e.paymentOptions.clientPaymentMethod===u._h.US_BANK_ACCOUNT,L_([e.paymentOptions.selectedPaymentOption===jg.US_BANK_ACCOUNT,M_([e.paymentOptions.selectedPaymentOption===jg.US_BANK_ACCOUNT_INSTANT,e.paymentErrors[u._h.US_BANK_ACCOUNT]])])]))(n):return tn.US_BANK_ACCOUNT_DONATE_OPTIONS;case q_(n):return tn.US_BANK_ACCOUNT;case G_(n):return tn.US_BANK_ACCOUNT_CONFIRMATION;default:return K_(n,t)}}},[tn.AU_BECS]:{guard:e=>R_(e(),u._h.AU_BECS,tn.AU_BECS),next:(e,t)=>K_(e(),t)},[tn.SEPA]:{guard:e=>R_(e(),u._h.SEPA,tn.SEPA),next:(e,t)=>{const n=e();return!0===(!n.isPaid&&j_(n,t))?ka.MAILING_ADDRESS:K_(n,t)}},[tn.UK_BACS]:{mandatory:e=>{return t=e(),M_([t.hasPaymentAttempt,t.paymentErrors[u._h.UK_BACS]]);var t},guard:e=>R_(e(),u._h.UK_BACS,tn.UK_BACS),next:(e,t)=>{const n=e();switch(!0){case j_(n,t):return ka.MAILING_ADDRESS;case H_(n):return tn.UK_BACS_CONFIRMATION;default:return K_(n,t)}}},[tn.UK_BACS_CONFIRMATION]:{guard:e=>R_(e(),u._h.UK_BACS,tn.UK_BACS_CONFIRMATION),next:(e,t)=>K_(e(),t)},[tn.IDEAL_CONFIRMATION]:{guard:e=>R_(e(),u._h.IDEAL,tn.IDEAL_CONFIRMATION),next:(e,t)=>K_(e(),t)},[tn.US_BANK_ACCOUNT_DONATE_OPTIONS]:{mandatory:e=>{return t=e(),M_([t.hasPaymentAttempt,t.paymentErrors[u._h.US_BANK_ACCOUNT],t.paymentOptions.selectedPaymentOption===jg.US_BANK_ACCOUNT_INSTANT,t.paymentOptions.usBankAccountVerificationSetup.isInstantAndAbav]);var t},guard:e=>R_(e(),u._h.US_BANK_ACCOUNT,tn.US_BANK_ACCOUNT_DONATE_OPTIONS),next:(e,t)=>{const n=e();return!0===q_(n)?tn.US_BANK_ACCOUNT:tn.US_BANK_ACCOUNT_CONFIRMATION}},[tn.US_BANK_ACCOUNT]:{mandatory:e=>{return t=e(),M_([t.hasPaymentAttempt,t.paymentErrors[u._h.US_BANK_ACCOUNT],t.paymentOptions.selectedPaymentOption===jg.US_BANK_ACCOUNT_VERIFICATION]);var t},guard:e=>R_(e(),u._h.US_BANK_ACCOUNT,tn.US_BANK_ACCOUNT),next:()=>tn.US_BANK_ACCOUNT_CONFIRMATION},[tn.US_BANK_ACCOUNT_CONFIRMATION]:{guard:e=>R_(e(),u._h.US_BANK_ACCOUNT,tn.US_BANK_ACCOUNT_CONFIRMATION),next:(e,t)=>{const n=e();return!0===(e=>M_([e.isPaid,e.paymentOptions.clientPaymentMethod===u._h.US_BANK_ACCOUNT,e.paymentOptions.usBankAccountVerificationSetup.isMicroDepositOnly]))(n)?tn.US_BANK_ACCOUNT_VERIFICATION_GUIDE:K_(n,t)}},[tn.US_BANK_ACCOUNT_VERIFICATION_GUIDE]:{guard:e=>R_(e(),u._h.US_BANK_ACCOUNT,tn.US_BANK_ACCOUNT_VERIFICATION_GUIDE),next:(e,t)=>K_(e(),t)},[tn.COMMUNICATION_CONSENT]:{next:(e,t)=>K_(e(),t)},[ka.QUESTIONS]:{next:(e,t)=>{const n=e();return!0===V_(n)?tn.POST_DONATION_UPSELL:ka.THANK_YOU}},[tn.POST_DONATION_UPSELL]:{next:()=>ka.THANK_YOU},[ka.THANK_YOU]:{},[ka.BLOCKED]:{},[ka.REMIND_ME]:{guard:e=>!e().remindMeLater.show,final:!0}}},M.get.bind(M)),Q=new I_({checkoutConfiguration:t,currencyService:a,isValidScreen:z_,preDonationUpsellDataPoint:w.getDataPoint(KE.PRE_DONATION_UPSELL),adaptivePreDonationUpsellSuggestionsService:z}),Z=A.get(cn.DEFAULT_FREQUENCY_V_2_MODAL_EXPERIMENT),J=new uP(t,M,w.getDataPoint(KE.DONATION),i,D,{version:Z.isTestGroup?lP.V2:lP.V1});if(!_)throw new Error("adaptiveAmountPresetsFetcher is required");const ee=new cP(V,M,w.getDataPoint(KE.DONATION),t,a,r,_);return{checkoutService:V,formFlow:X,initialScreenDecider:Q,adaptiveSuggestionsService:new yP(J,ee,z)}},[fe.CRYPTO]:function(e){let{checkoutConfiguration:t,intl:n,tracker:i,debug:s,currencyService:a,suggestionsService:r,targetWindow:o,globalWindow:c,sentry:l,subscriptionPeriodLabelsService:u,userSession:d,addressService:h,eventEmitter:m,checkoutAPIBridge:p,experiments:g,logger:y,requestService:f,mailingAddressModule:S,paymentMethodAvailabilityManagerRepository:A,mailingAddressCustomization:E}=e;const C=new YE(cC.SESSION_UPDATE_DEBOUNCE),v=new lC(i,t,l,C,f),N=new pN(v,a,r),b=new uN(t,a,h,r,n,d,v,g,i,l,E,{flowType:fe.CRYPTO},N),P=new dN(b),D=new mC(P,t,v),_=function(e,t,n,i,s){return new aC(i,e,s,t,n)}(t,S,A,s,P),T=new rC(_,{screenSet:{mailingAddress:ka.MAILING_ADDRESS,privacy:ka.PRIVACY}}),O=vN(t.campaign.config),x=new hN(v),k=function(e,t){return new bN(e,t,{screens:{firstScreen:RN,unrestrictedExitScreens:HN,mobileExitScreens:YN,alwaysRenderedScreens:KN,screensWithoutTributeBadge:MN,mobileScreensWithoutAskTitle:VN,mobileScreensWithAskText:LN,mobileScreensWithoutFaqLinks:qN,mobileScreensWithoutAskPage:GN,screensWithoutAskOverlay:UN,canNotGoBackScreens:BN,alwaysShowCloseButtonScreens:FN,conditionallyShowCloseButtonScreens:jN}})}(O,_),I=new gN(c,t,a,P.getDataPoint(KE.DONATION),P.getDataPoint(KE.POST_DONATION_UPSELL),P.getDataPoint(Ra.DONOR_NAME),P.getDataPoint(Ra.DONOR_EMAIL),P.getDataPoint(Ra.DESIGNATION)),w=new iC(P,t,_,k,D,v,i,a,n,o,l,T,m,p,s,g,x,y,I,{screenSet:{thankYou:ka.THANK_YOU}});return{checkoutService:w,formFlow:qE(new Ab(w,_,n,s,l,a,u,E,g),{initial:()=>vb,screens:{[Ia.CRYPTO_CURRENCY]:{next:e=>e().comment.isRequired?ka.COMMENT:ka.PRIVACY},[ka.COMMENT]:{next:()=>Ia.CRYPTO_CURRENCY},[ka.PRIVACY]:{next:e=>e().mailingAddress.isEnabled?ka.MAILING_ADDRESS:Ia.CRYPTO_WALLET},[ka.MAILING_ADDRESS]:{next:()=>Ia.CRYPTO_WALLET},[Ia.CRYPTO_WALLET]:{next:e=>e().questions.isEnabled?ka.QUESTIONS:ka.THANK_YOU},[ka.QUESTIONS]:{next:()=>ka.THANK_YOU},[ka.THANK_YOU]:{},[ka.BLOCKED]:{}}},_.get.bind(_)),initialScreenDecider:new Cb({checkoutConfiguration:t,isValidScreen:bb}),adaptiveSuggestionsService:null}},[fe.STOCK]:function(){throw new Error("Stock flow is not supported")}};function W_(e,t,i,s,a,r,o){return(0,l.sH)(this,void 0,void 0,(function*(){var c,u,d;const p=t.createInstance("Checkout");p.log("checkoutCreateParams",r);const y=yield LE(r),f=A("#root",y),S=E(y),C=null===(c=r.infrastructureQueryParams)||void 0===c?void 0:c._fundraiseup_country;if(!r.livemode&&C){const e=yield function(e){return(0,l.sH)(this,void 0,void 0,(function*(){return function(e,t){const n=e[t];return{location:{countryCode:t,city:"TEST_PANEL",country:"TEST_PANEL"},langCurrencies:n||["USD"],countryCurrencies:n||["USD"]}}((yield Promise.resolve().then(n.t.bind(n,4601,19))).default,e)}))}(C);r.resolvedConfig.config.currencies.countryCurrencies=e.countryCurrencies,r.resolvedConfig.config.currencies.langCurrencies=e.langCurrencies,r.resolvedConfig.user.address.countryCode=C}(null===(u=r.infrastructureQueryParams)||void 0===u?void 0:u.checkoutIntent)&&(r.externalConfig.checkoutIntent=function(e){var t,n,i,s,a,r,o,c,l,u,d,h,m,p;if(e)try{const g=JSON.parse(function(e){try{return Buffer.from(e,"base64").toString()}catch(t){return atob(e)}}(e));return{flowType:g.flowType,donation:g.donation?{amount:null===(t=g.donation)||void 0===t?void 0:t.amount,currency:null===(n=g.donation)||void 0===n?void 0:n.currency,recurring:null===(i=g.donation)||void 0===i?void 0:i.recurring,frequency:null===(s=g.donation)||void 0===s?void 0:s.frequency,selectedHintId:null===(a=g.donation)||void 0===a?void 0:a.selectedHintId}:void 0,supporter:g.supporter?{firstName:null===(r=g.supporter)||void 0===r?void 0:r.firstName,lastName:null===(o=g.supporter)||void 0===o?void 0:o.lastName,email:null===(c=g.supporter)||void 0===c?void 0:c.email}:void 0,campaign:g.campaign?{id:g.campaign.id}:void 0,element:g.element?{key:null===(l=g.element)||void 0===l?void 0:l.key,type:null===(u=g.element)||void 0===u?void 0:u.type}:void 0,comment:g.comment,tribute:g.tribute,checkoutSettings:g.checkoutSettings?{designation:null===(d=g.checkoutSettings)||void 0===d?void 0:d.designation,customFields:null===(h=g.checkoutSettings)||void 0===h?void 0:h.customFields,modifyAmount:null===(m=g.checkoutSettings)||void 0===m?void 0:m.modifyAmount,modifyDesignation:null===(p=g.checkoutSettings)||void 0===p?void 0:p.modifyDesignation}:void 0,fundraisingPage:g.fundraisingPage?{key:g.fundraisingPage.key,customerKey:g.fundraisingPage.customerKey}:void 0,feeCovered:g.feeCovered}}catch(e){return}}(r.infrastructureQueryParams.checkoutIntent));const N=new h.A,b=new vr(e,p,i,N,S.target,S.global,r,$_,o,a),P=new TE(f,y,N,b.sentryInstance,p,b);y.configure({locale:b.intl.locale,styles:yield UE(b.intl.language)}),yield y.waitUntilFontsLoaded(),s.on(g.CHECKOUT_OPEN,(()=>{y.onShow()}));const D=new m(S.global),_=new v(P,b,D);return yield b.run(),_.initialize(),yield P.onHide((e=>{_.destroy(e),p.log("Closed")})).open(),D.hideAll(),p.log("Opened"),b.logger.checkoutOpen({key:b.checkoutConfiguration.campaign.key,name:b.checkoutConfiguration.campaign.name},b.checkoutAPIBridge.getOpenParams()),r.steplessCheckoutExperimentVariant&&b.trackerCheckout.customTrack({type:"testGroupExposed",data:{experimentId:mn[cn.STEPLESS_MOBILE_CHECKOUT_EXPERIMENT],variantName:r.steplessCheckoutExperimentVariant,exclusion:null!==(d=r.steplessCheckoutExperimentExcluded)&&void 0!==d&&d}}),_}))}var X_=n(8093);class Q_{constructor(e){this.errorsStack=[],this.sentry=null,e.forceOff||(e.sentry?this.sentry=e.sentry:Promise.all([n.e(472),n.e(326)]).then(n.bind(n,1684)).then((t=>{this.sentry=t.initSentry(e,this.errorsStack,e.ignoreErrors),this.errorsStack=[]})))}captureError(e,t){if(!this.sentry)return this.errorsStack.push(e),void console.error(e);if(e instanceof Error)return this.sentry.captureException(e,t),void console.error(e);if(this.isErrorLike(e)){const n=new Error(e.message||"Unknown error like");return n.name=e.name,n.stack=e.stack,this.sentry.captureException(n,t),void console.error(e)}const n=new Error("Non error exception");if(t&&"object"==typeof t&&"setExtra"in t)return t.setExtra("nonError",e),this.sentry.captureException(n,t),void console.error(e);if(t&&"function"==typeof t)return this.sentry.captureException(n,(n=>{const i=t(n);return i.setExtra("nonError",e),i})),void console.error(e);const i=t||{};t=Object.assign(Object.assign({},i),{extra:Object.assign(Object.assign({},(null==i?void 0:i.extra)||{}),{nonError:e})}),this.sentry.captureException(n,t),console.error(e)}getSentryInstance(){return{captureException:(e,t)=>this.captureError(e,t),configureScope:e=>{this.sentry&&this.sentry.configureScope(e)}}}isErrorLike(e){return e instanceof Error||"object"==typeof e&&null!==e&&"name"in e&&"message"in e}}class Z_ extends v{constructor(e,t,n,i,s,a,r,o,c,l){super(e,t),this.checkoutUI=e,this.embedTracker=n,this.debug=i,this.keysKeeper=s,this.targetWindow=a,this.globalWindow=r,this.params=o,this.sentry=c,this.funSessionStorage=l}get questionsScreenPageCount(){return this.checkoutCore.flowManager.questionsScreenPageCount}update(e){return(0,l.sH)(this,void 0,void 0,(function*(){this.checkoutCore.dispose(),this.removeStripeIframes(this.globalWindow.document),this.removeStripeIframes(this.targetWindow.document);const t=new vr(this.embedTracker,this.debug,this.keysKeeper,new h.A,this.targetWindow,this.globalWindow,Object.assign(Object.assign({},this.params),{resolvedConfig:this.convertShowcaseConfigToCheckoutConfig(e),isMobile:e.isMobile,localeCode:e.localeCode||""}),$_,this.sentry,this.funSessionStorage),n=this.isFlowTypeChanged(t);this.checkoutCore=t,yield t.run({initialScreen:e.initialScreen,localeCode:e.localeCode||t.checkoutConfiguration.campaign.config.localization.defaultLocale}),yield this.checkoutUI.replaceCore(this.checkoutCore,{forceRender:n,showcaseContext:e.showcaseContext}),this.updateIframeHtmlClass(e.isMobile)}))}removeStripeIframes(e){e.querySelectorAll('iframe[name*="privateStripe"]').forEach((e=>{e.remove()}))}convertShowcaseConfigToCheckoutConfig(e){return(0,Be.Yv)(e)}isFlowTypeChanged(e){return this.checkoutCore.checkoutConfiguration.defaultFlowType!==e.checkoutConfiguration.defaultFlowType}updateIframeHtmlClass(e){const t=this.targetWindow.document.querySelector("html");e?null==t||t.classList.remove("desktop-view"):null==t||t.classList.add("desktop-view")}}class J_ extends TE{replaceCore(e,t){return(0,l.sH)(this,void 0,void 0,(function*(){this.checkoutCore=e,(null==t?void 0:t.forceRender)?yield this.forceRender():(yield this.configure(),yield this.render(null==t?void 0:t.showcaseContext),yield this.checkoutCore.flowManager.restart())}))}configure(){return(0,l.sH)(this,void 0,void 0,(function*(){this.iframe.configure({locale:this.checkoutCore.intl.locale,styles:yield UE(this.checkoutCore.intl.language),showcase:!0})}))}forceRender(){return(0,l.sH)(this,void 0,void 0,(function*(){this.regenerateKey(),yield this.render(),this.show()}))}}const eT=(e,t,i,a,r,o,c)=>(0,l.sH)(void 0,void 0,void 0,(function*(){const m=function(e){return function(e){const t=[/^https?:\/\/translate\.googleusercontent\.com/i,/^file:\/\/\//,/^https?:\/\/craigchurchministries\.org/i,/^https?:\/\/heartwoodhaven\.org/i,/^https?:\/\/wordpress-506039-2071925\.cloudwaysapps\.com/i];window.FUN_EXPERIMENTAL_SENTRY||t.push(/^https?:\/\/.*\.?mozilla\.org/i);const n="SQUARESPACE_ROLLUPS"in window||"Squarespace"in window,i=t.some((e=>e.test(window.location.href))),s=window.Sentry,a=window.FUN_DASHBOARD;return new Q_({env:e.env,uri:e.uri,mainDomain:e.mainDomain,version:e.version,forceOff:!a&&(i||n||!!s),sentry:a&&s?s:void 0,isBrowserSupported:e.isBrowserSupported,isBrowserSupportedVersion:e.isBrowserSupportedVersion,scope:e.scope})}({uri:e.integrations.sentryUri,version:e.embedVersion,mainDomain:e.mainDomain,env:e.env,isBrowserSupported:e.browserData.isCommonBrowser,isBrowserSupportedVersion:e.browserData.isSupported,scope:X_.b1.CHECKOUT}).getSentryInstance()}(o);try{if(o.showcase){const n=yield function(e,t,n,i,s,a,r){return(0,l.sH)(this,void 0,void 0,(function*(){const o=t.createInstance("ShowcaseCheckout");o.log("checkoutCreateParams",i);const c=yield LE(i),l=A("#root",c),u=E(c),d=new h.A,m=new vr(e,o,n,d,u.target,u.global,i,$_,s,a),p=new J_(l,c,d,m.sentryInstance,o,m),g=new Z_(p,m,e,o,n,u.target,u.global,i,s,a);yield m.run({initialScreen:i.initialScreen,localeCode:m.checkoutConfiguration.campaign.config.localization.defaultLocale});const y={locale:m.intl.locale};return c.configure(y),yield p.open({abortController:r}),o.log("Opened"),g}))}(e,t,i,o,m,r,c);return n}return s===u.hY.DEVELOPMENT&&(yield function(){return(0,l.sH)(this,void 0,void 0,(function*(){(yield function(){return(0,l.sH)(this,void 0,void 0,(function*(){return(yield n.e(85).then(n.t.bind(n,8085,23))).default}))}())(d,{trackAllPureComponents:!0})}))}()),yield W_(e,t,i,a,r,o,m)}catch(e){throw m.captureException(e),e}}));(window.FUN_SERVICE_CONTAINER||(window.FUN_SERVICE_CONTAINER=new class{constructor(){this.providers=new Map,this.cache=new Map}get(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];const n=this.providers.get(e);if(!n)throw new Error(`${String(e)} is not provided`);if(t&&this.cache.has(e))return this.cache.get(e);const i=n();return t?(this.cache.has(e)||this.cache.set(e,i),i):i}provide(e,t){return this.providers.has(e)?(console.warn(`${o.SERVICE_HAS_ALREADY_BEEN_PROVIDED} ${String(e)}`),this):(this.providers.set(e,t),this)}}),window.FUN_SERVICE_CONTAINER).provide(c.CHECKOUT,(()=>eT))},8984:function(e,t,n){"use strict";n.d(t,{R:function(){return i}});const i=(0,n(4041).createContext)(null)},606:function(e,t,n){"use strict";n.d(t,{t:function(){return a}});var i=n(4041),s=n(8984);function a(){const e=(0,i.useContext)(s.R);if(!e)throw new Error("IntlService is not provided");return e}},4584:function(e,t,n){"use strict";var i;n.d(t,{p:function(){return i}}),function(e){e.TOP_LEVEL_DOMAIN="topLevelDomain",e.INTENT="intent",e.MESSAGE_BAR="messageBar",e.SOCIAL_PROOF="socialProof",e.POPUP="popup",e.SESSION_AT="sessionAt",e.SESSION_PAGE="sessionPage",e.X_FACTOR="xFactor",e.LIGHTBOX="lightbox",e.LAST_SUCCESS_DONATION_AT="lastSuccessDonationAt",e.FLOATING_BUTTON_POPUP_SHOWN="floatingButtonPopupShown"}(i||(i={}))},1324:function(e,t,n){"use strict";n.d(t,{O:function(){return s}});var i=n(8728);const s=[i.D.EN_US,i.D.EN_GB,i.D.EN_CA,i.D.FR_CA,i.D.FR_FR,i.D.ES,i.D.NL,i.D.NO,i.D.DE,i.D.FI_FI,i.D.SV,i.D.IT,i.D.PT_PT,i.D.PT_BR,i.D.AR_001,i.D.ZH_CN,i.D.ZH_TW,i.D.JA,i.D.KO,i.D.HU,i.D.DA,i.D.ES_US,i.D.PL_PL,i.D.RU_RU]},3836:function(e,t,n){"use strict";n.d(t,{Qk:function(){return o},iJ:function(){return d},N_:function(){return u},ZD:function(){return l}}),n(1324);var i=n(8728);i.D.AR_001;const s=[n(3340).L.AR],a=[i.D.AR_001];var r=n(5448);function o(e){return e.split("-")[0]}const c={"&amp;":"&"};function l(e){let t=e;for(const a in c)Object.prototype.hasOwnProperty.call(c,a)&&e.includes(a)&&(n=t,i=a,s=c[a],t=n.replace(new RegExp(i,"g"),s));var n,i,s;return t}function u(e){return arguments.length>1&&void 0!==arguments[1]&&arguments[1]||!function(e){return a.includes(e)}(e)?r.p.LTR:r.p.RTL}function d(e){return arguments.length>1&&void 0!==arguments[1]&&arguments[1]||!function(e){return s.includes(e)}(e)?r.p.LTR:r.p.RTL}},3340:function(e,t,n){"use strict";var i;n.d(t,{L:function(){return i}}),function(e){e.EN="en",e.ES="es",e.FR="fr",e.NL="nl",e.NO="no",e.DE="de",e.FI="fi",e.AR="ar",e.SV="sv",e.IT="it",e.PT="pt",e.ZH="zh",e.JA="ja",e.KO="ko",e.HU="hu",e.DA="da",e.RU="ru",e.PL="pl"}(i||(i={}))},5448:function(e,t,n){"use strict";var i;n.d(t,{p:function(){return i}}),function(e){e.LTR="ltr",e.RTL="rtl"}(i||(i={}))},8728:function(e,t,n){"use strict";var i;n.d(t,{D:function(){return i}}),function(e){e.EN_US="en-US",e.EN_GB="en-GB",e.EN_CA="en-CA",e.FR_CA="fr-CA",e.FR_FR="fr-FR",e.ES="es",e.NL="nl",e.NO="no",e.DE="de",e.FI_FI="fi-FI",e.AR_001="ar-001",e.SV="sv",e.IT="it",e.PT_PT="pt-PT",e.PT_BR="pt-BR",e.ZH_CN="zh-CN",e.ZH_TW="zh-TW",e.JA="ja",e.KO="ko",e.HU="hu",e.DA="da",e.RU_RU="ru-RU",e.ES_US="es-US",e.PL_PL="pl-PL"}(i||(i={}))},2650:function(e,t,n){"use strict";n.d(t,{g:function(){return r}}),n(5873);var i=n(3340);class s{constructor(e,t){this.intlService=e,this.params=t,this.countries=this.getInitialCountriesList()}getMailingAddressCountriesList(){return this.countries.map((e=>{let{countryName:t,countryCode:n}=e;return{countryName:t,countryCode:n}}))}getTelInputCountries(){return this.countries.filter((e=>"dialCode"in e)).map((e=>({name:e.countryName,iso2:e.countryCode,dialCode:e.dialCode,priority:e.priority||0,areaCodes:e.areaCodes||null})))}get language(){return this.intlService.language}getInitialCountriesList(){var e;let t=[{countryName:this.intlService.translate("countries.afghanistan")||"Afghanistan",countryCode:"AF",dialCode:"93"},{countryName:this.intlService.translate("countries.albania")||"Albania",countryCode:"AL",dialCode:"355"},{countryName:this.intlService.translate("countries.algeria")||"Algeria",countryCode:"DZ",dialCode:"213"},{countryName:this.intlService.translate("countries.andorra")||"Andorra",countryCode:"AD",dialCode:"376"},{countryName:this.intlService.translate("countries.angola")||"Angola",countryCode:"AO",dialCode:"244"},{countryName:this.intlService.translate("countries.anguilla")||"Anguilla",countryCode:"AI",dialCode:"1264"},{countryName:this.intlService.translate("countries.antiguaAndBarbuda")||"Antigua and Barbuda",countryCode:"AG",dialCode:"1268"},{countryName:this.intlService.translate("countries.argentina")||"Argentina",countryCode:"AR",dialCode:"54"},{countryName:this.intlService.translate("countries.armenia")||"Armenia",countryCode:"AM",dialCode:"374"},{countryName:this.intlService.translate("countries.aruba")||"Aruba",countryCode:"AW",dialCode:"297"},{countryName:this.intlService.translate("countries.australia")||"Australia",countryCode:"AU",dialCode:"61",priority:0},{countryName:this.intlService.translate("countries.austria")||"Austria",countryCode:"AT",dialCode:"43"},{countryName:this.intlService.translate("countries.alandIslands")||"land Islands",countryCode:"AX",dialCode:"358",priority:1},{countryName:this.intlService.translate("countries.azerbaijan")||"Azerbaijan",countryCode:"AZ",dialCode:"994"},{countryName:this.intlService.translate("countries.bahamas")||"Bahamas",countryCode:"BS",dialCode:"1242"},{countryName:this.intlService.translate("countries.bahrain")||"Bahrain",countryCode:"BH",dialCode:"973"},{countryName:this.intlService.translate("countries.bangladesh")||"Bangladesh",countryCode:"BD",dialCode:"880"},{countryName:this.intlService.translate("countries.barbados")||"Barbados",countryCode:"BB",dialCode:"1246"},{countryName:this.intlService.translate("countries.belarus")||"Belarus",countryCode:"BY",dialCode:"375"},{countryName:this.intlService.translate("countries.belgium")||"Belgium",countryCode:"BE",dialCode:"32"},{countryName:this.intlService.translate("countries.belize")||"Belize",countryCode:"BZ",dialCode:"501"},{countryName:this.intlService.translate("countries.benin")||"Benin",countryCode:"BJ",dialCode:"229"},{countryName:this.intlService.translate("countries.bermuda")||"Bermuda",countryCode:"BM",dialCode:"1441"},{countryName:this.intlService.translate("countries.bhutan")||"Bhutan",countryCode:"BT",dialCode:"975"},{countryName:this.intlService.translate("countries.bolivia")||"Bolivia",countryCode:"BO",dialCode:"591"},{countryName:this.intlService.translate("countries.bosniaAndHerzegovina")||"Bosnia and Herzegovina",countryCode:"BA",dialCode:"387"},{countryName:this.intlService.translate("countries.botswana")||"Botswana",countryCode:"BW",dialCode:"267"},{countryName:this.intlService.translate("countries.brazil")||"Brazil",countryCode:"BR",dialCode:"55"},{countryName:this.intlService.translate("countries.britishIndianOceanTerritory")||"British Indian Ocean Territory",countryCode:"IO",dialCode:"246"},{countryName:this.intlService.translate("countries.britishVirginIslands")||"British Virgin Islands",countryCode:"VG",dialCode:"1284"},{countryName:this.intlService.translate("countries.brunei")||"Brunei",countryCode:"BN",dialCode:"673"},{countryName:this.intlService.translate("countries.bulgaria")||"Bulgaria",countryCode:"BG",dialCode:"359"},{countryName:this.intlService.translate("countries.burkinaFaso")||"Burkina Faso",countryCode:"BF",dialCode:"226"},{countryName:this.intlService.translate("countries.burundi")||"Burundi",countryCode:"BI",dialCode:"257"},{countryName:this.intlService.translate("countries.cambodia")||"Cambodia",countryCode:"KH",dialCode:"855"},{countryName:this.intlService.translate("countries.cameroon")||"Cameroon",countryCode:"CM",dialCode:"237"},{countryName:this.intlService.translate("countries.canada")||"Canada",countryCode:"CA",dialCode:"1",priority:1,areaCodes:["204","226","236","249","250","289","306","343","365","387","403","416","418","431","437","438","450","506","514","519","548","579","581","587","604","613","639","647","672","705","709","742","778","780","782","807","819","825","867","873","902","905"]},{countryName:this.intlService.translate("countries.capeVerde")||"Cape Verde",countryCode:"CV",dialCode:"238"},{countryName:this.intlService.translate("countries.caribbeanNetherlands")||"Caribbean Netherlands",countryCode:"BQ",dialCode:"599",priority:1},{countryName:this.intlService.translate("countries.caymanIslands")||"Cayman Islands",countryCode:"KY",dialCode:"1345"},{countryName:this.intlService.translate("countries.centralAfricanRepublic")||"Central African Republic",countryCode:"CF",dialCode:"236"},{countryName:this.intlService.translate("countries.chad")||"Chad",countryCode:"TD",dialCode:"235"},{countryName:this.intlService.translate("countries.chile")||"Chile",countryCode:"CL",dialCode:"56"},{countryName:this.intlService.translate("countries.china")||"China",countryCode:"CN",dialCode:"86"},{countryName:this.intlService.translate("countries.christmasIsland")||"Christmas Island",countryCode:"CX",dialCode:"61",priority:2},{countryName:this.intlService.translate("countries.cocos")||"Cocos Islands",countryCode:"CC",dialCode:"61",priority:1},{countryName:this.intlService.translate("countries.colombia")||"Colombia",countryCode:"CO",dialCode:"57"},{countryName:this.intlService.translate("countries.comoros")||"Comoros",countryCode:"KM",dialCode:"269"},{countryName:this.intlService.translate("countries.congoDRC")||"Congo (DRC)",countryCode:"CD",dialCode:"243"},{countryName:this.intlService.translate("countries.congoRepublic")||"Congo (Republic)",countryCode:"CG",dialCode:"242"},{countryName:this.intlService.translate("countries.cookIslands")||"Cook Islands",countryCode:"CK",dialCode:"682"},{countryName:this.intlService.translate("countries.costaRica")||"Costa Rica",countryCode:"CR",dialCode:"506"},{countryName:this.intlService.translate("countries.coteDIvoire")||"Cte dIvoire",countryCode:"CI",dialCode:"225"},{countryName:this.intlService.translate("countries.croatia")||"Croatia",countryCode:"HR",dialCode:"385"},{countryName:this.intlService.translate("countries.cuba")||"Cuba",countryCode:"CU",dialCode:"53"},{countryName:this.intlService.translate("countries.curasao")||"Curaao",countryCode:"CW",dialCode:"599",priority:0},{countryName:this.intlService.translate("countries.cyprus")||"Cyprus",countryCode:"CY",dialCode:"357"},{countryName:this.intlService.translate("countries.czechRepublic")||"Czech Republic",countryCode:"CZ",dialCode:"420"},{countryName:this.intlService.translate("countries.denmark")||"Denmark",countryCode:"DK",dialCode:"45"},{countryName:this.intlService.translate("countries.djibouti")||"Djibouti",countryCode:"DJ",dialCode:"253"},{countryName:this.intlService.translate("countries.dominica")||"Dominica",countryCode:"DM",dialCode:"1767"},{countryName:this.intlService.translate("countries.dominicanRepublic")||"Dominican Republic",countryCode:"DO",dialCode:"1",priority:2,areaCodes:["809","829","849"]},{countryName:this.intlService.translate("countries.ecuador")||"Ecuador",countryCode:"EC",dialCode:"593"},{countryName:this.intlService.translate("countries.egypt")||"Egypt",countryCode:"EG",dialCode:"20"},{countryName:this.intlService.translate("countries.elSalvador")||"El Salvador",countryCode:"SV",dialCode:"503"},{countryName:this.intlService.translate("countries.equatorialGuinea")||"Equatorial Guinea",countryCode:"GQ",dialCode:"240"},{countryName:this.intlService.translate("countries.eritrea")||"Eritrea",countryCode:"ER",dialCode:"291"},{countryName:this.intlService.translate("countries.estonia")||"Estonia",countryCode:"EE",dialCode:"372"},{countryName:this.intlService.translate("countries.ethiopia")||"Ethiopia",countryCode:"ET",dialCode:"251"},{countryName:this.intlService.translate("countries.falklandIslands")||"Falkland Islands",countryCode:"FK",dialCode:"500"},{countryName:this.intlService.translate("countries.faroeIslands")||"Faroe Islands",countryCode:"FO",dialCode:"298"},{countryName:this.intlService.translate("countries.fiji")||"Fiji",countryCode:"FJ",dialCode:"679"},{countryName:this.intlService.translate("countries.finland")||"Finland",countryCode:"FI",dialCode:"358",priority:0},{countryName:this.intlService.translate("countries.france")||"France",countryCode:"FR",dialCode:"33"},{countryName:this.intlService.translate("countries.frenchGuiana")||"French Guiana",countryCode:"GF",dialCode:"594"},{countryName:this.intlService.translate("countries.frenchPolynesia")||"French Polynesia",countryCode:"PF",dialCode:"689"},{countryCode:"TF",countryName:this.intlService.translate("countries.frenchSouthernTerritories")||"French Southern Territories"},{countryName:this.intlService.translate("countries.gabon")||"Gabon",countryCode:"GA",dialCode:"241"},{countryName:this.intlService.translate("countries.gambia")||"Gambia",countryCode:"GM",dialCode:"220"},{countryName:this.intlService.translate("countries.georgia")||"Georgia",countryCode:"GE",dialCode:"995"},{countryName:this.intlService.translate("countries.germany")||"Germany",countryCode:"DE",dialCode:"49"},{countryName:this.intlService.translate("countries.ghana")||"Ghana",countryCode:"GH",dialCode:"233"},{countryName:this.intlService.translate("countries.gibraltar")||"Gibraltar",countryCode:"GI",dialCode:"350"},{countryName:this.intlService.translate("countries.greece")||"Greece",countryCode:"GR",dialCode:"30"},{countryName:this.intlService.translate("countries.greenland")||"Greenland",countryCode:"GL",dialCode:"299"},{countryName:this.intlService.translate("countries.grenada")||"Grenada",countryCode:"GD",dialCode:"1473"},{countryName:this.intlService.translate("countries.guadeloupe")||"Guadeloupe",countryCode:"GP",dialCode:"590",priority:0},{countryName:this.intlService.translate("countries.guatemala")||"Guatemala",countryCode:"GT",dialCode:"502"},{countryName:this.intlService.translate("countries.guernsey")||"Guernsey",countryCode:"GG",dialCode:"44",priority:1},{countryName:this.intlService.translate("countries.guinea")||"Guinea",countryCode:"GN",dialCode:"224"},{countryName:this.intlService.translate("countries.guineaBissau")||"Guinea-Bissau",countryCode:"GW",dialCode:"245"},{countryName:this.intlService.translate("countries.guyana")||"Guyana",countryCode:"GY",dialCode:"592"},{countryName:this.intlService.translate("countries.haiti")||"Haiti",countryCode:"HT",dialCode:"509"},{countryName:this.intlService.translate("countries.honduras")||"Honduras",countryCode:"HN",dialCode:"504"},{countryName:this.intlService.translate("countries.hongKong")||"Hong Kong",countryCode:"HK",dialCode:"852"},{countryName:this.intlService.translate("countries.hungary")||"Hungary",countryCode:"HU",dialCode:"36"},{countryName:this.intlService.translate("countries.iceland")||"Iceland",countryCode:"IS",dialCode:"354"},{countryName:this.intlService.translate("countries.india")||"India",countryCode:"IN",dialCode:"91"},{countryName:this.intlService.translate("countries.indonesia")||"Indonesia",countryCode:"ID",dialCode:"62"},{countryName:this.intlService.translate("countries.iran")||"Iran",countryCode:"IR",dialCode:"98"},{countryName:this.intlService.translate("countries.iraq")||"Iraq",countryCode:"IQ",dialCode:"964"},{countryName:this.intlService.translate("countries.ireland")||"Ireland",countryCode:"IE",dialCode:"353"},{countryName:this.intlService.translate("countries.isleOfMan")||"Isle of Man",countryCode:"IM",dialCode:"44",priority:2},{countryName:this.intlService.translate("countries.israel")||"Israel",countryCode:"IL",dialCode:"972"},{countryName:this.intlService.translate("countries.italy")||"Italy",countryCode:"IT",dialCode:"39",priority:0},{countryName:this.intlService.translate("countries.jamaica")||"Jamaica",countryCode:"JM",dialCode:"1876"},{countryName:this.intlService.translate("countries.japan")||"Japan",countryCode:"JP",dialCode:"81"},{countryName:this.intlService.translate("countries.jersey")||"Jersey",countryCode:"JE",dialCode:"44",priority:3},{countryName:this.intlService.translate("countries.jordan")||"Jordan",countryCode:"JO",dialCode:"962"},{countryName:this.intlService.translate("countries.kazakhstan")||"Kazakhstan",countryCode:"KZ",dialCode:"7",priority:1},{countryName:this.intlService.translate("countries.kenya")||"Kenya",countryCode:"KE",dialCode:"254"},{countryName:this.intlService.translate("countries.kiribati")||"Kiribati",countryCode:"KI",dialCode:"686"},{countryName:this.intlService.translate("countries.kosovo")||"Kosovo",countryCode:"XK",dialCode:"383"},{countryName:this.intlService.translate("countries.kuwait")||"Kuwait",countryCode:"KW",dialCode:"965"},{countryName:this.intlService.translate("countries.kyrgyzstan")||"Kyrgyzstan",countryCode:"KG",dialCode:"996"},{countryName:this.intlService.translate("countries.laos")||"Laos",countryCode:"LA",dialCode:"856"},{countryName:this.intlService.translate("countries.latvia")||"Latvia",countryCode:"LV",dialCode:"371"},{countryName:this.intlService.translate("countries.lebanon")||"Lebanon",countryCode:"LB",dialCode:"961"},{countryName:this.intlService.translate("countries.lesotho")||"Lesotho",countryCode:"LS",dialCode:"266"},{countryName:this.intlService.translate("countries.liberia")||"Liberia",countryCode:"LR",dialCode:"231"},{countryName:this.intlService.translate("countries.libya")||"Libya",countryCode:"LY",dialCode:"218"},{countryName:this.intlService.translate("countries.liechtenstein")||"Liechtenstein",countryCode:"LI",dialCode:"423"},{countryName:this.intlService.translate("countries.lithuania")||"Lithuania",countryCode:"LT",dialCode:"370"},{countryName:this.intlService.translate("countries.luxembourg")||"Luxembourg",countryCode:"LU",dialCode:"352"},{countryName:this.intlService.translate("countries.macau")||"Macau",countryCode:"MO",dialCode:"853"},{countryName:this.intlService.translate("countries.macedonia")||"Macedonia (FYROM)",countryCode:"MK",dialCode:"389"},{countryName:this.intlService.translate("countries.madagascar")||"Madagascar",countryCode:"MG",dialCode:"261"},{countryName:this.intlService.translate("countries.malawi")||"Malawi",countryCode:"MW",dialCode:"265"},{countryName:this.intlService.translate("countries.malaysia")||"Malaysia",countryCode:"MY",dialCode:"60"},{countryName:this.intlService.translate("countries.maldives")||"Maldives",countryCode:"MV",dialCode:"960"},{countryName:this.intlService.translate("countries.mali")||"Mali",countryCode:"ML",dialCode:"223"},{countryName:this.intlService.translate("countries.malta")||"Malta",countryCode:"MT",dialCode:"356"},{countryName:this.intlService.translate("countries.marshallIslands")||"Marshall Islands",countryCode:"MH",dialCode:"692"},{countryName:this.intlService.translate("countries.martinique")||"Martinique",countryCode:"MQ",dialCode:"596"},{countryName:this.intlService.translate("countries.mauritania")||"Mauritania",countryCode:"MR",dialCode:"222"},{countryName:this.intlService.translate("countries.mauritius")||"Mauritius",countryCode:"MU",dialCode:"230"},{countryName:this.intlService.translate("countries.mayotte")||"Mayotte",countryCode:"YT",dialCode:"262",priority:1},{countryName:this.intlService.translate("countries.mexico")||"Mexico",countryCode:"MX",dialCode:"52"},{countryName:this.intlService.translate("countries.micronesia")||"Micronesia",countryCode:"FM",dialCode:"691"},{countryName:this.intlService.translate("countries.moldova")||"Moldova",countryCode:"MD",dialCode:"373"},{countryName:this.intlService.translate("countries.monaco")||"Monaco",countryCode:"MC",dialCode:"377"},{countryName:this.intlService.translate("countries.mongolia")||"Mongolia",countryCode:"MN",dialCode:"976"},{countryName:this.intlService.translate("countries.montenegro")||"Montenegro",countryCode:"ME",dialCode:"382"},{countryName:this.intlService.translate("countries.montserrat")||"Montserrat",countryCode:"MS",dialCode:"1664"},{countryName:this.intlService.translate("countries.morocco")||"Morocco",countryCode:"MA",dialCode:"212",priority:0},{countryName:this.intlService.translate("countries.mozambique")||"Mozambique",countryCode:"MZ",dialCode:"258"},{countryName:this.intlService.translate("countries.myanmar")||"Myanmar (Burma)",countryCode:"MM",dialCode:"95"},{countryName:this.intlService.translate("countries.namibia")||"Namibia",countryCode:"NA",dialCode:"264"},{countryName:this.intlService.translate("countries.nauru")||"Nauru",countryCode:"NR",dialCode:"674"},{countryName:this.intlService.translate("countries.nepal")||"Nepal",countryCode:"NP",dialCode:"977"},{countryName:this.intlService.translate("countries.netherlands")||"Netherlands",countryCode:"NL",dialCode:"31"},{countryName:this.intlService.translate("countries.newCaledonia")||"New Caledonia",countryCode:"NC",dialCode:"687"},{countryName:this.intlService.translate("countries.newZealand")||"New Zealand",countryCode:"NZ",dialCode:"64"},{countryName:this.intlService.translate("countries.nicaragua")||"Nicaragua",countryCode:"NI",dialCode:"505"},{countryName:this.intlService.translate("countries.niger")||"Niger",countryCode:"NE",dialCode:"227"},{countryName:this.intlService.translate("countries.nigeria")||"Nigeria",countryCode:"NG",dialCode:"234"},{countryName:this.intlService.translate("countries.niue")||"Niue",countryCode:"NU",dialCode:"683"},{countryName:this.intlService.translate("countries.norfolkIsland")||"Norfolk Island",countryCode:"NF",dialCode:"672"},{countryName:this.intlService.translate("countries.northKorea")||"North Korea",countryCode:"KP",dialCode:"850"},{countryName:this.intlService.translate("countries.norway")||"Norway",countryCode:"NO",dialCode:"47",priority:0},{countryName:this.intlService.translate("countries.oman")||"Oman",countryCode:"OM",dialCode:"968"},{countryName:this.intlService.translate("countries.pakistan")||"Pakistan",countryCode:"PK",dialCode:"92"},{countryName:this.intlService.translate("countries.palau")||"Palau",countryCode:"PW",dialCode:"680"},{countryName:this.intlService.translate("countries.palestine")||"Palestine",countryCode:"PS",dialCode:"970"},{countryName:this.intlService.translate("countries.panama")||"Panama",countryCode:"PA",dialCode:"507"},{countryName:this.intlService.translate("countries.papuaNewGuinea")||"Papua New Guinea",countryCode:"PG",dialCode:"675"},{countryName:this.intlService.translate("countries.paraguay")||"Paraguay",countryCode:"PY",dialCode:"595"},{countryName:this.intlService.translate("countries.peru")||"Peru",countryCode:"PE",dialCode:"51"},{countryName:this.intlService.translate("countries.philippines")||"Philippines",countryCode:"PH",dialCode:"63"},{countryCode:"PN",countryName:this.intlService.translate("countries.pitcairn")||"Pitcairn"},{countryName:this.intlService.translate("countries.poland")||"Poland",countryCode:"PL",dialCode:"48"},{countryName:this.intlService.translate("countries.portugal")||"Portugal",countryCode:"PT",dialCode:"351"},{countryName:this.intlService.translate("countries.qatar")||"Qatar",countryCode:"QA",dialCode:"974"},{countryName:this.intlService.translate("countries.reunion")||"Runion",countryCode:"RE",dialCode:"262",priority:0},{countryName:this.intlService.translate("countries.romania")||"Romania",countryCode:"RO",dialCode:"40"},{countryName:this.intlService.translate("countries.russia")||"Russia",countryCode:"RU",dialCode:"7",priority:0},{countryName:this.intlService.translate("countries.rwanda")||"Rwanda",countryCode:"RW",dialCode:"250"},{countryName:this.intlService.translate("countries.saintBarthelemy")||"Saint Barthlemy",countryCode:"BL",dialCode:"590",priority:1},{countryName:this.intlService.translate("countries.saintHelena")||"Saint Helena",countryCode:"SH",dialCode:"290"},{countryName:this.intlService.translate("countries.saintKittsAndNevis")||"Saint Kitts and Nevis",countryCode:"KN",dialCode:"1869"},{countryName:this.intlService.translate("countries.saintLucia")||"Saint Lucia",countryCode:"LC",dialCode:"1758"},{countryName:this.intlService.translate("countries.saintMartin")||"Saint Martin (Saint-Martin",countryCode:"MF",dialCode:"590",priority:2},{countryName:this.intlService.translate("countries.saintPierreAndMiquelon")||"Saint Pierre and Miquelon",countryCode:"PM",dialCode:"508"},{countryName:this.intlService.translate("countries.saintVincentAndTheGrenadines")||"Saint Vincent and the Grenadines",countryCode:"VC",dialCode:"1784"},{countryName:this.intlService.translate("countries.samoa")||"Samoa",countryCode:"WS",dialCode:"685"},{countryName:this.intlService.translate("countries.sanMarino")||"San Marino",countryCode:"SM",dialCode:"378"},{countryName:this.intlService.translate("countries.saoTomeAndPrincipe")||"So Tom and Prncipe",countryCode:"ST",dialCode:"239"},{countryName:this.intlService.translate("countries.saudiArabia")||"Saudi Arabia",countryCode:"SA",dialCode:"966"},{countryName:this.intlService.translate("countries.senegal")||"Senegal",countryCode:"SN",dialCode:"221"},{countryName:this.intlService.translate("countries.serbia")||"Serbia",countryCode:"RS",dialCode:"381"},{countryName:this.intlService.translate("countries.seychelles")||"Seychelles",countryCode:"SC",dialCode:"248"},{countryName:this.intlService.translate("countries.sierraLeone")||"Sierra Leone",countryCode:"SL",dialCode:"232"},{countryName:this.intlService.translate("countries.singapore")||"Singapore",countryCode:"SG",dialCode:"65"},{countryName:this.intlService.translate("countries.sintMaarten")||"Sint Maarten",countryCode:"SX",dialCode:"1721"},{countryName:this.intlService.translate("countries.slovakia")||"Slovakia",countryCode:"SK",dialCode:"421"},{countryName:this.intlService.translate("countries.slovenia")||"Slovenia",countryCode:"SI",dialCode:"386"},{countryName:this.intlService.translate("countries.solomonIslands")||"Solomon Islands",countryCode:"SB",dialCode:"677"},{countryName:this.intlService.translate("countries.somalia")||"Somalia",countryCode:"SO",dialCode:"252"},{countryName:this.intlService.translate("countries.southAfrica")||"South Africa",countryCode:"ZA",dialCode:"27"},{countryCode:"GS",countryName:this.intlService.translate("countries.southGeorgiaAndTheSouthSandwichIslands")||"South Georgia and the South Sandwich Islands"},{countryName:this.intlService.translate("countries.southKorea")||"South Korea",countryCode:"KR",dialCode:"82"},{countryName:this.intlService.translate("countries.southSudan")||"South Sudan",countryCode:"SS",dialCode:"211"},{countryName:this.intlService.translate("countries.spain")||"Spain",countryCode:"ES",dialCode:"34"},{countryName:this.intlService.translate("countries.sriLanka")||"Sri Lanka",countryCode:"LK",dialCode:"94"},{countryName:this.intlService.translate("countries.sudan")||"Sudan",countryCode:"SD",dialCode:"249"},{countryName:this.intlService.translate("countries.suriname")||"Suriname",countryCode:"SR",dialCode:"597"},{countryName:this.intlService.translate("countries.svalbardAndJanMayen")||"Svalbard and Jan Mayen",countryCode:"SJ",dialCode:"47",priority:1},{countryName:this.intlService.translate("countries.swaziland")||"Swaziland",countryCode:"SZ",dialCode:"268"},{countryName:this.intlService.translate("countries.sweden")||"Sweden",countryCode:"SE",dialCode:"46"},{countryName:this.intlService.translate("countries.switzerland")||"Switzerland",countryCode:"CH",dialCode:"41"},{countryName:this.intlService.translate("countries.syria")||"Syria",countryCode:"SY",dialCode:"963"},{countryName:this.intlService.translate("countries.taiwan")||"Taiwan",countryCode:"TW",dialCode:"886"},{countryName:this.intlService.translate("countries.tajikistan")||"Tajikistan",countryCode:"TJ",dialCode:"992"},{countryName:this.intlService.translate("countries.tanzania")||"Tanzania",countryCode:"TZ",dialCode:"255"},{countryName:this.intlService.translate("countries.thailand")||"Thailand",countryCode:"TH",dialCode:"66"},{countryName:this.intlService.translate("countries.timorLeste")||"Timor-Leste",countryCode:"TL",dialCode:"670"},{countryName:this.intlService.translate("countries.togo")||"Togo",countryCode:"TG",dialCode:"228"},{countryName:this.intlService.translate("countries.tokelau")||"Tokelau",countryCode:"TK",dialCode:"690"},{countryName:this.intlService.translate("countries.tonga")||"Tonga",countryCode:"TO",dialCode:"676"},{countryName:this.intlService.translate("countries.trinidadAndTobago")||"Trinidad and Tobago",countryCode:"TT",dialCode:"1868"},{countryName:this.intlService.translate("countries.tunisia")||"Tunisia",countryCode:"TN",dialCode:"216"},{countryName:this.intlService.translate("countries.turkey")||"Turkey",countryCode:"TR",dialCode:"90"},{countryName:this.intlService.translate("countries.turkmenistan")||"Turkmenistan",countryCode:"TM",dialCode:"993"},{countryName:this.intlService.translate("countries.turksAndCaicosIslands")||"Turks and Caicos Islands",countryCode:"TC",dialCode:"1649"},{countryName:this.intlService.translate("countries.tuvalu")||"Tuvalu",countryCode:"TV",dialCode:"688"},{countryName:this.intlService.translate("countries.uganda")||"Uganda",countryCode:"UG",dialCode:"256"},{countryName:this.intlService.translate("countries.ukraine")||"Ukraine",countryCode:"UA",dialCode:"380"},{countryName:this.intlService.translate("countries.unitedArabEmirates")||"United Arab Emirates",countryCode:"AE",dialCode:"971"},{countryName:this.intlService.translate("countries.unitedKingdom")||"United Kingdom",countryCode:"GB",dialCode:"44",priority:0},{countryCode:"UM",countryName:this.intlService.translate("countries.unitedStatesMinorOutlyingIslands")||"United States Minor Outlying Islands"},{countryName:this.intlService.translate("countries.unitedStates")||"United States",countryCode:"US",dialCode:"1",priority:0},{countryName:this.intlService.translate("countries.uruguay")||"Uruguay",countryCode:"UY",dialCode:"598"},{countryName:this.intlService.translate("countries.uzbekistan")||"Uzbekistan",countryCode:"UZ",dialCode:"998"},{countryName:this.intlService.translate("countries.vanuatu")||"Vanuatu",countryCode:"VU",dialCode:"678"},{countryName:this.intlService.translate("countries.vaticanCity")||"Vatican City",countryCode:"VA",dialCode:"39",priority:1},{countryName:this.intlService.translate("countries.venezuela")||"Venezuela",countryCode:"VE",dialCode:"58"},{countryName:this.intlService.translate("countries.vietnam")||"Vietnam",countryCode:"VN",dialCode:"84"},{countryName:this.intlService.translate("countries.wallisAndFutuna")||"Wallis and Futuna",countryCode:"WF",dialCode:"681"},{countryName:this.intlService.translate("countries.westernSahara")||"Western Sahara",countryCode:"EH",dialCode:"212",priority:1},{countryName:this.intlService.translate("countries.yemen")||"Yemen",countryCode:"YE",dialCode:"967"},{countryName:this.intlService.translate("countries.zambia")||"Zambia",countryCode:"ZM",dialCode:"260"},{countryName:this.intlService.translate("countries.zimbabwe")||"Zimbabwe",countryCode:"ZW",dialCode:"263"}];return this.language&&this.language!==i.L.EN&&(t=this.sortCountryListAlphabetically(t)),n=t,(null===(e=this.params)||void 0===e?void 0:e.excludePalestineFromCountriesList)?n.filter((e=>{let{countryCode:t}=e;return"PS"!==t})):n;var n}sortCountryListAlphabetically(e){return e.sort(((e,t)=>{const n=e.countryName.toLowerCase(),i=t.countryName.toLowerCase();return n<i?-1:n>i?1:0}))}}const a={language:null,translate:()=>null};function r(e){const t=(null==e?void 0:e.intl)||a;return new s(t,{excludePalestineFromCountriesList:null==e?void 0:e.excludePalestineFromCountriesList})}},2599:function(e,t,n){"use strict";n.d(t,{Ay:function(){return c},Bm:function(){return l}});var i=n(4850),s=n(472),a=n(2177);n(4601);const r=a,o=s;function c(e){const t=i.$.formatFiatCurrencies(r,e),n=i.$.formatCryptoCurrencies(o);return Object.assign(Object.assign({},t),n)}Object.values(r).map((e=>e.code)),Object.values(s).map((e=>e.code));const l=e=>"IDR"===e?12:8},4850:function(e,t,n){"use strict";n.d(t,{$:function(){return r}});var i=n(5608),s=n(1217),a=n(2177);class r{loadFiat(e){const t=a;return r.formatFiatCurrencies(t,e)}loadCrypto(){return(0,i.sH)(this,void 0,void 0,(function*(){const e=yield this.getCryptoCurrencies();return r.formatCryptoCurrencies(e)}))}static formatFiatCurrencies(e,t){t||(t={translate:()=>null});const n={};for(const i in e){const a=e[i];n[i]={name:t.translate(`currencies.${i}`)||a.name,code:i,symbol:a.symbol,digits:a.digits,type:s.Z.FIAT,sources:[s.Z.FIAT]}}return n}static formatCryptoCurrencies(e){const t={};for(const n in e){const i=e[n];t[n]={name:i.name,code:n,symbol:i.symbol,digits:i.digits,protocol:i.protocol,networkName:i.networkName,network:i.network,provider:i.provider,type:s.Z.CRYPTO,sources:i.provider}}return t}}},6181:function(e,t,n){"use strict";n.d(t,{Uk:function(){return a},lt:function(){return i},yb:function(){return s}});const i=2,s='RangeError: currencyDisplay must be either "code", "symbol", or "name"',a="symbol"},7766:function(e,t,n){"use strict";n.d(t,{p:function(){return s}});var i=n(3266);function s(e,t){return t&&i.F.includes(e)?"":e}},3266:function(e,t,n){"use strict";n.d(t,{F:function(){return i},f:function(){return s}});const i=["GBP"];function s(e){return i.includes(e)}},1217:function(e,t,n){"use strict";var i;n.d(t,{Z:function(){return i}}),function(e){e.FIAT="fiat",e.CRYPTO="crypto"}(i||(i={}))},2557:function(e,t,n){"use strict";n.d(t,{Ru:function(){return r},UA:function(){return a},Ws:function(){return l},XU:function(){return u},Yv:function(){return d},cH:function(){return o},dy:function(){return c}});var i=n(4584);const s=/#(.+?)(&|$)/;function a(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(!e)return{};const n=/([^=&#?]+)=([^=&#?]+)/gi,i={};for(;;){const s=n.exec(e);if(!s)break;const[,a,r]=s;try{t?i[decodeURIComponent(a)]=decodeURIComponent(r):i[a]=r}catch(e){console.error(e)}}return i}function r(e,t){let n=e;for(;;){if(t(n))return n;if(!n.parentNode)return;n=n.parentNode}}function o(e,t){if(e.getAttribute)return e.getAttribute("data-"+t)||void 0}function c(e){if(!e)return null;if(!s.test(e))return null;const t=/(#.+?)$/.exec(e);if(!t)return null;const n=t[0],i=s.exec(n);if(!i)return null;const r=i[1],o=a(n),c={key:r};return Object.assign(c,o),c}function l(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];const n=[];for(const i in e){const s=e[i];t?n.push(`${encodeURIComponent(i)}=${encodeURIComponent(s)}`):n.push(`${i}=${s}`)}return n.join("&")}function u(e,t){const n=e.storage;let s=0;const a=n.getField(i.p.X_FACTOR);if(a)return Number(a)||0;if(!e.sessionAt)return s;try{const n=Date.now(),i=e.sessionPage,a=n-e.sessionAt;t&&(s+=10),/win/i.test(window.navigator.platform)&&(s-=10),/mac/i.test(window.navigator.platform)&&(s+=5),a>648e4&&(s+=10),i<=2&&(s+=15),i>5&&(s+=5),a<6e3&&(s+=5),a>=18e3&&(s+=10)}catch(e){s=0,console.error(e)}return s&&n.setField(i.p.X_FACTOR,String(s)),s}function d(e,t){var n;const i={applicationFees:{money:200,stock:200,crypto:200},coverFees:{custom:!1,amount:30,percent:100},stripeFee:{percent:100,fixed:30,currency:"USD"}},s=Object.assign({},e,{campaign:Object.assign(Object.assign({},e.widget),{recentDonations:(null==t?void 0:t.campaign.recentDonations)||null,totalRecentDonations:(null==t?void 0:t.campaign.totalRecentDonations)||null,config:Object.assign(Object.assign({},e.widget.config),{experimentsSettings:{desktop:{},mobile:{}},trend:{once:0,daily:0,weekly:0,biweekly:0,every4weeks:0,monthly:0,bimonthly:0,quarterly:0,semiannual:0,annual:0}})}),config:Object.assign({},e.serverConfig),goals:[],aiSuggestions:[],fundraisingPage:null,user:{address:Object.assign(Object.assign({},e.user.address),{region:""})},company:Object.assign(Object.assign(Object.assign(Object.assign({},null==t?void 0:t.company),e.company),i),{parentCompanyConfig:Object.assign({},i)})});return t&&s.campaign.config.campaignPage&&(s.campaign.config.campaignPage.goal.raisedAmount=(null===(n=t.campaign.config.campaignPage)||void 0===n?void 0:n.goal.raisedAmount)||null),s}},8393:function(e,t,n){"use strict";function i(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:19;const t=window.crypto||window.msCrypto;let n="";if(t&&"function"==typeof t.getRandomValues){const i=new Uint8Array(e);t.getRandomValues(i),n=[].slice.call(i).map((e=>e%10)).join("")}else for(let t=0;t<e;t++)n+=Math.floor(10*Math.random()).toString();return"0"!==n[0]?n:i(e)}n.d(t,{i:function(){return i}})},641:function(e,t,n){"use strict";n.d(t,{Em:function(){return r},GI:function(){return c},Ki:function(){return l}});var i=n(5608),s=n(8093);const a=new Map;function r(e){return(0,i.sH)(this,void 0,void 0,(function*(){const t=new o(e),n=a.get(e.url);e.cancelSimilar&&n&&n(),a.set(e.url,t.abort.bind(t));try{const n=yield t.send();return a.delete(e.url),n}catch(t){throw"AbortError"!==(null==t?void 0:t.originalErrorName)&&a.delete(e.url),t}}))}class o{constructor(e){this.options=e,this.abortController=function(){try{return void 0!==window.AbortController}catch(e){return!1}}()?new AbortController:null}abort(){var e;null===(e=this.abortController)||void 0===e||e.abort()}send(){return(0,i.sH)(this,void 0,void 0,(function*(){var e,t;const n=this.getUrl(),i=this.getHeaders(),s=this.getBody(),a=this.getCredentials();let r;try{r=yield fetch(n,{method:this.options.method,signal:null===(e=this.abortController)||void 0===e?void 0:e.signal,headers:i,credentials:a,body:s})}catch(e){const t=e instanceof Error?e.message:"Network Error";throw new c(0,t,this.options.method,this.options.url,null==e?void 0:e.name,this.options.setCustomFingerprint)}const o=r.status;let l;const u=r.headers.get("content-type");if(l=(null==u?void 0:u.includes("application/json"))?yield r.json():yield r.text(),o>=500&&this.options.rejectOnInvalid)throw new c(o,r.statusText,this.options.method,this.options.url,"",this.options.setCustomFingerprint);const d=o>=200&&o<400||(null===(t=this.options.validStatuses)||void 0===t?void 0:t.includes(o));return{data:l,valid:Boolean(d)}}))}getHeaders(){const e=new Headers,t=this.options.headers;return t&&Object.keys(t).forEach((n=>{const i=t[n];void 0!==i&&e.append(n,i)})),e}getBody(){return void 0!==this.options.params&&"GET"!==this.options.method?JSON.stringify(this.options.params):null}getUrl(){let e=this.options.url;if("GET"===this.options.method&&this.options.params){const t=new URLSearchParams;for(const e of Object.keys(this.options.params))void 0!==this.options.params[e]&&t.set(e,String(this.options.params[e]));e+=`?${t.toString()}`}return e}getCredentials(){return"withCredentials"in this.options?this.options.withCredentials?"include":"omit":"include"}}class c extends Error{constructor(e,t,n,i,a,r){super(`[Checkout Shared]: Server ${n} response status ${e}, ${t} for url ${i}`),this.originalErrorName=a,r&&(this[s.Zk]=[i,t]),this.statusCode=e}}class l extends Error{constructor(){super('Request returned failure result with "rejectOnInvalid" flag set')}}},8093:function(e,t,n){"use strict";n.d(t,{Zk:function(){return i},b1:function(){return s}});const i=Symbol("CUSTOM_FINGERPRINT");var s;Symbol("EXTRA"),Symbol("TAGS"),function(e){e.COMMON="common",e.ADMIN="admin",e.DASHBOARD="dashboard",e.DONOR_PORTAL="donorPortal",e.CAMPAIGN_PAGE="campaign-page",e.INTEGRATION="integration",e.BILLING="billing",e.CHECKOUT="checkout",e.CHECKOUT_STEPLESS="checkout-stepless",e.EMAILS="emails"}(s||(s={}))},2093:function(e,t,n){"use strict";function i(){const e=/^((?!chrome|android).)*safari/i.test(window.navigator.userAgent);return Boolean(e)}n.d(t,{A:function(){return i}})},3954:function(e,t,n){"use strict";var i;n.d(t,{_:function(){return i}}),function(e){e.CARD="creditCard",e.APPLE_PAY="applePay",e.GOOGLE_PAY="googlePay",e.CLICK_TO_PAY="clickToPay",e.ACH="ach",e.PLAID="plaid",e.PAYPAL="paypal",e.VENMO="venmo",e.AU_BECS="auBecsDebit",e.UK_BACS="ukBacs",e.ACSS="acss",e.SEPA="sepa",e.IDEAL="ideal",e.CRYPTO="crypto",e.STOCK="stock",e.US_BANK_ACCOUNT="usBankAccount"}(i||(i={}))},3129:function(e,t,n){"use strict";var i;n.d(t,{_h:function(){return k._},fR:function(){return f},qs:function(){return l},M6:function(){return O},UH:function(){return S},Zq:function(){return N}}),function(e){e.ACH_VERIFICATION_REQUIRED="ach_verification_required",e.INCOMPLETE="incomplete",e.RETRYING="retrying",e.WAITING_FOR_TRANSFER="waiting_for_transfer",e.PAYPAL_ACTION_REQUIRED="paypal_action_required",e.SCHEDULED="scheduled",e.DISPUTE_LOST="dispute_lost",e.ACCOUNT_CLOSED="account_closed",e.ACCOUNT_FROZEN="account_frozen",e.AUTHENTICATION_REQUIRED="authentication_required",e.BANK_ACCOUNT_RESTRICTED="bank_account_restricted",e.CARD_DECLINED="card_declined",e.CREDIT_CARD_ACTION_REQUIRED="credit_card_action_required",e.DEBIT_NOT_AUTHORIZED="debit_not_authorized",e.EXPIRED_CARD="expired_card",e.INCORRECT_CVC="incorrect_cvc",e.INCORRECT_NUMBER="incorrect_number",e.INCORRECT_ZIP="incorrect_zip",e.INSUFFICIENT_FUNDS="insufficient_funds",e.INVALID_ACCOUNT_NUMBER="invalid_account_number",e.NO_ACCOUNT="no_account",e.PARAMETER_INVALID_INTEGER="parameter_invalid_integer",e.PROCESSING_ERROR="processing_error",e.RESOURCE_MISSING="resource_missing",e.ACH_VERIFICATION_FAILED="ach_verification_failed",e.ACH_VERIFICATION_EXPIRED="ach_verification_expired",e.FUN_VERIFICATION_CANCEL="fun_verification_cancel",e.SUBSCRIPTION_CANCELLED_BY_COMPANY="subscription_cancelled_by_company",e.SUBSCRIPTION_CANCELLED_BY_CUSTOMER="subscription_cancelled_by_customer",e.SUBSCRIPTION_SKIPPED_BY_COMPANY="subscription_skipped_by_company",e.SUBSCRIPTION_SKIPPED_BY_CUSTOMER="subscription_skipped_by_customer",e.PAYMENT_METHOD_INVALIDATED="payment_method_invalidated",e.FAILED_BY_TERMINATION_FLOW="failed_by_termination_flow",e.NOT_ELIGIBLE="not_eligible",e.UNKNOWN_REASON="unknown_reason",e.CANCELLED_BY_CUSTOMER="cancelled_by_customer",e.CANCELLED_BY_COMPANY="cancelled_by_company"}(i||(i={}));var s,a,r,o,c,l,u,d,h,m,p,g,y,f,S,A,E,C,v,N,b,P,D,_,T,O,x,k=n(3954);!function(e){e.BITCOIN="bitcoin",e.ETHEREUM="ethereum",e.BITCOINCASH="bitcoincash",e.LITECOIN="litecoin",e.ZCASH="zcash",e.FILECOIN="filecoin",e.DOGECOIN="dogecoin",e.TEZOS="tezos",e.SOLANA="solana",e.POLKADOT="polkadot"}(s||(s={})),function(e){e.PENDING="pending",e.FAILED="failed",e.SUCCESS="success",e.REFUNDED="refunded"}(a||(a={})),function(e){e.FAIL="fail",e.FAIL_NOT_ELIGIBLE="fail_not_eligible",e.WAIT_FOR_TRANSFER="wait_for_transfer",e.SUCCEED="succeed"}(r||(r={})),function(e){e.PENDING="pending",e.SUCCESS="success",e.FAILED="failed"}(o||(o={})),function(e){e.ACH="ach",e.GOOGLE_PAY="android_pay",e.APPLE_PAY="apple_pay",e.CLICK_TO_PAY="masterpass",e.PLAID="plaid"}(c||(c={})),function(e){e.CARD="card",e.BANK_ACCOUNT="bank_account",e.PAYPAL="paypal",e.VENMO="venmo",e.SOURCE="source",e.AU_BECS="au_becs_debit",e.UK_BACS="bacs_debit",e.ACSS="acss_debit",e.SEPA="sepa_debit",e.IDEAL="ideal",e.CRYPTO="crypto",e.STOCK="stock",e.US_BANK_ACCOUNT="us_bank_account"}(l||(l={})),function(e){e.CHARGEABLE="chargeable",e.NEW="new",e.VERIFICATION_FAILED="verification_failed",e.VERIFIED="verified",e.VALIDATED="validated",e.ERRORED="errored"}(u||(u={})),function(e){e.STRIPE="stripe",e.PAYPAL="paypal",e.MANUAL_BROKERAGE="manualBrokerage",e.GEMINI="gemini",e.COINBASE_COMMERCE="coinbaseCommerce"}(d||(d={})),function(e){e.STRIPE_TOKEN="stripeToken",e.STRIPE_PAYMENT_METHOD="stripePaymentMethod"}(h||(h={})),function(e){e.ACTIVE="active",e.CANCELLED="cancelled",e.FAILED="failed"}(m||(m={})),function(e){e.RETRYING="retrying",e.ACH_VERIFICATION_REQUIRED="ach_verification_required",e.SCHEDULED="scheduled",e.PAUSED="paused",e.CANCELLED_BY_COMPANY="cancelled_by_company",e.CANCELLED_BY_CUSTOMER="cancelled_by_customer",e.CANCELLED_BY_TERMINATION_FLOW="cancelled_by_termination_flow",e.CANCELLED_BY_DISPUTE_LOST="cancelled_by_dispute_lost",e.CANCELLED_BY_LIMIT="cancelled_by_limit",e.ACH_VERIFICATION_FAILED="ach_verification_failed",e.ACH_VERIFICATION_EXPIRED="ach_verification_expired",e.PAYMENT_METHOD_INVALIDATED="payment_method_invalidated",e.FAILED_BY_INSUFFICIENT="failed_by_insufficient_data"}(p||(p={})),function(e){e.CARD="card",e.BANK_ACCOUNT="bank_account",e.US_BANK_ACCOUNT="us_bank_account",e.AU_BECS="au_becs_debit",e.UK_BACS="bacs_debit",e.ACSS="acss_debit",e.SEPA="sepa_debit",e.IDEAL="ideal"}(g||(g={})),function(e){e.VISA="Visa",e.VISA_ELECTRON="Visa Electron",e.MASTER_CARD="MasterCard",e.AMERICAN_EXPRESS="American Express",e.DINERS_CLUB="Diners Club",e.DISCOVER="Discover",e.JCB="JCB",e.UNION_PAY="UnionPay"}(y||(y={})),function(e){e.VISA="visa",e.AMERICAN_EXPRESS="amex",e.MASTERCARD="mastercard",e.DISCOVER="discover"}(f||(f={})),function(e){e[e.STANDARD=290]="STANDARD",e[e.NON_PROFIT=220]="NON_PROFIT"}(S||(S={})),function(e){e[e.AUTO=-1]="AUTO",e[e.NEVER=0]="NEVER",e[e.ONE=1]="ONE",e[e.TWO=2]="TWO",e[e.THREE=3]="THREE",e[e.FOUR=4]="FOUR",e[e.FIVE=5]="FIVE",e[e.SIX=6]="SIX"}(A||(A={})),function(e){e.NEW="new",e.VALIDATED="validated",e.VERIFIED="verified",e.FAILED="verification_failed",e.ERRORED="errored"}(E||(E={})),function(e){e.INDIVIDUAL="individual",e.COMPANY="company"}(C||(C={})),function(e){e.ACTIVE="active",e.INACTIVE="inactive",e.DISABLED="disabled"}(v||(v={})),function(e){e.REQUIRES_ACTION="requires_action",e.REQUIRES_CONFIRMATION="requires_confirmation",e.REQUIRES_PAYMENT_METHOD="requires_payment_method",e.REQUIRES_CAPTURE="requires_capture",e.PROCESSING="processing",e.SUCCEEDED="succeeded",e.CANCELLED="canceled"}(N||(N={})),function(e){e.ACTIVE="active",e.INACTIVE="inactive"}(b||(b={})),function(e){e.ACH_VERIFICATION_REQUIRED="ach_verification_required",e.ACH_VERIFICATION_FAILED="ach_verification_failed",e.ACH_VERIFICATION_CANCELLED="ach_verification_cancelled",e.ACH_VERIFICATION_EXPIRED="ach_verification_expired",e.UNKNOWN_ERROR="unknown_error",e.DEACTIVATED_ON_PROVIDER_SIDE="deactivated_on_provider_side",e.ACCOUNT_CLOSED="account_closed",e.ACCOUNT_FROZEN="account_frozen",e.AUTHENTICATION_REQUIRED="authentication_required",e.BANK_ACCOUNT_RESTRICTED="bank_account_restricted",e.CARD_DECLINED="card_declined",e.DEBIT_NOT_AUTHORIZED="debit_not_authorized",e.EXPIRED_CARD="expired_card",e.FUN_VERIFICATION_CANCEL="fun_verification_cancel",e.FUN_WRONG_PAYMENT_METHOD="fun_wrong_payment_method",e.INCORRECT_CVC="incorrect_cvc",e.INCORRECT_NUMBER="incorrect_number",e.INCORRECT_ZIP="incorrect_zip",e.INSUFFICIENT_FUNDS="insufficient_funds",e.INVALID_ACCOUNT_NUMBER="invalid_account_number",e.NO_ACCOUNT="no_account",e.PROCESSING_ERROR="processing_error",e.RESOURCE_MISSING="resource_missing",e.MANDATE_INACTIVE="mandate_inactive",e.STRIPE_CUSTOMER_REQUIRED="stripe_customer_required",e.STRIPE_CUSTOMER_NONE="stripe_customer_none"}(P||(P={})),function(e){e.PAYMENT_METHOD_INVALIDATED="fun_payment_method_invalidated",e.CHARGE_VERIFICATION_CANCELLED="fun_verification_cancel",e.PAYMENT_METHOD_VERIFICATION_EXPIRED="fun_verification_expired",e.PAYMENT_METHOD_VERIFICATION_FAILED="fun_verification_failed",e.CHARGE_VERIFICATION_CANCELLED_BY_COMPANY="fun_verification_cancel_by_company",e.CHARGE_VERIFICATION_CANCELLED_BY_SUPPORTER="fun_verification_cancel_by_supporter",e.PAYMENT_WAS_CANCELLED="fun_payment_was_cancelled",e.ACCOUNT_WAS_TERMINATED="fun_account_was_terminated"}(D||(D={})),function(e){e.DUPLICATE_DONATION="duplicate_donation",e.FRAUD="fraud",e.REQUESTED_BY_SUPPORTER="requested_by_supporter",e.EXPIRED_UNCAPTURED_CHARGE="expired_uncaptured_charge",e.OTHER="other"}(_||(_={})),function(e){e.UPDATE_SUBSCRIPTION_CUSTOMER_ADDRESS="update_subscription_customer_address",e.UPDATE_SUBSCRIPTION_QUESTIONS="update_subscription_questions",e.UPDATE_SUBSCRIPTION_AMOUNT="update_subscription_amount",e.UPDATE_SUBSCRIPTION_CUSTOM_FIELDS="update_subscription_custom_fields",e.UPDATE_SUBSCRIPTION_UTM="update_subscription_utm",e.UPDATE_SUBSCRIPTION_GOAL="update_subscription_goal",e.UPDATE_SUBSCRIPTION_LIMITS="update_subscription_limits",e.UPDATE_SUBSCRIPTION_WIDGET="update_subscription_widget",e.UPDATE_CHARGE_CUSTOMER_ADDRESS="update_charge_customer_address",e.UPDATE_CHARGE_RECEIPT="update_charge_receipt",e.UPDATE_CHARGE_CUSTOM_FIELDS="update_charge_custom_fields",e.UPDATE_CHARGE_GOAL="update_charge_goal",e.UPDATE_CHARGE_WIDGET="update_charge_widget",e.REFUND_APPLICATION_FEE="refund_application_fee",e.UPDATE_CUSTOMER_NAME="update_customer_name"}(T||(T={})),function(e){e.PAYPAL_ERROR="PAYPAL_ERROR",e.PAYPAL_REQUEST_ERROR="PAYPAL_REQUEST_ERROR",e.REFUND_FAILED_INSUFFICIENT_FUNDS="REFUND_FAILED_INSUFFICIENT_FUNDS",e.TRANSACTION_REFUSED="TRANSACTION_REFUSED",e.TRANSACTION_ALREADY_REFUNDED="TRANSACTION_ALREADY_REFUNDED",e.USER_ACCOUNT_RESTRICTED="USER_ACCOUNT_RESTRICTED",e.INTERNAL="INTERNAL",e.UNAVAILABLE="UNAVAILABLE",e.EXECUTE_AGREEMENT_BUYER_NOT_ACCEPTED="EXECUTE_AGREEMENT_BUYER_NOT_ACCEPTED",e.ORDER_EXPIRED="ORDER_EXPIRED",e.VALIDATION_ERROR="VALIDATION_ERROR"}(O||(O={})),function(e){let t;!function(e){let t,n,i,s,a,r,o;!function(e){e.CREATED="charge.created",e.PENDING="charge.pending",e.REFUNDED="charge.refunded",e.FAILED="charge.failed",e.UPDATED="charge.updated",e.SUCCESS="charge.success",e.SUCCESS_EARLY_FRAUD_WARNING="charge.success_early_fraud_warning",e.PENDING_ACH_VERIFICATION_REQUIRED="charge.pending_ach_verification_required",e.PENDING_INCOMPLETE="charge.pending_incomplete",e.PENDING_SCHEDULED="charge.pending_scheduled",e.PENDING_WAITING_FOR_TRANSFER="charge.pending_waiting_for_transfer",e.PENDING_PAYPAL_ACTION_REQUIRED="charge.pending_paypal_action_required",e.PENDING_RETRYING="charge.pending_retrying",e.PERSONAL_DATA_DELETED="charge.personal_data_deleted",e.SUCCESS_DISPUTE_CREATED="charge.success_dispute_created",e.SUCCESS_DISPUTE_LOST="charge.success_dispute_lost",e.SUCCESS_DISPUTE_WON="charge.success_dispute_won",e.SUCCESS_DISPUTE_IN_REVIEW="charge.success_dispute_in_review"}(t=e.EChargeEvent||(e.EChargeEvent={})),function(e){e.ACTIVATED="subscription.activated",e.SCHEDULED="subscription.scheduled",e.FAILED="subscription.failed",e.COMPLETED="subscription.completed",e.CANCELLED="subscription.cancelled",e.TERMS_UPDATED="subscription.subscription_terms.updated",e.DETAILS_UPDATED="subscription.details.updated",e.PAUSED="subscription.paused",e.RETRYING="subscription.retrying",e.PERSONAL_DATA_DELETED="subscription.personal_data_deleted"}(n=e.ESubscriptionEvent||(e.ESubscriptionEvent={})),function(e){e.PENDING="charge_attempt.pending",e.SUCCESS="charge_attempt.success",e.FAILED="charge_attempt.failed"}(i=e.EChargeAttemptEvent||(e.EChargeAttemptEvent={})),function(e){e.ACTIVATE="payment_method.active",e.DEACTIVATE="payment_method.inactive",e.CREATED="payment_method.created",e.UPDATED="payment_method.updated",e.PERSONAL_DATA_DELETED="payment_method.personal_data_deleted"}(s=e.EPaymentMethodEvent||(e.EPaymentMethodEvent={})),function(e){e.CREATED="tribute.created",e.UPDATED="tribute.updated",e.SHARED="tribute.shared"}(a=e.ETributeEvent||(e.ETributeEvent={})),function(e){e.CREATED="abandoned_donation.created",e.OPEN="abandoned_donation.open",e.CANCELLED="abandoned_donation.cancelled",e.COMPLETED="abandoned_donation.completed",e.PERSONAL_DATA_DELETED="abandoned_donation.personal_data_deleted"}(r=e.EAbandonedDonationEvent||(e.EAbandonedDonationEvent={})),function(e){e.PERSONAL_DATA_DELETED="customer.personal_data_deleted",e.CREATED="customer.created",e.UPDATED="customer.updated"}(o=e.ECustomerEvent||(e.ECustomerEvent={}))}(t=e.DomainEvent||(e.DomainEvent={}))}(x||(x={}))},4909:function(e,t,n){"use strict";var i;n.d(t,{h:function(){return i}}),function(e){e.DEVELOPMENT="development",e.PRODUCTION="production",e.STAGING="staging",e.TESTING="testing"}(i||(i={}))},5873:function(e,t,n){"use strict";var i;n.d(t,{_h:function(){return a._h},qs:function(){return a.qs},hY:function(){return _.h},Jy:function(){return S},tg:function(){return o},Bg:function(){return y},Au:function(){return p},dR:function(){return s},kt:function(){return h},ax:function(){return f},N4:function(){return d},XN:function(){return i},VN:function(){return u}}),function(e){e.DEFAULT_YES="defaultYes",e.DEFAULT_NO="defaultNo",e.ONLY_YES="onlyYes",e.ONLY_NO="onlyNo",e.SMART_COVERING="smartCovering"}(i||(i={}));var s,a=n(3129);!function(e){e.IN_HONOR_MEMORY="inHonorMemory",e.DEDICATION="dedication"}(s||(s={}));var r,o,c,l,u,d,h,m,p,g,y,f,S,A,E,C,v,N,b,P,D,_=n(4909);!function(e){e.DONOR_PORTAL="donorPortal",e.PARTNER_PORTAL="partnerPortal",e.DASHBOARD="dashboard"}(r||(r={})),function(e){e.AUSTRALIA="AU",e.AUSTRIA="AT",e.BELGIUM="BE",e.BRAZIL="BR",e.BULGARIA="BG",e.CANADA="CA",e.CROATIA="HR",e.CYPRUS="CY",e.CZECH_REPUBLIC="CZ",e.DENMARK="DK",e.ESTONIA="EE",e.FINLAND="FI",e.FRANCE="FR",e.GERMANY="DE",e.GREECE="GR",e.HONG_KONG="HK",e.HUNGARY="HU",e.INDIA="IN",e.INDONESIA="ID",e.IRELAND="IE",e.ITALY="IT",e.JAPAN="JP",e.LATVIA="LV",e.LITHUANIA="LT",e.LUXEMBOURG="LU",e.MALAYSIA="MY",e.MALTA="MT",e.MEXICO="MX",e.NETHERLANDS="NL",e.NEW_ZEALAND="NZ",e.NORWAY="NO",e.POLAND="PL",e.PORTUGAL="PT",e.ROMANIA="RO",e.SINGAPORE="SG",e.SLOVAKIA="SK",e.SLOVENIA="SI",e.SPAIN="ES",e.SWEDEN="SE",e.SWITZERLAND="CH",e.THAILAND="TH",e.UNITED_ARAB_EMIRATES="AE",e.UNITED_KINGDOM="GB",e.UNITED_STATES="US",e.GIBRALTAR="GI",e.LIECHTENSTEIN="LI",e.PHILIPPINES="PH",e.ISRAEL="IL"}(o||(o={})),function(e){e.PAN_ONLY="PAN_ONLY",e.CRYPTOGRAM_3DS="CRYPTOGRAM_3DS"}(c||(c={})),function(e){e.AMEX="AMEX",e.DISCOVER="DISCOVER",e.JCB="JCB",e.MASTERCARD="MASTERCARD",e.VISA="VISA"}(l||(l={})),function(e){e.DEFAULT_MONTHLY="defaultMonthly",e.ONLY_MONTHLY="onlyMonthly",e.DEFAULT_ONETIME="defaultOnetime",e.ONLY_ONETIME="onlyOnetime"}(u||(u={})),function(e){e.FUNDRAISING_PAGE="fundraisingPage",e.REDIRECT="redirect",e.THANK_YOU_SCREEN="thankYouScreen"}(d||(d={})),function(e){e.NONE="none",e.GENERAL="general",e.CUSTOMIZED="customized"}(h||(h={})),function(e){e.ADAPTIVE_COST_COVERAGE="adaptiveCostCoverage",e.PRE_DONATION_UPSELL="preDonationUpsell",e.POST_DONATION_UPSELL="postDonationUpsell"}(m||(m={})),function(e){e.GENERAL="general",e.CUSTOMIZED="customized"}(p||(p={})),function(e){e.EMAIL="email",e.POSTAL_MAIL="postalMail",e.SMS="sms",e.PHONE_CALLS="phoneCalls",e.SOCIAL_MEDIA="socialMedia"}(g||(g={})),function(e){e.NOT_SUBMITTED="notSubmitted",e.OPTED_IN="optedIn",e.OPTED_OUT="optedOut"}(y||(y={})),function(e){e.EMAIL="email",e.SMS="sms",e.PHONE_CALLS="phoneCalls",e.POSTAL_MAIL="postalMail",e.SOCIAL_MEDIA="socialMedia"}(f||(f={})),function(e){e.DESKTOP="desktop",e.MOBILE="mobile"}(S||(S={})),function(e){e.DISABLED="disabled",e.DRY_RUN="dry-run",e.ENABLED="enabled"}(A||(A={})),function(e){e.LIVE="live",e.TEST="test"}(E||(E={})),function(e){e.TEXT="text",e.EMAIL="email"}(C||(C={})),function(e){e.WEBSITE="website",e.CAMPAIGN_PAGE="campaignPage",e.VIRTUAL_TERMINAL="virtualTerminal",e.DONOR_PORTAL="donorPortal",e.DASHBOARD="dashboard",e.RECURRING_MIGRATION="recurringMigration",e.API="api"}(v||(v={})),function(e){e.DAY_7="7d",e.MONTH="1m",e.MONTH_3="3m",e.YEAR_TO_DAY="ytd",e.YEAR="1y",e.YEAR_5="5y"}(N||(N={})),function(e){e.FULL="full",e.CHUNK="chunk"}(b||(b={})),function(e){e.CHARGES="charges",e.COMPANIES="companies",e.CUSTOMERS="customers",e.ELEMENTS="elements",e.SUBSCRIPTIONS="subscriptions",e.WIDGETS="widgets",e.FUNDRAISING_PAGES="fundraisingpages",e.USERS="users"}(P||(P={})),function(e){e.FULL="full",e.FROM="from"}(D||(D={})),N.DAY_7,N.MONTH,N.MONTH_3,N.YEAR_TO_DAY,N.YEAR,N.YEAR_5},3367:function(e,t,n){var i={"./ar_001.json":[3372,830],"./da.json":[1104,639],"./de.json":[444,436],"./en_CA.json":[9821,245],"./en_GB.json":[4828,234],"./en_US.json":[2853,627],"./es.json":[847,616],"./es_US.json":[7868,425],"./fi_FI.json":[1078,662],"./fr_CA.json":[5292,471],"./fr_FR.json":[3764,381],"./hu.json":[5472,572],"./it.json":[8054,775],"./ja.json":[6598,966],"./ko.json":[9277,561],"./nl.json":[2785,752],"./no.json":[7396,763],"./pl_PL.json":[3848,954],"./pt_BR.json":[9672,989],"./pt_PT.json":[8216,180],"./ru_RU.json":[6214,740],"./sv.json":[2642,901],"./zh_CN.json":[507,710],"./zh_TW.json":[2851,519]};function s(e){if(!n.o(i,e))return Promise.resolve().then((function(){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}));var t=i[e],s=t[0];return n.e(t[1]).then((function(){return n.t(s,19)}))}s.keys=function(){return Object.keys(i)},s.id=3367,e.exports=s},3421:function(e,t,n){"use strict";e.exports=n.p+"checkout-shared/src/images/card-amex.f704acb7cb0f1c209efa.png"},2707:function(e,t,n){"use strict";e.exports=n.p+"checkout-shared/src/images/card-diners.b69117170ac25814aa42.png"},1229:function(e,t,n){"use strict";e.exports=n.p+"checkout-shared/src/images/card-discover.dbc0569d3c7cfb9e0c1e.png"},543:function(e,t,n){"use strict";e.exports=n.p+"checkout-shared/src/images/card-jcb.12e905d1462fd708b795.png"},9848:function(e,t,n){"use strict";e.exports=n.p+"checkout-shared/src/images/card-mastercard.51e8e6a0a1b07ef9c09b.png"},8057:function(e,t,n){"use strict";e.exports=n.p+"checkout-shared/src/images/card-unionpay.98ea5861340fc8694663.png"},2217:function(e,t,n){"use strict";e.exports=n.p+"checkout-shared/src/images/card-unknown-error.7afd2ac2559f2f9f3960.png"},8044:function(e,t,n){"use strict";e.exports=n.p+"checkout-shared/src/images/card-unknown.265c1bce7f59ecbff072.png"},9503:function(e,t,n){"use strict";e.exports=n.p+"checkout-shared/src/images/card-visa.d358d698a9d21919e7c1.png"},6843:function(e,t,n){"use strict";e.exports=n.p+"common-fonts/ibm-plex-sans-arabic/ibmplexsans-arabic-v12-300.woff2"},4312:function(e,t,n){"use strict";e.exports=n.p+"common-fonts/ibm-plex-sans-arabic/ibmplexsans-arabic-v12-400.woff2"},7977:function(e,t,n){"use strict";e.exports=n.p+"common-fonts/ibm-plex-sans-arabic/ibmplexsans-arabic-v12-500.woff2"},5870:function(e,t,n){"use strict";e.exports=n.p+"common-fonts/ibm-plex-sans-arabic/ibmplexsans-arabic-v12-600.woff2"},9807:function(e,t,n){"use strict";e.exports=n.p+"common-fonts/ibm-plex-sans-arabic/ibmplexsans-arabic-v12-700.woff2"},8552:function(e,t,n){"use strict";e.exports=n.p+"common-fonts/ibm-plex-sans/ibmplexsans-v19-300.woff2"},1755:function(e,t,n){"use strict";e.exports=n.p+"common-fonts/ibm-plex-sans/ibmplexsans-v19-400.woff2"},9706:function(e,t,n){"use strict";e.exports=n.p+"common-fonts/ibm-plex-sans/ibmplexsans-v19-500.woff2"},3717:function(e,t,n){"use strict";e.exports=n.p+"common-fonts/ibm-plex-sans/ibmplexsans-v19-600.woff2"},8676:function(e,t,n){"use strict";e.exports=n.p+"common-fonts/ibm-plex-sans/ibmplexsans-v19-700.woff2"},3179:function(e,t,n){"use strict";e.exports=n.p+"common-fonts/sacramento/sacramento-v15-400.woff2"},9658:function(e){"use strict";e.exports=JSON.parse('{"u":"URL","ck":"companyKey","cm":"checkoutCompanyKey","cd":"clientId","ct":"clientTime","cz":"clientTimeZone","lo":"clientLocale","ek":"elementKey","el":"elementLocale","er":"elementReminderKey","ey":"elementType","ep":"elementParams","et":"eventType","te":"customEventType","ev":"customEventData","ed":"elementData","eg":"eventTags","pv":"pageViewId","pl":"pageViewLifetime","r":"referer","rh":"resolutionHeight","rw":"resolutionWidth","t":"title","hl":"uaHistoryLength","wk":"widgetKey","wh":"windowHeight","wx":"windowScrollX","wy":"windowScrollY","ww":"windowWidth","cv":"checkoutViewId","ce":"checkoutError","co":"checkoutOpenTime","cl":"checkoutLifetime","cs":"checkoutScreen","sd":"checkoutScreenData","cc":"checkoutClickElement","cf":"checkoutFrequency","fp":"clickDOMPath","fh":"clickAHref","ft":"clickText","dk":"chargeCampaignKey","dd":"chargeKey","du":"chargeInUSDAmount","di":"chargeInDefaultCurrencyAmount","da":"chargeAmount","dc":"chargeCurrency","df":"chargeFeeCovered","dm":"chargePaymentMethod","dr":"chargeIsRecurring","dn":"chargeHasComment","dh":"chargeHasTribute","dg":"chargeGoal","st":"splitTestName","sv":"splitTestVariant","pm":"paymentMethod","ws":"widgetSession","lm":"livemode","fv":"funSnippetVersion","fe":"funEmbedRelease","vf":"isFundraiseupVisitor","lc":"checkoutLocale","cr":"checkoutIsRecurring","cy":"checkoutCurrency","ca":"checkoutAmount","cu":"checkoutInUSDAmount","yr":"checkoutCurrencyRate","fa":"checkoutDefaultAmount","cp":"checkoutPresets","ps":"pageScripts","ol":"clientOnLine","dt":"clientDoNotTrack","pr":"clientDevicePixelRatio","rm":"clientDeviceMemory","hc":"clientHardwareConcurrency","nt":"clientConnectionType","nd":"clientConnectionDownlink","nr":"clientConnectionRTT","ne":"clientConnectionEffectiveType","bc":"clientBatteryCharging","bt":"clientBatteryChargingTime","bd":"clientBatteryDischargingTime","bl":"clientBatteryLevel","de":"dataLayerEventName","dp":"dataLayerParams","fn":"pixelEventName","fs":"pixelEventData","gk":"fundraisingGroupKey","pk":"fundraisingPageKey","pc":"fundraisingPageCustomerKey","ec":"eventComment","ba":"uaIsInApp","uw":"uaWebdriver","rd":"duration","se":"source","sk":"supporterKey","ak":"agentKey","pu":"pointingDeviceIsUsed","fo":"donationType","cn":"clientCookieConsent","tt":"checkoutType"}')},472:function(e){"use strict";e.exports=JSON.parse('{"BTC":{"name":"Bitcoin","code":"BTC","symbol":"","digits":8,"network":"bitcoin","provider":["gemini","coinbaseCommerce"],"protocol":"","networkName":"Bitcoin","coin":true},"ETH":{"name":"Ethereum","code":"ETH","symbol":"","digits":8,"network":"ethereum","provider":["gemini","coinbaseCommerce"],"protocol":"ERC-20","networkName":"Ethereum","coin":true},"USDT":{"name":"Tether USD","code":"USDT","symbol":"","digits":8,"network":"ethereum","provider":["coinbaseCommerce"],"protocol":"ERC-20","networkName":"Ethereum","coin":false},"USDC":{"name":"USD Coin","code":"USDC","symbol":"","digits":8,"network":"ethereum","provider":["gemini","coinbaseCommerce"],"protocol":"ERC-20","networkName":"Ethereum","coin":false},"SOL":{"name":"Solana","code":"SOL","symbol":"","digits":8,"network":"solana","provider":["gemini"],"protocol":"","networkName":"Solana","coin":true},"DOT":{"name":"Polkadot","code":"DOT","symbol":"","digits":8,"network":"polkadot","provider":["gemini"],"protocol":"","networkName":"Polkadot","coin":true},"DOGE":{"name":"Dogecoin","code":"DOGE","symbol":"","digits":8,"network":"dogecoin","provider":["gemini","coinbaseCommerce"],"protocol":"","networkName":"Dogecoin","coin":true},"SHIB":{"name":"Shiba Inu","code":"SHIB","symbol":"","digits":8,"network":"ethereum","provider":["gemini","coinbaseCommerce"],"protocol":"ERC-20","networkName":"Ethereum","coin":false},"LTC":{"name":"Litecoin","code":"LTC","symbol":"","digits":8,"network":"litecoin","provider":["gemini","coinbaseCommerce"],"protocol":"","networkName":"Litecoin","coin":true},"BCH":{"name":"Bitcoin Cash","code":"BCH","symbol":"","digits":8,"network":"bitcoincash","provider":["gemini","coinbaseCommerce"],"protocol":"","networkName":"Bitcoin Cash","coin":true},"XTZ":{"name":"Tezos","code":"XTZ","symbol":"","digits":8,"network":"tezos","provider":["gemini"],"protocol":"","networkName":"Tezos","coin":true},"FIL":{"name":"Filecoin","code":"FIL","symbol":"","digits":8,"network":"filecoin","provider":["gemini"],"protocol":"","networkName":"Filecoin","coin":true},"FTM":{"name":"Fantom","code":"FTM","symbol":"","digits":8,"network":"ethereum","provider":["gemini"],"protocol":"ERC-20","networkName":"Ethereum","coin":false},"GALA":{"name":"Gala","code":"GALA","symbol":"","digits":8,"network":"ethereum","provider":["gemini"],"protocol":"ERC-20","networkName":"Ethereum","coin":false},"PAXG":{"name":"PAX Gold","code":"PAXG","symbol":"","digits":8,"network":"ethereum","provider":["gemini"],"protocol":"ERC-20","networkName":"Ethereum","coin":false},"ZEC":{"name":"Zcash","code":"ZEC","symbol":"","digits":8,"network":"zcash","provider":["gemini"],"protocol":"","networkName":"Zcash","coin":true}}')},2177:function(e){"use strict";e.exports=JSON.parse('{"SHP":{"name":"St. Helena Pound","code":"SHP","symbol":"","digits":2},"EUR":{"name":"Euro","code":"EUR","symbol":"","digits":2},"AED":{"name":"United Arab Emirates Dirham","code":"AED","symbol":"","digits":2},"AFN":{"name":"Afghan Afghani","code":"AFN","symbol":"","digits":2},"XCD":{"name":"East Caribbean Dollar","code":"XCD","symbol":"$","digits":2},"ALL":{"name":"Albanian Lek","code":"ALL","symbol":"","digits":2},"AMD":{"name":"Armenian Dram","code":"AMD","symbol":"","digits":2},"AOA":{"name":"Angolan Kwanza","code":"AOA","symbol":"Kz","digits":2},"ARS":{"name":"Argentine Peso","code":"ARS","symbol":"$","digits":2},"USD":{"name":"US Dollar","code":"USD","symbol":"$","digits":2},"AUD":{"name":"Australian Dollar","code":"AUD","symbol":"$","digits":2},"ANG":{"name":"Netherlands Antillean Guilder","code":"ANG","symbol":"","digits":2},"AWG":{"name":"Aruban Florin","code":"AWG","symbol":"","digits":2},"AZN":{"name":"Azerbaijani Manat","code":"AZN","symbol":"","digits":2},"BAM":{"name":"Bosnia-Herzegovina Convertible Mark","code":"BAM","symbol":"KM","digits":2},"BBD":{"name":"Barbadian Dollar","code":"BBD","symbol":"$","digits":2},"INR":{"name":"Indian Rupee","code":"INR","symbol":"","digits":2},"PKR":{"name":"Pakistani Rupee","code":"PKR","symbol":"Rs","digits":2},"BDT":{"name":"Bangladeshi Taka","code":"BDT","symbol":"","digits":2},"XOF":{"name":"West African CFA Franc","code":"XOF","symbol":"","digits":0},"BGN":{"name":"Bulgarian Lev","code":"BGN","symbol":"","digits":2},"BHD":{"name":"Bahraini Dinar","code":"BHD","symbol":"","digits":2},"BIF":{"name":"Burundian Franc","code":"BIF","symbol":"","digits":0},"BMD":{"name":"Bermudan Dollar","code":"BMD","symbol":"$","digits":2},"MYR":{"name":"Malaysian Ringgit","code":"MYR","symbol":"RM","digits":2},"BND":{"name":"Brunei Dollar","code":"BND","symbol":"$","digits":2},"BOB":{"name":"Bolivian Boliviano","code":"BOB","symbol":"Bs","digits":2},"BRL":{"name":"Brazilian Real","code":"BRL","symbol":"R$","digits":2},"BSD":{"name":"Bahamian Dollar","code":"BSD","symbol":"$","digits":2},"BTN":{"name":"Bhutanese Ngultrum","code":"BTN","symbol":"","digits":2},"NOK":{"name":"Norwegian Krone","code":"NOK","symbol":"kr","digits":2},"ZAR":{"name":"South African Rand","code":"ZAR","symbol":"R","digits":2},"BWP":{"name":"Botswanan Pula","code":"BWP","symbol":"P","digits":2},"BYN":{"name":"Belarusian Ruble","code":"BYN","symbol":"","digits":2},"BZD":{"name":"Belize Dollar","code":"BZD","symbol":"$","digits":2},"CAD":{"name":"Canadian Dollar","code":"CAD","symbol":"$","digits":2},"CDF":{"name":"Congolese Franc","code":"CDF","symbol":"","digits":2},"XAF":{"name":"Central African CFA Franc","code":"XAF","symbol":"","digits":0},"CHF":{"name":"Swiss Franc","code":"CHF","symbol":"","digits":2},"NZD":{"name":"New Zealand Dollar","code":"NZD","symbol":"$","digits":2},"CLP":{"name":"Chilean Peso","code":"CLP","symbol":"$","digits":0},"CNY":{"name":"Chinese Yuan","code":"CNY","symbol":"","digits":2},"COP":{"name":"Colombian Peso","code":"COP","symbol":"$","digits":2},"CRC":{"name":"Costa Rican Coln","code":"CRC","symbol":"","digits":2},"CVE":{"name":"Cape Verdean Escudo","code":"CVE","symbol":"","digits":2},"CZK":{"name":"Czech Koruna","code":"CZK","symbol":"K","digits":2},"DJF":{"name":"Djiboutian Franc","code":"DJF","symbol":"","digits":0},"DKK":{"name":"Danish Krone","code":"DKK","symbol":"kr","digits":2},"DOP":{"name":"Dominican Peso","code":"DOP","symbol":"$","digits":2},"DZD":{"name":"Algerian Dinar","code":"DZD","symbol":"","digits":2},"EGP":{"name":"Egyptian Pound","code":"EGP","symbol":"E","digits":2},"MAD":{"name":"Moroccan Dirham","code":"MAD","symbol":"","digits":2},"ETB":{"name":"Ethiopian Birr","code":"ETB","symbol":"","digits":2},"FJD":{"name":"Fijian Dollar","code":"FJD","symbol":"$","digits":2},"FKP":{"name":"Falkland Islands Pound","code":"FKP","symbol":"","digits":2},"JPY":{"name":"Japanese Yen","code":"JPY","symbol":"","digits":0},"GBP":{"name":"British Pound","code":"GBP","symbol":"","digits":2},"GEL":{"name":"Georgian Lari","code":"GEL","symbol":"","digits":2},"GHS":{"name":"Ghanaian Cedi","code":"GHS","symbol":"GH","digits":2},"GIP":{"name":"Gibraltar Pound","code":"GIP","symbol":"","digits":2},"GMD":{"name":"Gambian Dalasi","code":"GMD","symbol":"","digits":2},"GNF":{"name":"Guinean Franc","code":"GNF","symbol":"FG","digits":0},"GTQ":{"name":"Guatemalan Quetzal","code":"GTQ","symbol":"Q","digits":2},"GYD":{"name":"Guyanaese Dollar","code":"GYD","symbol":"$","digits":2},"HKD":{"name":"Hong Kong Dollar","code":"HKD","symbol":"$","digits":2},"HNL":{"name":"Honduran Lempira","code":"HNL","symbol":"L","digits":2},"HRK":{"name":"Croatian Kuna","code":"HRK","symbol":"kn","digits":2},"HTG":{"name":"Haitian Gourde","code":"HTG","symbol":"","digits":2},"HUF":{"name":"Hungarian Forint","code":"HUF","symbol":"Ft","digits":2},"IDR":{"name":"Indonesian Rupiah","code":"IDR","symbol":"Rp","digits":2},"ILS":{"name":"Israeli New Shekel","code":"ILS","symbol":"","digits":2},"ISK":{"name":"Icelandic Krna","code":"ISK","symbol":"kr","digits":2},"JMD":{"name":"Jamaican Dollar","code":"JMD","symbol":"$","digits":2},"JOD":{"name":"Jordanian Dinar","code":"JOD","symbol":"","digits":2},"KES":{"name":"Kenyan Shilling","code":"KES","symbol":"","digits":2},"KGS":{"name":"Kyrgystani Som","code":"KGS","symbol":"","digits":2},"KHR":{"name":"Cambodian Riel","code":"KHR","symbol":"","digits":2},"KMF":{"name":"Comorian Franc","code":"KMF","symbol":"CF","digits":0},"KRW":{"name":"South Korean Won","code":"KRW","symbol":"","digits":0},"KWD":{"name":"Kuwaiti Dinar","code":"KWD","symbol":"","digits":2},"KYD":{"name":"Cayman Islands Dollar","code":"KYD","symbol":"$","digits":2},"KZT":{"name":"Kazakhstani Tenge","code":"KZT","symbol":"","digits":2},"LAK":{"name":"Laotian Kip","code":"LAK","symbol":"","digits":2},"LBP":{"name":"Lebanese Pound","code":"LBP","symbol":"L","digits":2},"LKR":{"name":"Sri Lankan Rupee","code":"LKR","symbol":"Rs","digits":2},"LRD":{"name":"Liberian Dollar","code":"LRD","symbol":"$","digits":2},"LSL":{"name":"Lesotho Loti","code":"LSL","symbol":"","digits":2},"MDL":{"name":"Moldovan Leu","code":"MDL","symbol":"","digits":2},"MGA":{"name":"Malagasy Ariary","code":"MGA","symbol":"Ar","digits":0},"MKD":{"name":"Macedonian Denar","code":"MKD","symbol":"","digits":2},"MMK":{"name":"Myanmar Kyat","code":"MMK","symbol":"K","digits":2},"MNT":{"name":"Mongolian Tugrik","code":"MNT","symbol":"","digits":2},"MOP":{"name":"Macanese Pataca","code":"MOP","symbol":"","digits":2},"MRO":{"name":"Mauritanian Ouguiya (19732017)","code":"MRO","symbol":"","digits":2},"MUR":{"name":"Mauritian Rupee","code":"MUR","symbol":"Rs","digits":2},"MVR":{"name":"Maldivian Rufiyaa","code":"MVR","symbol":"","digits":2},"MWK":{"name":"Malawian Kwacha","code":"MWK","symbol":"","digits":2},"MXN":{"name":"Mexican Peso","code":"MXN","symbol":"$","digits":2},"MZN":{"name":"Mozambican Metical","code":"MZN","symbol":"","digits":2},"NAD":{"name":"Namibian Dollar","code":"NAD","symbol":"$","digits":2},"XPF":{"name":"CFP Franc","code":"XPF","symbol":"","digits":0},"NGN":{"name":"Nigerian Naira","code":"NGN","symbol":"","digits":2},"NIO":{"name":"Nicaraguan Crdoba","code":"NIO","symbol":"C$","digits":2},"SEK":{"name":"Swedish Krona","code":"SEK","symbol":"kr","digits":2},"NPR":{"name":"Nepalese Rupee","code":"NPR","symbol":"Rs","digits":2},"OMR":{"name":"Omani Rial","code":"OMR","symbol":"","digits":2},"PAB":{"name":"Panamanian Balboa","code":"PAB","symbol":"","digits":2},"PEN":{"name":"Peruvian Sol","code":"PEN","symbol":"","digits":2},"PGK":{"name":"Papua New Guinean Kina","code":"PGK","symbol":"","digits":2},"PHP":{"name":"Philippine Peso","code":"PHP","symbol":"","digits":2},"PLN":{"name":"Polish Zloty","code":"PLN","symbol":"z","digits":2},"PYG":{"name":"Paraguayan Guarani","code":"PYG","symbol":"","digits":0},"QAR":{"name":"Qatari Riyal","code":"QAR","symbol":"","digits":2},"RON":{"name":"Romanian Leu","code":"RON","symbol":"lei","digits":2},"RSD":{"name":"Serbian Dinar","code":"RSD","symbol":"","digits":2},"RUB":{"name":"Russian Ruble","code":"RUB","symbol":"","digits":2},"RWF":{"name":"Rwandan Franc","code":"RWF","symbol":"RF","digits":0},"SAR":{"name":"Saudi Riyal","code":"SAR","symbol":"","digits":2},"SBD":{"name":"Solomon Islands Dollar","code":"SBD","symbol":"$","digits":2},"SCR":{"name":"Seychellois Rupee","code":"SCR","symbol":"","digits":2},"SGD":{"name":"Singapore Dollar","code":"SGD","symbol":"$","digits":2},"SLL":{"name":"Sierra Leonean Leone (19642022)","code":"SLL","symbol":"","digits":2},"SLE":{"name":"Sierra Leonean Leone","code":"SLE","symbol":"","digits":2},"SOS":{"name":"Somali Shilling","code":"SOS","symbol":"","digits":2},"SRD":{"name":"Surinamese Dollar","code":"SRD","symbol":"$","digits":2},"STD":{"name":"So Tom & Prncipe Dobra (19772017)","code":"STD","symbol":"","digits":2},"SVC":{"name":"Salvadoran Coln","code":"SVC","symbol":"","digits":2},"SZL":{"name":"Swazi Lilangeni","code":"SZL","symbol":"","digits":2},"THB":{"name":"Thai Baht","code":"THB","symbol":"","digits":2},"TJS":{"name":"Tajikistani Somoni","code":"TJS","symbol":"","digits":2},"TND":{"name":"Tunisian Dinar","code":"TND","symbol":"","digits":2},"TOP":{"name":"Tongan Paanga","code":"TOP","symbol":"T$","digits":2},"TRY":{"name":"Turkish Lira","code":"TRY","symbol":"","digits":2},"TTD":{"name":"Trinidad & Tobago Dollar","code":"TTD","symbol":"$","digits":2},"TWD":{"name":"New Taiwan Dollar","code":"TWD","symbol":"$","digits":2},"TZS":{"name":"Tanzanian Shilling","code":"TZS","symbol":"","digits":2},"UAH":{"name":"Ukrainian Hryvnia","code":"UAH","symbol":"","digits":2},"UYU":{"name":"Uruguayan Peso","code":"UYU","symbol":"$","digits":2},"UZS":{"name":"Uzbekistani Som","code":"UZS","symbol":"","digits":2},"VND":{"name":"Vietnamese Dong","code":"VND","symbol":"","digits":0},"VUV":{"name":"Vanuatu Vatu","code":"VUV","symbol":"","digits":0},"WST":{"name":"Samoan Tala","code":"WST","symbol":"","digits":2},"YER":{"name":"Yemeni Rial","code":"YER","symbol":"","digits":2},"ZMW":{"name":"Zambian Kwacha","code":"ZMW","symbol":"ZK","digits":2}}')},4601:function(e){"use strict";e.exports=JSON.parse('{"AC":["SHP"],"AD":["EUR"],"AE":["AED"],"AF":["AFN"],"AG":["XCD"],"AI":["XCD"],"AL":["ALL"],"AM":["AMD"],"AO":["AOA"],"AR":["ARS"],"AS":["USD"],"AT":["EUR"],"AU":["AUD"],"AW":["AWG","ANG"],"AX":["EUR"],"AZ":["AZN"],"BA":["BAM"],"BB":["BBD","XCD"],"BD":["BDT","PKR","INR"],"BE":["EUR"],"BF":["XOF"],"BG":["BGN","EUR"],"BH":["BHD"],"BI":["BIF"],"BJ":["XOF"],"BL":["EUR"],"BM":["BMD"],"BN":["BND","MYR"],"BO":["BOB"],"BQ":["USD","ANG"],"BR":["BRL"],"BS":["BSD"],"BT":["BTN","INR"],"BV":["NOK"],"BW":["BWP","ZAR"],"BY":["BYN","EUR"],"BZ":["BZD"],"CA":["CAD","USD"],"CC":["AUD"],"CD":["CDF"],"CF":["XAF"],"CG":["XAF"],"CH":["CHF"],"CI":["XOF"],"CK":["NZD"],"CL":["CLP"],"CM":["XAF"],"CN":["CNY"],"CO":["COP"],"CR":["CRC"],"CS":["EUR"],"CU":["USD"],"CV":["CVE"],"CW":["ANG"],"CX":["AUD"],"CY":["EUR"],"CZ":["CZK","EUR"],"DE":["EUR"],"DG":["USD"],"DJ":["DJF"],"DK":["DKK","EUR"],"DM":["XCD"],"DO":["DOP","USD"],"DZ":["DZD"],"EA":["EUR"],"EC":["USD"],"EE":["EUR"],"EG":["EGP"],"EH":["MAD"],"ER":["ETB"],"ES":["EUR"],"ET":["ETB"],"EU":["EUR"],"FI":["EUR"],"FJ":["FJD"],"FK":["FKP"],"FM":["USD","JPY"],"FO":["DKK"],"FR":["EUR"],"GA":["XAF"],"GB":["GBP","EUR"],"GD":["XCD"],"GE":["GEL"],"GF":["EUR"],"GG":["GBP"],"GH":["GHS"],"GI":["GIP"],"GL":["DKK"],"GM":["GMD"],"GN":["GNF"],"GP":["EUR"],"GQ":["XAF"],"GR":["EUR"],"GS":["GBP"],"GT":["GTQ"],"GU":["USD"],"GW":["XOF"],"GY":["GYD"],"HK":["HKD"],"HM":["AUD"],"HN":["HNL"],"HR":["EUR"],"HT":["USD","HTG"],"HU":["HUF","EUR"],"IC":["EUR"],"ID":["IDR"],"IE":["EUR","GBP"],"IL":["ILS"],"IM":["GBP"],"IN":["INR"],"IO":["USD"],"IQ":["INR","EGP"],"IS":["ISK","DKK"],"IT":["EUR"],"JE":["GBP"],"JM":["JMD"],"JO":["JOD"],"JP":["JPY"],"KE":["KES"],"KG":["KGS"],"KH":["KHR"],"KI":["AUD"],"KM":["KMF"],"KN":["XCD"],"KR":["KRW"],"KW":["KWD"],"KY":["KYD","JMD"],"KZ":["KZT"],"LA":["LAK"],"LB":["LBP"],"LC":["XCD"],"LI":["CHF"],"LK":["LKR"],"LR":["LRD"],"LS":["LSL","ZAR"],"LT":["EUR"],"LU":["EUR"],"LV":["EUR"],"MA":["MAD"],"MC":["EUR"],"MD":["MDL"],"ME":["EUR"],"MF":["EUR"],"MG":["MGA"],"MH":["USD"],"MK":["MKD"],"ML":["XOF","XOF"],"MM":["MMK"],"MN":["MNT"],"MO":["MOP"],"MP":["USD"],"MQ":["EUR"],"MR":["XOF"],"MS":["XCD"],"MT":["EUR"],"MU":["MUR"],"MV":["MVR"],"MW":["MWK"],"MX":["MXN","USD"],"MY":["MYR"],"MZ":["MZN"],"NA":["NAD","ZAR"],"NC":["XPF"],"NE":["XOF"],"NF":["AUD"],"NG":["NGN"],"NI":["NIO"],"NL":["EUR"],"NO":["NOK","SEK","EUR"],"NP":["NPR","INR"],"NR":["AUD"],"NU":["NZD"],"NZ":["NZD"],"OM":["OMR"],"PA":["USD","PAB"],"PE":["PEN"],"PF":["XPF"],"PG":["PGK","AUD"],"PH":["PHP"],"PK":["PKR","INR"],"PL":["PLN","EUR"],"PM":["EUR"],"PN":["NZD"],"PR":["USD"],"PS":["JOD","ILS","JOD"],"PT":["EUR"],"PW":["USD"],"PY":["PYG"],"QA":["QAR"],"RE":["EUR"],"RO":["RON","EUR"],"RS":["RSD"],"RU":["RUB","EUR"],"RW":["RWF"],"SA":["SAR"],"SB":["SBD","AUD"],"SC":["SCR"],"SD":["GBP","EGP"],"SE":["SEK","EUR"],"SG":["SGD","MYR"],"SH":["SHP"],"SI":["EUR"],"SJ":["NOK"],"SK":["EUR"],"SL":["SLE","SLL","GBP"],"SM":["EUR"],"SN":["XOF"],"SO":["SOS"],"SR":["SRD"],"ST":["USD"],"SV":["USD"],"SX":["ANG"],"SZ":["SZL"],"TA":["GBP"],"TC":["USD"],"TD":["XAF"],"TF":["EUR"],"TG":["XOF"],"TH":["THB"],"TJ":["TJS"],"TK":["NZD"],"TL":["USD","IDR"],"TN":["TND"],"TO":["TOP"],"TP":["IDR"],"TR":["TRY"],"TT":["TTD"],"TV":["AUD"],"TW":["TWD"],"TZ":["TZS"],"UA":["UAH","EUR"],"UM":["USD"],"US":["USD"],"UY":["UYU"],"UZ":["UZS"],"VA":["EUR"],"VC":["XCD"],"VG":["GBP","USD"],"VI":["USD"],"VN":["VND"],"VU":["VUV"],"WF":["XPF"],"WS":["WST"],"XK":["EUR"],"YE":["YER"],"YT":["EUR","KMF"],"ZA":["ZAR"],"ZM":["ZMW"],"ZW":["USD"]}')},4025:function(e){"use strict";e.exports=JSON.parse('{"name":"ACH","provider":"stripe","donorPortalSubscriptionEditor":{"amount":{"availableAll":true},"currency":["USD"],"companyCountry":["US"],"customerCountry":{"availableAll":true},"email":{"required":false},"address":{"required":false},"repeat":["once","biweekly","every4weeks","monthly","bimonthly","quarterly","semiannual","annual"]},"dashboardSubscriptionEditor":{"amount":{"availableAll":true},"currency":["USD"],"companyCountry":["US"],"customerCountry":{"availableAll":true},"email":{"required":false},"address":{"required":false},"repeat":["once","biweekly","every4weeks","monthly","bimonthly","quarterly","semiannual","annual"]},"widget":{"amount":{"minAmount":{"size":9500,"currency":"USD"}},"currency":["USD"],"companyCountry":["US"],"customerCountry":{"availableAll":true},"email":{"required":true},"address":{"required":false},"repeat":["once","biweekly","every4weeks","monthly","bimonthly","quarterly","semiannual","annual"]},"virtualTerminal":{"amount":{"availableAll":true},"currency":["USD"],"companyCountry":["US"],"customerCountry":{"availableAll":true},"email":{"required":false},"address":{"required":false},"repeat":["once","biweekly","every4weeks","monthly","bimonthly","quarterly","semiannual","annual"]}}')},8913:function(e){"use strict";e.exports=JSON.parse('{"name":"ACSS","provider":"stripe","donorPortalSubscriptionEditor":{"amount":{"availableAll":true},"currency":["CAD"],"companyCountry":["CA","US"],"customerCountry":{"availableAll":true},"email":{"required":true},"address":{"required":false},"repeat":["once","biweekly","every4weeks","monthly","bimonthly","quarterly","semiannual","annual"]},"dashboardSubscriptionEditor":{"amount":{"availableAll":true},"currency":["CAD"],"companyCountry":["CA","US"],"customerCountry":{"availableAll":true},"email":{"required":true},"address":{"required":false},"repeat":["once","biweekly","every4weeks","monthly","bimonthly","quarterly","semiannual","annual"]},"widget":{"amount":{"minAmount":{"size":200,"currency":"CAD"}},"currency":["CAD"],"companyCountry":["CA","US"],"customerCountry":{"availableAll":true},"email":{"required":true},"address":{"required":false},"repeat":["once","biweekly","every4weeks","monthly","bimonthly","quarterly","semiannual","annual"]},"virtualTerminal":{"amount":{"availableAll":true},"currency":["CAD"],"companyCountry":["CA","US"],"customerCountry":{"availableAll":true},"email":{"required":true},"address":{"required":false},"repeat":["once","biweekly","every4weeks","monthly","bimonthly","quarterly","semiannual","annual"]}}')},8825:function(e){"use strict";e.exports=JSON.parse('{"name":"Apple Pay","provider":"stripe","donorPortalSubscriptionEditor":{"amount":{"availableAll":true},"currency":{"availableAll":true},"companyCountry":{"availableAll":true},"customerCountry":{"availableAll":true},"email":{"required":false},"address":{"required":false},"repeat":["once","daily","weekly","biweekly","every4weeks","monthly","bimonthly","quarterly","semiannual","annual"]},"dashboardSubscriptionEditor":{"amount":{"availableAll":true},"currency":{"availableAll":true},"companyCountry":{"availableAll":true},"customerCountry":{"availableAll":true},"email":{"required":false},"address":{"required":false},"repeat":["once","daily","weekly","biweekly","every4weeks","monthly","bimonthly","quarterly","semiannual","annual"]},"widget":{"amount":{"availableAll":true},"currency":{"availableAll":true},"companyCountry":{"availableAll":true},"customerCountry":{"availableAll":true},"email":{"required":false},"address":{"required":false},"repeat":["once","daily","weekly","biweekly","every4weeks","monthly","bimonthly","quarterly","semiannual","annual"]},"virtualTerminal":{"amount":{"availableAll":true},"currency":{"availableAll":true},"companyCountry":{"availableAll":true},"customerCountry":{"availableAll":true},"email":{"required":false},"address":{"required":false},"repeat":["once","daily","weekly","biweekly","every4weeks","monthly","bimonthly","quarterly","semiannual","annual"]}}')},4776:function(e){"use strict";e.exports=JSON.parse('{"name":"BECS Direct Debit","provider":"stripe","donorPortalSubscriptionEditor":{"amount":{"minAmount":{"size":200,"currency":"AUD"}},"currency":["AUD"],"companyCountry":["AU"],"customerCountry":{"availableAll":true},"email":{"required":true},"address":{"required":false},"repeat":["once","weekly","biweekly","every4weeks","monthly","bimonthly","quarterly","semiannual","annual"]},"dashboardSubscriptionEditor":{"amount":{"availableAll":true},"currency":["AUD"],"companyCountry":["AU"],"customerCountry":{"availableAll":true},"email":{"required":true},"address":{"required":false},"repeat":["once","weekly","biweekly","every4weeks","monthly","bimonthly","quarterly","semiannual","annual"]},"widget":{"amount":{"minAmount":{"size":200,"currency":"AUD"}},"currency":["AUD"],"companyCountry":["AU"],"customerCountry":{"availableAll":true},"email":{"required":true},"address":{"required":false},"repeat":["once","weekly","biweekly","every4weeks","monthly","bimonthly","quarterly","semiannual","annual"]},"virtualTerminal":{"amount":{"availableAll":true},"currency":["AUD"],"companyCountry":["AU"],"customerCountry":{"availableAll":true},"email":{"required":true},"address":{"required":false},"repeat":["once","weekly","biweekly","every4weeks","monthly","bimonthly","quarterly","semiannual","annual"]}}')},4246:function(e){"use strict";e.exports=JSON.parse('{"name":"Click to Pay","provider":"stripe","donorPortalSubscriptionEditor":{"amount":{"availableAll":true},"currency":["USD"],"companyCountry":{"availableAll":true},"customerCountry":{"availableAll":true},"email":{"required":false},"address":{"required":false},"repeat":["once","daily","weekly","biweekly","every4weeks","monthly","bimonthly","quarterly","semiannual","annual"]},"dashboardSubscriptionEditor":{"amount":{"availableAll":true},"currency":["USD"],"companyCountry":{"availableAll":true},"customerCountry":{"availableAll":true},"email":{"required":false},"address":{"required":false},"repeat":["once","daily","weekly","biweekly","every4weeks","monthly","bimonthly","quarterly","semiannual","annual"]},"widget":{"amount":{"availableAll":true},"currency":["USD"],"companyCountry":{"availableAll":true},"customerCountry":{"availableAll":true},"email":{"required":false},"address":{"required":false},"repeat":["once","daily","weekly","biweekly","every4weeks","monthly","bimonthly","quarterly","semiannual","annual"]},"virtualTerminal":{"amount":{"availableAll":true},"currency":["USD"],"companyCountry":{"availableAll":true},"customerCountry":{"availableAll":true},"email":{"required":false},"address":{"required":false},"repeat":["once","daily","weekly","biweekly","every4weeks","monthly","bimonthly","quarterly","semiannual","annual"]}}')},9392:function(e){"use strict";e.exports=JSON.parse('{"name":"Credit Card","provider":"stripe","donorPortalSubscriptionEditor":{"amount":{"availableAll":true},"currency":{"availableAll":true},"companyCountry":{"availableAll":true},"customerCountry":{"availableAll":true},"email":{"required":false},"address":{"required":false},"repeat":["once","daily","weekly","biweekly","every4weeks","monthly","bimonthly","quarterly","semiannual","annual"]},"dashboardSubscriptionEditor":{"amount":{"availableAll":true},"currency":{"availableAll":true},"companyCountry":{"availableAll":true},"customerCountry":{"availableAll":true},"email":{"required":false},"address":{"required":false},"repeat":["once","daily","weekly","biweekly","every4weeks","monthly","bimonthly","quarterly","semiannual","annual"]},"widget":{"amount":{"availableAll":true},"currency":{"availableAll":true},"companyCountry":{"availableAll":true},"customerCountry":{"availableAll":true},"email":{"required":false},"address":{"required":false},"repeat":["once","daily","weekly","biweekly","every4weeks","monthly","bimonthly","quarterly","semiannual","annual"]},"virtualTerminal":{"amount":{"availableAll":true},"currency":{"availableAll":true},"companyCountry":{"availableAll":true},"customerCountry":{"availableAll":true},"email":{"required":false},"address":{"required":false},"repeat":["once","daily","weekly","biweekly","every4weeks","monthly","bimonthly","quarterly","semiannual","annual"]}}')},5718:function(e){"use strict";e.exports=JSON.parse('{"name":"Crypto","provider":"gemini","donorPortalSubscriptionEditor":{},"dashboardSubscriptionEditor":{},"widget":{"amount":{"availableAll":true},"currency":{"availableAll":true},"companyCountry":{"availableAll":true},"customerCountry":{"availableAll":true},"email":{"required":false},"address":{"required":false},"repeat":["once"]},"virtualTerminal":{}}')},7958:function(e){"use strict";e.exports=JSON.parse('{"name":"Google Pay","provider":"stripe","donorPortalSubscriptionEditor":{"amount":{"availableAll":true},"currency":{"availableAll":true},"companyCountry":{"availableAll":true},"customerCountry":{"availableAll":true},"email":{"required":false},"address":{"required":false},"repeat":["once","daily","weekly","biweekly","every4weeks","monthly","bimonthly","quarterly","semiannual","annual"]},"dashboardSubscriptionEditor":{"amount":{"availableAll":true},"currency":{"availableAll":true},"companyCountry":{"availableAll":true},"customerCountry":{"availableAll":true},"email":{"required":false},"address":{"required":false},"repeat":["once","daily","weekly","biweekly","every4weeks","monthly","bimonthly","quarterly","semiannual","annual"]},"widget":{"amount":{"availableAll":true},"currency":{"availableAll":true},"companyCountry":{"availableAll":true},"customerCountry":{"availableAll":true},"email":{"required":false},"address":{"required":false},"repeat":["once","daily","weekly","biweekly","every4weeks","monthly","bimonthly","quarterly","semiannual","annual"]},"virtualTerminal":{"amount":{"availableAll":true},"currency":{"availableAll":true},"companyCountry":{"availableAll":true},"customerCountry":{"availableAll":true},"email":{"required":false},"address":{"required":false},"repeat":["once","daily","weekly","biweekly","every4weeks","monthly","bimonthly","quarterly","semiannual","annual"]}}')},2876:function(e){"use strict";e.exports=JSON.parse('{"name":"iDEAL","provider":"stripe","donorPortalSubscriptionEditor":{"amount":{"minAmount":{"size":200,"currency":"EUR"}},"currency":["EUR"],"companyCountry":["AT","BE","CY","EE","FI","FR","DE","GR","IE","IT","LV","LT","LU","MT","NL","PL","PT","RO","SG","SK","SI","ES","SE","NO","US","CH","AU","BG","CA","HR","CZ","DK","GI","HK","HU","JP","LI","MX","NZ","GB"],"customerCountry":["NL","BE","LU","DE"],"email":{"required":true},"address":{"required":false},"repeat":["once","every4weeks","monthly","bimonthly","quarterly","semiannual","annual"]},"dashboardSubscriptionEditor":{},"widget":{"amount":{"minAmount":{"size":200,"currency":"EUR"}},"currency":["EUR"],"companyCountry":["AT","BE","CY","EE","FI","FR","DE","GR","IE","IT","LV","LT","LU","MT","NL","PL","PT","RO","SG","SK","SI","ES","SE","NO","US","CH","AU","BG","CA","HR","CZ","DK","GI","HK","HU","JP","LI","MX","NZ","GB"],"customerCountry":["NL","BE","LU","DE"],"email":{"required":true},"address":{"required":false},"repeat":["once","every4weeks","monthly","bimonthly","quarterly","semiannual","annual"]},"virtualTerminal":{}}')},8524:function(e){"use strict";e.exports=JSON.parse('{"name":"PayPal","provider":"paypal","donorPortalSubscriptionEditor":{"amount":{"availableAll":true},"currency":{"availableAll":true},"companyCountry":{"availableAll":true},"customerCountry":{"availableAll":true},"email":{"required":false},"address":{"required":false},"repeat":["once","daily","weekly","biweekly","every4weeks","monthly","bimonthly","quarterly","semiannual","annual"]},"dashboardSubscriptionEditor":{"amount":{"availableAll":true},"currency":{"availableAll":true},"companyCountry":{"availableAll":true},"customerCountry":{"availableAll":true},"email":{"required":false},"address":{"required":false},"repeat":["once","daily","weekly","biweekly","every4weeks","monthly","bimonthly","quarterly","semiannual","annual"]},"widget":{"amount":{"availableAll":true},"currency":{"availableAll":true},"companyCountry":{"availableAll":true},"customerCountry":{"availableAll":true},"email":{"required":false},"address":{"required":false},"repeat":["once","daily","weekly","biweekly","every4weeks","monthly","bimonthly","quarterly","semiannual","annual"]},"virtualTerminal":{"amount":{"availableAll":true},"currency":{"availableAll":true},"companyCountry":{"availableAll":true},"customerCountry":{"availableAll":true},"email":{"required":false},"address":{"required":false},"repeat":["once","daily","weekly","biweekly","every4weeks","monthly","bimonthly","quarterly","semiannual","annual"]}}')},6631:function(e){"use strict";e.exports=JSON.parse('{"name":"Plaid","provider":"stripe","donorPortalSubscriptionEditor":{"amount":{"availableAll":true},"currency":["USD"],"companyCountry":["US"],"customerCountry":{"availableAll":true},"email":{"required":false},"address":{"required":false},"repeat":["once","biweekly","every4weeks","monthly","bimonthly","quarterly","semiannual","annual"]},"dashboardSubscriptionEditor":{"amount":{"availableAll":true},"currency":["USD"],"companyCountry":["US"],"customerCountry":{"availableAll":true},"email":{"required":false},"address":{"required":false},"repeat":["once","biweekly","every4weeks","monthly","bimonthly","quarterly","semiannual","annual"]},"widget":{"amount":{"availableAll":true},"currency":["USD"],"companyCountry":["US"],"customerCountry":{"availableAll":true},"email":{"required":false},"address":{"required":false},"repeat":["once","biweekly","every4weeks","monthly","bimonthly","quarterly","semiannual","annual"]},"virtualTerminal":{"amount":{"availableAll":true},"currency":["USD"],"companyCountry":["US"],"customerCountry":{"availableAll":true},"email":{"required":false},"address":{"required":false},"repeat":["once","biweekly","every4weeks","monthly","bimonthly","quarterly","semiannual","annual"]}}')},7012:function(e){"use strict";e.exports=JSON.parse('{"name":"SEPA Direct Debit","provider":"stripe","donorPortalSubscriptionEditor":{"amount":{"minAmount":{"size":200,"currency":"EUR"}},"currency":["EUR"],"repeat":["once","every4weeks","monthly","bimonthly","quarterly","semiannual","annual"],"companyCountry":["AT","BE","CY","EE","FI","FR","DE","GR","IE","IT","LV","LT","LU","MT","NL","PL","PT","RO","SG","SK","SI","ES","SE","NO","US","CH","AU","BG","CA","HR","CZ","DK","GI","HK","HU","JP","LI","MX","NZ","GB"],"customerCountry":{"availableAll":true},"email":{"required":true},"address":{"required":true}},"dashboardSubscriptionEditor":{"amount":{"availableAll":true},"currency":["EUR"],"repeat":["once","every4weeks","monthly","bimonthly","quarterly","semiannual","annual"],"companyCountry":["AT","BE","CY","EE","FI","FR","DE","GR","IE","IT","LV","LT","LU","MT","NL","PL","PT","RO","SG","SK","SI","ES","SE","NO","US","CH","AU","BG","CA","HR","CZ","DK","GI","HK","HU","JP","LI","MX","NZ","GB"],"customerCountry":{"availableAll":true},"email":{"required":true},"address":{"required":true}},"widget":{"amount":{"minAmount":{"size":200,"currency":"EUR"}},"currency":["EUR"],"companyCountry":["AT","BE","CY","EE","FI","FR","DE","GR","IE","IT","LV","LT","LU","MT","NL","PL","PT","RO","SG","SK","SI","ES","SE","NO","US","CH","AU","BG","CA","HR","CZ","DK","GI","HK","HU","JP","LI","MX","NZ","GB"],"customerCountry":{"availableAll":true},"email":{"required":true},"address":{"requiredIfIbanCountry":["AD","PF","TF","GI","GB","GG","VA","IM","JE","MC","NC","BL","PM","SM","CH","WF"]},"repeat":["once","every4weeks","monthly","bimonthly","quarterly","semiannual","annual"]},"virtualTerminal":{"amount":{"availableAll":true},"currency":["EUR"],"companyCountry":["AT","BE","CY","EE","FI","FR","DE","GR","IE","IT","LV","LT","LU","MT","NL","PL","PT","RO","SG","SK","SI","ES","SE","NO","US","CH","AU","BG","CA","HR","CZ","DK","GI","HK","HU","JP","LI","MX","NZ","GB"],"address":{"requiredIfIbanCountry":["AD","PF","TF","GI","GB","GG","VA","IM","JE","MC","NC","BL","PM","SM","CH","WF"]},"email":{"required":true},"repeat":["once","every4weeks","monthly","bimonthly","quarterly","semiannual","annual"]}}')},5199:function(e){"use strict";e.exports=JSON.parse('{"name":"Stock","provider":"manualBrokerage","donorPortalSubscriptionEditor":{},"dashboardSubscriptionEditor":{},"widget":{"amount":{"availableAll":true},"currency":{"availableAll":true},"companyCountry":{"availableAll":true},"customerCountry":{"availableAll":true},"email":{"required":false},"address":{"required":false},"repeat":["once"]},"virtualTerminal":{}}')},7804:function(e){"use strict";e.exports=JSON.parse('{"name":"Bacs Direct Debit","provider":"stripe","donorPortalSubscriptionEditor":{"amount":{"minAmount":{"size":200,"currency":"GBP"}},"currency":["GBP"],"companyCountry":["GB"],"customerCountry":{"availableAll":true},"email":{"required":true},"address":{"required":true},"repeat":["weekly","biweekly","every4weeks","monthly","bimonthly","quarterly","semiannual","annual"]},"dashboardSubscriptionEditor":{"amount":{"availableAll":true},"currency":["GBP"],"companyCountry":["GB"],"customerCountry":{"availableAll":true},"email":{"required":true},"address":{"required":true},"repeat":["weekly","biweekly","every4weeks","monthly","bimonthly","quarterly","semiannual","annual"]},"widget":{"amount":{"minAmount":{"size":200,"currency":"GBP"}},"currency":["GBP"],"companyCountry":["GB"],"customerCountry":{"availableAll":true},"email":{"required":true},"address":{"required":true},"repeat":["weekly","biweekly","every4weeks","monthly","bimonthly","quarterly","semiannual","annual"]},"virtualTerminal":{"amount":{"availableAll":true},"currency":["GBP"],"companyCountry":["GB"],"customerCountry":{"availableAll":true},"email":{"required":true},"address":{"required":true},"repeat":["weekly","biweekly","every4weeks","monthly","bimonthly","quarterly","semiannual","annual"]}}')},2384:function(e){"use strict";e.exports=JSON.parse('{"name":"ACH","provider":"stripe","donorPortalSubscriptionEditor":{"amount":{"availableAll":true},"currency":["USD"],"companyCountry":["US"],"customerCountry":{"availableAll":true},"email":{"required":false},"address":{"required":false},"repeat":["once","biweekly","every4weeks","monthly","bimonthly","quarterly","semiannual","annual"]},"dashboardSubscriptionEditor":{"amount":{"availableAll":true},"currency":["USD"],"companyCountry":["US"],"customerCountry":{"availableAll":true},"email":{"required":false},"address":{"required":false},"repeat":["once","biweekly","every4weeks","monthly","bimonthly","quarterly","semiannual","annual"]},"widget":{"amount":{"availableAll":true},"currency":["USD"],"companyCountry":["US"],"customerCountry":{"availableAll":true},"email":{"required":false},"address":{"required":false},"repeat":["once","biweekly","every4weeks","monthly","bimonthly","quarterly","semiannual","annual"]},"virtualTerminal":{"amount":{"availableAll":true},"currency":["USD"],"companyCountry":["US"],"customerCountry":{"availableAll":true},"email":{"required":false},"address":{"required":false},"repeat":["once","biweekly","every4weeks","monthly","bimonthly","quarterly","semiannual","annual"]}}')},9576:function(e){"use strict";e.exports=JSON.parse('{"name":"Venmo","provider":"paypal","donorPortalSubscriptionEditor":{},"dashboardSubscriptionEditor":{},"widget":{"amount":{"availableAll":true},"currency":["USD"],"companyCountry":["US"],"customerCountry":{"availableAll":true},"email":{"required":false},"address":{"required":false},"repeat":["once"]},"virtualTerminal":{}}')}},r={};function o(e){var t=r[e];if(void 0!==t)return t.exports;var n=r[e]={id:e,loaded:!1,exports:{}};return a[e].call(n.exports,n,n.exports,o),n.loaded=!0,n.exports}o.m=a,e=[],o.O=function(t,n,i,s){if(!n){var a=1/0;for(u=0;u<e.length;u++){n=e[u][0],i=e[u][1],s=e[u][2];for(var r=!0,c=0;c<n.length;c++)(!1&s||a>=s)&&Object.keys(o.O).every((function(e){return o.O[e](n[c])}))?n.splice(c--,1):(r=!1,s<a&&(a=s));if(r){e.splice(u--,1);var l=i();void 0!==l&&(t=l)}}return t}s=s||0;for(var u=e.length;u>0&&e[u-1][2]>s;u--)e[u]=e[u-1];e[u]=[n,i,s]},o.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return o.d(t,{a:t}),t},n=Object.getPrototypeOf?function(e){return Object.getPrototypeOf(e)}:function(e){return e.__proto__},o.t=function(e,i){if(1&i&&(e=this(e)),8&i)return e;if("object"==typeof e&&e){if(4&i&&e.__esModule)return e;if(16&i&&"function"==typeof e.then)return e}var s=Object.create(null);o.r(s);var a={};t=t||[null,n({}),n([]),n(n)];for(var r=2&i&&e;"object"==typeof r&&!~t.indexOf(r);r=n(r))Object.getOwnPropertyNames(r).forEach((function(t){a[t]=function(){return e[t]}}));return a.default=function(){return e},o.d(s,a),s},o.d=function(e,t){for(var n in t)o.o(t,n)&&!o.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},o.f={},o.e=function(e){return Promise.all(Object.keys(o.f).reduce((function(t,n){return o.f[n](e,t),t}),[]))},o.u=function(e){return({173:"legacy-currency-filter",180:"checkout-locale19",234:"checkout-locale4",245:"checkout-locale3",326:"sentry",381:"checkout-locale10",425:"checkout-locale7",436:"checkout-locale2",471:"checkout-locale9",472:"checkout-sentry-vendor",519:"checkout-locale23",561:"checkout-locale14",572:"checkout-locale11",616:"checkout-locale6",627:"checkout-locale5",639:"checkout-locale1",645:"checkout-rtl-styles",662:"checkout-locale8",706:"checkout-styles",710:"checkout-locale22",740:"checkout-locale20",752:"checkout-locale15",763:"checkout-locale16",775:"checkout-locale12",830:"checkout-locale0",901:"checkout-locale21",954:"checkout-locale17",966:"checkout-locale13",989:"checkout-locale18"}[e]||e)+"."+{16:"5b44a9e3a5cbf77ac96d",85:"38733c898cb8cb80800c",173:"98635101d5471599341c",180:"d3978371141cf82d02b2",234:"739ffacf724ed035e237",245:"a050c5ea5e5ff257730a",295:"6c82d1f24456f0f97ee2",326:"0ef8851794637106fd6c",335:"c234bd8b81cabd8ef3c5",381:"0b443d62eab48a5efdae",425:"2d0220ef1a9198ed3bec",436:"34001cd6b8072e93d2e3",471:"35703610d1ebc274c381",472:"b290bc926fe51ec5de1a",519:"0c6ea029ee500dc14578",561:"98aaf159a1d185152867",572:"8b28af2199e3f28b9e29",616:"bc35fdae62cbbc4fd7de",627:"e947a124a7a69da97793",639:"b3d6e1a6651f136ad40b",645:"b66c2a5143e229289790",662:"8993a52cb0a0f7123de8",681:"92529c748db6b573ed7d",706:"171d61c096870fb2ccd4",710:"99c0f8e23eefd3a11c9e",740:"d5db9c6381d6c5c8d11f",752:"ad3fcf08d98018ec44ea",763:"629788dedfe4c351bf1a",775:"8a27ca82877ab197dde8",830:"6056022f6d03ea398f04",840:"273c08d6885fb31c427d",901:"0fbd5c344d0a50dcf40a",954:"9394bb1ad8d240d0cd0f",966:"2412dc8b3e0667d1d12f",989:"ae0c170a197e3f62c870"}[e]+".js"},o.miniCssF=function(e){},o.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),o.hmd=function(e){return(e=Object.create(e)).children||(e.children=[]),Object.defineProperty(e,"exports",{enumerable:!0,set:function(){throw new Error("ES Modules may not assign module.exports or exports.*, Use ESM export syntax, instead: "+e.id)}}),e},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i={},s="@fundraiseup/checkout:",o.l=function(e,t,n,a){if(i[e])i[e].push(t);else{var r,c;if(void 0!==n)for(var l=document.getElementsByTagName("script"),u=0;u<l.length;u++){var d=l[u];if(d.getAttribute("src")==e||d.getAttribute("data-webpack")==s+n){r=d;break}}r||(c=!0,(r=document.createElement("script")).charset="utf-8",r.timeout=120,o.nc&&r.setAttribute("nonce",o.nc),r.setAttribute("data-webpack",s+n),r.src=e),i[e]=[t];var h=function(t,n){r.onerror=r.onload=null,clearTimeout(m);var s=i[e];if(delete i[e],r.parentNode&&r.parentNode.removeChild(r),s&&s.forEach((function(e){return e(n)})),t)return t(n)},m=setTimeout(h.bind(null,void 0,{type:"timeout",target:r}),12e4);r.onerror=h.bind(null,r.onerror),r.onload=h.bind(null,r.onload),c&&document.head.appendChild(r)}},o.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.nmd=function(e){return e.paths=[],e.children||(e.children=[]),e},o.p="https://static.fundraiseup.com/",function(){o.b=document.baseURI||self.location.href;var e={251:0};o.f.j=function(t,n){var i=o.o(e,t)?e[t]:void 0;if(0!==i)if(i)n.push(i[2]);else{var s=new Promise((function(n,s){i=e[t]=[n,s]}));n.push(i[2]=s);var a=o.p+o.u(t),r=new Error;o.l(a,(function(n){if(o.o(e,t)&&(0!==(i=e[t])&&(e[t]=void 0),i)){var s=n&&("load"===n.type?"missing":n.type),a=n&&n.target&&n.target.src;r.message="Loading chunk "+t+" failed.\n("+s+": "+a+")",r.name="ChunkLoadError",r.type=s,r.request=a,i[1](r)}}),"chunk-"+t,t)}},o.O.j=function(t){return 0===e[t]};var t=function(t,n){var i,s,a=n[0],r=n[1],c=n[2],l=0;if(a.some((function(t){return 0!==e[t]}))){for(i in r)o.o(r,i)&&(o.m[i]=r[i]);if(c)var u=c(o)}for(t&&t(n);l<a.length;l++)s=a[l],o.o(e,s)&&e[s]&&e[s][0](),e[s]=0;return o.O(u)},n=self.webpackChunk_fundraiseup_checkout=self.webpackChunk_fundraiseup_checkout||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))}();var c=o.O(void 0,[521],(function(){return o(8439)}));c=o.O(c)}();